<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>lpdswingçš„åšå®¢</title>
        <link>https://lpdswing.github.io/</link>
        <description>undefined</description>
        <lastBuildDate>Sun, 18 Feb 2024 17:31:22 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <copyright>Copyright Â© 2017-present @lpdswing</copyright>
        <item>
            <title><![CDATA[å¹¶å‘æ§åˆ¶ä¸­çš„æ‚²è§‚é”]]></title>
            <link>https://lpdswing.github.io//technology/learn/pessimistic_lock.html</link>
            <guid>https://lpdswing.github.io//technology/learn/pessimistic_lock.html</guid>
            <pubDate>Fri, 02 Feb 2024 09:19:25 GMT</pubDate>
            <description><![CDATA[
![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202402021718881.png)

åœ¨[å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ](https://zh.wikipedia.org/wiki/å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)é‡Œï¼Œ**æ‚²è§‚å¹¶å‘æ§åˆ¶**ï¼ˆåˆåâ€œ**æ‚²è§‚é”**â€ï¼ŒPessimistic Concurrency Controlï¼Œç¼©å†™â€œPCCâ€ï¼‰æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ã€‚å®ƒå¯ä»¥é˜»æ­¢ä¸€ä¸ªäº‹åŠ¡ä»¥å½±å“å…¶ä»–ç”¨æˆ·çš„æ–¹å¼æ¥ä¿®æ”¹æ•°æ®ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œçš„æ“ä½œè¯»æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œé‚£åªæœ‰å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸è¯¥é”å†²çªçš„æ“ä½œã€‚ ]]></description>
            <content:encoded><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202402021718881.png" alt=""></p>
<p>åœ¨<a href="https://zh.wikipedia.org/wiki/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F" target="_blank" rel="noreferrer">å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</a>é‡Œï¼Œ<strong>æ‚²è§‚å¹¶å‘æ§åˆ¶</strong>ï¼ˆåˆåâ€œ<strong>æ‚²è§‚é”</strong>â€ï¼ŒPessimistic Concurrency Controlï¼Œç¼©å†™â€œPCCâ€ï¼‰æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ã€‚å®ƒå¯ä»¥é˜»æ­¢ä¸€ä¸ªäº‹åŠ¡ä»¥å½±å“å…¶ä»–ç”¨æˆ·çš„æ–¹å¼æ¥ä¿®æ”¹æ•°æ®ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œçš„æ“ä½œè¯»æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œé‚£åªæœ‰å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸è¯¥é”å†²çªçš„æ“ä½œã€‚ ----æ‘˜è‡ªwiki</p>
<h1 id="å¼•è¨€" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€" aria-label="Permalink to &quot;å¼•è¨€&quot;">&ZeroWidthSpace;</a></h1>
<p>æœ€è¿‘æœ‰åŒäº‹é—®äº†è¿™ä¹ˆä¸ªé—®é¢˜ï¼Œå‡è®¾æœ‰è¿™ä¹ˆä¸ªåœºæ™¯ï¼Œæœ‰ä¸€ä¸ª<code>Job</code>ï¼Œå¯¹åº”å¤šä¸ªå­ä»»åŠ¡<code>Task</code>ï¼Œå½“<code>Task</code>å®Œæˆå›è°ƒæ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼ŒåŒæ—¶æ£€æŸ¥å…¶ä»–<code>Task</code>æ˜¯ä¸æ˜¯å®Œæˆäº†ï¼Œå½“æ‰€æœ‰<code>Task</code>çš„çŠ¶æ€éƒ½ä¸º<code>done</code>çš„æ—¶å€™ï¼Œæ›´æ–°<code>Job</code>çš„çŠ¶æ€ä¸º<code>done</code>ï¼Œå¦åˆ™å°±ä¸å¿…æ“ä½œã€‚æ€ä¹ˆæ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ</p>
<p>æˆ‘ä»¬çŸ¥é“åœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œåœ¨è¯»å–å…¶ä»–<code>Task</code>çŠ¶æ€å¹¶æ›´æ–°<code>Job</code>çŠ¶æ€çš„æ—¶å€™ï¼Œæœ‰å…¶ä»–äº‹åŠ¡æ­£å¥½æ”¹æ‰äº†ä¸€ä¸ª<code>Task</code>çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æŸ¥åˆ°çš„ä¸æ˜¯æœ€æ–°çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯å¹»è¯»äº†ã€‚</p>
<p>åœ¨è¿™ä¸ªåœºæ™¯é‡Œï¼Œæ—¢æœ‰æ•°æ®åº“çš„å†™ï¼Œåˆæœ‰è¯»æ“ä½œï¼Œæˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±å¾—åŠ é”äº†ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥è¿›è¡Œæ“ä½œã€‚åˆä¸å¸Œæœ›å¹²æ‰°å…¶ä»–çº¿ç¨‹å†™å…¥<code>Task</code>çŠ¶æ€ï¼Œæˆ‘ä»¬å°±ä¸è€ƒè™‘æ•°æ®åº“é”äº†ï¼Œè¿™é‡Œä½¿ç”¨rediså®ç°ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ‚²è§‚é”ã€‚</p>
<h1 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-label="Permalink to &quot;å®ç°&quot;">&ZeroWidthSpace;</a></h1>
<p>è¿™é‡Œä½¿ç”¨Golangæ¥å®ç°ä¸€ä¸ªdemoï¼Œå¯ä»¥å…ˆç”¨dockerå¯åŠ¨ä¸€ä¸ªredisï¼Œä¸€ä¸ªpostgres/mysqlæ•°æ®åº“ï¼Œæ ¹æ®ä½ çš„å–œå¥½ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®<code>redis-lock</code>, ç„¶å<code>go mod init example/redis-lock</code>ã€‚ğŸ‘ŒğŸ»æ¥ä¸‹æ¥å…ˆæ¥æå®šredisé”çš„ç›¸å…³æ“ä½œï¼Œæ–°å»º<code>redis.go</code></p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// redis.go</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">github.com/redis/go-redis/v9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RedisClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">redis.Client {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> redis.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NewClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">redis.Options{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		Addr: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"localhost:6379"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		DB:   db,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> client</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> GetRedisLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">redis.Client, key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{}, expiration </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> client.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">SetNX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ctx, key, value, time.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(expiration)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time.Second).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ReleaseRedisLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">redis.Client, key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	client.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ctx, key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><blockquote>
<p>æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè·å–é”å’Œé‡Šæ”¾é”çš„æ–¹æ³•ï¼Œä½¿ç”¨rediså®ç°é”ä¸€èˆ¬ç”¨<code>setnx</code>å‘½ä»¤å®ç°ï¼Œå¦‚æœkeyä¸å­˜åœ¨å°±åˆ›å»ºå¹¶è¿”å›1ï¼Œå¦‚æœkeyå­˜åœ¨å°±è¿”å›0ã€‚é‡Šæ”¾é”å°±ç”¨åˆ é™¤keyæ¥å®ç°ã€‚å®é™…æ“ä½œä¸­éœ€è¦ç»™é”è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢åœ¨é‡Šæ”¾é”å‰çš„ä»£ç å´©æºƒå¯¼è‡´é”å§‹ç»ˆä¸é‡Šæ”¾é€ æˆæ­»é”ã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>models.go</code>, åœ¨é‡Œé¢å®šä¹‰ä¸€ä¸‹<code>Job</code>å’Œ<code>Task</code>çš„æ•°æ®ç»“æ„ã€‚</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Job</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	ID     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  `db:"id"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	name   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `db:"name"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	Status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `db:"status"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	ID     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  `db:"id"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	name   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `db:"name"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	JobID  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  `db:"job_id"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	Status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `db:"status"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	JobStatusPending </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "pending"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	JobStatusRunning </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "running"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	JobStatusDone    </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "done"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ğŸ‘Œæ¥ä¸‹æ¥æä¸€ä¸ª<code>main.go</code>èµ·ä¸€ä¸ªginæœåŠ¡ï¼Œå®šä¹‰ä¸€ä¸ªæ›´æ–°taskçš„æ¥å£ï¼Œç›´æ¥çœ‹ä»£ç å§ã€‚</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">context</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">database/sql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">github.com/gin-gonic/gin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">	_</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">github.com/jackc/pgx/v5/stdlib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">github.com/redis/go-redis/v9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">math/rand</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">strconv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> context.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Background</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sql.DB</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rdb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">redis.Client</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	NewStatus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `json:"newStatus"`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	rdb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RedisClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">error</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//db, err = sql.Open("sqlite3", "./example.db?_busy_timeout=1000")</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	db, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sql.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"pgx"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"postgres://postgres:123456@localhost:5432/test?sslmode=disable"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Fatal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	_, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> db.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		CREATE TABLE IF NOT EXISTS jobs (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    		id SERIAL PRIMARY KEY,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    		name TEXT,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    		status TEXT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    	);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		CREATE TABLE IF NOT EXISTS tasks (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			id SERIAL PRIMARY KEY,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			name TEXT,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			job_id INTEGER,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			status TEXT,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			FOREIGN KEY(job_id) REFERENCES jobs(id)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Fatal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> updateStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(taskID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, newStatus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// å¼€å¯æ•°æ®åº“äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//db, _ = sql.Open("sqlite3", "./example.db")</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//defer db.Close()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	RandomPause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	tx, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> db.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tx.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Rollback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// æ›´æ–°taskçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	_, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tx.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`UPDATE tasks SET status = $1 WHERE id=$2`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, newStatus, taskID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// æŸ¥è¯¢å…³è”çš„Job</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jobID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tx.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">QueryRow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`select job_id from tasks where id=$1`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, taskID).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Scan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jobID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// åˆ†å¸ƒå¼é”åšæ‚²è§‚é”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	lockKey </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Sprintf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"job:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, jobID)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	lockValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "1"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	lockDuration </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time.Second</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	lock, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> GetRedisLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rdb, lockKey, lockValue, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(lockDuration.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Seconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">lock {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Failed to get lock"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	defer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ReleaseRedisLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rdb, lockKey)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// æŸ¥è¯¢Jobä¸‹çš„æ‰€æœ‰TaskçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	rows, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tx.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`select status from tasks where job_id=$1`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, jobID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rows.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	allDone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rows.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rows.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Scan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">status); err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> JobStatusDone {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			allDone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> allDone {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		_, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tx.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`update jobs set status=$1 where id=$2`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, JobStatusDone, jobID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tx.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Commit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> handleTaskCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">gin.Context) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// taskIDæ˜¯int64ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	taskID_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"id"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	taskID, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> strconv.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ParseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(taskID_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> newStatus Status</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">BindJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">newStatus); err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, gin.H{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"error"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: err.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> updateStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(taskID, newStatus.NewStatus)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, gin.H{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"error"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: err.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, gin.H{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"message"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ok"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> gin.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	r.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">PUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/tasks/:id"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, handleTaskCallback)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> r.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">":8080"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Server is running on port 8080"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RandomPause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// éšæœºæš‚åœ300-500æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	rand.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rand.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NewSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">UnixNano</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	pause </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rand.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Intn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 300</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	time.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pause) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time.Millisecond)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><blockquote>
<p>ç”±äºsqliteé»˜è®¤éš”ç¦»æœºåˆ¶ç”¨çš„æ˜¯ä¸²è¡ŒåŒ–ï¼Œæˆ‘ä»¬ä¸å¥½æ¨¡æ‹Ÿå¹»è¯»çš„æƒ…å†µï¼Œè¿™é‡Œdbå°±ç”¨postgresã€mysqlã€‚æ³¨æ„pgçš„å ä½ç¬¦ç”¨<code>$1,$2...</code>æ¥è¡¨ç¤ºï¼Œmysqlåˆ™æ˜¯ç”¨<code>ï¼Ÿ</code>è¡¨ç¤ºã€‚</p>
</blockquote>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¤§æ¦‚çš„é€»è¾‘å°±å®ç°å¥½äº†ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<h1 id="æµ‹è¯•" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•" aria-label="Permalink to &quot;æµ‹è¯•&quot;">&ZeroWidthSpace;</a></h1>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>main_test.go</code></p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bytes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">	_</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">github.com/mattn/go-sqlite3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">net/http</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">strconv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sync</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">testing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TestUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">testing.T) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// åˆ›å»ºtaskå’ŒJobæ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// äº¤ä¸ªä½ ä»¬è‡ªå·±å®ç°å§ï¼Œåˆ›å»ºä¸€ä¸ªJobï¼Œ100ä¸ªtask</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// å¹¶å‘è°ƒç”¨taskæ›´æ–°æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"start"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wg sync.WaitGroup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">http.Client{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`{"newStatus": "done"}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		wg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		go</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(taskID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"taskID:"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, taskID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Done</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			req, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NewRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"PUT"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"http://127.0.0.1:8080/tasks/"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">strconv.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">FormatInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(taskID, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), bytes.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NewBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(data))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			req.Header.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"application/json"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">				log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">				return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			resp, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> client.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">				log.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">				return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> resp.Body.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"taskID:"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, taskID, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status:"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, resp.Status)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(i))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	wg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ†åˆ«å¼€å…³è¿™ä¸€æ®µåŠ é”çš„ä»£ç ï¼Œæ‰§è¡Œ<code>go test -v</code>è§‚å¯ŸJobçš„çŠ¶æ€æœ‰æ²¡æœ‰æ›´æ–°å¯¹ã€‚è¯•å‡ æ¬¡ä½ ä¼šå‘ç°ï¼Œå¦‚æœä¸åŠ é”ï¼ŒJobçš„çŠ¶æ€å¯èƒ½ä¼šä¸€ç›´åœ¨runningã€‚ğŸ‘Œå°±è¿™æ ·å§ï¼</p>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202402021718881.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[goè¯­è¨€æ¨¡ç³Šæµ‹è¯•]]></title>
            <link>https://lpdswing.github.io//lang/go/fuzz.html</link>
            <guid>https://lpdswing.github.io//lang/go/fuzz.html</guid>
            <pubDate>Thu, 21 Dec 2023 12:54:24 GMT</pubDate>
            <description><![CDATA[
# å‰è¨€

â€‹		è½¯ä»¶ç³»ç»Ÿè¶Šå¤æ‚ï¼Œæµ‹è¯•å°±è¶Šé‡è¦ã€‚ç„¶è€Œæ‰‹åŠ¨æµ‹è¯•å¯èƒ½ä¼šéå¸¸è´¹æ—¶å’Œä¹å‘³ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè‡ªåŠ¨åŒ–æµ‹è¯•å˜çš„è¶Šæ¥è¶Šæµè¡Œçš„åŸå› ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠè‡ªåŠ¨åŒ–æµ‹è¯•ä¸­çš„ä¸€ç§æµ‹è¯•æŠ€æœ¯å°±æ˜¯fuzzæµ‹è¯•ï¼Œå®ƒæ˜¯ä¸€ç§éšæœºæµ‹è¯•æŠ€æœ¯ï¼Œå¯ä»¥å¸®åŠ©å‘ç°è½¯ä»¶ç³»ç»Ÿä¸­çš„æ¼æ´å’Œé”™è¯¯ã€‚

â€‹		Goè¯­è¨€ç›®å‰å·²ç»æ˜¯éå¸¸æµè¡Œçš„è¯­è¨€äº†ï¼Œå…·æœ‰é«˜æ•ˆã€å¹¶å‘ç­‰ç‰¹æ€§ã€‚ä»Šå¤©æˆ‘ä»¬æµ…è°ˆä½¿ç”¨Goè¯­è¨€è¿›è¡Œfuzzæµ‹è¯•ã€‚ä»Go1.18å¼€å§‹ï¼ŒGoåœ¨å…¶æ ‡å‡†å·¥å…·é“¾ä¸­æ”¯æŒæ¨¡ç³Šæµ‹è¯•ã€‚

## ä»€ä¹ˆæ˜¯fuzzæµ‹è¯•

â€‹		**æ¨¡ç³Šæµ‹è¯•** ï¼ˆfuzz testing, fuzzingï¼‰æ˜¯ä¸€ç§[è½¯ä»¶æµ‹è¯•](https://zh.wikipedia.org/wiki/è½¯ä»¶æµ‹è¯•)æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†è‡ªåŠ¨æˆ–åŠè‡ªåŠ¨ç”Ÿæˆçš„éšæœºæ•°æ®è¾“å…¥åˆ°ä¸€ä¸ª[ç¨‹åº](https://zh.wikipedia.org/wiki/è®¡ç®—æœºç¨‹åº)ä¸­ï¼Œå¹¶ç›‘è§†ç¨‹åºå¼‚å¸¸ï¼Œå¦‚å´©æºƒï¼Œ[æ–­è¨€](https://zh.wikipedia.org/wiki/æ–·è¨€_(ç¨‹å¼))ï¼ˆassertionï¼‰å¤±è´¥ï¼Œä»¥å‘ç°å¯èƒ½çš„ç¨‹åºé”™è¯¯ï¼Œæ¯”å¦‚å†…å­˜æ³„æ¼ã€‚æ¨¡ç³Šæµ‹è¯•å¸¸å¸¸ç”¨äºæ£€æµ‹è½¯ä»¶æˆ–è®¡ç®—æœºç³»ç»Ÿçš„å®‰å…¨æ¼æ´ã€‚

## Goè¯­è¨€ä¸­çš„æ¨¡ç³Šæµ‹è¯•

â€‹		Goä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºå®æ–½æ¨¡ç³Šæµ‹è¯•ï¼Œæ ¸å¿ƒæ˜¯`testing`åŒ…ä¸­çš„`Fuzz`å‡½æ•°ã€‚é€šè¿‡åˆ›å»ºä»¥`Fuzz`ä¸ºå‰ç¼€çš„å‡½æ•°ï¼ŒæŒ‰ç‰¹å®šçš„ç­¾åå®šä¹‰è¾“å…¥è¾“å‡ºï¼Œå¯ä»¥å¾ˆå®¹æ˜“é›†æˆæ¨¡ç³Šæµ‹è¯•åˆ°æˆ‘ä»¬çš„Goç¨‹åºä¸­ã€‚

![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202312212044424.png)

ä¸Šå›¾æ˜¯ä¸€ä¸ªæ¨¡ç³Šæµ‹è¯•çš„ä¾‹å­ï¼Œçªå‡ºæ˜¾ç¤ºäº†å®ƒçš„ä¸»è¦ç»„ä»¶ã€‚

æ¨¡ç³Šæµ‹è¯•å¿…é¡»è¦éµå¾ªçš„è§„åˆ™ï¼š

1. Fuzzæµ‹è¯•å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åå¿…é¡»ä»¥"Fuzz"å¼€å¤´ï¼Œåé¢å¿…é¡»æ˜¯ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´çš„åç§°ï¼Œä¾‹å¦‚"FuzzAdd"ã€‚
2. Fuzzæµ‹è¯•å‡½æ•°å¿…é¡»æ¥å—ä¸€ä¸ª*testing.Fç±»å‹çš„å‚æ•°ï¼Œä¸èƒ½æœ‰è¿”å›å€¼ã€‚
3. Fuzzæµ‹è¯•å‡½æ•°å¿…é¡»åœ¨*_test.goæ–‡ä»¶ä¸­å®šä¹‰æ‰èƒ½è¿è¡Œã€‚
4. Fuzzç›®æ ‡å¿…é¡»æ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯*testing.Fç±»å‹ï¼Œåé¢è·Ÿéšç€fuzzæµ‹è¯•çš„å‚æ•°ã€‚
5. æ¯ä¸ªfuzzæµ‹è¯•å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªfuzzç›®æ ‡ã€‚
6. æ‰€æœ‰çš„ç§å­è¯­æ–™åº“æ¡ç›®çš„ç±»å‹å¿…é¡»ä¸fuzzæµ‹è¯•çš„å‚æ•°ç±»å‹ç›¸åŒï¼Œé¡ºåºä¹Ÿå¿…é¡»ç›¸åŒã€‚è¿™é€‚ç”¨äºå¯¹Fuzzå‡½æ•°çš„è°ƒç”¨ä»¥åŠfuzzæµ‹è¯•çš„testdata/fuzzç›®å½•ä¸­çš„ä»»ä½•è¯­æ–™åº“æ–‡ä»¶ã€‚
7. Fuzzæµ‹è¯•çš„å‚æ•°ç±»å‹åªèƒ½æ˜¯ä»¥ä¸‹ç±»å‹ï¼š
   - string, []byte
   - int, uint, uintptr, int8, int16, int32, rune, int64, uint8, uint16, uint32, uint64
   - float32, float64
   - bool

è¿™äº›è§„åˆ™å’Œè¦æ±‚æ˜¯Goè¯­è¨€fuzzæµ‹è¯•çš„åŸºæœ¬è¦æ±‚ï¼Œéµå¾ªè¿™äº›è§„åˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™æœ‰æ•ˆçš„fuzzæµ‹è¯•å¹¶æé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚

â€‹		æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€äº›ç®€å•ä»£ç æ¥ä½“éªŒä¸€ä¸‹Fuzz testã€‚

### ä»£ç ç¼–å†™

1. æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºfuzzçš„ç›®å½•

   ```shell
   > mkdir fuzz
   > cd fuzz
   > go mod init example/fuzz
   > touch main.go
   ```

2. åœ¨main.goä¸­æˆ‘ä»¬è´´å¦‚ä»¥ä¸‹ä»£ç 

   ```go
   package main
   
   import "fmt"
   
   func Add(a, b int) int {
     	return a + b
   }
   
   func main(){
     	fmt.Printf("Add(1, 2) = %d\n", Add(1, 2))
   }
   ```

3. è¿è¡Œä»£ç 

   ```shell
   go run .
   Add(1, 2) = 3
   ```

   ç°åœ¨ä»£ç æ­£å¸¸è¿è¡Œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æµ‹è¯•å®ƒã€‚

### æ·»åŠ å•å…ƒæµ‹è¯•

â€‹		æˆ‘ä»¬å…ˆä¸ºAddå‡½æ•°ç¼–å†™ä¸€ä¸ªåŸºæœ¬çš„å•å…ƒæµ‹è¯•ã€‚

1. åœ¨`fuzz`ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸º`add_test.go`ã€‚

2. è´´å¦‚ä»¥ä¸‹ä»£ç åˆ°`add_test.go`ã€‚

   ```go
   package main
   
   import "testing"
   
   func TestAdd(t *testing.T) {
   	testcases := []struct {
   		a, b, want int
   	}{
   		{1, 2, 3},
   		{0, 0, 0},
   		{-1, -2, -3},
   		{1, -2, -1},
   	}
   	for _, tc := range testcases {
   		got := Add(tc.a, tc.b)
   		if got != tc.want {
   			t.Errorf("Add(%d, %d) == %d, want %d", tc.a, tc.b, got, tc.want)
   		}
   	}
   }
   ```

3. æ‰§è¡Œå•å…ƒæµ‹è¯•

   ```shell
   > go test -v
   
   === RUN   TestAdd
   ]]></description>
            <content:encoded><![CDATA[<h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h1>
<p>â€‹		è½¯ä»¶ç³»ç»Ÿè¶Šå¤æ‚ï¼Œæµ‹è¯•å°±è¶Šé‡è¦ã€‚ç„¶è€Œæ‰‹åŠ¨æµ‹è¯•å¯èƒ½ä¼šéå¸¸è´¹æ—¶å’Œä¹å‘³ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè‡ªåŠ¨åŒ–æµ‹è¯•å˜çš„è¶Šæ¥è¶Šæµè¡Œçš„åŸå› ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠè‡ªåŠ¨åŒ–æµ‹è¯•ä¸­çš„ä¸€ç§æµ‹è¯•æŠ€æœ¯å°±æ˜¯fuzzæµ‹è¯•ï¼Œå®ƒæ˜¯ä¸€ç§éšæœºæµ‹è¯•æŠ€æœ¯ï¼Œå¯ä»¥å¸®åŠ©å‘ç°è½¯ä»¶ç³»ç»Ÿä¸­çš„æ¼æ´å’Œé”™è¯¯ã€‚</p>
<p>â€‹		Goè¯­è¨€ç›®å‰å·²ç»æ˜¯éå¸¸æµè¡Œçš„è¯­è¨€äº†ï¼Œå…·æœ‰é«˜æ•ˆã€å¹¶å‘ç­‰ç‰¹æ€§ã€‚ä»Šå¤©æˆ‘ä»¬æµ…è°ˆä½¿ç”¨Goè¯­è¨€è¿›è¡Œfuzzæµ‹è¯•ã€‚ä»Go1.18å¼€å§‹ï¼ŒGoåœ¨å…¶æ ‡å‡†å·¥å…·é“¾ä¸­æ”¯æŒæ¨¡ç³Šæµ‹è¯•ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯fuzzæµ‹è¯•" tabindex="-1">ä»€ä¹ˆæ˜¯fuzzæµ‹è¯• <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯fuzzæµ‹è¯•" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯fuzzæµ‹è¯•&quot;">&ZeroWidthSpace;</a></h2>
<p>â€‹		<strong>æ¨¡ç³Šæµ‹è¯•</strong> ï¼ˆfuzz testing, fuzzingï¼‰æ˜¯ä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95" target="_blank" rel="noreferrer">è½¯ä»¶æµ‹è¯•</a>æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†è‡ªåŠ¨æˆ–åŠè‡ªåŠ¨ç”Ÿæˆçš„éšæœºæ•°æ®è¾“å…¥åˆ°ä¸€ä¸ª<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F" target="_blank" rel="noreferrer">ç¨‹åº</a>ä¸­ï¼Œå¹¶ç›‘è§†ç¨‹åºå¼‚å¸¸ï¼Œå¦‚å´©æºƒï¼Œ<a href="https://zh.wikipedia.org/wiki/%E6%96%B7%E8%A8%80_(%E7%A8%8B%E5%BC%8F)" target="_blank" rel="noreferrer">æ–­è¨€</a>ï¼ˆassertionï¼‰å¤±è´¥ï¼Œä»¥å‘ç°å¯èƒ½çš„ç¨‹åºé”™è¯¯ï¼Œæ¯”å¦‚å†…å­˜æ³„æ¼ã€‚æ¨¡ç³Šæµ‹è¯•å¸¸å¸¸ç”¨äºæ£€æµ‹è½¯ä»¶æˆ–è®¡ç®—æœºç³»ç»Ÿçš„å®‰å…¨æ¼æ´ã€‚</p>
<h2 id="goè¯­è¨€ä¸­çš„æ¨¡ç³Šæµ‹è¯•" tabindex="-1">Goè¯­è¨€ä¸­çš„æ¨¡ç³Šæµ‹è¯• <a class="header-anchor" href="#goè¯­è¨€ä¸­çš„æ¨¡ç³Šæµ‹è¯•" aria-label="Permalink to &quot;Goè¯­è¨€ä¸­çš„æ¨¡ç³Šæµ‹è¯•&quot;">&ZeroWidthSpace;</a></h2>
<p>â€‹		Goä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºå®æ–½æ¨¡ç³Šæµ‹è¯•ï¼Œæ ¸å¿ƒæ˜¯<code>testing</code>åŒ…ä¸­çš„<code>Fuzz</code>å‡½æ•°ã€‚é€šè¿‡åˆ›å»ºä»¥<code>Fuzz</code>ä¸ºå‰ç¼€çš„å‡½æ•°ï¼ŒæŒ‰ç‰¹å®šçš„ç­¾åå®šä¹‰è¾“å…¥è¾“å‡ºï¼Œå¯ä»¥å¾ˆå®¹æ˜“é›†æˆæ¨¡ç³Šæµ‹è¯•åˆ°æˆ‘ä»¬çš„Goç¨‹åºä¸­ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202312212044424.png" alt=""></p>
<p>ä¸Šå›¾æ˜¯ä¸€ä¸ªæ¨¡ç³Šæµ‹è¯•çš„ä¾‹å­ï¼Œçªå‡ºæ˜¾ç¤ºäº†å®ƒçš„ä¸»è¦ç»„ä»¶ã€‚</p>
<p>æ¨¡ç³Šæµ‹è¯•å¿…é¡»è¦éµå¾ªçš„è§„åˆ™ï¼š</p>
<ol>
<li>Fuzzæµ‹è¯•å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åå¿…é¡»ä»¥&quot;Fuzz&quot;å¼€å¤´ï¼Œåé¢å¿…é¡»æ˜¯ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´çš„åç§°ï¼Œä¾‹å¦‚&quot;FuzzAdd&quot;ã€‚</li>
<li>Fuzzæµ‹è¯•å‡½æ•°å¿…é¡»æ¥å—ä¸€ä¸ª*testing.Fç±»å‹çš„å‚æ•°ï¼Œä¸èƒ½æœ‰è¿”å›å€¼ã€‚</li>
<li>Fuzzæµ‹è¯•å‡½æ•°å¿…é¡»åœ¨*_test.goæ–‡ä»¶ä¸­å®šä¹‰æ‰èƒ½è¿è¡Œã€‚</li>
<li>Fuzzç›®æ ‡å¿…é¡»æ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯*testing.Fç±»å‹ï¼Œåé¢è·Ÿéšç€fuzzæµ‹è¯•çš„å‚æ•°ã€‚</li>
<li>æ¯ä¸ªfuzzæµ‹è¯•å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªfuzzç›®æ ‡ã€‚</li>
<li>æ‰€æœ‰çš„ç§å­è¯­æ–™åº“æ¡ç›®çš„ç±»å‹å¿…é¡»ä¸fuzzæµ‹è¯•çš„å‚æ•°ç±»å‹ç›¸åŒï¼Œé¡ºåºä¹Ÿå¿…é¡»ç›¸åŒã€‚è¿™é€‚ç”¨äºå¯¹Fuzzå‡½æ•°çš„è°ƒç”¨ä»¥åŠfuzzæµ‹è¯•çš„testdata/fuzzç›®å½•ä¸­çš„ä»»ä½•è¯­æ–™åº“æ–‡ä»¶ã€‚</li>
<li>Fuzzæµ‹è¯•çš„å‚æ•°ç±»å‹åªèƒ½æ˜¯ä»¥ä¸‹ç±»å‹ï¼š
<ul>
<li>string, []byte</li>
<li>int, uint, uintptr, int8, int16, int32, rune, int64, uint8, uint16, uint32, uint64</li>
<li>float32, float64</li>
<li>bool</li>
</ul>
</li>
</ol>
<p>è¿™äº›è§„åˆ™å’Œè¦æ±‚æ˜¯Goè¯­è¨€fuzzæµ‹è¯•çš„åŸºæœ¬è¦æ±‚ï¼Œéµå¾ªè¿™äº›è§„åˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™æœ‰æ•ˆçš„fuzzæµ‹è¯•å¹¶æé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚</p>
<p>â€‹		æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€äº›ç®€å•ä»£ç æ¥ä½“éªŒä¸€ä¸‹Fuzz testã€‚</p>
<h3 id="ä»£ç ç¼–å†™" tabindex="-1">ä»£ç ç¼–å†™ <a class="header-anchor" href="#ä»£ç ç¼–å†™" aria-label="Permalink to &quot;ä»£ç ç¼–å†™&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºfuzzçš„ç›®å½•</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mkdir fuzz</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cd fuzz</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> go mod init example/fuzz</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> touch main.go</span></span></code></pre>
</div></li>
<li>
<p>åœ¨main.goä¸­æˆ‘ä»¬è´´å¦‚ä»¥ä¸‹ä»£ç </p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a, b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Add(1, 2) = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></li>
<li>
<p>è¿è¡Œä»£ç </p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Add(1,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) = 3</span></span></code></pre>
</div><p>ç°åœ¨ä»£ç æ­£å¸¸è¿è¡Œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æµ‹è¯•å®ƒã€‚</p>
</li>
</ol>
<h3 id="æ·»åŠ å•å…ƒæµ‹è¯•" tabindex="-1">æ·»åŠ å•å…ƒæµ‹è¯• <a class="header-anchor" href="#æ·»åŠ å•å…ƒæµ‹è¯•" aria-label="Permalink to &quot;æ·»åŠ å•å…ƒæµ‹è¯•&quot;">&ZeroWidthSpace;</a></h3>
<p>â€‹		æˆ‘ä»¬å…ˆä¸ºAddå‡½æ•°ç¼–å†™ä¸€ä¸ªåŸºæœ¬çš„å•å…ƒæµ‹è¯•ã€‚</p>
<ol>
<li>
<p>åœ¨<code>fuzz</code>ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸º<code>add_test.go</code>ã€‚</p>
</li>
<li>
<p>è´´å¦‚ä»¥ä¸‹ä»£ç åˆ°<code>add_test.go</code>ã€‚</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">testing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TestAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">testing.T) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	testcases </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		a, b, want </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _, tc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> testcases {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		got </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tc.a, tc.b)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> got </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tc.want {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			t.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Errorf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Add(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) == </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, want </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, tc.a, tc.b, got, tc.want)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></li>
<li>
<p>æ‰§è¡Œå•å…ƒæµ‹è¯•</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> go test -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=== </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   TestAdd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> PASS:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> TestAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (0.00s)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">PASS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ok</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      example/fuzz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    0.003</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s</span></span></code></pre>
</div></li>
</ol>
<h3 id="æ·»åŠ æ¨¡ç³Šæµ‹è¯•" tabindex="-1">æ·»åŠ æ¨¡ç³Šæµ‹è¯• <a class="header-anchor" href="#æ·»åŠ æ¨¡ç³Šæµ‹è¯•" aria-label="Permalink to &quot;æ·»åŠ æ¨¡ç³Šæµ‹è¯•&quot;">&ZeroWidthSpace;</a></h3>
<p>å•å…ƒæµ‹è¯•çš„å±€é™æ˜¯æˆ‘ä»¬å¿…é¡»æŠŠæ¯ä¸ªè¾“å…¥æ·»åŠ åˆ°æµ‹è¯•ä¸­ï¼Œæ¨¡ç³Šæµ‹è¯•çš„å¥½å¤„æ˜¯å®ƒæä¾›äº†ä½ çš„ä»£ç ï¼Œå¹¶ä¸”å¯èƒ½è¯†åˆ«ä½ æƒ³å‡ºçš„æµ‹è¯•ç”¨ä¾‹çš„è¾¹ç¼˜æƒ…å†µã€‚</p>
<p>æˆ‘ä»¬æŠŠadd_test.goä¸­çš„å•å…ƒæµ‹è¯•æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹æ¨¡ç³Šæµ‹è¯•ã€‚</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FuzzAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">testing.F) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	f.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	f.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	f.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	f.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	f.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Fuzz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">testing.T, a, b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		got </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a, b)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> got </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">b {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			t.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Errorf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Add(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) == </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, want </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, a, b, got, a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">b)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		t.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Logf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Add(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) == </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, a, b, got)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ‰§è¡Œæ¨¡ç³Šæµ‹è¯•, é€šè¿‡<code>-run</code>é€‰é¡¹ç”¨äºæŒ‡å®šè¦è¿è¡Œçš„æµ‹è¯•å‡½æ•°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>-fuzz</code>é€‰é¡¹ç”¨äºæŒ‡å®šè¦è¿è¡Œçš„fuzzæµ‹è¯•å‡½æ•°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>-fuzztime</code>é€‰é¡¹æ¥æ§åˆ¶fuzzæµ‹è¯•çš„æŒç»­æ—¶é—´ã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> go test -v -run=FuzzAdd -fuzz=Fuzz -fuzztime 10s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=== </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   FuzzAdd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fuzz:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> elapsed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> gathering</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> baseline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> coverage:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> completed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fuzz:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> elapsed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> gathering</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> baseline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> coverage:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> completed,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> fuzzing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> workers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fuzz:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> elapsed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> execs:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 718882</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (239620/sec), new interesting: 1 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">total:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fuzz:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> elapsed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> execs:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1444761</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (241916/sec), new interesting: 1 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">total:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fuzz:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> elapsed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> execs:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2177414</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (244215/sec), new interesting: 1 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">total:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fuzz:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> elapsed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> execs:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2415524</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (216791/sec), new interesting: 1 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">total:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> PASS:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> FuzzAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (10.10s)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=== </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">PASS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ok</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      example/fuzz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    10.106</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">s</span></span></code></pre>
</div><p>æ€»çš„æ¥è¯´ï¼ŒGoè¯­è¨€å†…ç½®çš„fuzzæµ‹è¯•æ¡†æ¶æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥è¿›è¡Œfuzzæµ‹è¯•ï¼Œå®ƒä¸testingåŒ…ç´§å¯†é›†æˆï¼Œå¯ä»¥æ›´æ–¹ä¾¿çš„è¿›è¡Œå•å…ƒæµ‹è¯•å’Œfuzzæµ‹è¯•ã€‚</p>
<h1 id="å‚è€ƒæ–‡çŒ®" tabindex="-1">å‚è€ƒæ–‡çŒ® <a class="header-anchor" href="#å‚è€ƒæ–‡çŒ®" aria-label="Permalink to &quot;å‚è€ƒæ–‡çŒ®&quot;">&ZeroWidthSpace;</a></h1>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E6%A8%A1%E7%B3%8A%E6%B5%8B%E8%AF%95" target="_blank" rel="noreferrer">wiki</a></li>
<li><a href="https://go.dev/doc/tutorial/fuzz" target="_blank" rel="noreferrer">gotutorial</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202312212044424.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[goè¯­è¨€æ³›å‹]]></title>
            <link>https://lpdswing.github.io//lang/go/æ³›å‹.html</link>
            <guid>https://lpdswing.github.io//lang/go/æ³›å‹.html</guid>
            <pubDate>Fri, 08 Dec 2023 12:37:28 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="goè¯­è¨€æ³›å‹" tabindex="-1">Goè¯­è¨€æ³›å‹ <a class="header-anchor" href="#goè¯­è¨€æ³›å‹" aria-label="Permalink to &quot;Goè¯­è¨€æ³›å‹&quot;">&ZeroWidthSpace;</a></h1>
<p>Go è¯­è¨€è‡ªä»æ¨å‡ºä»¥æ¥ï¼Œä¸€ç›´è¢«äººè¯Ÿç—…æ²¡æœ‰æ³›å‹ã€‚æ³›å‹æ˜¯ä¸€ç§éå¸¸é‡è¦çš„ç¼–ç¨‹æ¦‚å¿µï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬ç¼–å†™æ›´åŠ é€šç”¨ã€å¯å¤ç”¨çš„ä»£ç ã€‚åœ¨ Go è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¥å£å’Œç±»å‹æ–­è¨€æ¥å®ç°ç±»ä¼¼æ³›å‹çš„åŠŸèƒ½ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯å¾ˆçµæ´»ï¼Œè€Œä¸”æœ‰ä¸€å®šçš„æ€§èƒ½æŸå¤±ã€‚å› æ­¤ï¼ŒGo è¯­è¨€ç¤¾åŒºä¸€ç›´åœ¨å‘¼ååŠ å…¥æ³›å‹æ”¯æŒã€‚æœ€è¿‘ï¼ŒGo è¯­è¨€å®˜æ–¹ç»ˆäºåœ¨ 2021 å¹´å‘å¸ƒçš„ Go 1.18 ç‰ˆæœ¬ä¸­åŠ å…¥äº†æ³›å‹æ”¯æŒï¼Œè¿™æ˜¯ Go è¯­è¨€å‘å±•å†ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚</p>
<p>åœ¨ Go è¯­è¨€ä¸­ï¼Œæ³›å‹çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡ç±»å‹å‚æ•°åŒ–æ¥å®ç°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ã€ç»“æ„ä½“ç­‰å®šä¹‰ä¸­ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œè¿™äº›ç±»å‹å‚æ•°å¯ä»¥åœ¨ä½¿ç”¨æ—¶è¢«å…·ä½“çš„ç±»å‹æ›¿æ¢ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ³›å‹å‡½æ•°æ¥è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œï¼š</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Numeric</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	float64</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> int8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> int16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> int32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> int64</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> uint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> uint8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> uint16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> uint32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> uint64</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> uintptr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> float32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> complex64</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> complex128</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Add[T Numeric](a, b T) T {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AddInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a, b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AddFloat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a, b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">float64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">float64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">AddInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">AddFloat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//3.3000000000000003</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	//3.3000000000000003</span></span></code></pre>
</div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ³›å‹å‡½æ•° <code>Add</code>ï¼Œå®ƒæ¥å—ä¸¤ä¸ªç±»å‹ä¸º <code>T</code> çš„å‚æ•°ï¼Œå¹¶è¿”å›ç±»å‹ä¸º <code>T</code> çš„ç»“æœã€‚å…¶ä¸­ï¼Œ<code>T Numeric</code> è¡¨ç¤º <code>T</code> å¿…é¡»æ˜¯æ•°å­—ç±»å‹ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨æ•´æ•°å’Œæµ®ç‚¹æ•°è°ƒç”¨äº† <code>Add</code> å‡½æ•°ï¼Œå¹¶è¾“å‡ºäº†ç»“æœã€‚</p>
<p>é™¤äº†å‡½æ•°ï¼ŒGo è¯­è¨€çš„æ³›å‹è¿˜æ”¯æŒç»“æ„ä½“ã€æ¥å£ç­‰å®šä¹‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ³›å‹ç»“æ„ä½“æ¥å®ç°ä¸€ä¸ªé€šç”¨çš„æ ˆï¼š</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Stack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[T any] []T</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Stack[T]) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v T) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s, v)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Stack[T]) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Pop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() T {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s)[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s Stack[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	s.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	s.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Pop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Pop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> strStack Stack[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	strStack.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	strStack.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"world"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(strStack.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Pop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(strStack.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Pop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ³›å‹ç»“æ„ä½“ <code>Stack</code>ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹å‚æ•° <code>T</code>ï¼Œè¡¨ç¤ºæ ˆä¸­çš„å…ƒç´ ç±»å‹ã€‚æˆ‘ä»¬åœ¨ç»“æ„ä½“ä¸­ä½¿ç”¨äº†ç±»å‹å‚æ•° <code>T</code>ï¼Œå¹¶åœ¨ <code>Push</code> å’Œ <code>Pop</code> æ–¹æ³•ä¸­ä½¿ç”¨äº† <code>T</code>ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ›å»ºäº†ä¸€ä¸ªæ•´æ•°ç±»å‹çš„æ ˆå’Œä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ ˆï¼Œå¹¶ä½¿ç”¨ <code>Push</code> å’Œ <code>Pop</code> æ–¹æ³•æ¥æ“ä½œæ ˆä¸­çš„å…ƒç´ ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒGo è¯­è¨€çš„æ³›å‹æ”¯æŒä¸ºæˆ‘ä»¬æä¾›äº†æ›´åŠ çµæ´»ã€é€šç”¨ã€å¯å¤ç”¨çš„ç¼–ç¨‹æ–¹å¼ã€‚é€šè¿‡ä½¿ç”¨æ³›å‹ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºæ›´åŠ ç®€æ´ã€é«˜æ•ˆã€å¯è¯»æ€§å¼ºçš„ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
<h1 id="refense" tabindex="-1">Refense <a class="header-anchor" href="#refense" aria-label="Permalink to &quot;Refense&quot;">&ZeroWidthSpace;</a></h1>
<p><a href="https://go.dev/doc/tutorial/generics" target="_blank" rel="noreferrer">æ•™ç¨‹ï¼šæ³›å‹å…¥é—¨ - Go ç¼–ç¨‹è¯­è¨€</a></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ·±å…¥äº†è§£Kubernetesçš„Topå’ŒDashboardåŠŸèƒ½]]></title>
            <link>https://lpdswing.github.io//technology/learn/k8s_dashboard.html</link>
            <guid>https://lpdswing.github.io//technology/learn/k8s_dashboard.html</guid>
            <pubDate>Sun, 24 Sep 2023 04:48:56 GMT</pubDate>
            <description><![CDATA[

Kubernetesï¼ˆé€šå¸¸ç®€ç§°ä¸ºK8sï¼‰å·²æˆä¸ºå®¹å™¨ç¼–æ’å’Œç®¡ç†çš„äº‹å®æ ‡å‡†ï¼Œä¸ºå¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿæä¾›äº†å¼ºå¤§çš„å·¥å…·å’ŒåŠŸèƒ½é›†ã€‚åœ¨Kubernetesç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œ"Top"å’Œ"Dashboard"æ˜¯ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„ç»„ä»¶ï¼Œå®ƒä»¬ä¸ºç”¨æˆ·æä¾›äº†å®æ—¶ç›‘æ§å’Œå¯è§†åŒ–ç®¡ç†å®¹å™¨é›†ç¾¤çš„èƒ½åŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Kubernetesçš„Topå’ŒDashboardåŠŸèƒ½ï¼Œä»‹ç»å®ƒä»¬çš„ç‰¹ç‚¹å’Œç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•åœ¨æ—¥å¸¸å·¥ä½œä¸­å……åˆ†åˆ©ç”¨å®ƒä»¬ã€‚

## Kubernetesçš„TopåŠŸèƒ½
Kubernetesçš„TopåŠŸèƒ½æä¾›äº†å¯¹é›†ç¾¤ä¸­èµ„æºä½¿ç”¨æƒ…å†µçš„å®æ—¶ç›‘æ§ã€‚å®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·äº†è§£å„ä¸ªèŠ‚ç‚¹å’Œå®¹å™¨çš„èµ„æºæ¶ˆè€—æƒ…å†µï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€å­˜å‚¨ç­‰æ–¹é¢çš„æŒ‡æ ‡ã€‚é€šè¿‡ä½¿ç”¨Topå‘½ä»¤ï¼Œç”¨æˆ·å¯ä»¥è·å¾—é›†ç¾¤çš„æ•´ä½“æ€§èƒ½æ¦‚è§ˆï¼Œå¹¶æ·±å…¥äº†è§£èµ„æºçš„åˆ†é…å’Œåˆ©ç”¨æƒ…å†µã€‚

### èµ„æºç›‘æ§
TopåŠŸèƒ½é€šè¿‡æ”¶é›†å’Œå±•ç¤ºèŠ‚ç‚¹å’Œå®¹å™¨çš„èµ„æºä½¿ç”¨æŒ‡æ ‡ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£ç³»ç»Ÿçš„å¥åº·çŠ¶å†µã€‚ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹çš„è´Ÿè½½æƒ…å†µï¼Œä»¥åŠå®¹å™¨çš„èµ„æºæ¶ˆè€—æƒ…å†µï¼Œä»è€ŒåŠæ—¶è¯†åˆ«å‡ºèµ„æºç“¶é¢ˆå’Œæ€§èƒ½é—®é¢˜ã€‚

### èµ„æºè°ƒä¼˜
TopåŠŸèƒ½æä¾›äº†å¯¹èµ„æºä½¿ç”¨æƒ…å†µçš„å®æ—¶ç›‘æ§ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ç›‘æ§æ•°æ®è¿›è¡Œèµ„æºè°ƒä¼˜ã€‚é€šè¿‡æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µçš„å˜åŒ–è¶‹åŠ¿ï¼Œç”¨æˆ·å¯ä»¥è°ƒæ•´å®¹å™¨çš„èµ„æºé…é¢ï¼Œä¼˜åŒ–èµ„æºåˆ†é…ï¼Œæé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œç¨³å®šæ€§ã€‚

## Kubernetesçš„DashboardåŠŸèƒ½
Kubernetesçš„Dashboardæ˜¯ä¸€ä¸ªåŸºäºWebçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›äº†å¯¹Kubernetesé›†ç¾¤çš„å¯è§†åŒ–ç®¡ç†å’Œæ“ä½œã€‚å®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªç›´è§‚çš„ç•Œé¢ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†é›†ç¾¤ä¸­çš„å„ç§èµ„æºï¼Œå¦‚èŠ‚ç‚¹ã€Podã€æœåŠ¡ã€å­˜å‚¨ç­‰ã€‚

### é›†ç¾¤æ¦‚è§ˆ
DashboardåŠŸèƒ½æä¾›äº†é›†ç¾¤çš„æ•´ä½“æ¦‚è§ˆï¼Œç”¨æˆ·å¯ä»¥ä¸€ç›®äº†ç„¶åœ°æŸ¥çœ‹é›†ç¾¤ä¸­çš„èŠ‚ç‚¹æ•°é‡ã€è¿è¡Œçš„Podæ•°é‡ã€æœåŠ¡æ•°é‡ç­‰å…³é”®ä¿¡æ¯ã€‚é€šè¿‡Dashboardï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿäº†è§£é›†ç¾¤çš„è§„æ¨¡å’ŒçŠ¶æ€ï¼Œä¸ºåç»­çš„ç®¡ç†å’Œæ“ä½œæä¾›å‚è€ƒã€‚

### èµ„æºç®¡ç†
DashboardåŠŸèƒ½å…è®¸ç”¨æˆ·å¯¹é›†ç¾¤ä¸­çš„å„ç§èµ„æºè¿›è¡Œç®¡ç†å’Œæ“ä½œã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºã€åˆ é™¤å’Œç¼–è¾‘Podã€æœåŠ¡ç­‰å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ‰©å±•å’Œæ”¶ç¼©èŠ‚ç‚¹çš„æ•°é‡ã€‚é€šè¿‡Dashboardï¼Œç”¨æˆ·å¯ä»¥è½»æ¾ç®¡ç†é›†ç¾¤ä¸­çš„èµ„æºï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚

### æ—¥å¿—å’Œäº‹ä»¶æŸ¥çœ‹
DashboardåŠŸèƒ½è¿˜æä¾›äº†æŸ¥çœ‹Podæ—¥å¿—å’Œäº‹ä»¶çš„èƒ½åŠ›ã€‚ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹Podçš„æ—¥å¿—è¾“å‡ºï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚åŒæ—¶ï¼Œç”¨æˆ·è¿˜å¯ä»¥æŸ¥çœ‹é›†ç¾¤ä¸­å‘ç”Ÿçš„äº‹ä»¶ï¼Œå¦‚Podçš„åˆ›å»ºã€åˆ é™¤å’Œè°ƒåº¦ç­‰ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µã€‚

## å®æ“å¼€å¯Topå’ŒDashboard

### Top

å¯¹äºè¾ƒæ–°çš„Kubernetesç‰ˆæœ¬ï¼ŒMetrics Serveræ˜¯é»˜è®¤çš„èµ„æºç›‘æ§ç»„ä»¶ã€‚å¦‚æœæ‰§è¡Œ`kubectl top node`å‡ºç°`error: Metrics API not available`è¯´æ˜æ²¡æœ‰å®‰è£…å¥½metrics server, æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å¥½metrics serverã€‚

1. æ‰§è¡Œ`kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml`å®‰è£…ï¼Œå…·ä½“ç‰ˆæœ¬ä¿¡æ¯å¯ä»¥å‚è€ƒ[metrics-server](https://github.com/kubernetes-sigs/metrics-server)ã€‚

![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241045945.png)

2. æ‰§è¡Œ`kubectl get pods -n kube-system`æŸ¥çœ‹metris-serveræ˜¯å¦å·²ç»å¯åŠ¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºè¯´æ˜å·²ç»å¯åŠ¨æˆåŠŸã€‚

![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241049444.png)

3. æ‰§è¡Œ`kubectl top node`æŸ¥çœ‹nodeçŠ¶æ€, :grin::grin: æå®šæ”¶å·¥ã€‚

![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241051783.png)

4. Trouble shooting

   å¦‚æœç½‘ç»œç¯å¢ƒä¸å¥½ï¼Œé•œåƒä¸‹ä¸ä¸‹æ¥å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼Œæˆ‘ä»¬æŠŠcomponents.yamlä¸‹è½½ä¸‹æ¥ã€‚

   ```yaml
   apiVersion: v1
   kind: ServiceAccount
   metadata:
     labels:
       k8s-app: metrics-server
     name: metrics-server
     namespace: kube-system
   ]]></description>
            <content:encoded><![CDATA[<p>Kubernetesï¼ˆé€šå¸¸ç®€ç§°ä¸ºK8sï¼‰å·²æˆä¸ºå®¹å™¨ç¼–æ’å’Œç®¡ç†çš„äº‹å®æ ‡å‡†ï¼Œä¸ºå¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿæä¾›äº†å¼ºå¤§çš„å·¥å…·å’ŒåŠŸèƒ½é›†ã€‚åœ¨Kubernetesç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œ&quot;Top&quot;å’Œ&quot;Dashboard&quot;æ˜¯ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„ç»„ä»¶ï¼Œå®ƒä»¬ä¸ºç”¨æˆ·æä¾›äº†å®æ—¶ç›‘æ§å’Œå¯è§†åŒ–ç®¡ç†å®¹å™¨é›†ç¾¤çš„èƒ½åŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Kubernetesçš„Topå’ŒDashboardåŠŸèƒ½ï¼Œä»‹ç»å®ƒä»¬çš„ç‰¹ç‚¹å’Œç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•åœ¨æ—¥å¸¸å·¥ä½œä¸­å……åˆ†åˆ©ç”¨å®ƒä»¬ã€‚</p>
<h2 id="kubernetesçš„topåŠŸèƒ½" tabindex="-1">Kubernetesçš„TopåŠŸèƒ½ <a class="header-anchor" href="#kubernetesçš„topåŠŸèƒ½" aria-label="Permalink to &quot;Kubernetesçš„TopåŠŸèƒ½&quot;">&ZeroWidthSpace;</a></h2>
<p>Kubernetesçš„TopåŠŸèƒ½æä¾›äº†å¯¹é›†ç¾¤ä¸­èµ„æºä½¿ç”¨æƒ…å†µçš„å®æ—¶ç›‘æ§ã€‚å®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·äº†è§£å„ä¸ªèŠ‚ç‚¹å’Œå®¹å™¨çš„èµ„æºæ¶ˆè€—æƒ…å†µï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€å­˜å‚¨ç­‰æ–¹é¢çš„æŒ‡æ ‡ã€‚é€šè¿‡ä½¿ç”¨Topå‘½ä»¤ï¼Œç”¨æˆ·å¯ä»¥è·å¾—é›†ç¾¤çš„æ•´ä½“æ€§èƒ½æ¦‚è§ˆï¼Œå¹¶æ·±å…¥äº†è§£èµ„æºçš„åˆ†é…å’Œåˆ©ç”¨æƒ…å†µã€‚</p>
<h3 id="èµ„æºç›‘æ§" tabindex="-1">èµ„æºç›‘æ§ <a class="header-anchor" href="#èµ„æºç›‘æ§" aria-label="Permalink to &quot;èµ„æºç›‘æ§&quot;">&ZeroWidthSpace;</a></h3>
<p>TopåŠŸèƒ½é€šè¿‡æ”¶é›†å’Œå±•ç¤ºèŠ‚ç‚¹å’Œå®¹å™¨çš„èµ„æºä½¿ç”¨æŒ‡æ ‡ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£ç³»ç»Ÿçš„å¥åº·çŠ¶å†µã€‚ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹çš„è´Ÿè½½æƒ…å†µï¼Œä»¥åŠå®¹å™¨çš„èµ„æºæ¶ˆè€—æƒ…å†µï¼Œä»è€ŒåŠæ—¶è¯†åˆ«å‡ºèµ„æºç“¶é¢ˆå’Œæ€§èƒ½é—®é¢˜ã€‚</p>
<h3 id="èµ„æºè°ƒä¼˜" tabindex="-1">èµ„æºè°ƒä¼˜ <a class="header-anchor" href="#èµ„æºè°ƒä¼˜" aria-label="Permalink to &quot;èµ„æºè°ƒä¼˜&quot;">&ZeroWidthSpace;</a></h3>
<p>TopåŠŸèƒ½æä¾›äº†å¯¹èµ„æºä½¿ç”¨æƒ…å†µçš„å®æ—¶ç›‘æ§ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ç›‘æ§æ•°æ®è¿›è¡Œèµ„æºè°ƒä¼˜ã€‚é€šè¿‡æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µçš„å˜åŒ–è¶‹åŠ¿ï¼Œç”¨æˆ·å¯ä»¥è°ƒæ•´å®¹å™¨çš„èµ„æºé…é¢ï¼Œä¼˜åŒ–èµ„æºåˆ†é…ï¼Œæé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>
<h2 id="kubernetesçš„dashboardåŠŸèƒ½" tabindex="-1">Kubernetesçš„DashboardåŠŸèƒ½ <a class="header-anchor" href="#kubernetesçš„dashboardåŠŸèƒ½" aria-label="Permalink to &quot;Kubernetesçš„DashboardåŠŸèƒ½&quot;">&ZeroWidthSpace;</a></h2>
<p>Kubernetesçš„Dashboardæ˜¯ä¸€ä¸ªåŸºäºWebçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›äº†å¯¹Kubernetesé›†ç¾¤çš„å¯è§†åŒ–ç®¡ç†å’Œæ“ä½œã€‚å®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªç›´è§‚çš„ç•Œé¢ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†é›†ç¾¤ä¸­çš„å„ç§èµ„æºï¼Œå¦‚èŠ‚ç‚¹ã€Podã€æœåŠ¡ã€å­˜å‚¨ç­‰ã€‚</p>
<h3 id="é›†ç¾¤æ¦‚è§ˆ" tabindex="-1">é›†ç¾¤æ¦‚è§ˆ <a class="header-anchor" href="#é›†ç¾¤æ¦‚è§ˆ" aria-label="Permalink to &quot;é›†ç¾¤æ¦‚è§ˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>DashboardåŠŸèƒ½æä¾›äº†é›†ç¾¤çš„æ•´ä½“æ¦‚è§ˆï¼Œç”¨æˆ·å¯ä»¥ä¸€ç›®äº†ç„¶åœ°æŸ¥çœ‹é›†ç¾¤ä¸­çš„èŠ‚ç‚¹æ•°é‡ã€è¿è¡Œçš„Podæ•°é‡ã€æœåŠ¡æ•°é‡ç­‰å…³é”®ä¿¡æ¯ã€‚é€šè¿‡Dashboardï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿäº†è§£é›†ç¾¤çš„è§„æ¨¡å’ŒçŠ¶æ€ï¼Œä¸ºåç»­çš„ç®¡ç†å’Œæ“ä½œæä¾›å‚è€ƒã€‚</p>
<h3 id="èµ„æºç®¡ç†" tabindex="-1">èµ„æºç®¡ç† <a class="header-anchor" href="#èµ„æºç®¡ç†" aria-label="Permalink to &quot;èµ„æºç®¡ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>DashboardåŠŸèƒ½å…è®¸ç”¨æˆ·å¯¹é›†ç¾¤ä¸­çš„å„ç§èµ„æºè¿›è¡Œç®¡ç†å’Œæ“ä½œã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºã€åˆ é™¤å’Œç¼–è¾‘Podã€æœåŠ¡ç­‰å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ‰©å±•å’Œæ”¶ç¼©èŠ‚ç‚¹çš„æ•°é‡ã€‚é€šè¿‡Dashboardï¼Œç”¨æˆ·å¯ä»¥è½»æ¾ç®¡ç†é›†ç¾¤ä¸­çš„èµ„æºï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<h3 id="æ—¥å¿—å’Œäº‹ä»¶æŸ¥çœ‹" tabindex="-1">æ—¥å¿—å’Œäº‹ä»¶æŸ¥çœ‹ <a class="header-anchor" href="#æ—¥å¿—å’Œäº‹ä»¶æŸ¥çœ‹" aria-label="Permalink to &quot;æ—¥å¿—å’Œäº‹ä»¶æŸ¥çœ‹&quot;">&ZeroWidthSpace;</a></h3>
<p>DashboardåŠŸèƒ½è¿˜æä¾›äº†æŸ¥çœ‹Podæ—¥å¿—å’Œäº‹ä»¶çš„èƒ½åŠ›ã€‚ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹Podçš„æ—¥å¿—è¾“å‡ºï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚åŒæ—¶ï¼Œç”¨æˆ·è¿˜å¯ä»¥æŸ¥çœ‹é›†ç¾¤ä¸­å‘ç”Ÿçš„äº‹ä»¶ï¼Œå¦‚Podçš„åˆ›å»ºã€åˆ é™¤å’Œè°ƒåº¦ç­‰ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µã€‚</p>
<h2 id="å®æ“å¼€å¯topå’Œdashboard" tabindex="-1">å®æ“å¼€å¯Topå’ŒDashboard <a class="header-anchor" href="#å®æ“å¼€å¯topå’Œdashboard" aria-label="Permalink to &quot;å®æ“å¼€å¯Topå’ŒDashboard&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="top" tabindex="-1">Top <a class="header-anchor" href="#top" aria-label="Permalink to &quot;Top&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯¹äºè¾ƒæ–°çš„Kubernetesç‰ˆæœ¬ï¼ŒMetrics Serveræ˜¯é»˜è®¤çš„èµ„æºç›‘æ§ç»„ä»¶ã€‚å¦‚æœæ‰§è¡Œ<code>kubectl top node</code>å‡ºç°<code>error: Metrics API not available</code>è¯´æ˜æ²¡æœ‰å®‰è£…å¥½metrics server, æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å¥½metrics serverã€‚</p>
<ol>
<li>æ‰§è¡Œ<code>kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</code>å®‰è£…ï¼Œå…·ä½“ç‰ˆæœ¬ä¿¡æ¯å¯ä»¥å‚è€ƒ<a href="https://github.com/kubernetes-sigs/metrics-server" target="_blank" rel="noreferrer">metrics-server</a>ã€‚</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241045945.png" alt=""></p>
<ol start="2">
<li>æ‰§è¡Œ<code>kubectl get pods -n kube-system</code>æŸ¥çœ‹metris-serveræ˜¯å¦å·²ç»å¯åŠ¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºè¯´æ˜å·²ç»å¯åŠ¨æˆåŠŸã€‚</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241049444.png" alt=""></p>
<ol start="3">
<li>æ‰§è¡Œ<code>kubectl top node</code>æŸ¥çœ‹nodeçŠ¶æ€, ğŸ˜ğŸ˜ æå®šæ”¶å·¥ã€‚</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241051783.png" alt=""></p>
<ol start="4">
<li>
<p>Trouble shooting</p>
<p>å¦‚æœç½‘ç»œç¯å¢ƒä¸å¥½ï¼Œé•œåƒä¸‹ä¸ä¸‹æ¥å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼Œæˆ‘ä»¬æŠŠcomponents.yamlä¸‹è½½ä¸‹æ¥ã€‚</p>
<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    rbac.authorization.k8s.io/aggregate-to-admin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"true"</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    rbac.authorization.k8s.io/aggregate-to-edit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"true"</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    rbac.authorization.k8s.io/aggregate-to-view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"true"</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">system:aggregated-metrics-reader</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">pods</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nodes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">get</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">watch</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">system:metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nodes/metrics</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">get</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">pods</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nodes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">get</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">watch</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">RoleBinding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server-auth-reader</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">roleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  apiGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Role</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">extension-apiserver-authentication-reader</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">subjects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRoleBinding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server:system:auth-delegator</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">roleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  apiGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">system:auth-delegator</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">subjects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRoleBinding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">system:metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">roleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  apiGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">system:metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">subjects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">https</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">443</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">TCP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    targetPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">https</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    matchLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    rollingUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      maxUnavailable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      containers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--cert-dir=/tmp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--secure-port=4443</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--kubelet-use-node-status-port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--metric-resolution=15s</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # å¦‚æœæ²¡æƒé™è®¿é—®ï¼Œå¢åŠ ä¸‹é¢è¿™ä¸€è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--kubelet-insecure-tls</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # é•œåƒæ›¿æ¢ä¸ºé˜¿é‡Œäº‘é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        livenessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          failureThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/livez</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">https</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            scheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">HTTPS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4443</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">https</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">TCP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        readinessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          failureThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/readyz</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">https</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            scheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">HTTPS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">20</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          requests</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">100m</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">200Mi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        securityContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          allowPrivilegeEscalation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          readOnlyRootFilesystem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          runAsNonRoot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          runAsUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        volumeMounts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">mountPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/tmp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">tmp-dir</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      nodeSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        kubernetes.io/os</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">linux</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      priorityClassName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">system-cluster-critical</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      serviceAccountName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">emptyDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">tmp-dir</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">apiregistration.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">APIService</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    k8s-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">v1beta1.metrics.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  groupPriorityMinimum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  insecureSkipTLSVerify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">metrics-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kube-system</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">v1beta1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  versionPriority</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span></span></code></pre>
</div></li>
</ol>
<h3 id="dashboard" tabindex="-1">Dashboard <a class="header-anchor" href="#dashboard" aria-label="Permalink to &quot;Dashboard&quot;">&ZeroWidthSpace;</a></h3>
<p>å‚è€ƒ<a href="https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/web-ui-dashboard/" target="_blank" rel="noreferrer">è¿™é‡Œ</a>æˆ‘ä»¬å¾ˆè½»æ¾å°±å¯ä»¥æå®šk8sä»ªè¡¨ç›˜ï¼ˆDashboardï¼‰ï¼ŒFollow meã€‚</p>
<ol>
<li>
<p>éƒ¨ç½²Dashboard UI</p>
<p>æ‰§è¡Œ<code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml</code></p>
</li>
<li>
<p>åˆ›å»ºç®¡ç†ç”¨æˆ·</p>
<p>ä¸ºäº†ä¿æŠ¤ä½ çš„é›†ç¾¤æ•°æ®ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒDashboard ä¼šä½¿ç”¨æœ€å°‘çš„ RBAC é…ç½®è¿›è¡Œéƒ¨ç½²ã€‚ å½“å‰ï¼ŒDashboard ä»…æ”¯æŒä½¿ç”¨ Bearer ä»¤ç‰Œç™»å½•ã€‚</p>
<p>æ¥ï¼Œå‚è€ƒ<a href="https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md" target="_blank" rel="noreferrer">è¿™é‡Œ</a>ã€‚</p>
<ul>
<li>
<p>åˆ›å»ºdashboard-adminuser.yaml å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">admin-user</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kubernetes-dashboard</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRoleBinding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">admin-user</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">roleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  apiGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">cluster-admin</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">subjects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">admin-user</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kubernetes-dashboard</span></span></code></pre>
</div></li>
<li>
<p>æ‰§è¡Œ<code>kubectl apply -f dashboard-adminuser.yaml</code>,åˆ°è¿™é‡Œadmin-userå°±åˆ›å»ºå¥½äº†ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241104410.png" alt=""></p>
</li>
</ul>
</li>
<li>
<p>è·å–Bearer Token</p>
<ol>
<li>
<p>ç›´æ¥é€šè¿‡å‘½ä»¤åˆ›å»ºToken</p>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubernetes-dashboard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> admin-user</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ä¼šç”Ÿæˆä¸‹é¢ä¸€ä¸²Token</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">eyJhbGciOiJSUzI1NiIsImtpZCI6IjNpNTB6b2NBSHpFRHFiNUhTVDRyTURpV1g0OTB2aHBnNEVka1Npcy01RHMifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJrM3MiXSwiZXhwIjoxNjk1NTI4NTAwLCJpYXQiOjE2OTU1MjQ5MDAsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiMjdhYjI2YmEtMDNlNy00YTkxLWI5YWUtYjIwNDQ5ZjI5NDk4In19LCJuYmYiOjE2OTU1MjQ5MDAsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.owFzEipgjfkARdM8OSR3UK_eI23ZNj3gBX1Q7a6nxzRgP8lwd2vMdQM7c7uCpHT1w5KbzoZ70lOsxzqqcSWHOhXVUezYBZqRIIVX8VOHxrCUp0hL8rS71B_QO3WALuil_Q3cIJbuyzNt6Zku-rax7AZoFaxpIdHhoYFdjEmKLA3dv4M2dMYUxM5f0RfBvYRp_fO-6fOyv1Y5iFXaHsdGg5a3zdXkOM-1T7VftR0jq1Q2dD_VsnrvFWO5jQmIt3iywSG20CO2W9YlAtaVOcIHbqionttlHUyUrhOfvPaikR30rzGpkZDeD7l234XryWcQr3rtRgO-s3QkfNjdUSeHew</span></span></code></pre>
</div></li>
<li>
<p>é€šè¿‡secretè·å–é•¿æœŸæŒæœ‰çš„Token</p>
<p>åˆ›å»ºdashboard-secret.yaml.</p>
<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Secret</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">admin-user</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kubernetes-dashboard</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  annotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    kubernetes.io/service-account.name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"admin-user"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">   </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kubernetes.io/service-account-token</span></span></code></pre>
</div><p>æ‰§è¡Œ<code>kubectl apply -f dashboard-secret.yaml</code></p>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è·å–Tokenï¼š</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> admin-user</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubernetes-dashboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> jsonpath={".data.token"}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">eyJhbGciOiJSUzI1NiIsImtpZCI6IjNpNTB6b2NBSHpFRHFiNUhTVDRyTURpV1g0OTB2aHBnNEVka1Npcy01RHMifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIyN2FiMjZiYS0wM2U3LTRhOTEtYjlhZS1iMjA0NDlmMjk0OTgiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.LJTDXBU9P5rWOj1ATTgJxk-tKKMvYI43dkkBAePMek01ixCc0Z62xfMcTVUaGdQTO-N6dYeiI1YHkkFHjiSYwNltdZEfY7xWY7cqQzKhI50jNObIX1grKxcw9jhanzWFfpeMdbMHtuzSnHDLYow8DlZnvuUuXaKEEryiIT4jUTilbOqtrA01Nayqmq_d88_izrUptCB1hAxfdwcbBBu1OmTc48PabU5POF-H8xPRqJ7act4Q1TH_u5H2gAnQcpsHC2UYrTB0ag6kUMFrwSN_u_-LooDdmqRKGbuFf2AM1DBw_H43N-keeLrir21ojOrb-JLc4icabnpEXM5jQHys9Q</span></span></code></pre>
</div></li>
<li>
<p>å‘½ä»¤è¡Œä»£ç†</p>
<p><code>kubectl proxy</code>æ¥å¯åŠ¨dashboardçš„è®¿é—®ã€‚ç°åœ¨å°±å¯ä»¥é€šè¿‡<code>http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</code>æ¥è®¿é—®Dashboardäº†ï¼Œ UIåªèƒ½é€šè¿‡æ‰§è¡Œè¿™æ¡å‘½ä»¤çš„æœºå™¨è®¿é—®ï¼Œå¦‚æœæ˜¯è¿œç¨‹æœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡ç«¯å£è½¬å‘çš„æ–¹å¼æ¥åœ¨æœ¬æœºç”µè„‘è¿›è¡Œè®¿é—®ã€‚</p>
</li>
<li>
<p>è®¿é—®UI</p>
<p><img src="https://github.com/kubernetes/dashboard/raw/master/docs/images/signin.png" alt=""></p>
<p>æŠŠç¬¬äºŒæ­¥å¾—åˆ°çš„Tokenè´´è¿›æ¥ç™»å½•å°±å¯ä»¥äº†ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241117935.png" alt=""></p>
<p>æ­å–œä½ å·²ç»å®ŒæˆDashboardçš„éƒ¨ç½²è®¿é—®ã€‚</p>
</li>
</ol>
</li>
</ol>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>Kubernetesçš„Topå’ŒDashboardåŠŸèƒ½ä¸ºç”¨æˆ·æä¾›äº†å®æ—¶ç›‘æ§å’Œå¯è§†åŒ–ç®¡ç†å®¹å™¨é›†ç¾¤çš„èƒ½åŠ›ã€‚TopåŠŸèƒ½å¸®åŠ©ç”¨æˆ·äº†è§£èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œè¿›è¡Œèµ„æºè°ƒä¼˜ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§ã€‚DashboardåŠŸèƒ½æä¾›äº†é›†ç¾¤çš„æ¦‚è§ˆå’Œèµ„æºç®¡ç†åŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯¹é›†ç¾¤è¿›è¡Œå¯è§†åŒ–æ“ä½œå’Œç®¡ç†ã€‚é€šè¿‡å……åˆ†åˆ©ç”¨Kubernetesçš„Topå’ŒDashboardåŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æ›´å¥½åœ°ç†è§£å’Œç®¡ç†è‡ªå·±çš„å®¹å™¨é›†ç¾¤ï¼Œæé«˜å·¥ä½œæ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚</p>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202309241117935.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[åˆè¯†k8så’ŒåŠ¨æ‰‹å®è·µ]]></title>
            <link>https://lpdswing.github.io//booklet/k8s/åˆè¯†k8så’ŒåŠ¨æ‰‹å®è·µ.html</link>
            <guid>https://lpdswing.github.io//booklet/k8s/åˆè¯†k8så’ŒåŠ¨æ‰‹å®è·µ.html</guid>
            <pubDate>Sun, 24 Sep 2023 02:28:07 GMT</pubDate>
            <description><![CDATA[
## ä»€ä¹ˆæ˜¯Kubernetes

Kubernetes æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œç”¨äºå®¹å™¨åŒ–åº”ç”¨ç¨‹åºç¼–æ’ï¼Œç®¡ç†çš„å¹³å°ã€‚Kubernetes å»ºç«‹åœ¨ [Google å¤§è§„æ¨¡è¿è¡Œç”Ÿäº§å·¥ä½œè´Ÿè½½åå‡ å¹´ç»éªŒ](https://research.google/pubs/pub43438)çš„åŸºç¡€ä¸Šï¼Œ ç»“åˆäº†ç¤¾åŒºä¸­æœ€ä¼˜ç§€çš„æƒ³æ³•å’Œå®è·µã€‚ç”±Googleäº2014å¹´å¼€æºå‡ºæ¥ï¼Œç›®å‰åœ¨å›½å†…å¤–å¤§å¤§å°å°çš„å…¬å¸éƒ½å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚

**Kubernetes** è¿™ä¸ªåå­—æºäºå¸Œè…Šè¯­ï¼Œæ„ä¸ºâ€œèˆµæ‰‹â€æˆ–â€œé£è¡Œå‘˜â€ã€‚k8s è¿™ä¸ªç¼©å†™æ˜¯å› ä¸º k å’Œ s ä¹‹é—´æœ‰å…«ä¸ªå­—ç¬¦çš„å…³ç³»ã€‚åé¢éƒ½ç”¨ç®€ç§°k8sã€‚

k8s å¯æ”¯æŒå…¬æœ‰äº‘ï¼Œç§æœ‰äº‘åŠæ··åˆäº‘ç­‰ï¼Œå…·å¤‡è‰¯å¥½çš„å¯ç§»æ¤æ€§ã€‚æˆ‘ä»¬å¯ç›´æ¥ä½¿ç”¨å®ƒæˆ–åœ¨å…¶ä¹‹ä¸Šæ„å»ºè‡ªå·±çš„å®¹å™¨/äº‘å¹³å°ï¼Œä»¥è¾¾åˆ°å¿«é€Ÿéƒ¨ç½²ï¼Œå¿«é€Ÿæ‰©å±•ï¼ŒåŠä¼˜åŒ–èµ„æºä½¿ç”¨ç­‰ã€‚å®ƒè‡´åŠ›äºæä¾›é€šç”¨æ¥å£ç±»ä¼¼ CNI( Container Network Interface ), CSI(Container Storage Interface), CRI(Container Runtime Interface)ç­‰è§„èŒƒï¼Œä»¥ä¾¿æœ‰æ›´å¤šå¯èƒ½, è®©æ›´å¤šçš„å‚å•†å…±åŒåŠ å…¥å…¶ç”Ÿæ€ ä½“ç³»å†…ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦k8s

ä¸è®ºæ˜¯å‰ç«¯ï¼Œåç«¯ï¼Œæˆ–è€…è¿ç»´äººå‘˜ï¼Œå¯èƒ½éƒ½é‡åˆ°è¿‡nodeå®‰è£…ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ŒæœåŠ¡å™¨å’Œæœ¬åœ°ç¯å¢ƒä¸ä¸€è‡´ï¼Œé¢‘ç¹éƒ¨ç½²ç¯å¢ƒä¸­é—´å‡ºç°å„ç§å®‰è£…ä¸äº†ç­‰é—®é¢˜ã€‚å¯¹äºè¿™äº›é—®é¢˜ï¼Œç›®å‰æ¥çœ‹æœ€å¥½çš„è§£å†³åŠæ³•æ˜¯æ ‡å‡†åŒ–ï¼Œå®¹å™¨åŒ–ã€‚ç›®å‰ç”¨çš„æœ€å¤šçš„æ˜¯Dockerï¼Œé€šè¿‡Dockerfileå¯¹ç¯å¢ƒè¿›è¡Œæè¿°ï¼Œå¯¹é•œåƒè¿›è¡Œäº¤ä»˜ï¼Œä½¿ç”¨æ—¶ä¸å†å…³æ³¨ç¯å¢ƒä¸ä¸€è‡´çš„é—®é¢˜ã€‚

ä½œä¸ºä¸€ä¸ªæŠ€æœ¯äººå‘˜ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹æ•´ä½“çš„ä½“ç³»æ¶æ„æœ‰æ‰€äº†è§£, æŒæ¡æ›´å¤š çš„æŠ€èƒ½ï¼Œäº†è§£è½¯ä»¶çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å¼€å‘ï¼Œäº¤ä»˜ï¼Œéƒ¨ç½²ï¼Œä»¥åŠå½“ æµé‡å˜å¤§æ—¶çš„æ‰©å®¹ç­‰ã€‚

åœ¨å®¹å™¨ç¼–æ’é¢†åŸŸç›®å‰ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯k8sï¼Œdocker-composeï¼Œswarmç­‰ã€‚

## åŸºç¡€æ¦‚å¿µ

### Node

æˆ‘ä»¬é¡¹ç›®ä¸­è·‘æœåŠ¡çš„ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºï¼Œå¯¹k8sæ¥è¯´è¿™å°æœåŠ¡å™¨å°±æ˜¯k8sä¸­çš„Nodeã€‚

- NodeçŠ¶æ€

  æ‹¿åˆ°æœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæŸ¥çœ‹ä¸€ä¸‹æœåŠ¡å™¨çš„åŸºæœ¬é…ç½®å’Œä¿¡æ¯ï¼Œå¯¹åŠ å…¥k8sä¸­çš„Nodeä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦å…ˆæ£€æŸ¥å®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸ŠæŠ¥åˆ°é›†ç¾¤ã€‚

- åœ°å€

  å†…éƒ¨ipåœ¨é›†ç¾¤å†…è®¿é—®ï¼Œå¤–éƒ¨ipåœ¨é›†ç¾¤å¤–è®¿é—®ï¼Œåœ¨k8sä¸­æ¯ä¸ªNodeçš„ä¸»æœºåä¼šè¢«è®°å½•ä¸‹æ¥ã€‚ç±»ä¼¼ä¸»æœºä¸­ç”¨hostnameå‘½ä»¤è·å–çš„ä¸»æœºåã€‚

- ä¿¡æ¯

  ç±»ä¼¼åœ¨ä¸»æœºä¸­cat /etc/issueã€cat /etc/os-releaseç­‰æ–¹æ³•æŸ¥çœ‹çš„ä¿¡æ¯ï¼Œk8sä¹Ÿä¼šæŠŠNodeçš„åŸºç¡€ä¿¡æ¯è®°å½•ä¸‹æ¥ã€‚

- å®¹é‡

  ç»Ÿè®¡CPUã€å†…å­˜ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿äºè®¡ç®—Nodeä¸­å¯ç”¨Podæ•°é‡ã€‚

- æ¡ä»¶

  å¦‚æœä¸Šè¿°ä¿¡æ¯éƒ½æ»¡è¶³æˆ‘ä»¬éœ€æ±‚ï¼Œåœ¨é›†ç¾¤å†…è¯¥Nodeè¢«æ ‡è®°ä¸ºReadyï¼Œè¿™æ ·æˆ‘ä»¬çš„æœåŠ¡å™¨å°±å®Œæˆäº†äº¤ä»˜ã€‚

### Deploymentå’ŒPod

å‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦ç”¨Nginxå¯¹ä¸€ä¸ªé™æ€htmlæä¾›è®¿é—®ï¼Œå¯¹k8sæ¥è¯´ï¼Œèƒ½æä¾›htmlçš„è®¿é—®æœåŠ¡å°±æ˜¯deploymentï¼Œå¯¹Nginxå’Œhtmlçš„ç»„åˆå¯ä»¥ç†è§£ä¸ºPodï¼Œä½œä¸ºæœ€å°çš„è°ƒåº¦å•å…ƒã€‚

### Container Runtime

è™½ç„¶ç›®å‰åªæä¾›äº†ä¸€ä¸ªé™æ€ç½‘é¡µçš„è®¿é—®ï¼Œä½†æ˜¯ä¸ºäº†é¿å…æ•…éšœï¼Œæˆ‘ä»¬å†ç”³è¯·2ä¸ªæœåŠ¡å™¨ï¼Œå¯¹åŸæ¥çš„æœåŠ¡è¿›è¡Œæ‰©å®¹ï¼Œå¢åŠ ä¸€å°æœåŠ¡å™¨æˆ‘ä»¬åšçš„æ˜¯å®Œå…¨é‡å¤çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯é€‰æ–¹æ¡ˆæœ‰kvmï¼ŒDockerç­‰æŠ€æœ¯ï¼Œå¯¹äºk8sæ¥è¯´ï¼ŒDockerå°±æ˜¯container Runtimeã€‚

## æœ¬åœ°æ­å»ºk8sé›†ç¾¤

### æ–¹æ¡ˆé€‰æ‹©

- [kind](https://github.com/kubernetes-sigs/kind)(Kubernetes in Docker) 
- minikube(æ˜¯ K8S å®˜æ–¹ä¸ºäº†å¼€å‘è€…èƒ½åœ¨ä¸ªäººç”µè„‘ä¸Šè¿è¡Œ K8S è€Œæä¾› çš„ä¸€å¥—å·¥å…·ã€‚å®ç°ä¸Šæ˜¯é€šè¿‡ Go è¯­è¨€ç¼–å†™ï¼Œé€šè¿‡è°ƒç”¨è™šæ‹ŸåŒ–ç®¡ç†ç¨‹ åºï¼Œåˆ›å»ºå‡ºä¸€ä¸ªè¿è¡Œåœ¨è™šæ‹Ÿæœºå†…çš„å•èŠ‚ç‚¹é›†ç¾¤ã€‚)
- Docker desktop
- Kubeadm(å®˜æ–¹æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)

### åˆ›å»ºé›†ç¾¤

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬é€‰æ‹©Docker desktopé»˜è®¤çš„k8såˆ›å»ºæ–¹æ¡ˆã€‚é¦–å…ˆéœ€è¦å®‰è£…å¥½Dockerç¯å¢ƒï¼Œä¸å†èµ˜è¿°ã€‚

å®‰è£…å¥½kubectlï¼Œæ–¹ä¾¿å¯¹æ­å»ºå¥½çš„é›†ç¾¤è¿›è¡Œç®¡ç†ã€‚kubectl ç‰ˆæœ¬å’Œé›†ç¾¤ä¹‹é—´çš„å·®å¼‚å¿…é¡»åœ¨ä¸€ä¸ªå°ç‰ˆæœ¬å·ä¹‹å†…ã€‚ ä¾‹å¦‚ï¼šv1.27 ç‰ˆæœ¬çš„å®¢æˆ·ç«¯èƒ½ä¸ v1.26ã€ v1.27 å’Œ v1.28 ç‰ˆæœ¬çš„æ§åˆ¶é¢é€šä¿¡ã€‚ ç”¨æœ€æ–°å…¼å®¹ç‰ˆæœ¬çš„ kubectl æœ‰åŠ©äºé¿å…ä¸å¯é¢„è§çš„é—®é¢˜ã€‚

![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306061724997.png)

éªŒè¯é›†ç¾¤æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼Œå‡ºç°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºæ­£å¸¸å¯åŠ¨ã€‚

![](https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306061737059.png)

## æ­å»ºä¸€ä¸ªç”Ÿæˆç¯å¢ƒå¯ä»¥çš„é›†ç¾¤

å¤§å¤šæ•°äººçš„éœ€æ±‚å¹¶ä¸åªæ˜¯åŒ…å«ä¸€ä¸ªè™šæ‹ŸæœºèŠ‚ç‚¹çš„æœ¬åœ°æµ‹è¯•é›†ç¾¤ï¼Œè€Œæ˜¯ ä¸€ä¸ªå¯åœ¨æœåŠ¡å™¨è¿è¡Œï¼Œå¯è‡ªè¡Œæ‰©/ç¼©å®¹ï¼Œå…·å¤‡å…¨éƒ¨åŠŸèƒ½çš„ï¼Œè¾¾åˆ°ç”Ÿäº§ å¯ç”¨çš„é›†ç¾¤ã€‚æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ª Kubernetes å®˜æ–¹æ¨èçš„æ–¹æ¡ˆ kubeadm è¿›è¡Œæ­å»ºã€‚

kubeadm æ˜¯ Kubernetes å®˜æ–¹æä¾›çš„ä¸€ä¸ª CLI å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ æ­å»ºä¸€å¥—ç¬¦åˆå®˜æ–¹æœ€ä½³å®è·µçš„æœ€å°åŒ–å¯ç”¨é›†ç¾¤ã€‚

å®‰è£…kubeadm([å®‰è£… kubeadm | Kubernetes](https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/install-kubeadm/))

æ”¯æŒçš„Dockerçš„æœ€æ–°ç‰ˆæœ¬ä¸º20.10.17ã€‚

å½“å‰ä½¿ç”¨k8sæœ€æ–°ç‰ˆæœ¬ä¸º1.27.2ã€‚

### å‡†å¤‡

- ç¦ç”¨swap
  - é€šè¿‡`sudo swapoff -a`ä¸´æ—¶å…³é—­swap
  
  - ```swift
    sudo vim /etc/fstab     æ³¨é‡Šswapç›¸å…³
    ```
  
- `sudo cat /sys/class/dmi/id/product_uuid`å¯æŸ¥çœ‹æœºå™¨çš„ product_uuid è¯·ç¡®ä¿è¦æ­å»ºé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹çš„ product_uuid å‡ä¸ç›¸åŒã€‚

-  `sudo ufw disable `ç¦ç”¨é˜²ç«å¢™ã€‚

- é…ç½®ä¸»æœºhostsã€‚

  ```shell
  # sudo vim /etc/hosts
  10.211.55.3 k8s-master
  ```

- å®‰è£…Docker

  ```shell
   sudo apt update
   sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common
   # å¯¼å…¥æºä»“åº“çš„ GPG key
   curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
   # æ·»åŠ Dockerè½¯ä»¶æº
   sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
   sudo apt update
   # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨Dockerç‰ˆæœ¬
   apt list -a docker-ce
   sudo apt install docker-ce=5:20.10.17~3-0~ubuntu-jammy docker-ce-cli=5:20.10.17~3-0~ubuntu-jammy containerd.io
   sudo systemctl status docker
   # é”å®šç‰ˆæœ¬
   sudo apt-mark hold docker-ce
   sudo vi /etc/docker/daemon.json
   # è¾“å…¥ä¸‹é¢json
   {
    "registry-mirrors": [
      "https://dockerhub.azk8s.cn",
      "https://reg-mirror.qiniu.com",
      "https://quay-mirror.qiniu.com"
    ],
    "exec-opts": [ "native.cgroupdriver=systemd" ] 
  }
  systemctl daemon-reload
  systemctl restart docker
  #æŸ¥çœ‹ä¿®æ”¹åçš„ docker cgroup çŠ¶æ€
  docker info | grep Cgroup
  # å½“å‰ç”¨æˆ·åŠ å…¥Dockerç»„
  sudo usermod -aG docker $USER
  ```

  

- å®‰è£…kubeadmï¼Œkubectlï¼Œkubeletï¼Œå®‰è£…æ­¥éª¤å‚è€ƒä¸Šé¢é“¾æ¥ã€‚`apt-cache madison kubeadm|head`æŸ¥çœ‹ç‰ˆæœ¬

- `sudo netstat -ntlp |grep -E '6443|23[79,80]|1025[0,1,2]' `æ£€æŸ¥æ˜¯å¦æœ‰ç«¯å£å ç”¨ï¼Œå¦‚æœæœ‰å°±æ‰‹åŠ¨é‡Šæ”¾ã€‚

### é…ç½®

ä¸ºäº†ä¿è¯ç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬å¢åŠ kubeletçš„systemdé…ç½®ï¼Œå¯¹æœåŠ¡è¿›è¡Œç®¡ç†ã€‚

```shell
cat <<EOF > /etc/systemd/system/kubelet.service
[Unit]
Description=kubelet: The Kubernetes Node Agent
Documentation=https://kubernetes.io/docs/home/
Wants=network-online.target
After=network-online.target

[Service]
ExecStart=/usr/bin/kubelet
Restart=always
StartLimitInterval=0
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF
```

```shell
mkdir -p /etc/systemd/system/kubelet.service.d
# è®¾ç½®kubeletå¼€æœºè‡ªå¯
systemctl enable kubelet

```

é…ç½®containerdï¼Œå¸¸è§çš„CRIæœ‰ï¼šcontainerdã€CRI-Oã€Docker Engineã€Mirantis Container Runtimeã€‚containerdéœ€è¦å’Œkubeletä½¿ç”¨ä¸€æ ·çš„systemdã€‚

```shell
containerd config default > /etc/containerd/config.toml
vim /etc/containerd/config.toml

SystemdCgroup = false æ”¹ä¸º SystemdCgroup = true
#é‡æ–°åŠ è½½å¹¶é‡å¯containerd
systemctl daemon-reload && systemctl restart containerd
```



### å¯åŠ¨

#### å®‰è£…crictl(ç›®å‰aptå®‰è£…å·²ç»å¸¦äº†ï¼Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…äº†)

- `crictl` æ˜¯ `kubelet` CRI (Container Runtime Interface) çš„ CLI
- `critest` æ˜¯ `kubelet` CRI çš„æµ‹è¯•å·¥å…·é›†ã€‚

```shell
# install crictl
VERSION="v1.26.0"
wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/crictl-$VERSION-linux-amd64.tar.gz
sudo tar zxvf crictl-$VERSION-linux-amd64.tar.gz -C /usr/local/bin
rm -f crictl-$VERSION-linux-amd64.tar.gz
# install critest
VERSION="v1.26.0"
wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/critest-$VERSION-linux-amd64.tar.gz
sudo tar zxvf critest-$VERSION-linux-amd64.tar.gz -C /usr/local/bin
rm -f critest-$VERSION-linux-amd64.tar.gz
```

#### å®‰è£…socat

- `socat` æ˜¯ä¸€æ¬¾å¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å»ºç«‹ä¸¤ä¸ªåŒå‘å­—èŠ‚æµå¹¶åœ¨å…¶ä¸­ä¼ è¾“æ•°æ®ã€‚å®ƒå…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯å¯ä»¥å®ç°ç«¯å£è½¬å‘ã€‚
- ubuntuä¸‹ä½¿ç”¨`sudo apt-get install -y socat`è¿›è¡Œå®‰è£…ã€‚

#### åˆå§‹åŒ–é›†ç¾¤

```bash
kubeadm config print init-defaults > kubeadm.yaml
# é…ç½®æ–‡ä»¶å¦‚ä¸‹
apiVersion: kubeadm.k8s.io/v1beta3
bootstrapTokens:
- groups:
  - system:bootstrappers:kubeadm:default-node-token
  token: abcdef.0123456789abcdef
  ttl: 24h0m0s
  usages:
  - signing
  - authentication
kind: InitConfiguration
localAPIEndpoint:
  advertiseAddress: 10.211.55.3
  bindPort: 6443
nodeRegistration:
  criSocket: unix:///var/run/containerd/containerd.sock
  imagePullPolicy: IfNotPresent
  name: k8s-master
  taints: null
]]></description>
            <content:encoded><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯kubernetes" tabindex="-1">ä»€ä¹ˆæ˜¯Kubernetes <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯kubernetes" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯Kubernetes&quot;">&ZeroWidthSpace;</a></h2>
<p>Kubernetes æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œç”¨äºå®¹å™¨åŒ–åº”ç”¨ç¨‹åºç¼–æ’ï¼Œç®¡ç†çš„å¹³å°ã€‚Kubernetes å»ºç«‹åœ¨ <a href="https://research.google/pubs/pub43438" target="_blank" rel="noreferrer">Google å¤§è§„æ¨¡è¿è¡Œç”Ÿäº§å·¥ä½œè´Ÿè½½åå‡ å¹´ç»éªŒ</a>çš„åŸºç¡€ä¸Šï¼Œ ç»“åˆäº†ç¤¾åŒºä¸­æœ€ä¼˜ç§€çš„æƒ³æ³•å’Œå®è·µã€‚ç”±Googleäº2014å¹´å¼€æºå‡ºæ¥ï¼Œç›®å‰åœ¨å›½å†…å¤–å¤§å¤§å°å°çš„å…¬å¸éƒ½å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚</p>
<p><strong>Kubernetes</strong> è¿™ä¸ªåå­—æºäºå¸Œè…Šè¯­ï¼Œæ„ä¸ºâ€œèˆµæ‰‹â€æˆ–â€œé£è¡Œå‘˜â€ã€‚k8s è¿™ä¸ªç¼©å†™æ˜¯å› ä¸º k å’Œ s ä¹‹é—´æœ‰å…«ä¸ªå­—ç¬¦çš„å…³ç³»ã€‚åé¢éƒ½ç”¨ç®€ç§°k8sã€‚</p>
<p>k8s å¯æ”¯æŒå…¬æœ‰äº‘ï¼Œç§æœ‰äº‘åŠæ··åˆäº‘ç­‰ï¼Œå…·å¤‡è‰¯å¥½çš„å¯ç§»æ¤æ€§ã€‚æˆ‘ä»¬å¯ç›´æ¥ä½¿ç”¨å®ƒæˆ–åœ¨å…¶ä¹‹ä¸Šæ„å»ºè‡ªå·±çš„å®¹å™¨/äº‘å¹³å°ï¼Œä»¥è¾¾åˆ°å¿«é€Ÿéƒ¨ç½²ï¼Œå¿«é€Ÿæ‰©å±•ï¼ŒåŠä¼˜åŒ–èµ„æºä½¿ç”¨ç­‰ã€‚å®ƒè‡´åŠ›äºæä¾›é€šç”¨æ¥å£ç±»ä¼¼ CNI( Container Network Interface ), CSI(Container Storage Interface), CRI(Container Runtime Interface)ç­‰è§„èŒƒï¼Œä»¥ä¾¿æœ‰æ›´å¤šå¯èƒ½, è®©æ›´å¤šçš„å‚å•†å…±åŒåŠ å…¥å…¶ç”Ÿæ€ ä½“ç³»å†…ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦k8s" tabindex="-1">ä¸ºä»€ä¹ˆéœ€è¦k8s <a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦k8s" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆéœ€è¦k8s&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸è®ºæ˜¯å‰ç«¯ï¼Œåç«¯ï¼Œæˆ–è€…è¿ç»´äººå‘˜ï¼Œå¯èƒ½éƒ½é‡åˆ°è¿‡nodeå®‰è£…ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ŒæœåŠ¡å™¨å’Œæœ¬åœ°ç¯å¢ƒä¸ä¸€è‡´ï¼Œé¢‘ç¹éƒ¨ç½²ç¯å¢ƒä¸­é—´å‡ºç°å„ç§å®‰è£…ä¸äº†ç­‰é—®é¢˜ã€‚å¯¹äºè¿™äº›é—®é¢˜ï¼Œç›®å‰æ¥çœ‹æœ€å¥½çš„è§£å†³åŠæ³•æ˜¯æ ‡å‡†åŒ–ï¼Œå®¹å™¨åŒ–ã€‚ç›®å‰ç”¨çš„æœ€å¤šçš„æ˜¯Dockerï¼Œé€šè¿‡Dockerfileå¯¹ç¯å¢ƒè¿›è¡Œæè¿°ï¼Œå¯¹é•œåƒè¿›è¡Œäº¤ä»˜ï¼Œä½¿ç”¨æ—¶ä¸å†å…³æ³¨ç¯å¢ƒä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªæŠ€æœ¯äººå‘˜ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹æ•´ä½“çš„ä½“ç³»æ¶æ„æœ‰æ‰€äº†è§£, æŒæ¡æ›´å¤š çš„æŠ€èƒ½ï¼Œäº†è§£è½¯ä»¶çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å¼€å‘ï¼Œäº¤ä»˜ï¼Œéƒ¨ç½²ï¼Œä»¥åŠå½“ æµé‡å˜å¤§æ—¶çš„æ‰©å®¹ç­‰ã€‚</p>
<p>åœ¨å®¹å™¨ç¼–æ’é¢†åŸŸç›®å‰ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯k8sï¼Œdocker-composeï¼Œswarmç­‰ã€‚</p>
<h2 id="åŸºç¡€æ¦‚å¿µ" tabindex="-1">åŸºç¡€æ¦‚å¿µ <a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ" aria-label="Permalink to &quot;åŸºç¡€æ¦‚å¿µ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="node" tabindex="-1">Node <a class="header-anchor" href="#node" aria-label="Permalink to &quot;Node&quot;">&ZeroWidthSpace;</a></h3>
<p>æˆ‘ä»¬é¡¹ç›®ä¸­è·‘æœåŠ¡çš„ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºï¼Œå¯¹k8sæ¥è¯´è¿™å°æœåŠ¡å™¨å°±æ˜¯k8sä¸­çš„Nodeã€‚</p>
<ul>
<li>
<p>NodeçŠ¶æ€</p>
<p>æ‹¿åˆ°æœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæŸ¥çœ‹ä¸€ä¸‹æœåŠ¡å™¨çš„åŸºæœ¬é…ç½®å’Œä¿¡æ¯ï¼Œå¯¹åŠ å…¥k8sä¸­çš„Nodeä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦å…ˆæ£€æŸ¥å®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸ŠæŠ¥åˆ°é›†ç¾¤ã€‚</p>
</li>
<li>
<p>åœ°å€</p>
<p>å†…éƒ¨ipåœ¨é›†ç¾¤å†…è®¿é—®ï¼Œå¤–éƒ¨ipåœ¨é›†ç¾¤å¤–è®¿é—®ï¼Œåœ¨k8sä¸­æ¯ä¸ªNodeçš„ä¸»æœºåä¼šè¢«è®°å½•ä¸‹æ¥ã€‚ç±»ä¼¼ä¸»æœºä¸­ç”¨hostnameå‘½ä»¤è·å–çš„ä¸»æœºåã€‚</p>
</li>
<li>
<p>ä¿¡æ¯</p>
<p>ç±»ä¼¼åœ¨ä¸»æœºä¸­cat /etc/issueã€cat /etc/os-releaseç­‰æ–¹æ³•æŸ¥çœ‹çš„ä¿¡æ¯ï¼Œk8sä¹Ÿä¼šæŠŠNodeçš„åŸºç¡€ä¿¡æ¯è®°å½•ä¸‹æ¥ã€‚</p>
</li>
<li>
<p>å®¹é‡</p>
<p>ç»Ÿè®¡CPUã€å†…å­˜ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿äºè®¡ç®—Nodeä¸­å¯ç”¨Podæ•°é‡ã€‚</p>
</li>
<li>
<p>æ¡ä»¶</p>
<p>å¦‚æœä¸Šè¿°ä¿¡æ¯éƒ½æ»¡è¶³æˆ‘ä»¬éœ€æ±‚ï¼Œåœ¨é›†ç¾¤å†…è¯¥Nodeè¢«æ ‡è®°ä¸ºReadyï¼Œè¿™æ ·æˆ‘ä»¬çš„æœåŠ¡å™¨å°±å®Œæˆäº†äº¤ä»˜ã€‚</p>
</li>
</ul>
<h3 id="deploymentå’Œpod" tabindex="-1">Deploymentå’ŒPod <a class="header-anchor" href="#deploymentå’Œpod" aria-label="Permalink to &quot;Deploymentå’ŒPod&quot;">&ZeroWidthSpace;</a></h3>
<p>å‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦ç”¨Nginxå¯¹ä¸€ä¸ªé™æ€htmlæä¾›è®¿é—®ï¼Œå¯¹k8sæ¥è¯´ï¼Œèƒ½æä¾›htmlçš„è®¿é—®æœåŠ¡å°±æ˜¯deploymentï¼Œå¯¹Nginxå’Œhtmlçš„ç»„åˆå¯ä»¥ç†è§£ä¸ºPodï¼Œä½œä¸ºæœ€å°çš„è°ƒåº¦å•å…ƒã€‚</p>
<h3 id="container-runtime" tabindex="-1">Container Runtime <a class="header-anchor" href="#container-runtime" aria-label="Permalink to &quot;Container Runtime&quot;">&ZeroWidthSpace;</a></h3>
<p>è™½ç„¶ç›®å‰åªæä¾›äº†ä¸€ä¸ªé™æ€ç½‘é¡µçš„è®¿é—®ï¼Œä½†æ˜¯ä¸ºäº†é¿å…æ•…éšœï¼Œæˆ‘ä»¬å†ç”³è¯·2ä¸ªæœåŠ¡å™¨ï¼Œå¯¹åŸæ¥çš„æœåŠ¡è¿›è¡Œæ‰©å®¹ï¼Œå¢åŠ ä¸€å°æœåŠ¡å™¨æˆ‘ä»¬åšçš„æ˜¯å®Œå…¨é‡å¤çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯é€‰æ–¹æ¡ˆæœ‰kvmï¼ŒDockerç­‰æŠ€æœ¯ï¼Œå¯¹äºk8sæ¥è¯´ï¼ŒDockerå°±æ˜¯container Runtimeã€‚</p>
<h2 id="æœ¬åœ°æ­å»ºk8sé›†ç¾¤" tabindex="-1">æœ¬åœ°æ­å»ºk8sé›†ç¾¤ <a class="header-anchor" href="#æœ¬åœ°æ­å»ºk8sé›†ç¾¤" aria-label="Permalink to &quot;æœ¬åœ°æ­å»ºk8sé›†ç¾¤&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ–¹æ¡ˆé€‰æ‹©" tabindex="-1">æ–¹æ¡ˆé€‰æ‹© <a class="header-anchor" href="#æ–¹æ¡ˆé€‰æ‹©" aria-label="Permalink to &quot;æ–¹æ¡ˆé€‰æ‹©&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><a href="https://github.com/kubernetes-sigs/kind" target="_blank" rel="noreferrer">kind</a>(Kubernetes in Docker)</li>
<li>minikube(æ˜¯ K8S å®˜æ–¹ä¸ºäº†å¼€å‘è€…èƒ½åœ¨ä¸ªäººç”µè„‘ä¸Šè¿è¡Œ K8S è€Œæä¾› çš„ä¸€å¥—å·¥å…·ã€‚å®ç°ä¸Šæ˜¯é€šè¿‡ Go è¯­è¨€ç¼–å†™ï¼Œé€šè¿‡è°ƒç”¨è™šæ‹ŸåŒ–ç®¡ç†ç¨‹ åºï¼Œåˆ›å»ºå‡ºä¸€ä¸ªè¿è¡Œåœ¨è™šæ‹Ÿæœºå†…çš„å•èŠ‚ç‚¹é›†ç¾¤ã€‚)</li>
<li>Docker desktop</li>
<li>Kubeadm(å®˜æ–¹æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)</li>
</ul>
<h3 id="åˆ›å»ºé›†ç¾¤" tabindex="-1">åˆ›å»ºé›†ç¾¤ <a class="header-anchor" href="#åˆ›å»ºé›†ç¾¤" aria-label="Permalink to &quot;åˆ›å»ºé›†ç¾¤&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬é€‰æ‹©Docker desktopé»˜è®¤çš„k8såˆ›å»ºæ–¹æ¡ˆã€‚é¦–å…ˆéœ€è¦å®‰è£…å¥½Dockerç¯å¢ƒï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p>å®‰è£…å¥½kubectlï¼Œæ–¹ä¾¿å¯¹æ­å»ºå¥½çš„é›†ç¾¤è¿›è¡Œç®¡ç†ã€‚kubectl ç‰ˆæœ¬å’Œé›†ç¾¤ä¹‹é—´çš„å·®å¼‚å¿…é¡»åœ¨ä¸€ä¸ªå°ç‰ˆæœ¬å·ä¹‹å†…ã€‚ ä¾‹å¦‚ï¼šv1.27 ç‰ˆæœ¬çš„å®¢æˆ·ç«¯èƒ½ä¸ v1.26ã€ v1.27 å’Œ v1.28 ç‰ˆæœ¬çš„æ§åˆ¶é¢é€šä¿¡ã€‚ ç”¨æœ€æ–°å…¼å®¹ç‰ˆæœ¬çš„ kubectl æœ‰åŠ©äºé¿å…ä¸å¯é¢„è§çš„é—®é¢˜ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306061724997.png" alt=""></p>
<p>éªŒè¯é›†ç¾¤æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼Œå‡ºç°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºæ­£å¸¸å¯åŠ¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306061737059.png" alt=""></p>
<h2 id="æ­å»ºä¸€ä¸ªç”Ÿæˆç¯å¢ƒå¯ä»¥çš„é›†ç¾¤" tabindex="-1">æ­å»ºä¸€ä¸ªç”Ÿæˆç¯å¢ƒå¯ä»¥çš„é›†ç¾¤ <a class="header-anchor" href="#æ­å»ºä¸€ä¸ªç”Ÿæˆç¯å¢ƒå¯ä»¥çš„é›†ç¾¤" aria-label="Permalink to &quot;æ­å»ºä¸€ä¸ªç”Ÿæˆç¯å¢ƒå¯ä»¥çš„é›†ç¾¤&quot;">&ZeroWidthSpace;</a></h2>
<p>å¤§å¤šæ•°äººçš„éœ€æ±‚å¹¶ä¸åªæ˜¯åŒ…å«ä¸€ä¸ªè™šæ‹ŸæœºèŠ‚ç‚¹çš„æœ¬åœ°æµ‹è¯•é›†ç¾¤ï¼Œè€Œæ˜¯ ä¸€ä¸ªå¯åœ¨æœåŠ¡å™¨è¿è¡Œï¼Œå¯è‡ªè¡Œæ‰©/ç¼©å®¹ï¼Œå…·å¤‡å…¨éƒ¨åŠŸèƒ½çš„ï¼Œè¾¾åˆ°ç”Ÿäº§ å¯ç”¨çš„é›†ç¾¤ã€‚æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ª Kubernetes å®˜æ–¹æ¨èçš„æ–¹æ¡ˆ kubeadm è¿›è¡Œæ­å»ºã€‚</p>
<p>kubeadm æ˜¯ Kubernetes å®˜æ–¹æä¾›çš„ä¸€ä¸ª CLI å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ æ­å»ºä¸€å¥—ç¬¦åˆå®˜æ–¹æœ€ä½³å®è·µçš„æœ€å°åŒ–å¯ç”¨é›†ç¾¤ã€‚</p>
<p>å®‰è£…kubeadm(<a href="https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noreferrer">å®‰è£… kubeadm | Kubernetes</a>)</p>
<p>æ”¯æŒçš„Dockerçš„æœ€æ–°ç‰ˆæœ¬ä¸º20.10.17ã€‚</p>
<p>å½“å‰ä½¿ç”¨k8sæœ€æ–°ç‰ˆæœ¬ä¸º1.27.2ã€‚</p>
<h3 id="å‡†å¤‡" tabindex="-1">å‡†å¤‡ <a class="header-anchor" href="#å‡†å¤‡" aria-label="Permalink to &quot;å‡†å¤‡&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>
<p>ç¦ç”¨swap</p>
<ul>
<li>
<p>é€šè¿‡<code>sudo swapoff -a</code>ä¸´æ—¶å…³é—­swap</p>
</li>
<li>
<div class="language-swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo vim </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fstab     æ³¨é‡Šswapç›¸å…³</span></span></code></pre>
</div></li>
</ul>
</li>
<li>
<p><code>sudo cat /sys/class/dmi/id/product_uuid</code>å¯æŸ¥çœ‹æœºå™¨çš„ product_uuid è¯·ç¡®ä¿è¦æ­å»ºé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹çš„ product_uuid å‡ä¸ç›¸åŒã€‚</p>
</li>
<li>
<p><code>sudo ufw disable </code>ç¦ç”¨é˜²ç«å¢™ã€‚</p>
</li>
<li>
<p>é…ç½®ä¸»æœºhostsã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># sudo vim /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">10.211.55.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> k8s-master</span></span></code></pre>
</div></li>
<li>
<p>å®‰è£…Docker</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt-transport-https</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ca-certificates</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> gnupg-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> software-properties-common</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # å¯¼å…¥æºä»“åº“çš„ GPG key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://download.docker.com/linux/ubuntu/gpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> -</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # æ·»åŠ Dockerè½¯ä»¶æº</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add-apt-repository</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) stable"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> update</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨Dockerç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker-ce</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker-ce=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">:20.10.17~3-0~ubuntu-jammy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker-ce-cli=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">:20.10.17~3-0~ubuntu-jammy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> containerd.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # é”å®šç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> hold</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker-ce</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # è¾“å…¥ä¸‹é¢json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  "registry-mirrors"</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    "https://dockerhub.azk8s.cn"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    "https://reg-mirror.qiniu.com"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    "https://quay-mirror.qiniu.com"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  "exec-opts"</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"native.cgroupdriver=systemd"</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#æŸ¥çœ‹ä¿®æ”¹åçš„ docker cgroup çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> Cgroup</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å½“å‰ç”¨æˆ·åŠ å…¥Dockerç»„</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -aG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $USER</span></span></code></pre>
</div></li>
<li>
<p>å®‰è£…kubeadmï¼Œkubectlï¼Œkubeletï¼Œå®‰è£…æ­¥éª¤å‚è€ƒä¸Šé¢é“¾æ¥ã€‚<code>apt-cache madison kubeadm|head</code>æŸ¥çœ‹ç‰ˆæœ¬</p>
</li>
<li>
<p><code>sudo netstat -ntlp |grep -E '6443|23[79,80]|1025[0,1,2]' </code>æ£€æŸ¥æ˜¯å¦æœ‰ç«¯å£å ç”¨ï¼Œå¦‚æœæœ‰å°±æ‰‹åŠ¨é‡Šæ”¾ã€‚</p>
</li>
</ul>
<h3 id="é…ç½®" tabindex="-1">é…ç½® <a class="header-anchor" href="#é…ç½®" aria-label="Permalink to &quot;é…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸ºäº†ä¿è¯ç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬å¢åŠ kubeletçš„systemdé…ç½®ï¼Œå¯¹æœåŠ¡è¿›è¡Œç®¡ç†ã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;&#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /etc/systemd/system/kubelet.service</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[Unit]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Description=kubelet: The Kubernetes Node Agent</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Documentation=https://kubernetes.io/docs/home/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Wants=network-online.target</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">After=network-online.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[Service]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ExecStart=/usr/bin/kubelet</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Restart=always</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">StartLimitInterval=0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">RestartSec=10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[Install]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">WantedBy=multi-user.target</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">EOF</span></span></code></pre>
</div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/systemd/system/kubelet.service.d</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># è®¾ç½®kubeletå¼€æœºè‡ªå¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubelet</span></span></code></pre>
</div><p>é…ç½®containerdï¼Œå¸¸è§çš„CRIæœ‰ï¼šcontainerdã€CRI-Oã€Docker Engineã€Mirantis Container Runtimeã€‚containerdéœ€è¦å’Œkubeletä½¿ç”¨ä¸€æ ·çš„systemdã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/containerd/config.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/containerd/config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SystemdCgroup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> æ”¹ä¸º</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> SystemdCgroup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#é‡æ–°åŠ è½½å¹¶é‡å¯containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> daemon-reload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &#x26;&#x26; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> containerd</span></span></code></pre>
</div><h3 id="å¯åŠ¨" tabindex="-1">å¯åŠ¨ <a class="header-anchor" href="#å¯åŠ¨" aria-label="Permalink to &quot;å¯åŠ¨&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="å®‰è£…crictl-ç›®å‰aptå®‰è£…å·²ç»å¸¦äº†-ä¸éœ€è¦æ‰‹åŠ¨å®‰è£…äº†" tabindex="-1">å®‰è£…crictl(ç›®å‰aptå®‰è£…å·²ç»å¸¦äº†ï¼Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…äº†) <a class="header-anchor" href="#å®‰è£…crictl-ç›®å‰aptå®‰è£…å·²ç»å¸¦äº†-ä¸éœ€è¦æ‰‹åŠ¨å®‰è£…äº†" aria-label="Permalink to &quot;å®‰è£…crictl(ç›®å‰aptå®‰è£…å·²ç»å¸¦äº†ï¼Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…äº†)&quot;">&ZeroWidthSpace;</a></h4>
<ul>
<li><code>crictl</code> æ˜¯ <code>kubelet</code> CRI (Container Runtime Interface) çš„ CLI</li>
<li><code>critest</code> æ˜¯ <code>kubelet</code> CRI çš„æµ‹è¯•å·¥å…·é›†ã€‚</li>
</ul>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># install crictl</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">VERSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"v1.26.0"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://github.com/kubernetes-sigs/cri-tools/releases/download/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/crictl-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">-linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> crictl-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">-linux-amd64.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /usr/local/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> crictl-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">-linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># install critest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">VERSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"v1.26.0"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://github.com/kubernetes-sigs/cri-tools/releases/download/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/critest-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">-linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> critest-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">-linux-amd64.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /usr/local/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> critest-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">-linux-amd64.tar.gz</span></span></code></pre>
</div><h4 id="å®‰è£…socat" tabindex="-1">å®‰è£…socat <a class="header-anchor" href="#å®‰è£…socat" aria-label="Permalink to &quot;å®‰è£…socat&quot;">&ZeroWidthSpace;</a></h4>
<ul>
<li><code>socat</code> æ˜¯ä¸€æ¬¾å¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å»ºç«‹ä¸¤ä¸ªåŒå‘å­—èŠ‚æµå¹¶åœ¨å…¶ä¸­ä¼ è¾“æ•°æ®ã€‚å®ƒå…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯å¯ä»¥å®ç°ç«¯å£è½¬å‘ã€‚</li>
<li>ubuntuä¸‹ä½¿ç”¨<code>sudo apt-get install -y socat</code>è¿›è¡Œå®‰è£…ã€‚</li>
</ul>
<h4 id="åˆå§‹åŒ–é›†ç¾¤" tabindex="-1">åˆå§‹åŒ–é›†ç¾¤ <a class="header-anchor" href="#åˆå§‹åŒ–é›†ç¾¤" aria-label="Permalink to &quot;åˆå§‹åŒ–é›†ç¾¤&quot;">&ZeroWidthSpace;</a></h4>
<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init-defaults</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubeadm.yaml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># é…ç½®æ–‡ä»¶å¦‚ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bootstrapTokens:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> groups:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> system:bootstrappers:kubeadm:default-node-token</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  token:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> abcdef.0123456789abcdef</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  ttl:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">h0m0s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  usages:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> signing</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> authentication</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> InitConfiguration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">localAPIEndpoint:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  advertiseAddress:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10.211</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.55.3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  bindPort:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 6443</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">nodeRegistration:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  criSocket:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> unix:///var/run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  imagePullPolicy:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> k8s-master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  taints:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apiServer:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  timeoutForControlPlane:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m0s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">certificatesDir:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/kubernetes/pki</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">clusterName:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubernetes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">controllerManager:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dns:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">etcd:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  local:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    dataDir:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /var/lib/etcd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">imageRepository:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> registry.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ClusterConfiguration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubernetesVersion:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1.27</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">networking:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  dnsDomain:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cluster.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  serviceSubnet:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10.96</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.0.0/12</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  podSubnet:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.0.0/16</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # å¢åŠ æŒ‡å®špodçš„ç½‘æ®µ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scheduler:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æŒ‡å®šcgroup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubelet.config.k8s.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> KubeletConfiguration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cgroupDriver:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> systemd</span></span></code></pre>
</div><p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306091457082.png" alt=""></p>
<p><code>kubeadm init</code> æ‰§è¡Œèµ·è§ç”Ÿæˆäº†ä¸€äº›æ–‡ä»¶ï¼Œè€Œè¿™äº›æ–‡ä»¶æˆ‘ä»¬å…ˆå‰åœ¨ kubelet server çš„ <code>Drop-in</code> çš„é…ç½®ä¸­é…ç½®è¿‡ã€‚</p>
<p>ç”Ÿæˆè¿™äº›é…ç½®æ–‡ä»¶åï¼Œå°†å¯åŠ¨ <code>kubelet</code> æœåŠ¡ï¼Œç”Ÿæˆä¸€ç³»åˆ—çš„è¯ä¹¦å’Œç›¸å…³çš„é…ç½®ä¹‹ç±»çš„ï¼Œå¹¶å¢åŠ ä¸€äº›æ‰©å±•ã€‚</p>
<p>æœ€ç»ˆé›†ç¾¤åˆ›å»ºæˆåŠŸï¼Œå¹¶æç¤ºå¯åœ¨ä»»æ„æœºå™¨ä¸Šä½¿ç”¨æŒ‡å®šå‘½ä»¤åŠ å…¥é›†ç¾¤ã€‚</p>
<p>ä¸‹é¢çš„æ–‡å­—è®°å½•åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œåé¢ä¼šç”¨åˆ°ã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">To</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> using</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cluster,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> need</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> regular</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> user:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/.kube</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> chown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">):$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/.kube/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Alternatively,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> user,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> KUBECONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/etc/kubernetes/admin.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">You</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> deploy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cluster.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "kubectl apply -f [podnetwork].yaml"</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> options</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> listed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> at:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">https://kubernetes.io/docs/concepts/cluster-administration/addons/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Then</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> join</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> any</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> worker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> nodes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> running</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> each</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> join</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10.211</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.55.3:6443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> abcdef.0123456789abcdef</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --discovery-token-ca-cert-hash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> sha256:af686c123ef26692b818eda43838997ba0997d76ac2fd509ab643a838e78201d</span></span></code></pre>
</div><h4 id="éªŒè¯" tabindex="-1">éªŒè¯ <a class="header-anchor" href="#éªŒè¯" aria-label="Permalink to &quot;éªŒè¯&quot;">&ZeroWidthSpace;</a></h4>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306091500027.png" alt=""></p>
<p>â€‹		K8S é»˜è®¤ä¼šç›‘å¬ä¸€äº›ç«¯å£ï¼Œä½†å¹¶ä¸æ˜¯ <code>8080</code> ç«¯å£ï¼Œç”±æ­¤å¯çŸ¥ï¼Œæˆ‘ä»¬çš„ <code>kubectl</code>é…ç½®æœ‰è¯¯ã€‚</p>
<h4 id="é…ç½®kubectl" tabindex="-1">é…ç½®kubectl <a class="header-anchor" href="#é…ç½®kubectl" aria-label="Permalink to &quot;é…ç½®kubectl&quot;">&ZeroWidthSpace;</a></h4>
<ul>
<li>ä½¿ç”¨ <code>kubectl</code> çš„å‚æ•° <code>--kubeconfig</code> æˆ–è€…ç¯å¢ƒå˜é‡ <code>KUBECONFIG</code></li>
</ul>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">root@k8s-master:/home/tom#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --kubeconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> nodes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">         STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     ROLES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">           AGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     VERSION</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">k8s-master</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   NotReady</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   control-plane</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">   6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m10s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   v1.27.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">root@k8s-master:/home/tom#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> KUBECONFIG=/etc/kubernetes/admin.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> nodes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">         STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     ROLES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">           AGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     VERSION</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">k8s-master</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   NotReady</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   control-plane</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">   6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m44s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   v1.27.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">root@k8s-master:/home/tom#</span></span></code></pre>
</div><ul>
<li>æ›´æ”¹é»˜è®¤é…ç½®æ–‡ä»¶</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306091505052.png" alt=""></p>
<h4 id="é…ç½®é›†ç¾¤ç½‘ç»œ" tabindex="-1">é…ç½®é›†ç¾¤ç½‘ç»œ <a class="header-anchor" href="#é…ç½®é›†ç¾¤ç½‘ç»œ" aria-label="Permalink to &quot;é…ç½®é›†ç¾¤ç½‘ç»œ&quot;">&ZeroWidthSpace;</a></h4>
<p>é€šè¿‡ä¸Šé¢çš„é…ç½®ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ­£å¸¸è·å– <code>Node</code> ä¿¡æ¯ã€‚ä½†æ˜¯çŠ¶æ€æ˜¯notready,å¯ä»¥é€šè¿‡<code>kubectl get nodes -o yaml</code>æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306091510150.png" alt=""></p>
<p><code>CNI</code> æ˜¯ Container Network Interface çš„ç¼©å†™ï¼Œæ˜¯ K8S ç”¨äºé…ç½® Linux å®¹å™¨ç½‘ç»œçš„æ¥å£è§„èŒƒã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ä½¿ç”¨flannel å½“å‰æœ€æ–°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml</span></span></code></pre>
</div><p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306091521977.png" alt=""></p>
<p>æŸ¥çœ‹ä¸€ä¸‹ç°æœ‰é›†ç¾¤PodçŠ¶æ€ã€‚</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pods</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --all-namespaces</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NAMESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                                 READY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              RESTARTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-flannel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">   kube-flannel-ds-gqmtk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     Error</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">               3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (33s </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ago</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)   74s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    coredns-5d78c9869d-n89l7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     ContainerCreating</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    coredns-5d78c9869d-wx5q9</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     ContainerCreating</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    etcd-k8s-master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                      1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             26</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    kube-apiserver-k8s-master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             26</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    kube-controller-manager-k8s-master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">   1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             26</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    kube-proxy-srz8c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                     1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    kube-scheduler-k8s-master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             26</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">m</span></span></code></pre>
</div><p>å‘ç°æœ‰ä¸¤ä¸ª <code>coredns</code> çš„ <code>Pod</code> æ˜¯ <code>ContainerCreating</code> çš„çŠ¶æ€ï¼Œä½†å¹¶æœªå°±ç»ªã€‚<code>Pod</code> å®é™…ä¼šæœ‰ä¸€ä¸ªè°ƒåº¦è¿‡ç¨‹ï¼Œæ­¤å¤„æˆ‘ä»¬æš‚ä¸”ä¸è®ºï¼Œåç»­å†å¯¹æ­¤è¿›è¡Œè§£é‡Šã€‚</p>
<h4 id="æ–°å¢node" tabindex="-1">æ–°å¢Node <a class="header-anchor" href="#æ–°å¢node" aria-label="Permalink to &quot;æ–°å¢Node&quot;">&ZeroWidthSpace;</a></h4>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># nodeèŠ‚ç‚¹å¿½ç•¥inité…ç½®æ–‡ä»¶ä¿®æ”¹å’Œç½‘ç»œé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> join</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10.211</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.55.3:6443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> abcdef.0123456789abcdef</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	--discovery-token-ca-cert-hash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> sha256:af686c123ef26692b818eda43838997ba0997d76ac2fd509ab643a838e78201d</span></span></code></pre>
</div><p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306091645324.png" alt=""></p>
<h3 id="refence" tabindex="-1">Refence <a class="header-anchor" href="#refence" aria-label="Permalink to &quot;Refence&quot;">&ZeroWidthSpace;</a></h3>
<p><a href="https://www.jianshu.com/p/4d696c8a6f41" target="_blank" rel="noreferrer">Ubuntu22.04 å®‰è£… K8S 1.27.1 - ç®€ä¹¦ (jianshu.com)</a></p>
<p><a href="https://juejin.cn/book/6844733753063915533" target="_blank" rel="noreferrer">Kubernetes ä»ä¸Šæ‰‹åˆ°å®è·µ - å¼ æ™‹æ¶› - æ˜é‡‘å°å†Œ (juejin.cn)</a></p>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202306061724997.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[etcd]]></title>
            <link>https://lpdswing.github.io//booklet/k8s/etcd.html</link>
            <guid>https://lpdswing.github.io//booklet/k8s/etcd.html</guid>
            <pubDate>Tue, 01 Aug 2023 09:14:32 GMT</pubDate>
            <content:encoded><![CDATA[<p>Masteræ˜¯k8sé›†ç¾¤çš„å¤§è„‘, è€Œ<code>etcd</code>åˆ™æ˜¯å¤§è„‘çš„æ ¸å¿ƒ.</p>
<h2 id="ä»€ä¹ˆæ˜¯etcd" tabindex="-1">ä»€ä¹ˆæ˜¯etcd <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯etcd" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯etcd&quot;">&ZeroWidthSpace;</a></h2>
<p><code>etcd</code> æ˜¯ç”± CoreOS å›¢é˜Ÿå‘èµ·çš„ä¸€ä¸ªåˆ†å¸ƒå¼ï¼Œå¼ºä¸€è‡´çš„é”®å€¼å­˜å‚¨ã€‚å®ƒç”¨ Go è¯­è¨€ç¼–å†™ï¼Œä½¿ç”¨ <code>Raft</code> åè®®ä½œä¸ºä¸€è‡´æ€§ç®—æ³•ã€‚å¤šæ•°æƒ…å†µä¸‹ä¼šç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æœåŠ¡æ³¨å†Œå‘ç°ï¼Œæˆ–æ˜¯ç”¨äºå­˜å‚¨ç³»ç»Ÿçš„å…³é”®æ•°æ®ã€‚</p>
<p>å‚è€ƒ<a href="https://etcd.io/docs/v3.5/faq/" target="_blank" rel="noreferrer">FAQ | etcd</a></p>
<p>etcd æ˜¯ä¸€ä¸ªä¸€è‡´çš„åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ã€‚ä¸»è¦ç”¨ä½œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å•ç‹¬åè°ƒæœåŠ¡ã€‚æ—¨åœ¨ä¿å­˜å®Œå…¨é€‚åˆå†…å­˜çš„å°‘é‡æ•°æ®ã€‚</p>
<h2 id="etcdæœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1">etcdæœ‰ä»€ä¹ˆä½œç”¨ <a class="header-anchor" href="#etcdæœ‰ä»€ä¹ˆä½œç”¨" aria-label="Permalink to &quot;etcdæœ‰ä»€ä¹ˆä½œç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p><code>etcd</code> åœ¨ K8S ä¸­ï¼Œæœ€ä¸»è¦çš„ä½œç”¨ä¾¿æ˜¯å…¶é«˜å¯ç”¨ï¼Œå¼ºä¸€è‡´çš„é”®å€¼å­˜å‚¨ä»¥åŠç›‘å¬æœºåˆ¶ã€‚</p>
<p>åœ¨ <code>kube-apiserver</code> æ”¶åˆ°å¯¹åº”è¯·æ±‚ç»è¿‡ä¸€ç³»åˆ—çš„å¤„ç†åï¼Œæœ€ç»ˆå¦‚æœæ˜¯é›†ç¾¤æ‰€éœ€è¦å­˜å‚¨çš„æ•°æ®ï¼Œä¾¿ä¼šå­˜å‚¨è‡³ <code>etcd</code> ä¸­ã€‚ä¸»éƒ¨åˆ†ä¸»è¦æ˜¯é›†ç¾¤çŠ¶æ€ä¿¡æ¯å’Œå…ƒä¿¡æ¯ã€‚</p>
<ul>
<li>æŸ¥æ‰¾é›†ç¾¤ä¸­çš„etcd pod</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011505223.png" alt=""></p>
<ul>
<li>è¿›å…¥etcdå¹¶æŸ¥çœ‹é›†ç¾¤ä¸­çš„member</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011546753.png" alt=""></p>
<p>éœ€è¦é€šè¿‡ä¼ é€’certç­‰è¯ä¹¦ä¿¡æ¯æ‰èƒ½æ­£å¸¸æŸ¥è¯¢ã€‚</p>
<ul>
<li>æŸ¥çœ‹å­˜å‚¨çš„å…ƒä¿¡æ¯</li>
</ul>
<p><code>etcd</code> ä¸­å­˜å‚¨çš„ K8S é›†ç¾¤å…ƒä¿¡æ¯åŸºæœ¬éƒ½æ˜¯ <code>/registry</code> ä¸‹ï¼Œæˆ‘ä»¬å¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼è¿›è¡ŒæŸ¥çœ‹</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011552415.png" alt=""></p>
<ul>
<li>æŸ¥çœ‹namespaceä¿¡æ¯</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011554076.png" alt=""></p>
<ul>
<li>ä¸Šé¢ç”¨åˆ°çš„å‘½ä»¤</li>
</ul>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ETCDCTL_API</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> etcdctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --key=/run/config/pki/etcd/server.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --cert=/run/config/pki/etcd/server.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --cacert=/run/config/pki/etcd/ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> member</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ETCDCTL_API</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> etcdctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --key=/run/config/pki/etcd/server.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --cert=/run/config/pki/etcd/server.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --cacert=/run/config/pki/etcd/ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /registry</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --prefix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --keys-only</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ETCDCTL_API</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> etcdctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --key=/run/config/pki/etcd/server.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --cert=/run/config/pki/etcd/server.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  --cacert=/run/config/pki/etcd/ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /registry/namespaces</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --prefix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --keys-only</span></span></code></pre>
</div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äº <code>etcd</code> é›†ç¾¤ä½¿ç”¨ <code>Raft</code> ä¸€è‡´æ€§ç®—æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹ <code>etcd</code> é›†ç¾¤éœ€è¦éƒ¨ç½²å¥‡æ•°ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ 3ï¼Œ5ï¼Œ7 ç­‰ã€‚<code>etcd</code> é›†ç¾¤ç»´æŠ¤ä¹Ÿç›¸å¯¹å®¹æ˜“ï¼Œå¾ˆå®¹æ˜“å¯ä»¥åšæˆé«˜å¯ç”¨é›†ç¾¤ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯ä¿éšœ K8S é›†ç¾¤é«˜å¯ç”¨çš„é‡è¦ä¸€ç¯ï¼‰ã€‚</p>
<h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="https://juejin.cn/book/6844733753063915533" target="_blank" rel="noreferrer">Kubernetes ä»ä¸Šæ‰‹åˆ°å®è·µ - å¼ æ™‹æ¶› - æ˜é‡‘å°å†Œ (juejin.cn)</a></p>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011505223.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[traefikåœ¨dockerä¸­çš„ä½¿ç”¨]]></title>
            <link>https://lpdswing.github.io//technology/learn/traefik.html</link>
            <guid>https://lpdswing.github.io//technology/learn/traefik.html</guid>
            <pubDate>Tue, 01 Aug 2023 09:14:32 GMT</pubDate>
            <content:encoded><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯traefik" tabindex="-1">ä»€ä¹ˆæ˜¯traefik <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯traefik" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯traefik&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011605561.png" alt=""></p>
<p>Traefik æ˜¯ä¸€ä¸ª <a href="https://github.com/containous/traefik" target="_blank" rel="noreferrer">å¼€æº</a> çš„å¯ä»¥ä½¿å¾—æœåŠ¡å‘å¸ƒå˜å¾—è½»æ¾æœ‰è¶£çš„ <em>è¾¹ç¼˜è·¯ç”±å™¨</em>ã€‚å®ƒè´Ÿè´£æ¥æ”¶ä½ ç³»ç»Ÿçš„è¯·æ±‚ï¼Œç„¶åä½¿ç”¨åˆé€‚çš„ç»„ä»¶æ¥å¯¹è¿™äº›è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚Traefik çš„ä¸ä¼—ä¸åŒä¹‹å¤„è¿˜åœ¨äºå®ƒä¼šè‡ªåŠ¨å‘ç°é€‚åˆä½ æœåŠ¡çš„é…ç½®ã€‚å½“ Traefik åœ¨æ£€æŸ¥ä½ çš„æœåŠ¡æ—¶ï¼Œä¼šæ‰¾åˆ°æœåŠ¡çš„ç›¸å…³ä¿¡æ¯å¹¶æ‰¾åˆ°åˆé€‚çš„æœåŠ¡æ¥æ»¡è¶³å¯¹åº”çš„è¯·æ±‚ã€‚</p>
<p>Traefik å…¼å®¹æ‰€æœ‰ä¸»æµçš„é›†ç¾¤æŠ€æœ¯ï¼Œæ¯”å¦‚ Kubernetesï¼ŒDockerï¼ŒDocker Swarmï¼ŒAWSï¼ŒMesosï¼ŒMarathonï¼Œ<a href="https://www.qikqiak.com/traefik-book/providers/overview/" target="_blank" rel="noreferrer">ç­‰ç­‰</a>ï¼›å¹¶ä¸”å¯ä»¥åŒæ—¶å¤„ç†å¤šç§æ–¹å¼ã€‚ï¼ˆç”šè‡³å¯ä»¥ç”¨äºåœ¨è£¸æœºä¸Šè¿è¡Œçš„æ¯”è¾ƒæ—§çš„è½¯ä»¶ã€‚ï¼‰</p>
<div class="tip custom-block"><p class="custom-block-title">TIP</p>
<p>æœ¬æ–‡ä¸»è¦ä»¥docker-composeçš„æ–¹å¼æ¥ä»‹ç»traefikçš„ä½¿ç”¨</p>
</div>
<h2 id="æ¦‚å¿µ" tabindex="-1">æ¦‚å¿µ <a class="header-anchor" href="#æ¦‚å¿µ" aria-label="Permalink to &quot;æ¦‚å¿µ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="è¾¹ç¼˜è·¯ç”±å™¨" tabindex="-1">è¾¹ç¼˜è·¯ç”±å™¨ <a class="header-anchor" href="#è¾¹ç¼˜è·¯ç”±å™¨" aria-label="Permalink to &quot;è¾¹ç¼˜è·¯ç”±å™¨&quot;">&ZeroWidthSpace;</a></h3>
<p>Traefik æ˜¯ä¸€ä¸ª <em>è¾¹ç¼˜è·¯ç”±å™¨</em> ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä½ æ•´ä¸ªåº”ç”¨å¹³å°çš„<strong>å¤§é—¨</strong>ï¼Œæ‹¦æˆªå¹¶è·¯ç”±æ¯ä¸ªä¼ å…¥çš„è¯·æ±‚ï¼šå®ƒçŸ¥é“æ‰€æœ‰çš„é€»è¾‘å’Œè§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç¡®å®šå“ªäº›æœåŠ¡å¤„ç†å“ªäº›è¯·æ±‚ï¼ˆåŸºäº <a href="https://www.qikqiak.com/traefik-book/routing/routers/#rule" target="_blank" rel="noreferrer">path</a>ï¼Œ<a href="https://www.qikqiak.com/traefik-book/routing/routers/#rule" target="_blank" rel="noreferrer">host</a>ï¼Œ<a href="https://www.qikqiak.com/traefik-book/routing/routers/#rule" target="_blank" rel="noreferrer">headers</a> <a href="https://www.qikqiak.com/traefik-book/routing/routers/#rule" target="_blank" rel="noreferrer">ç­‰ç­‰</a>...ï¼‰ã€‚æ‰€æœ‰çš„æœåŠ¡éƒ½å¯ä»¥é€šè¿‡traefikæ¥æš´éœ²å‡ºæ¥ï¼Œå¯ä»¥æ˜¯httpï¼Œä¹Ÿå¯ä»¥æ˜¯tcpã€‚</p>
<h3 id="è‡ªåŠ¨æœåŠ¡å‘ç°" tabindex="-1">è‡ªåŠ¨æœåŠ¡å‘ç° <a class="header-anchor" href="#è‡ªåŠ¨æœåŠ¡å‘ç°" aria-label="Permalink to &quot;è‡ªåŠ¨æœåŠ¡å‘ç°&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¼ ç»Ÿçš„è¾¹ç¼˜è·¯ç”±å™¨ï¼ˆæˆ–åå‘ä»£ç†ï¼‰éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«è·¯ç”±åˆ°ä½ æœåŠ¡çš„æ‰€æœ‰å¯èƒ½è·¯ç”±ï¼Œè€Œ Traefik åˆ™ä»æœåŠ¡æœ¬èº«è·å–å®ƒä»¬ã€‚</p>
<p>åœ¨éƒ¨ç½²ä½ çš„æœåŠ¡çš„æ—¶å€™ï¼Œä½ é™„åŠ ä¸Šä¸€äº›ä¿¡æ¯æ¥å‘Šè¯‰ Traefik å¯ä»¥å¤„ç†çš„æœåŠ¡è¯·æ±‚çš„ç‰¹å¾ã€‚</p>
<p>è¿™æ„å‘³ç€åœ¨éƒ¨ç½²æœåŠ¡æ—¶ï¼ŒTraefik ä¼šç«‹å³æ£€æµ‹åˆ°è¯¥æœåŠ¡å¹¶å®æ—¶æ›´æ–°è·¯ç”±è§„åˆ™ã€‚å½“ç„¶åŒæ ·çš„ï¼Œå½“ä½ ä»ä½ çš„åŸºç¡€æ¶æ„ä¸Šåˆ é™¤è¿™äº›æœåŠ¡æ—¶ï¼Œè¿™äº›è·¯ç”±åŒæ ·ä¼šç›¸åº”çš„æ¶ˆå¤±ã€‚</p>
<h2 id="é…ç½®ä»‹ç»" tabindex="-1">é…ç½®ä»‹ç» <a class="header-anchor" href="#é…ç½®ä»‹ç»" aria-label="Permalink to &quot;é…ç½®ä»‹ç»&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011637294.png" alt=""></p>
<p>traefikä¸­çš„é…ç½®åˆ†ä¸º2ç§ï¼Œä¸€ç§æ˜¯é™æ€é…ç½®ï¼Œæ˜¯ä¸ä¼šç»å¸¸å˜åŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨é…ç½®ã€‚å¦ä¸€ç§æ˜¯åŠ¨æ€é…ç½®ï¼ŒåŒ…å«å®šä¹‰ç³»ç»Ÿå¦‚ä½•å¤„ç†è¯·æ±‚çš„æ‰€æœ‰é…ç½®å†…å®¹ã€‚è¿™äº›é…ç½®æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œè€Œä¸”æ˜¯æ— ç¼çƒ­æ›´æ–°çš„ï¼Œæ²¡æœ‰ä»»ä½•è¯·æ±‚ä¸­æ–­æˆ–è¿æ¥æŸè€—ã€‚traefikä»providesè·å–åŠ¨æ€é…ç½®ï¼Œ æ¯”å¦‚dockeræˆ–è€…k8sã€‚</p>
<h3 id="åŠ¨æ€é…ç½®" tabindex="-1">åŠ¨æ€é…ç½® <a class="header-anchor" href="#åŠ¨æ€é…ç½®" aria-label="Permalink to &quot;åŠ¨æ€é…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>Traefik ä» <a href="https://www.qikqiak.com/traefik-book/providers/overview/" target="_blank" rel="noreferrer">providers</a> è·å–å®ƒçš„ <em>åŠ¨æ€é…ç½®</em>ï¼šç¼–æ’å™¨ï¼ŒæœåŠ¡æ³¨å†Œè¡¨ï¼Œæˆ–è€…æ™®é€šçš„æ—§é…ç½®æ–‡ä»¶ã€‚</p>
<h3 id="é™æ€é…ç½®" tabindex="-1">é™æ€é…ç½® <a class="header-anchor" href="#é™æ€é…ç½®" aria-label="Permalink to &quot;é™æ€é…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ Traefik ä¸­å®šä¹‰äº†3ä¸­ä¸åŒçš„<strong>äº’æ–¥æ–¹å¼</strong>ï¼ˆæ¯”å¦‚ï¼Œä½ åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ç§æ–¹å¼ï¼‰ï¼š</p>
<ul>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­</li>
<li>åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­</li>
<li>é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’</li>
</ul>
<div class="tip custom-block"><p class="custom-block-title">TIP</p>
<p>åœ¨docker-composeä¸­æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼</p>
</div>
<h2 id="é…ç½®å‘ç°" tabindex="-1">é…ç½®å‘ç° <a class="header-anchor" href="#é…ç½®å‘ç°" aria-label="Permalink to &quot;é…ç½®å‘ç°&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011621779.png" alt=""></p>
<p>Traefik ä¸­çš„é…ç½®å‘ç°æ˜¯é€šè¿‡ä¸‹é¢çš„ä¸€äº› <em>providers</em> æ¥å®ç°çš„ã€‚<em>providers</em> æ˜¯ç°æœ‰çš„ä¸€äº›åŸºç¡€æ¶æ„ç»„ä»¶ï¼Œå¯ä»¥æ˜¯ç¼–æ’å·¥å…·ï¼Œå®¹å™¨å¼•æ“ï¼Œäº‘æä¾›å•†æˆ–è€… key-value å­˜å‚¨éƒ½å¯ä»¥ã€‚</p>
<p>Traefik é€šè¿‡æŸ¥è¯¢ providers çš„ API æ¥æŸ¥æ‰¾æœ‰å…³è·¯ç”±çš„ç›¸å…³ä¿¡æ¯ï¼ŒTraefik æ¯æ¬¡æ£€æµ‹åˆ°æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šåŠ¨æ€æ›´æ–°è·¯ç”±ã€‚</p>
<p>å…·ä½“æ”¯æŒçš„providerè¯¦è§ï¼š <a href="https://doc.traefik.io/traefik/providers/overview/" target="_blank" rel="noreferrer">Traefik Configuration Discovery Overview - Traefik</a></p>
<h2 id="è·¯ç”±å’Œè´Ÿè½½å‡è¡¡" tabindex="-1">è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ <a class="header-anchor" href="#è·¯ç”±å’Œè´Ÿè½½å‡è¡¡" aria-label="Permalink to &quot;è·¯ç”±å’Œè´Ÿè½½å‡è¡¡&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011659448.png" alt=""></p>
<p>é¦–å…ˆï¼Œå½“å¯åŠ¨ Traefik æ—¶ï¼Œéœ€è¦å®šä¹‰ <a href="https://www.qikqiak.com/traefik-book/routing/entrypoints" target="_blank" rel="noreferrer">entrypoints</a>ã€‚ç„¶åï¼Œæ ¹æ®è¿æ¥åˆ°è¿™äº› entrypoints çš„ <a href="https://www.qikqiak.com/traefik-book/routing/routers" target="_blank" rel="noreferrer">è·¯ç”±</a> æ¥åˆ†æä¼ å…¥çš„è¯·æ±‚ï¼Œæ¥æŸ¥çœ‹ä»–ä»¬æ˜¯å¦ä¸ä¸€ç»„ <a href="https://www.qikqiak.com/traefik-book/routing/routers#rule" target="_blank" rel="noreferrer">è§„åˆ™</a> ç›¸åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™è·¯ç”±å¯èƒ½ä¼šå°†è¯·æ±‚é€šè¿‡ä¸€ç³»åˆ— <a href="https://www.qikqiak.com/traefik-book/middlewares/overview/" target="_blank" rel="noreferrer">ä¸­é—´ä»¶</a> è½¬æ¢è¿‡åå†è½¬å‘åˆ°ä½ çš„ <a href="https://www.qikqiak.com/traefik-book/routing/services/" target="_blank" rel="noreferrer">æœåŠ¡</a> ä¸Šå»ã€‚</p>
<h3 id="èŒè´£" tabindex="-1">èŒè´£ <a class="header-anchor" href="#èŒè´£" aria-label="Permalink to &quot;èŒè´£&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><a href="https://www.qikqiak.com/traefik-book/providers/overview/" target="_blank" rel="noreferrer"><em>Providers</em></a> æ¥å‘ç°åŸºç¡€è®¾æ–½ä¸Šå­˜åœ¨çš„æœåŠ¡ï¼ˆå®ƒä»¬çš„ IPã€è¿è¡ŒçŠ¶å†µç­‰...ï¼‰</li>
<li><a href="https://www.qikqiak.com/traefik-book/routing/entrypoints/" target="_blank" rel="noreferrer"><em>Entrypoints</em></a> ç›‘å¬ä¼ å…¥çš„æµé‡ï¼ˆç«¯å£ç­‰...ï¼‰</li>
<li><a href="https://www.qikqiak.com/traefik-book/routing/routers/" target="_blank" rel="noreferrer"><em>Routers</em></a> åˆ†æè¯·æ±‚ï¼ˆhost, path, headers, SSL, ...ï¼‰</li>
<li><a href="https://www.qikqiak.com/traefik-book/routing/services/" target="_blank" rel="noreferrer"><em>Services</em></a> å°†è¯·æ±‚è½¬å‘åˆ°ä½ çš„æœåŠ¡ï¼ˆload balancing, ...ï¼‰</li>
<li><a href="https://www.qikqiak.com/traefik-book/middlewares/overview/" target="_blank" rel="noreferrer"><em>Middlewares</em></a> ä¸­é—´ä»¶ï¼Œç”¨æ¥ä¿®æ”¹è¯·æ±‚æˆ–è€…æ ¹æ®è¯·æ±‚æ¥åšå‡ºä¸€äº›åˆ¤æ–­ ï¼ˆauthentication, rate limiting, headers, ...ï¼‰</li>
</ul>
<h2 id="dockerç¤ºä¾‹" tabindex="-1">dockerç¤ºä¾‹ <a class="header-anchor" href="#dockerç¤ºä¾‹" aria-label="Permalink to &quot;dockerç¤ºä¾‹&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'3'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  reverse-proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # å®˜æ–¹çš„ Traefik 2.0 Docker é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik:v2.10.3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    	# å¼€å¯ web UI å¹¶ä¸”å‘Šè¯‰ Traefik ç›‘å¬ Docker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--api.insecure=true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # providerå®šä¹‰ä¸ºdocker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--providers.docker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # è®¾ç½®ä¸ºä¸è‡ªåŠ¨ç®¡ç†å®¹å™¨ï¼Œlabelä¸­traefik.enable=trueè®¾ç½®ä¼šè¦†ç›–è¯¥å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--providers.docker.exposedByDefault=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # è‡ªå®šä¹‰çº¦æŸï¼Œ éœ€è¦åœ¨å®¹å™¨labelä¸­æŒ‡å®šæ‰ä¼šè¢«ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--providers.docker.constraints=Label(`traefik.tftag`, `foo`)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # ç›‘å¬80ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--entryPoints.http.address=:80</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # ç›‘å¬443ï¼Œhttps</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--entryPoints.https.address=:443</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # è‡ªåŠ¨è·å–è¯ä¹¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # acme https tlschallenge</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--certificatesResolvers.le.acme.email=example@163.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--certificatesResolvers.le.acme.storage=/letsencrypt/acme.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--certificatesresolvers.le.acme.tlschallenge=true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # httpè‡ªåŠ¨è½¬https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--entrypoints.web.http.redirections.entryPoint.to=websecure</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--entrypoints.web.http.redirections.entryPoint.scheme=https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">--entrypoints.web.http.redirections.entrypoint.permanent=true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # HTTP ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"80:80"</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # Web UI ç«¯å£(é€šè¿‡ --api.insecure=true å¯ç”¨)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"8080:8080"</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # è¿™æ · Traefik å¯ä»¥ç›‘å¬ Docker äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">./letsencrypt:/letsencrypt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/var/run/docker.sock:/var/run/docker.sock</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik.docker.network=tf-public</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  whoami</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # ä¸€ä¸ªé€šè¿‡ API æš´éœ²å…¶ IP åœ°å€çš„å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">containous/whoami</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik.enable=true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik.tftag=foo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik.http.routers.whoami.rule=Host(`api.drug.com`)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik.http.routers.whoami.entrypoints=http,https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">traefik.http.routers.whoami.tls.certresolver=gpt</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  tf-public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span></code></pre>
</div><h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="https://www.qikqiak.com/traefik-book/" target="_blank" rel="noreferrer">Traefik (qikqiak.com)</a></p>
<p><a href="https://doc.traefik.io/traefik/" target="_blank" rel="noreferrer">Traefik Proxy Documentation - Traefik</a></p>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202308011605561.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[äºŒåˆ†æ³•å¥—è·¯æ€»ç»“]]></title>
            <link>https://lpdswing.github.io//interviews/algorithm/äºŒåˆ†æ³•å¥—è·¯æ€»ç»“.html</link>
            <guid>https://lpdswing.github.io//interviews/algorithm/äºŒåˆ†æ³•å¥—è·¯æ€»ç»“.html</guid>
            <pubDate>Tue, 30 May 2023 08:58:22 GMT</pubDate>
            <content:encoded><![CDATA[<h2 id="å¯»æ‰¾ä¸€ä¸ªæ•°" tabindex="-1">å¯»æ‰¾ä¸€ä¸ªæ•° <a class="header-anchor" href="#å¯»æ‰¾ä¸€ä¸ªæ•°" aria-label="Permalink to &quot;å¯»æ‰¾ä¸€ä¸ªæ•°&quot;">&ZeroWidthSpace;</a></h2>
<p>åŸºæœ¬çš„äºŒåˆ†æœç´¢, leetcode:704</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> binarySearch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // å·¦æŒ‡é’ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // å³æŒ‡é’ˆï¼Œæ³¨æ„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // ä¸­é—´ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ‰¾åˆ°ç›®æ ‡å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†ï¼Œæ³¨æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç›®æ ‡å€¼åœ¨å·¦åŠéƒ¨åˆ†ï¼Œæ³¨æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // æœªæ‰¾åˆ°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="å¯»æ‰¾å·¦ä¾§è¾¹ç•Œ" tabindex="-1">å¯»æ‰¾å·¦ä¾§è¾¹ç•Œ <a class="header-anchor" href="#å¯»æ‰¾å·¦ä¾§è¾¹ç•Œ" aria-label="Permalink to &quot;å¯»æ‰¾å·¦ä¾§è¾¹ç•Œ&quot;">&ZeroWidthSpace;</a></h2>
<p>æ¯”å¦‚ç»™ä¸€ä¸ªæ•°ç»„[1,2,2,2,3], target=2, å¯»æ‰¾å·¦ä¾§è¾¹ç•Œï¼Œåº”è¯¥è¿”å›indexä¸º1.</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> leftBound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="tip custom-block"><p class="custom-block-title">ç­”ç–‘</p>
<p><strong>1ã€ä¸ºä»€ä¹ˆ while ä¸­æ˜¯ <code>&lt;</code> è€Œä¸æ˜¯ <code>&lt;=</code></strong>?</p>
<p>å› ä¸º <code>right = nums.length</code> è€Œä¸æ˜¯ <code>nums.length - 1</code>ã€‚å› æ­¤æ¯æ¬¡å¾ªç¯çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ <code>[left, right)</code> å·¦é—­å³å¼€ã€‚</p>
<p>2ã€<strong>ä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å› -1 çš„æ“ä½œï¼Ÿå¦‚æœ <code>nums</code> ä¸­ä¸å­˜åœ¨ <code>target</code> è¿™ä¸ªå€¼ï¼Œæ€ä¹ˆåŠ</strong>ï¼Ÿ</p>
<p>åœ¨è¿”å›çš„æ—¶å€™é¢å¤–åˆ¤æ–­ä¸€ä¸‹ <code>nums[left]</code> æ˜¯å¦ç­‰äº <code>target</code> å°±è¡Œäº†ï¼Œå¦‚æœä¸ç­‰äºï¼Œå°±è¯´æ˜ <code>target</code> ä¸å­˜åœ¨ã€‚</p>
</div>
<p>å®Œæ•´ä»£ç ï¼š</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> left_bound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æœç´¢åŒºé—´ä¸º [left, right]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // æ”¶ç¼©å³ä¾§è¾¹ç•Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ¤æ–­ target æ˜¯å¦å­˜åœ¨äº nums ä¸­</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ­¤æ—¶ target æ¯”æ‰€æœ‰æ•°éƒ½å¤§ï¼Œè¿”å› -1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[left] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="å¯»æ‰¾å³è¾¹ç•Œ" tabindex="-1">å¯»æ‰¾å³è¾¹ç•Œ <a class="header-anchor" href="#å¯»æ‰¾å³è¾¹ç•Œ" aria-label="Permalink to &quot;å¯»æ‰¾å³è¾¹ç•Œ&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> right_bound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (right</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">left)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // è¿™é‡Œæ”¹æˆæ”¶ç¼©å·¦ä¾§è¾¹ç•Œå³å¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æœ€åæ”¹æˆè¿”å› left - 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[left</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="tip custom-block"><p class="custom-block-title">æ€»ç»“</p>
<p>è¿™æ ·å°±å¯ä»¥è½»æ¾è§£å†³<a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noreferrer">34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>äº†</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¸¸è§ç®—æ³•å¥—è·¯]]></title>
            <link>https://lpdswing.github.io//interviews/algorithm/å¸¸è§ç®—æ³•å¥—è·¯.html</link>
            <guid>https://lpdswing.github.io//interviews/algorithm/å¸¸è§ç®—æ³•å¥—è·¯.html</guid>
            <pubDate>Tue, 30 May 2023 08:58:22 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="é“¾è¡¨" tabindex="-1">é“¾è¡¨ <a class="header-anchor" href="#é“¾è¡¨" aria-label="Permalink to &quot;é“¾è¡¨&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="åŒæŒ‡é’ˆ" tabindex="-1">åŒæŒ‡é’ˆ <a class="header-anchor" href="#åŒæŒ‡é’ˆ" aria-label="Permalink to &quot;åŒæŒ‡é’ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”¨åˆ°åŒæŒ‡é’ˆçš„å‡ é“é“¾è¡¨é¢˜ï¼š</p>
<p>1ã€åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</p>
<p>2ã€é“¾è¡¨çš„åˆ†è§£</p>
<p>3ã€åˆå¹¶ <code>k</code> ä¸ªæœ‰åºé“¾è¡¨ï¼ˆå…ˆæŠŠnodeå­˜åˆ°pqé‡Œï¼Œæ¯æ¬¡å–æœ€å°èŠ‚ç‚¹ï¼‰</p>
<p>4ã€å¯»æ‰¾å•é“¾è¡¨çš„å€’æ•°ç¬¬ <code>k</code> ä¸ªèŠ‚ç‚¹</p>
<p>5ã€å¯»æ‰¾å•é“¾è¡¨çš„ä¸­ç‚¹</p>
<p>6ã€åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦åŒ…å«ç¯å¹¶æ‰¾å‡ºç¯èµ·ç‚¹</p>
<p>7ã€åˆ¤æ–­ä¸¤ä¸ªå•é“¾è¡¨æ˜¯å¦ç›¸äº¤å¹¶æ‰¾å‡ºäº¤ç‚¹</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> mergeTwoLists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(l1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode, l2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è™šæ‹Ÿå¤´ç»“ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    dummy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dummy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    p1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> l1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    p2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> l2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // æ¯”è¾ƒ p1 å’Œ p2 ä¸¤ä¸ªæŒ‡é’ˆ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // å°†å€¼è¾ƒå°çš„çš„èŠ‚ç‚¹æ¥åˆ° p æŒ‡é’ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p1.Val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p2.Val {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            p.Next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            p2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p2.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            p.Next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            p1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p1.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // p æŒ‡é’ˆä¸æ–­å‰è¿›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        p.Next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        p.Next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dummy.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><strong>é“¾è¡¨é¢˜å¸¸ç”¨çš„è™šæ‹Ÿå¤´èŠ‚ç‚¹æŠ€å·§ï¼ŒdummyèŠ‚ç‚¹</strong>å¯ä»¥é¿å…ä¸€äº›ç©ºæŒ‡é’ˆçš„åˆ¤æ–­ï¼Œé™ä½ä»£ç å¤æ‚åº¦ã€‚</p>
<div class="tip custom-block"><p class="custom-block-title">ä»€ä¹ˆæ—¶å€™ç”¨dummy</p>
<p>å½“éœ€è¦åˆ›å»ºä¸€æ¡æ–°çš„é“¾è¡¨æ—¶ï¼Œå¯ä»¥ç”¨dummyèŠ‚ç‚¹ç®€åŒ–è¾¹ç•Œå¤„ç†ã€‚</p>
</div>
<h1 id="æ•°ç»„" tabindex="-1">æ•°ç»„ <a class="header-anchor" href="#æ•°ç»„" aria-label="Permalink to &quot;æ•°ç»„&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å¿«æ…¢æŒ‡é’ˆ" tabindex="-1">å¿«æ…¢æŒ‡é’ˆ <a class="header-anchor" href="#å¿«æ…¢æŒ‡é’ˆ" aria-label="Permalink to &quot;å¿«æ…¢æŒ‡é’ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p>çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæ•°ç»„åŸåœ°å»é‡</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> removeDuplicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    slow,fast </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[fast] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[slow] {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            slow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">             // ç»´æŠ¤ nums[0..slow] æ— é‡å¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            nums[slow] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[fast]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        fast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ•°ç»„é•¿åº¦ä¸ºç´¢å¼• + 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> slow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ»‘åŠ¨çª—å£æ¡†æ¶ï¼š</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-KCKDP" id="tab-Xi4yF6M" checked="checked"><label for="tab-Xi4yF6M">go</label><input type="radio" name="group-KCKDP" id="tab-X5-FSSS" ><label for="tab-X5-FSSS">python</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ»‘åŠ¨çª—å£ç®—æ³•æ¡†æ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> slidingWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆå§‹åŒ–need å’Œ window</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    need </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">rune</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">rune</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _, c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> t {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        need[c]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    valid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rune</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s[right])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        right</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // è¿›è¡Œçª—å£å†…æ•°æ®çš„æ›´æ–°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> window needs shrink {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rune</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s[left])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ»‘åŠ¨çª—å£ç®—æ³•æ¡†æ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> slidingWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, t: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> collections </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> defaultdict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    need </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> defaultdict(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> defaultdict(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> t:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        need[c] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    valid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[right]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        window[c] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> window needs shrink:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[left]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            # è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°</span></span></code></pre>
</div></div></div>
<h2 id="å·¦å³æŒ‡é’ˆ" tabindex="-1">å·¦å³æŒ‡é’ˆ <a class="header-anchor" href="#å·¦å³æŒ‡é’ˆ" aria-label="Permalink to &quot;å·¦å³æŒ‡é’ˆ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="äºŒåˆ†æŸ¥æ‰¾" tabindex="-1">äºŒåˆ†æŸ¥æ‰¾ <a class="header-anchor" href="#äºŒåˆ†æŸ¥æ‰¾" aria-label="Permalink to &quot;äºŒåˆ†æŸ¥æ‰¾&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> binarySearch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸€å·¦ä¸€å³ä¸¤ä¸ªæŒ‡é’ˆç›¸å‘è€Œè¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[mid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="ä¸¤æ•°ä¹‹å’Œ" tabindex="-1">ä¸¤æ•°ä¹‹å’Œ <a class="header-anchor" href="#ä¸¤æ•°ä¹‹å’Œ" aria-label="Permalink to &quot;ä¸¤æ•°ä¹‹å’Œ&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>æ•°ç»„æœ‰åºå°±å¯ä»¥è€ƒè™‘å·¦å³æŒ‡é’ˆ</strong>ï¼Œ ç±»ä¼¼äºŒåˆ†æ³•ã€‚</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸€å·¦ä¸€å³ä¸¤ä¸ªæŒ‡é’ˆç›¸å‘è€Œè¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[left] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nums[right]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // é¢˜ç›®è¦æ±‚çš„ç´¢å¼•æ˜¯ä» 1 å¼€å§‹çš„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            left</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // è®© sum å¤§ä¸€ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            right</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // è®© sum å°ä¸€ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="åè½¬æ•°ç»„" tabindex="-1">åè½¬æ•°ç»„ <a class="header-anchor" href="#åè½¬æ•°ç»„" aria-label="Permalink to &quot;åè½¬æ•°ç»„&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> reverseString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸€å·¦ä¸€å³ä¸¤ä¸ªæŒ‡é’ˆç›¸å‘è€Œè¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left, right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // äº¤æ¢ s[left] å’Œ s[right]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        temp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[left]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        s[left] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[right]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        s[right] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> temp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        left</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        right</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="å›æ–‡ä¸²åˆ¤æ–­" tabindex="-1">å›æ–‡ä¸²åˆ¤æ–­ <a class="header-anchor" href="#å›æ–‡ä¸²åˆ¤æ–­" aria-label="Permalink to &quot;å›æ–‡ä¸²åˆ¤æ–­&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isPalindrome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸€å·¦ä¸€å³ä¸¤ä¸ªæŒ‡é’ˆç›¸å‘è€Œè¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> right {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[left] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[right] {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        left</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        right</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æœ€é•¿å›æ–‡ä¸²</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> longestPalindrome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ""</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ä»¥ s[i] ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡å­ä¸²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        s1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> palindrome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s, i, i)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ä»¥ s[i] å’Œ s[i+1] ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡å­ä¸²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        s2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> palindrome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s, i, i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // res = longest(res, s1, s2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s1) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s2) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> palindrome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // é˜²æ­¢ç´¢å¼•è¶Šç•Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[l] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[r] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // å‘ä¸¤è¾¹å±•å¼€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è¿”å›ä»¥ s[l] å’Œ s[r] ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡ä¸²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s[l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> : r]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h1 id="äºŒå‰æ ‘" tabindex="-1">äºŒå‰æ ‘ <a class="header-anchor" href="#äºŒå‰æ ‘" aria-label="Permalink to &quot;äºŒå‰æ ‘&quot;">&ZeroWidthSpace;</a></h1>
<p>äºŒå‰æ ‘è§£é¢˜çš„æ€ç»´æ¨¡å¼åˆ†ä¸¤ç±»ï¼š</p>
<p><strong>1ã€æ˜¯å¦å¯ä»¥é€šè¿‡éå†ä¸€éäºŒå‰æ ‘å¾—åˆ°ç­”æ¡ˆ</strong>ï¼Ÿå¦‚æœå¯ä»¥ï¼Œç”¨ä¸€ä¸ª <code>traverse</code> å‡½æ•°é…åˆå¤–éƒ¨å˜é‡æ¥å®ç°ï¼Œè¿™å«ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼ã€‚</p>
<p><strong>2ã€æ˜¯å¦å¯ä»¥å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œé€šè¿‡å­é—®é¢˜ï¼ˆå­æ ‘ï¼‰çš„ç­”æ¡ˆæ¨å¯¼å‡ºåŸé—®é¢˜çš„ç­”æ¡ˆ</strong>ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå†™å‡ºè¿™ä¸ªé€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œå¹¶å……åˆ†åˆ©ç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™å«ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼ã€‚</p>
<p><strong>å¦‚æœå•ç‹¬æŠ½å‡ºä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œå®ƒéœ€è¦åšä»€ä¹ˆäº‹æƒ…ï¼Ÿéœ€è¦åœ¨ä»€ä¹ˆæ—¶å€™ï¼ˆå‰/ä¸­/ååºä½ç½®ï¼‰åš</strong>ï¼Ÿå…¶ä»–çš„èŠ‚ç‚¹ä¸ç”¨ä½ æ“å¿ƒï¼Œé€’å½’å‡½æ•°ä¼šå¸®ä½ åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚</p>
<p><strong>å¦‚æœä½ å‘Šè¯‰æˆ‘ï¼Œå¿«é€Ÿæ’åºå°±æ˜¯ä¸ªäºŒå‰æ ‘çš„å‰åºéå†ï¼Œå½’å¹¶æ’åºå°±æ˜¯ä¸ªäºŒå‰æ ‘çš„ååºéå†ï¼Œé‚£ä¹ˆæˆ‘å°±çŸ¥é“ä½ æ˜¯ä¸ªç®—æ³•é«˜æ‰‹äº†</strong>ã€‚</p>
<p>å¿«æ’ï¼š</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, lo, hi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /****** å‰åºéå†ä½ç½® ******/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // é€šè¿‡äº¤æ¢å…ƒç´ æ„å»ºåˆ†ç•Œç‚¹ p</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> partition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums, lo, hi)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /************************/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums, lo, p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums, p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, hi)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å½’å¹¶ï¼š</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å®šä¹‰ï¼šæ’åº nums[lo..hi]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, lo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, hi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (lo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> hi) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ’åº nums[lo..mid]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums, lo, mid)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ’åº nums[mid+1..hi]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums, mid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, hi)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /****** ååºä½ç½® ******/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆå¹¶ nums[lo..mid] å’Œ nums[mid+1..hi]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nums, lo, mid, hi)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /*********************/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="éå†æ¡†æ¶" tabindex="-1">éå†æ¡†æ¶ <a class="header-anchor" href="#éå†æ¡†æ¶" aria-label="Permalink to &quot;éå†æ¡†æ¶&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å‰åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸­åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ååºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿­ä»£éå†æ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€’å½’éå†æ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å‰åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr, i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ååºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿­ä»£éå†å•é“¾è¡¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">head; p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">p.Next {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€’å½’éå†å•é“¾è¡¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å‰åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head.Next)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ååºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å•é“¾è¡¨å’Œæ•°ç»„çš„éå†å¯ä»¥æ˜¯è¿­ä»£çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯é€’å½’çš„ï¼Œ<strong>äºŒå‰æ ‘è¿™ç§ç»“æ„æ— éå°±æ˜¯äºŒå‰é“¾è¡¨</strong>ï¼Œç”±äºæ²¡åŠæ³•ç®€å•æ”¹å†™æˆè¿­ä»£å½¢å¼ï¼Œæ‰€ä»¥ä¸€èˆ¬è¯´äºŒå‰æ ‘çš„éå†æ¡†æ¶éƒ½æ˜¯æŒ‡é€’å½’çš„å½¢å¼ã€‚</p>
<p>åªè¦æ˜¯é€’å½’å½¢å¼çš„éå†ï¼Œéƒ½å¯ä»¥æœ‰å‰åºä½ç½®å’Œååºä½ç½®ï¼Œåˆ†åˆ«åœ¨é€’å½’ä¹‹å‰å’Œé€’å½’ä¹‹åã€‚</p>
<p>å¦‚æœè®©ä½ <strong>å€’åºæ‰“å°</strong>ä¸€æ¡å•é“¾è¡¨ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼ï¼Œä½ æ€ä¹ˆæï¼Ÿ</p>
<p>å®ç°æ–¹å¼å½“ç„¶æœ‰å¾ˆå¤šï¼Œä½†å¦‚æœä½ å¯¹é€’å½’çš„ç†è§£è¶³å¤Ÿé€å½»ï¼Œå¯ä»¥åˆ©ç”¨ååºä½ç½®æ¥æ“ä½œï¼š</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head.Next)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ååºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fmt.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head.Val)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><blockquote>
<p>äºŒå‰æ ‘ä¸­ç”¨éå†æ€è·¯è§£é¢˜æ—¶å‡½æ•°ç­¾åä¸€èˆ¬æ˜¯ <code>void traverse(...)</code>ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œé æ›´æ–°å¤–éƒ¨å˜é‡æ¥è®¡ç®—ç»“æœï¼Œè€Œç”¨åˆ†è§£é—®é¢˜æ€è·¯è§£é¢˜æ—¶å‡½æ•°åæ ¹æ®è¯¥å‡½æ•°å…·ä½“åŠŸèƒ½è€Œå®šï¼Œè€Œä¸”ä¸€èˆ¬ä¼šæœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼æ˜¯å­é—®é¢˜çš„è®¡ç®—ç»“æœã€‚</p>
</blockquote>
<h3 id="ä¸¤ç§æ–¹æ¡ˆè§£å†³äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" tabindex="-1">ä¸¤ç§æ–¹æ¡ˆè§£å†³äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ <a class="header-anchor" href="#ä¸¤ç§æ–¹æ¡ˆè§£å†³äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" aria-label="Permalink to &quot;ä¸¤ç§æ–¹æ¡ˆè§£å†³äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦&quot;">&ZeroWidthSpace;</a></h3>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-A3EWv" id="tab-ud6Rjrp" checked="checked"><label for="tab-ud6Rjrp">go</label><input type="radio" name="group-A3EWv" id="tab-KvHyfc3" ><label for="tab-KvHyfc3">go</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è®°å½•æœ€å¤§æ·±åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è®°å½•éå†åˆ°çš„èŠ‚ç‚¹çš„æ·±åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> depth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä¸»å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> maxDepth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// äºŒå‰æ ‘éå†æ¡†æ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// å‰åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root.Left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root.Right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">		// åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œæ›´æ–°æœ€å¤§æ·±åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, depth)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	// ååºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a, b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> maxDepth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å®šä¹‰ï¼Œè®¡ç®—å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    leftMax </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> maxDepth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rightMax </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> maxDepth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ•´æ£µæ ‘çš„æœ€å¤§æ·±åº¦ç­‰äºå·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦å–æœ€å¤§å€¼ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ç„¶åå†åŠ ä¸Šæ ¹èŠ‚ç‚¹è‡ªå·±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(leftMax, rightMax) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></div></div>
<h2 id="äºŒå‰æ ‘çš„å‰ä¸­ååºéå†" tabindex="-1">äºŒå‰æ ‘çš„å‰ä¸­ååºéå† <a class="header-anchor" href="#äºŒå‰æ ‘çš„å‰ä¸­ååºéå†" aria-label="Permalink to &quot;äºŒå‰æ ‘çš„å‰ä¸­ååºéå†&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>
<p>å‰åºéå†</p>
<p><strong>ä¸€æ£µäºŒå‰æ ‘çš„å‰åºéå†ç»“æœ = æ ¹èŠ‚ç‚¹ + å·¦å­æ ‘çš„å‰åºéå†ç»“æœ + å³å­æ ‘çš„å‰åºéå†ç»“æœ</strong></p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-zI7H0" id="tab-9lFd__G" checked="checked"><label for="tab-9lFd__G">go</label><input type="radio" name="group-zI7H0" id="tab-CYW92qf" ><label for="tab-CYW92qf">go</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> preorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// äºŒå‰æ ‘éå†å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode, res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å‰åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res, root.Val)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left, res)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right, res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> preorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å‰åºéå†çš„ç»“æœï¼Œroot.val åœ¨ç¬¬ä¸€ä¸ª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, root.Val)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œåé¢æ¥ç€å·¦å­æ ‘çš„å‰åºéå†ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">preorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œæœ€åæ¥ç€å³å­æ ‘çš„å‰åºéå†ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">preorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></div></div>
</li>
<li>
<p>ä¸­åºéå†</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-YpNNL" id="tab-TDiYiu1" checked="checked"><label for="tab-TDiYiu1">go</label><input type="radio" name="group-YpNNL" id="tab-BJPv_3z" ><label for="tab-BJPv_3z">go</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">result)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode, result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left, result)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸­åºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">result, root.Val)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right, result)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œåé¢æ¥ç€å·¦å­æ ‘çš„å‰åºéå†ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">inorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, root.Val)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œæœ€åæ¥ç€å³å­æ ‘çš„å‰åºéå†ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">inorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></div></div>
</li>
<li>
<p>ååºéå†</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-upEiY" id="tab-BFQBzVH" checked="checked"><label for="tab-BFQBzVH">go</label><input type="radio" name="group-upEiY" id="tab-zWxsPj-" ><label for="tab-zWxsPj-">go</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> postorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">result)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode, result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left, result)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right, result)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ååºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">result, root.Val)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> postorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œåé¢æ¥ç€å·¦å­æ ‘çš„å‰åºéå†ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">postorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œæœ€åæ¥ç€å³å­æ ‘çš„å‰åºéå†ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">postorderTraversal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, root.Val)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></div></div>
</li>
<li>
<p>å±‚åºéå†</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-R9xJd" id="tab-PrWUI6Z" checked="checked"><label for="tab-PrWUI6Z">go</label><input type="radio" name="group-R9xJd" id="tab-t-JdOvn" ><label for="tab-t-JdOvn">go</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> levelOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) [][]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [][]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    q </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode{root}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(q) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        sz </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(q)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sz; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> q[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            q </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> q[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(level, cur.Val)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cur.Left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                q </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(q, cur.Left)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cur.Right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                q </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(q, cur.Right)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res, level)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> levelOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) [][]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([][]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode, depth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[][]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> depth {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res, []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res)[depth] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res)[depth], root.Val)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Left, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, res)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.Right, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></div></div>
</li>
</ul>
<div class="tip custom-block"><p class="custom-block-title">æ€»ç»“</p>
<p>é‡åˆ°ä¸€é“äºŒå‰æ ‘çš„é¢˜ç›®æ—¶çš„é€šç”¨æ€è€ƒè¿‡ç¨‹æ˜¯ï¼š</p>
<p><strong>1ã€æ˜¯å¦å¯ä»¥é€šè¿‡éå†ä¸€éäºŒå‰æ ‘å¾—åˆ°ç­”æ¡ˆ</strong>ï¼Ÿå¦‚æœå¯ä»¥ï¼Œç”¨ä¸€ä¸ª <code>traverse</code> å‡½æ•°é…åˆå¤–éƒ¨å˜é‡æ¥å®ç°ã€‚</p>
<p><strong>2ã€æ˜¯å¦å¯ä»¥å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œé€šè¿‡å­é—®é¢˜ï¼ˆå­æ ‘ï¼‰çš„ç­”æ¡ˆæ¨å¯¼å‡ºåŸé—®é¢˜çš„ç­”æ¡ˆ</strong>ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå†™å‡ºè¿™ä¸ªé€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œå¹¶å……åˆ†åˆ©ç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<p><strong>3ã€æ— è®ºä½¿ç”¨å“ªä¸€ç§æ€ç»´æ¨¡å¼ï¼Œä½ éƒ½è¦æ˜ç™½äºŒå‰æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦åšä»€ä¹ˆï¼Œéœ€è¦åœ¨ä»€ä¹ˆæ—¶å€™ï¼ˆå‰ä¸­ååºï¼‰åš</strong>ã€‚</p>
<p><strong>å‰åºä½ç½®çš„ä»£ç åªèƒ½ä»å‡½æ•°å‚æ•°ä¸­è·å–çˆ¶èŠ‚ç‚¹ä¼ é€’æ¥çš„æ•°æ®ï¼Œè€Œååºä½ç½®çš„ä»£ç ä¸ä»…å¯ä»¥è·å–å‚æ•°æ•°æ®ï¼Œè¿˜å¯ä»¥è·å–åˆ°å­æ ‘é€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ é€’å›æ¥çš„æ•°æ®</strong>ã€‚</p>
<p><strong>ä¸€æ—¦ä½ å‘ç°é¢˜ç›®å’Œå­æ ‘æœ‰å…³ï¼Œé‚£å¤§æ¦‚ç‡è¦ç»™å‡½æ•°è®¾ç½®åˆç†çš„å®šä¹‰å’Œè¿”å›å€¼ï¼Œåœ¨ååºä½ç½®å†™ä»£ç äº†</strong>ã€‚</p>
</div>
<h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://labuladong.github.io/algo/di-ling-zh-bfe1b/dong-ge-da-334dd/" target="_blank" rel="noreferrer">ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æ ‘</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç®—æ³•æ¡†æ¶æ€ç»´]]></title>
            <link>https://lpdswing.github.io//interviews/algorithm/ç®—æ³•æ¡†æ¶æ€ç»´.html</link>
            <guid>https://lpdswing.github.io//interviews/algorithm/ç®—æ³•æ¡†æ¶æ€ç»´.html</guid>
            <pubDate>Tue, 30 May 2023 08:58:22 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼" tabindex="-1">æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼ <a class="header-anchor" href="#æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼" aria-label="Permalink to &quot;æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼&quot;">&ZeroWidthSpace;</a></h1>
<p>æ•°æ®ç»“æ„çš„å­˜å‚¨ç»“æ„åªæœ‰2ç§ï¼Œåªæœ‰é“¾è¡¨å’Œæ•°ç»„ã€‚</p>
<p>æ¯”å¦‚è¯´ã€Œé˜Ÿåˆ—ã€ã€ã€Œæ ˆã€è¿™ä¸¤ç§æ•°æ®ç»“æ„æ—¢å¯ä»¥ä½¿ç”¨é“¾è¡¨ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„å®ç°ã€‚ç”¨æ•°ç»„å®ç°ï¼Œå°±è¦å¤„ç†æ‰©å®¹ç¼©å®¹çš„é—®é¢˜ï¼›ç”¨é“¾è¡¨å®ç°ï¼Œæ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä½†éœ€è¦æ›´å¤šçš„å†…å­˜ç©ºé—´å­˜å‚¨èŠ‚ç‚¹æŒ‡é’ˆã€‚</p>
<p>ã€Œå›¾ã€çš„ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œé‚»æ¥è¡¨å°±æ˜¯é“¾è¡¨ï¼Œé‚»æ¥çŸ©é˜µå°±æ˜¯äºŒç»´æ•°ç»„ã€‚é‚»æ¥çŸ©é˜µåˆ¤æ–­è¿é€šæ€§è¿…é€Ÿï¼Œå¹¶å¯ä»¥è¿›è¡ŒçŸ©é˜µè¿ç®—è§£å†³ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå›¾æ¯”è¾ƒç¨€ç–çš„è¯å¾ˆè€—è´¹ç©ºé—´ã€‚é‚»æ¥è¡¨æ¯”è¾ƒèŠ‚çœç©ºé—´ï¼Œä½†æ˜¯å¾ˆå¤šæ“ä½œçš„æ•ˆç‡ä¸Šè‚¯å®šæ¯”ä¸è¿‡é‚»æ¥çŸ©é˜µã€‚</p>
<p>ã€Œæ ‘ã€ï¼Œç”¨æ•°ç»„å®ç°å°±æ˜¯ã€Œå †ã€ï¼Œå› ä¸ºã€Œå †ã€æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œç”¨æ•°ç»„å­˜å‚¨ä¸éœ€è¦èŠ‚ç‚¹æŒ‡é’ˆï¼Œæ“ä½œä¹Ÿæ¯”è¾ƒç®€å•ï¼›ç”¨é“¾è¡¨å®ç°å°±æ˜¯å¾ˆå¸¸è§çš„é‚£ç§ã€Œæ ‘ã€ï¼Œå› ä¸ºä¸ä¸€å®šæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œæ‰€ä»¥ä¸é€‚åˆç”¨æ•°ç»„å­˜å‚¨ã€‚ä¸ºæ­¤ï¼Œåœ¨è¿™ç§é“¾è¡¨ã€Œæ ‘ã€ç»“æ„ä¹‹ä¸Šï¼Œåˆè¡ç”Ÿå‡ºå„ç§å·§å¦™çš„è®¾è®¡ï¼Œæ¯”å¦‚äºŒå‰æœç´¢æ ‘ã€AVL æ ‘ã€çº¢é»‘æ ‘ã€åŒºé—´æ ‘ã€B æ ‘ç­‰ç­‰ï¼Œä»¥åº”å¯¹ä¸åŒçš„é—®é¢˜ã€‚</p>
<p>äºŒè€…çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<p><strong>æ•°ç»„</strong>ç”±äºæ˜¯ç´§å‡‘è¿ç»­å­˜å‚¨,å¯ä»¥éšæœºè®¿é—®ï¼Œé€šè¿‡ç´¢å¼•å¿«é€Ÿæ‰¾åˆ°å¯¹åº”å…ƒç´ ï¼Œè€Œä¸”ç›¸å¯¹èŠ‚çº¦å­˜å‚¨ç©ºé—´ã€‚ä½†æ­£å› ä¸ºè¿ç»­å­˜å‚¨ï¼Œå†…å­˜ç©ºé—´å¿…é¡»ä¸€æ¬¡æ€§åˆ†é…å¤Ÿï¼Œæ‰€ä»¥è¯´æ•°ç»„å¦‚æœè¦æ‰©å®¹ï¼Œéœ€è¦é‡æ–°åˆ†é…ä¸€å—æ›´å¤§çš„ç©ºé—´ï¼Œå†æŠŠæ•°æ®å…¨éƒ¨å¤åˆ¶è¿‡å»ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)ï¼›è€Œä¸”ä½ å¦‚æœæƒ³åœ¨æ•°ç»„ä¸­é—´è¿›è¡Œæ’å…¥å’Œåˆ é™¤ï¼Œæ¯æ¬¡å¿…é¡»æ¬ç§»åé¢çš„æ‰€æœ‰æ•°æ®ä»¥ä¿æŒè¿ç»­ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)ã€‚</p>
<p><strong>é“¾è¡¨</strong>å› ä¸ºå…ƒç´ ä¸è¿ç»­ï¼Œè€Œæ˜¯é æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ•°ç»„çš„æ‰©å®¹é—®é¢˜ï¼›å¦‚æœçŸ¥é“æŸä¸€å…ƒç´ çš„å‰é©±å’Œåé©±ï¼Œæ“ä½œæŒ‡é’ˆå³å¯åˆ é™¤è¯¥å…ƒç´ æˆ–è€…æ’å…¥æ–°å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ã€‚ä½†æ˜¯æ­£å› ä¸ºå­˜å‚¨ç©ºé—´ä¸è¿ç»­ï¼Œä½ æ— æ³•æ ¹æ®ä¸€ä¸ªç´¢å¼•ç®—å‡ºå¯¹åº”å…ƒç´ çš„åœ°å€ï¼Œæ‰€ä»¥ä¸èƒ½éšæœºè®¿é—®ï¼›è€Œä¸”ç”±äºæ¯ä¸ªå…ƒç´ å¿…é¡»å­˜å‚¨æŒ‡å‘å‰åå…ƒç´ ä½ç½®çš„æŒ‡é’ˆï¼Œä¼šæ¶ˆè€—ç›¸å¯¹æ›´å¤šçš„å‚¨å­˜ç©ºé—´ã€‚</p>
<blockquote>
<p>å‚è€ƒè‡ªlaubladongç®—æ³•</p>
</blockquote>
<h1 id="æ•°æ®ç»“æ„çš„åŸºæœ¬æ“ä½œ" tabindex="-1">æ•°æ®ç»“æ„çš„åŸºæœ¬æ“ä½œ <a class="header-anchor" href="#æ•°æ®ç»“æ„çš„åŸºæœ¬æ“ä½œ" aria-label="Permalink to &quot;æ•°æ®ç»“æ„çš„åŸºæœ¬æ“ä½œ&quot;">&ZeroWidthSpace;</a></h1>
<p>å¯¹ä»»ä½•æ•°æ®ç»“æ„ï¼Œæ“ä½œæ— éæ˜¯éå†å’Œè®¿é—®ã€‚ä¹Ÿå°±æ˜¯å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>ä»é¡¶ç«¯æ¥çœ‹ï¼Œéå†å’Œè®¿é—®åˆ†ä¸ºä¸¤ç§å½¢å¼ï¼š çº¿æ€§è®¿é—®ï¼Œéçº¿æ€§è®¿é—®ã€‚</p>
<ul>
<li>
<p>æ•°ç»„è®¿é—®</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // è¿­ä»£è®¿é—® arr[i]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></li>
<li>
<p>é“¾è¡¨è®¿é—®</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ListNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head; p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p.next {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // è¿­ä»£è®¿é—® p.val</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverseRecursively</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // é€’å½’è®¿é—® head.val</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    traverseRecursively</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head.next)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></li>
<li>
<p>äºŒå‰æ ‘çš„éå†</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åŸºæœ¬çš„äºŒå‰æ ‘èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TreeNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ååºéå†äºŒå‰æ ‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.left)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root.right)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></li>
<li>
<p>Nå‰æ ‘çš„éå†æ¡†æ¶</p>
<div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TreeNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    children []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">TreeNode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _, child </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> root.children {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(child)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><code>N</code> å‰æ ‘çš„éå†åˆå¯ä»¥æ‰©å±•ä¸ºå›¾çš„éå†ï¼Œå› ä¸ºå›¾å°±æ˜¯å¥½å‡  <code>N</code> å‰æ£µæ ‘çš„ç»“åˆä½“ã€‚</p>
</li>
</ul>
<blockquote>
<p>åˆ·é¢˜é¡ºåºï¼Œå…ˆåˆ·äºŒå‰æ ‘ï¼Œé“¾è¡¨ï¼Œæ•°ç»„ã€‚å†å»åˆ·åŠ¨æ€è§„åˆ’ï¼Œå›æº¯ç­‰ç®—æ³•ã€‚</p>
</blockquote>
<blockquote>
<p>æ¶‰åŠåˆ°é€’å½’çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ ‘çš„é—®é¢˜ã€‚</p>
</blockquote>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//interviews/algorithm/</link>
            <guid>https://lpdswing.github.io//interviews/algorithm/</guid>
            <pubDate>Fri, 19 May 2023 09:45:47 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>ç®—æ³•æŠ€å·§</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[203. ç§»é™¤é“¾è¡¨å…ƒç´ ]]></title>
            <link>https://lpdswing.github.io//interviews/leetcode/203ç§»é™¤é“¾è¡¨å…ƒç´ .html</link>
            <guid>https://lpdswing.github.io//interviews/leetcode/203ç§»é™¤é“¾è¡¨å…ƒç´ .html</guid>
            <pubDate>Fri, 19 May 2023 09:45:47 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="_203-ç§»é™¤é“¾è¡¨å…ƒç´ " tabindex="-1">203.ç§»é™¤é“¾è¡¨å…ƒç´  <a class="header-anchor" href="#_203-ç§»é™¤é“¾è¡¨å…ƒç´ " aria-label="Permalink to &quot;203.ç§»é™¤é“¾è¡¨å…ƒç´ &quot;">&ZeroWidthSpace;</a></h1>
<p><a href="https://leetcode.cn/problems/remove-linked-list-elements/" target="_blank" rel="noreferrer">ä¼ é€é—¨</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305190923246.png" alt=""></p>
<h2 id="è§£é¢˜æ€è·¯" tabindex="-1">è§£é¢˜æ€è·¯ <a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-label="Permalink to &quot;è§£é¢˜æ€è·¯&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>åˆ›å»ºå“‘ç»“ç‚¹æ–¹ä¾¿æ“ä½œï¼Œ é¿å…é“¾è¡¨å¤´åˆ¤æ–­</li>
</ul>
<h2 id="ä»£ç " tabindex="-1">ä»£ç  <a class="header-anchor" href="#ä»£ç " aria-label="Permalink to &quot;ä»£ç &quot;">&ZeroWidthSpace;</a></h2>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-LYMvV" id="tab-yivImiW" checked="checked"><label for="tab-yivImiW">goè¿­ä»£</label><input type="radio" name="group-LYMvV" id="tab-zOzqqTq" ><label for="tab-zOzqqTq">pythoné€’å½’</label><input type="radio" name="group-LYMvV" id="tab-YRmU6hZ" ><label for="tab-YRmU6hZ">pythonè¿­ä»£</label></div><div class="blocks">
<div class="language-go vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> removeElements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode, val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    dummy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ListNode{Val: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, Next: head}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dummy</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cur.Next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cur.Next.Val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> val {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            cur.Next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cur.Next.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cur.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dummy.Next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Definition for singly-linked list.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># class ListNode:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#     def __init__(self, val=0, next=None):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#         self.val = val</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#         self.next = next</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Solution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> removeElements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, head: ListNode, val: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) -> ListNode:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        head.next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.removeElements(head.next, val)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head.val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> val:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head.next</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head</span></span></code></pre>
</div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Solution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> removeElements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, head: ListNode, val: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) -> ListNode:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> head</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ListNode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inf'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, head)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prev.next:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prev.next.val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> val:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                prev.next </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prev.next.next</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prev.next</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res.next</span></span></code></pre>
</div></div></div>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305190923246.png" length="0" type="image/png"/>
        </item>
        <item>
            <link>https://lpdswing.github.io//interviews/leetcode/</link>
            <guid>https://lpdswing.github.io//interviews/leetcode/</guid>
            <pubDate>Fri, 19 May 2023 09:45:47 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>leetcodeåˆ·é¢˜</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[vitepressåšå®¢ä¸»é¢˜å‚æ•°é…ç½®]]></title>
            <link>https://lpdswing.github.io//technology/other/vitepress.html</link>
            <guid>https://lpdswing.github.io//technology/other/vitepress.html</guid>
            <pubDate>Fri, 19 May 2023 03:40:44 GMT</pubDate>
            <description><![CDATA[åˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨å‚æ•°ã€‚]]></description>
            <content:encoded><![CDATA[<h1 id="ä¸»é¢˜é…ç½®" tabindex="-1">ä¸»é¢˜é…ç½® <a class="header-anchor" href="#ä¸»é¢˜é…ç½®" aria-label="Permalink to &quot;ä¸»é¢˜é…ç½®&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="home" tabindex="-1">Home <a class="header-anchor" href="#home" aria-label="Permalink to &quot;Home&quot;">&ZeroWidthSpace;</a></h2>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>---</span></span>
<span class="line"><span>layout: home</span></span>
<span class="line"><span># é¦–é¡µéƒ¨åˆ†å…ƒç´ å®šåˆ¶</span></span>
<span class="line"><span>blog:</span></span>
<span class="line"><span> name: '@lpdswing'</span></span>
<span class="line"><span> motto: é›†ä¸­èµ·æ¥çš„æ„å¿—ï¼Œå¯ä»¥å‡»ç©¿é¡½çŸ³</span></span>
<span class="line"><span> inspiring: çœŸæ­£çš„å¤§å¸ˆæ°¸è¿œéƒ½æ€€ç€ä¸€é¢—å­¦å¾’çš„å¿ƒ</span></span>
<span class="line"><span> pageSize: 6</span></span>
<span class="line"><span>---</span></span></code></pre>
</div><h2 id="article" tabindex="-1">Article <a class="header-anchor" href="#article" aria-label="Permalink to &quot;Article&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å…¨éƒ¨é…ç½®" tabindex="-1">å…¨éƒ¨é…ç½® <a class="header-anchor" href="#å…¨éƒ¨é…ç½®" aria-label="Permalink to &quot;å…¨éƒ¨é…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>---</span></span>
<span class="line"><span>title: æ–‡ç« æ ‡é¢˜ï¼ˆé»˜è®¤å–ä¸€çº§æ ‡é¢˜ï¼‰</span></span>
<span class="line"><span>description: ç±»ä¼¼å‰¯æ ‡é¢˜æˆ–è€…æ‘˜è¦ï¼ˆé»˜è®¤æ–‡ç« çš„å‰100å­—ï¼‰</span></span>
<span class="line"><span>cover: é¦–é¡µå¡ç‰‡åˆ—è¡¨é‡Œçš„å›¾ç‰‡ï¼ˆé»˜è®¤æ–‡ç« çš„ç¬¬ä¸€å¼ å›¾ï¼‰</span></span>
<span class="line"><span># hiddenCoverä¸ºfalseåˆ™ä¸ä¼šåœ¨æ–‡ç« é¡µå±•ç¤ºä¸Šè¿°çš„å°é¢</span></span>
<span class="line"><span>hiddenCover: true </span></span>
<span class="line"><span>#è®¾ç½®æ–‡ç« æ˜¯å¦å‡ºç°åœ¨é¦–é¡µåˆ—è¡¨</span></span>
<span class="line"><span>hidden: false  </span></span>
<span class="line"><span># å•ç‹¬è®¾ç½®æ–‡ç« ä½œè€…ä¿¡æ¯</span></span>
<span class="line"><span>authorï¼š lpdswing  </span></span>
<span class="line"><span># é¢„è®¡é˜…è¯»æ—¶é—´</span></span>
<span class="line"><span>readingTime: true  </span></span>
<span class="line"><span># å…³é—­è¯„è®º</span></span>
<span class="line"><span>comment: false  </span></span>
<span class="line"><span>date: 2023-01-01</span></span>
<span class="line"><span>tag: </span></span>
<span class="line"><span> - go</span></span>
<span class="line"><span>tags:</span></span>
<span class="line"><span> - go</span></span>
<span class="line"><span>categories:</span></span>
<span class="line"><span> - çŸ¥è¯†åº“</span></span>
<span class="line"><span># è®¾ç½®é¦–é¡µçš„ç²¾é€‰æ–‡ç« ï¼Œå€¼è¶Šå¤§è¶Šé å‰</span></span>
<span class="line"><span>sticky: 1  </span></span>
<span class="line"><span># ç”¨äºè®¾ç½®åœ¨é¦–é¡µç½®é¡¶å±•ç¤ºçš„æ–‡ç« ï¼Œä» 1 å¼€å§‹ï¼Œå€¼è¶Šå°è¶Šé å‰</span></span>
<span class="line"><span>top: 1  </span></span>
<span class="line"><span># ç”¨äºè®¾ç½®æ–‡ç« å·¦ä¾§å±•ç¤ºçš„ æ¨èæ–‡ç«  é¡ºåºï¼ˆè¶Šå°è¶Šé å‰ï¼‰ï¼Œæˆ–è€…åœ¨æ¨èåˆ—è¡¨ä¸­éšè—æ‰ä¸å±•ç¤º</span></span>
<span class="line"><span>recommend: 1</span></span>
<span class="line"><span>---</span></span></code></pre>
</div><h3 id="é»˜è®¤å¸¸ç”¨é…ç½®" tabindex="-1">é»˜è®¤å¸¸ç”¨é…ç½® <a class="header-anchor" href="#é»˜è®¤å¸¸ç”¨é…ç½®" aria-label="Permalink to &quot;é»˜è®¤å¸¸ç”¨é…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>å†™æ–‡ç« æ—¶å¯ç›´æ¥å¤åˆ¶æ­¤é…ç½®</p>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>---</span></span>
<span class="line"><span>title: </span></span>
<span class="line"><span>comment: true  </span></span>
<span class="line"><span>tags:</span></span>
<span class="line"><span> - go</span></span>
<span class="line"><span>categories:</span></span>
<span class="line"><span> - é¢è¯•</span></span>
<span class="line"><span># è®¾ç½®é¦–é¡µçš„ç²¾é€‰æ–‡ç« ï¼Œå€¼è¶Šå¤§è¶Šé å‰</span></span>
<span class="line"><span>sticky: 1  </span></span>
<span class="line"><span>---</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//about.html</link>
            <guid>https://lpdswing.github.io//about.html</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h3 id="about-me-ğŸ‘‹" tabindex="-1">About me ğŸ‘‹ <a class="header-anchor" href="#about-me-ğŸ‘‹" aria-label="Permalink to &quot;About me ğŸ‘‹&quot;">&ZeroWidthSpace;</a></h3>
<p>Here are some ideas to get you started:</p>
<ul>
<li>ğŸ”­ Iâ€™m currently working on Beijing</li>
<li>âš¡ Python/Golang/JavaScript/vue.</li>
</ul>
<h3 id="plan" tabindex="-1">Plan <a class="header-anchor" href="#plan" aria-label="Permalink to &quot;Plan&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>é€æ­¥å®Œå–„åˆ—å‡ºæ¥çš„blogåˆ—è¡¨ã€‚</li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//booklet/design/</link>
            <guid>https://lpdswing.github.io//booklet/design/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>æ¶æ„è®¾è®¡</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//booklet/distributed/</link>
            <guid>https://lpdswing.github.io//booklet/distributed/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿ</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//booklet/highConcurrency/</link>
            <guid>https://lpdswing.github.io//booklet/highConcurrency/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>é«˜å¹¶å‘</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//booklet/k8s/</link>
            <guid>https://lpdswing.github.io//booklet/k8s/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>k8s</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//booklet/mysql45/</link>
            <guid>https://lpdswing.github.io//booklet/mysql45/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>mysql45è®²</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//lang/go/</link>
            <guid>https://lpdswing.github.io//lang/go/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>go</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//lang/python/</link>
            <guid>https://lpdswing.github.io//lang/python/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>python</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//lang/rust/</link>
            <guid>https://lpdswing.github.io//lang/rust/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>rust</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//lang/ts/</link>
            <guid>https://lpdswing.github.io//lang/ts/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>ts</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//technology/learn/</link>
            <guid>https://lpdswing.github.io//technology/learn/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>æŠ€æœ¯å­¦ä¹ </p>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ‚è°ˆ]]></title>
            <link>https://lpdswing.github.io//technology/other/</link>
            <guid>https://lpdswing.github.io//technology/other/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="æ‚è°ˆ" tabindex="-1">æ‚è°ˆ <a class="header-anchor" href="#æ‚è°ˆ" aria-label="Permalink to &quot;æ‚è°ˆ&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">ç¬”è€…è¯´</p>
<p>è¿™é‡Œæ˜¯ä¹‹å‰hexo blogçš„è¿ç§»ã€‚</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <link>https://lpdswing.github.io//technology/source/</link>
            <guid>https://lpdswing.github.io//technology/source/</guid>
            <pubDate>Thu, 18 May 2023 07:26:49 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="" tabindex="-1"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">About</p>
<p>æºç å­¦ä¹ </p>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨]]></title>
            <link>https://lpdswing.github.io//technology/other/windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨.html</link>
            <guid>https://lpdswing.github.io//technology/other/windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨.html</guid>
            <pubDate>Sun, 10 May 2020 19:42:05 GMT</pubDate>
            <content:encoded><![CDATA[<p>ç”±äº windows ä¸æ”¯æŒ gunicorn,uwsgi ç­‰é«˜æ€§èƒ½çš„ server,ä½¿ç”¨ Apache + mod_uwsgi æˆ‘è§‰å¾—æœ‰ç‚¹éº»çƒ¦,å°±æƒ³ç”¨ tornado æ¥ä½œä¸º django çš„ http server..</p>
<p><strong>tornado æ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒæ—¶ WSGI åº”ç”¨åˆæ˜¯åŒæ­¥çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Tornado å¯åŠ¨ WSGI åº”ç”¨ï¼Œç†è®ºä¸Šæ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚éƒ½æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªè¯·æ±‚æœ‰é˜»å¡ï¼Œéƒ½ä¼šå¯¼è‡´ tornado çš„æ•´ä¸ª IOLOOP é˜»å¡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åŒæ—¶å‘å‡ºä¸¤ä¸ª GET è¯·æ±‚å‘<a href="http://127.0.0.1:5000/" target="_blank" rel="noreferrer">http://127.0.0.1:5000/</a></strong></p>
<p><strong>ä¼šå‘ç°ç¬¬ä¸€ä¸ªå‘å‡ºçš„è¯·æ±‚ä¼šåœ¨å¤§çº¦ 5s ä¹‹åè¿”å›ï¼Œè€Œå¦ä¸€ä¸ªè¯·æ±‚ä¼šåœ¨ 10s å·¦å³è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚</strong></p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.wsgi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> WSGIContainer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.httpserver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> HTTPServer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> IOLoop</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> flask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Flask</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Flask(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__name__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">@app.route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    time.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'OK'</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '__main__'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    http_server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> HTTPServer(WSGIContainer(app))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    http_server.listen(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    IOLoop.instance().start()</span></span></code></pre>
</div><p><strong>æˆ‘ä»¬çŸ¥é“ï¼Œtornado å®ç°å¼‚æ­¥è¿è¡ŒåŒæ­¥å‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨çº¿ç¨‹æ¥è¿è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>
<blockquote>
<p>å‡ ä¹åŒæ—¶è¿”å›ç»“æœ,å¹¶å‘æ‰§è¡Œäº†</p>
</blockquote>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.web</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> IndexHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">tornado</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">web</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">RequestHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    """ä¸»è·¯ç”±å¤„ç†ç±»"""</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    @tornado.gen.coroutine</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        """å¯¹åº”httpçš„getè¯·æ±‚æ–¹å¼"""</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        loop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop.IOLoop.instance()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        yield</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> loop.run_in_executor(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.sleep)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.write(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Hello You!"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        time.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.write(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sleep OK'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "__main__"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.web.Application([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, IndexHandler),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    app.listen(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tornado.ioloop.IOLoop.current().start()</span></span></code></pre>
</div><p><strong>å¯¹äºè¿™ç§ï¼ˆä½¿ç”¨ tornado è¿è¡Œ Flask çš„æƒ…å†µï¼‰æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•åšå‘¢ï¼ŒæŸ¥çœ‹ Â WSGIContainer çš„ä»£ç æˆ‘ä»¬å‘ç°</strong></p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> WSGIContainer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, wsgi_application):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.wsgi_application </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wsgi_application</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, request):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> start_response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(status, response_headers, exc_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"headers"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response_headers</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response.append</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # wsgiè¿”å›responseéƒ¨åˆ†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        app_response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.wsgi_application(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            WSGIContainer.environ(request), start_response)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            response.extend(app_response)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.join(response)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(app_response, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"close"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                app_response.close()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"WSGI app did not call start_response"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        status_code, reason </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].split(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">' '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(status_code)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"headers"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        header_set </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(k.lower() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (k, v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> escape.utf8(body)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "content-length"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Length"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(body))))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "content-type"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"text/html; charset=UTF-8"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "server"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Server"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"TornadoServer/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.version))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        start_line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil.ResponseStartLine(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"HTTP/1.1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, status_code, reason)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        header_obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil.HTTPHeaders()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> key, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            header_obj.add(key, value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.connection.write_headers(start_line, header_obj, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.connection.finish()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._log(status_code, request)</span></span></code></pre>
</div><p>åªéœ€é‡æ–°æ–¹æ³•å°†è¿™éƒ¨åˆ†ä»£ç å˜æˆå¼‚æ­¥å³å¯,ä»£ç å¦‚ä¸‹:</p>
<p>loop.run_in_executor çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ºä¸€ä¸ª ThreadPoolExecutor å¯¹è±¡</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> flask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Flask</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.wsgi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> WSGIContainer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.httpserver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> HTTPServer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> IOLoop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Flask(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__name__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">@app.route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    time.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'OK'</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> escape</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> List, Tuple, Optional, Callable, Any, Dict</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> types </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TracebackType</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> WSGIContainer_With_Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">WSGIContainer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    @tornado.gen.coroutine</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, request):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: Dict[str, Any]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: List[bytes]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> start_response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers: List[Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                exc_info: Optional[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    Tuple[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        "Optional[Type[BaseException]]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">BaseException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        Optional[TracebackType],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ) -> Callable[[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], Any]:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"headers"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response.append</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        loop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop.IOLoop.instance()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        app_response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> yield</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> loop.run_in_executor(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.wsgi_application, WSGIContainer.environ(request),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                                                  start_response)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # app_response = self.wsgi_application(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        #     WSGIContainer.environ(request), start_response</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            response.extend(app_response)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.join(response)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(app_response, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"close"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                app_response.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: ignore</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"WSGI app did not call start_response"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        status_code_str, reason </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].split(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">" "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(status_code_str)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"headers"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: List[Tuple[str, str]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        header_set </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(k.lower() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (k, v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> escape.utf8(body)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "content-length"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Length"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(body))))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "content-type"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"text/html; charset=UTF-8"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "server"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Server"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"TornadoServer/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.version))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        start_line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil.ResponseStartLine(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"HTTP/1.1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, status_code, reason)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        header_obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil.HTTPHeaders()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> key, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            header_obj.add(key, value)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.connection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.connection.write_headers(start_line, header_obj, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.connection.finish()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._log(status_code, request)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '__main__'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    http_server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> HTTPServer(WSGIContainer_With_Thread(app))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    http_server.listen(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    IOLoop.instance().start()</span></span></code></pre>
</div><blockquote>
<p>æµ‹è¯•æ‰§è¡Œç»“æœ,å‡ ä¹åŒæ—¶è¿”å›äº† OK,ä¸æ˜¯é¡ºåºæ‰§è¡Œäº†</p>
</blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>1 ã€è¿™ç§æ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰æé«˜æ€§èƒ½ï¼Œè¯´åˆ°åº•è¿˜æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹æ¥è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¨èå¦‚æœä½¿ç”¨ tornado è¿˜æ˜¯å’Œ tornado çš„ web æ¡†æ¶è”åˆèµ·æ¥å†™å‡ºçœŸæ­£çš„å¼‚æ­¥ä»£ç ï¼Œè¿™æ ·æ‰ä¼šè¾¾åˆ° tornado å¼‚æ­¥ IO çš„é«˜æ€§èƒ½ç›®çš„ã€‚æˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯è®© tornado æ›¿ä»£ django å¼€å‘æœåŠ¡å™¨çš„ä½æ€§èƒ½è€Œå·².**</p>
<ul>
<li>è®© tornado å–ä»£ django çš„å¼€å‘æœåŠ¡</li>
</ul>
<p>åœ¨é¡¹ç›®çš„æ ¹è·¯å¾„æ–°å¢ä¸€ä¸ª <code>tornado_server.py</code>Â  çš„æ–‡ä»¶,ä»£ç å¦‚ä¸‹:</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> os</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> django.core.wsgi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> get_wsgi_application</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options, define, parse_command_line</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.httpserver</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.web</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.wsgi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> escape, httputil</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> List, Tuple, Optional, Callable, Any, Dict</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> types </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TracebackType</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.wsgi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> WSGIContainer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sys.path.append(os.path.dirname(os.path.abspath(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__file__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">os.environ[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'DJANGO_SETTINGS_MODULE'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'datapower.settings'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">setting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'template_path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: os.path.join(os.path.dirname(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__file__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'templates'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'static_path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: os.path.join(os.path.dirname(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__file__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'static'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'debug'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">define(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'port'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> WSGIContainer_With_Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">WSGIContainer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    @tornado.gen.coroutine</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, request):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: Dict[str, Any]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: List[bytes]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> start_response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers: List[Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                exc_info: Optional[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    Tuple[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        "Optional[Type[BaseException]]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">BaseException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        Optional[TracebackType],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ) -> Callable[[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], Any]:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"headers"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response.append</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        loop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.ioloop.IOLoop.instance()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        app_response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> yield</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> loop.run_in_executor(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.wsgi_application, WSGIContainer.environ(request),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                                                  start_response)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # app_response = self.wsgi_application(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        #     WSGIContainer.environ(request), start_response</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            response.extend(app_response)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.join(response)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(app_response, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"close"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                app_response.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: ignore</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"WSGI app did not call start_response"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        status_code_str, reason </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"status"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].split(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">" "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(status_code_str)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"headers"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># type: List[Tuple[str, str]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        header_set </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(k.lower() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (k, v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> escape.utf8(body)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "content-length"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Length"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(body))))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "content-type"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Content-Type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"text/html; charset=UTF-8"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "server"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> header_set:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            headers.append((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Server"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"TornadoServer/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.version))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        start_line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil.ResponseStartLine(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            "HTTP/1.1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, status_code, reason)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        header_obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> httputil.HTTPHeaders()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> key, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> headers:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            header_obj.add(key, value)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.connection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.connection.write_headers(start_line, header_obj, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.connection.finish()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._log(status_code, request)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    parse_command_line()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    wsgi_app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> WSGIContainer_With_Thread(get_wsgi_application())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tornado_app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.web.Application(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.*'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, tornado.web.FallbackHandler, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">wsgi_app)),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            # è™½ç„¶djangoè®¾ç½®äº†staticæ–‡ä»¶è®¿é—®æ¥å£, è¿™æ˜¯è²Œä¼¼å–ä¸åˆ°,é˜²æ­¢å‰ç«¯å‡ºç°æ ·å¼ä¸¢å¤±è¿™é‡Œå°±å¢åŠ ä¸€ä¸ªé™æ€æ–‡ä»¶è®¿é—®æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/static/(.*)'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, tornado.web.StaticFileHandler,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">             dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">os.path.join(os.path.dirname(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__file__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'static'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">setting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tornado.httpserver.HTTPServer(tornado_app)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    server.listen(options.port)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tornado.ioloop.IOLoop.instance.start()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '__main__'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    main()</span></span></code></pre>
</div><p>æ–‡ç« å‚è€ƒ:</p>
<p><a href="https://www.cnblogs.com/lycsdhr/p/11123545.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/lycsdhr/p/11123545.html</a></p>
<p><a href="https://www.cnblogs.com/ExMan/p/9506012.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/ExMan/p/9506012.html</a></p>
<p><a href="https://www.cnblogs.com/baolong/p/6769237.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/baolong/p/6769237.html</a></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²]]></title>
            <link>https://lpdswing.github.io//technology/other/Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½².html</link>
            <guid>https://lpdswing.github.io//technology/other/Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½².html</guid>
            <pubDate>Sun, 10 May 2020 19:28:00 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="hexo-è¯­é›€äº‘ç«¯å†™ä½œ-coding-æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²" tabindex="-1">Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½² <a class="header-anchor" href="#hexo-è¯­é›€äº‘ç«¯å†™ä½œ-coding-æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²" aria-label="Permalink to &quot;Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²&quot;">&ZeroWidthSpace;</a></h1>
<p>psï¼šå‚è€ƒæ–‡ç« ï¼š<a href="https://www.yuque.com/u46795/blog/dlloc7" target="_blank" rel="noreferrer">https://www.yuque.com/u46795/blog/dlloc7</a></p>
<p>ä¸Šæ–‡æ‰€ç”¨çš„æ˜¯ GitHub actionï¼Œä¸è¿‡æˆ‘ä»¬ç”¨çš„æ˜¯ coding å¹³å°ï¼Œå¥½å¤„æ˜¯å›½å†…è®¿é—®é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²ç®€å•ã€‚</p>
<p>é¦–å…ˆè¦æœ‰ä¸€ä¸ª hexo åšå®¢ï¼Œæ­¤å¤„ç•¥è¿‡ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å‘ã€‚</p>
<h2 id="åŸç†" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†" aria-label="Permalink to &quot;åŸç†&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>coding æŒç»­é›†æˆç¼–è¯‘åšå®¢æºç æ„å»ºé™æ€æ–‡ä»¶</li>
<li>ä½¿ç”¨è…¾è®¯äº‘å‡½æ•°è°ƒç”¨ coding æ„å»ºçš„ api</li>
<li>è¯­é›€çš„ webhook åŠŸèƒ½è°ƒç”¨è…¾è®¯äº‘çš„å‡½æ•°è°ƒç”¨ã€‚</li>
</ul>
<h2 id="coding-è‡ªåŠ¨æ„å»º-hexo" tabindex="-1">coding è‡ªåŠ¨æ„å»º hexo <a class="header-anchor" href="#coding-è‡ªåŠ¨æ„å»º-hexo" aria-label="Permalink to &quot;coding è‡ªåŠ¨æ„å»º hexo&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>æŒç»­é›†æˆ</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a href="http://www.mamicode.com/info-detail-2922484.html" target="_blank" rel="noreferrer">http://www.mamicode.com/info-detail-2922484.html</a></p>
<p>ä»–çš„ pipeline æœ‰äº›å‘ï¼Œnode ä¸æ”¯æŒï¼Œé™„ä¸Šæˆ‘çš„é…ç½®ï¼š</p>
<p>ä¸‹é¢è¿™ä¸ªæ˜¯ç›´æ¥ç²˜è¿‡æ¥çš„ï¼Œæ–¹ä¾¿ç†è§£</p>
<ul>
<li>ä»¤ç‰Œç”¨æˆ·åæ˜¯ï¼š<code>root</code></li>
<li>ä»¤ç‰Œå¯†ç æ˜¯ï¼š<code>abcdefg</code></li>
<li>é¡¹ç›®åœ°å€æ˜¯<code>[https://e.coding.net/test/test.git](https://e.coding.net/test/test.git)</code></li>
</ul>
<p>é‚£ä¹ˆæˆ‘ä»¬çš„è®¿é—®åœ°å€å°±æ˜¯<code>[https://root:abcdefg@e.coding.net/test/test.git](https://root:abcdefg@e.coding.net/test/test.git)</code></p>
<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipeline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> any</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  stages</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    stage(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">'hexo'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      steps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'npm install -g hexo-cli'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    stage(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">'æ‹‰å–ä»“åº“'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      steps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'git clone https://ä»¤ç‰Œç”¨æˆ·å:ä»¤ç‰Œå¯†ç @e.coding.net/lpdswing/hexo_blog.git .'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'npm install hexo --save'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'npm install yuque-hexo --save'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'npm install hexo-deployer-git --save'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    stage(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">'å‘å¸ƒ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      steps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'npm run start'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'mv source/_yuque/* source/_posts'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'ls source/_posts'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hexo clean &#x26;&#x26; hexo g -d'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><strong>å‘ 1</strong> ï¼šyuque-hexo ä¼šæŠŠæˆ‘ä»¬æœ¬æ¥çš„_post æ–‡ä»¶å¤¹ç›´æ¥åˆ æ‰è¦†ç›–ï¼Œå¯¼è‡´æœ¬æ¥æœ‰çš„æ–‡ç« è¢«åˆ é™¤ï¼Œæ‰€ä»¥è¿™é‡Œå†é…ç½® yuque çš„æ—¶å€™æ–‡ç« ç›®å½•ä½¿ç”¨çš„æ˜¯_yuque,ä¸€ä¼šä¼šä»‹ç»åˆ°ï¼Œyuque-hexo çš„é…ç½®ã€‚æ›²çº¿æ•‘å›½ï¼Œæˆ‘ä»¬å†è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ç§»åŠ¨æ–‡ç« åˆ° post æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ„å»ºé™æ€æ–‡ç« ã€‚</p>
<h2 id="è…¾è®¯äº‘å‡½æ•°" tabindex="-1">è…¾è®¯äº‘å‡½æ•° <a class="header-anchor" href="#è…¾è®¯äº‘å‡½æ•°" aria-label="Permalink to &quot;è…¾è®¯äº‘å‡½æ•°&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>ä½¿ç”¨çš„ python3.6</li>
</ul>
<p>å‚è€ƒç¬¬ä¸€ä¸ªæ–‡ç« çš„ä»£ç ï¼Œé™„ä¸Šé…ç½®ï¼š</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># -*- coding: utf8 -*-</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> requests</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main_handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(event, context):</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "https://xxxxx"</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # è¿™ä¸ªurlå†codingè‡ªåŠ¨æ„å»ºçš„è§¦å‘è§„åˆ™>APIè§¦å‘å“ªé‡Œå¤åˆ¶è¿‡æ¥</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    payload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ref"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"master"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"envs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: []}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'Content-Type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'application/json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">	# codingçš„apiè§¦å‘ç”¨åˆ°æ˜¯http basic authéªŒè¯ï¼Œè¿™é‡Œçš„ç”¨æˆ·å¯†ç ä¹Ÿå»codingçš„é¡¹ç›®tokenæ‹·è´</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # å¼€å‘è€…é€‰é¡¹-é¡¹ç›®ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰å°±æ–°å»ºï¼Œä»“åº“æƒé™å…¨å‹¾ä¸Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> requests.post( url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">headers, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> payload,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä»¤ç‰Œç”¨æˆ·å'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä»¤ç‰Œå¯†ç '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response.text</span></span></code></pre>
</div><ul>
<li>æµ‹è¯•è…¾è®¯äº‘å‡½æ•°æˆåŠŸå°±å¯ä»¥ä¸‹ä¸€æ­¥äº†</li>
</ul>
<h2 id="è¯­é›€é…ç½®" tabindex="-1">è¯­é›€é…ç½® <a class="header-anchor" href="#è¯­é›€é…ç½®" aria-label="Permalink to &quot;è¯­é›€é…ç½®&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>å‘å¸ƒæ–‡ç« </li>
</ul>
<p>æ–‡ç« å‘å¸ƒçš„æ—¶å€™å‹¾é€‰æ¨é€ç»™å…³æ³¨çš„äººé€‰é¡¹æ‰ä¼šè°ƒç”¨ webhookã€‚</p>
<h2 id="hexo-æœ¬åœ°é…ç½®" tabindex="-1">hexo æœ¬åœ°é…ç½® <a class="header-anchor" href="#hexo-æœ¬åœ°é…ç½®" aria-label="Permalink to &quot;hexo æœ¬åœ°é…ç½®&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>package.json é…ç½®</li>
</ul>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hexo-site"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "version"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "private"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "yuqueConfig"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "baseUrl"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://www.yuque.com/api/v2"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "login"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä½ çš„ä¸ªäººè·¯å¾„"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "repo"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä½ çš„çŸ¥è¯†åº“åç§°"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "mdNameFormat"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"title"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "postPath"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"source/_yuque"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "token"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä½ çš„tokenï¼Œå†ç”¨æˆ·è®¾ç½®çš„tokené‚£é‡Œæ–°å»º"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "onlyPublished"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "scripts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "build"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hexo generate"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "clean"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hexo clean"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "server"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hexo server"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "sync"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"yuque-hexo sync"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "deploy"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hexo deploy"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "start"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"yuque-hexo clean &#x26;&#x26; yuque-hexo sync"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "hexo"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "version"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"4.2.0"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "dependencies"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^4.2.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-generator-archive"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-generator-category"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-generator-index"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-generator-tag"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-renderer-ejs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-renderer-marked"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^2.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-renderer-stylus"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.1.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hexo-server"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.0.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "yuque-hexo"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^1.6.4"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><ul>
<li>
<p>å‘ 1</p>
<ul>
<li>login å‚æ•°è¿™ä¸ªå¡«çš„ä¸æ˜¯ url åœ°å€ï¼Œæ˜¯ url åç¼€ç±»ä¼¼ç”¨æˆ·åçš„å­—ç¬¦ä¸²</li>
</ul>
</li>
<li>
<p>å‘ 2</p>
<ul>
<li>å¦‚æœä½ æœ¬æ¥æœ‰æ–‡ç« çš„è¯ï¼Œ&quot;postPath&quot;: &quot;source/_yuque&quot;,ç”¨æˆ‘è¿™ä¸ªé…ç½®ï¼Œä¸è¦ç”¨_postï¼Œå¦åˆ™å† yuque-hexo sync çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åˆ é™¤é‡å»ºï¼ŒåŸæ¥å†™çš„æ–‡ç« ä¹Ÿå°±æ²¡äº†ï¼Œæ‰€ä»¥ä½¿ç”¨å¦ä¸€ç§åŠæ³•ï¼Œå† coding è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ä»‹ç»äº†ã€‚</li>
</ul>
</li>
</ul>
<h2 id="æŠŠ-hexo-çš„æºç -push-åˆ°-coding" tabindex="-1">æŠŠ hexo çš„æºç  push åˆ° coding <a class="header-anchor" href="#æŠŠ-hexo-çš„æºç -push-åˆ°-coding" aria-label="Permalink to &quot;æŠŠ hexo çš„æºç  push åˆ° coding&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨è¯­é›€å‘å¸ƒä¸€ç¯‡æ–‡ç« ï¼Œå‘ç°æ–‡ç« åŒæ­¥è¿‡å»äº†ï¼Œå¤§åŠŸå‘Šæˆï¼</p>
<p>psï¼š coding æœ‰æ—¶å€™ä¼šæœ‰æ„å»ºå¤±è´¥çš„é—®é¢˜ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šæ˜¯å•¥åŸå› ï¼Œä¿®æ”¹ä¸€ä¸‹æ–‡ç« å†å‘å¸ƒä¸€æ¬¡æå®šã€‚</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[sqlalchemyä¹‹eventä½¿ç”¨]]></title>
            <link>https://lpdswing.github.io//technology/other/sqlalchemyä¹‹eventä½¿ç”¨.html</link>
            <guid>https://lpdswing.github.io//technology/other/sqlalchemyä¹‹eventä½¿ç”¨.html</guid>
            <pubDate>Fri, 24 Apr 2020 10:50:10 GMT</pubDate>
            <content:encoded><![CDATA[<ul>
<li>å‚è€ƒæ–‡æ¡£
<blockquote>
<p><a href="https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events" target="_blank" rel="noreferrer">https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events</a></p>
</blockquote>
</li>
</ul>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sqlalchemy.event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> listents_for</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sqlalchemy.orm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sessionmaker</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sqlalchemy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> create_engine</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">engine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> create_engine(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">SQLALCHEMY_DATABASE_URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pool_pre_ping</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Session </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sessionmaker(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">autocommit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">autoflush</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">bind</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">engine)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">session </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Session()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç¤ºä¾‹ä¸ºå½“åˆ é™¤æŸæ¡æ•°æ®çš„æ—¶å€™,è§¦å‘eventåˆ é™¤å’Œè¿™æ¡æ•°æ®ç›¸å…³çš„æ•°æ®,é€‚åˆç”¨äºæ²¡å¤–é”®çº¦æŸçš„å…³ç³»è¡¨ç»“æ„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">@listens_for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(User,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'after_delete'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> after_del_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mapper,connection,target):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mapped)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># class User->user ,æ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(connection) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># &#x3C;sqlalchemy.engine.base.Connection object at xxxxx></span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(target.id)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># targetå°±æ˜¯userå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # ....,å†™é€»è¾‘ä»£ç </span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pythonç®—æ³•ä¹‹æ ˆ]]></title>
            <link>https://lpdswing.github.io//technology/other/Pythonç®—æ³•ä¹‹æ ˆ.html</link>
            <guid>https://lpdswing.github.io//technology/other/Pythonç®—æ³•ä¹‹æ ˆ.html</guid>
            <pubDate>Wed, 24 Apr 2019 16:10:15 GMT</pubDate>
            <description><![CDATA[
æ ˆ(stack)åˆç§°ä¹‹ä¸ºå †æ ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœ‰åºè¡¨ï¼Œå…¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œè¿ä½œã€‚

## æ ˆçš„æ¥å£

list å°±ç±»ä¼¼ä¸€ä¸ªæ ˆ

| æ¥å£      | list å¯¹åº”æ–¹æ³• |
| ]]></description>
            <content:encoded><![CDATA[<p>æ ˆ(stack)åˆç§°ä¹‹ä¸ºå †æ ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœ‰åºè¡¨ï¼Œå…¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œè¿ä½œã€‚</p>
<h2 id="æ ˆçš„æ¥å£" tabindex="-1">æ ˆçš„æ¥å£ <a class="header-anchor" href="#æ ˆçš„æ¥å£" aria-label="Permalink to &quot;æ ˆçš„æ¥å£&quot;">&ZeroWidthSpace;</a></h2>
<p>list å°±ç±»ä¼¼ä¸€ä¸ªæ ˆ</p>
<table>
<thead>
<tr>
<th>æ¥å£</th>
<th>list å¯¹åº”æ–¹æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>push()</td>
<td>append()</td>
</tr>
<tr>
<td>pop()</td>
<td>pop()</td>
</tr>
<tr>
<td>isEmpty()</td>
<td>not list</td>
</tr>
<tr>
<td>length()</td>
<td>len()</td>
</tr>
<tr>
<td>getTop()</td>
<td>list[-1]</td>
</tr>
</tbody>
</table>
<h2 id="åº”ç”¨" tabindex="-1">åº”ç”¨ <a class="header-anchor" href="#åº”ç”¨" aria-label="Permalink to &quot;åº”ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>å‡å¦‚è¡¨è¾¾å¼ä¸­å…è®¸åŒ…å«ä¸‰ä¸­æ‹¬å·<code>()</code>ã€<code>[]</code>ã€<code>{}</code>ï¼Œå…¶åµŒå¥—é¡ºåºæ˜¯ä»»æ„çš„ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<p><code>{()[]}</code></p>
<p>é”™è¯¯çš„æ ¼å¼å¦‚:</p>
<blockquote>
<p>[(]),[()),(()}</p>
</blockquote>
<p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œæ‹¬å·åŒ¹é…æ˜¯å¦æ­£ç¡®</p>
<ul>
<li>æ€è·¯</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªç©ºæ ˆï¼Œç”¨æ¥å­˜å‚¨å°šæœªæ‰¾åˆ°çš„å·¦æ‹¬å·ï¼›</p>
<p>ä¾¿åˆ©å­—ç¬¦ä¸²ï¼Œé‡åˆ°å·¦æ‹¬å·åˆ™å‹æ ˆï¼Œé‡åˆ°å³æ‹¬å·åˆ™å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·è¿›è¡ŒåŒ¹é…ï¼›</p>
<p>åœ¨ç¬¬äºŒæ­¥éª¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç©ºæ ˆæƒ…å†µä¸‹é‡åˆ°å³æ‹¬å·ï¼Œè¯´æ˜ç¼ºå°‘å·¦æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›</p>
<p>åœ¨ç¬¬äºŒæ­¥éª¤éå†ç»“æŸæ—¶ï¼Œæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼ºå°‘å³æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›</p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">LEFT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'('</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'['</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'{'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">RIGHT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">')'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">']'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'}'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(expr):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    :param expr : str</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    :return bool</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    stack </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> brackets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> expr:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> brackets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            stack.append(brackets) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å·¦æ‹¬å·å…¥æ ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        elif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> brackets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RIGHT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> stack </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">or</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(brackets) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(stack[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            stack.pop()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> stack</span></span></code></pre>
</div><h2 id="æ‹“å±•" tabindex="-1">æ‹“å±• <a class="header-anchor" href="#æ‹“å±•" aria-label="Permalink to &quot;æ‹“å±•&quot;">&ZeroWidthSpace;</a></h2>
<p>æ£€æµ‹ä¸€æ®µä»£ç çš„æ‹¬å·æ˜¯å¦æ­£ç¡®</p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> re</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">LEFT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'('</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'['</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'{'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">RIGHT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">')'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">']'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'}'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> get_brackets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''è·å–æ‹¬å·'''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.join(re.findall(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\(\)\[\]\{\}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,s))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(expr):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    :param expr : str</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    :return bool</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    stack </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> brackets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> expr:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> brackets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            stack.append(brackets) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å·¦æ‹¬å·å…¥æ ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        elif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> brackets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RIGHT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> stack </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">or</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(brackets) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(stack[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            stack.pop()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> stack</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "__main__"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '''</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    function myFunction(x, y) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    if (y === undefined) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          y = 0;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    } (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    expr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> get_brackets(s)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(expr)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># (){(){}(}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match(expr)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># False</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹]]></title>
            <link>https://lpdswing.github.io//technology/other/ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹.html</link>
            <guid>https://lpdswing.github.io//technology/other/ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹.html</guid>
            <pubDate>Wed, 24 Apr 2019 16:10:15 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹" tabindex="-1">ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹ <a class="header-anchor" href="#ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹" aria-label="Permalink to &quot;ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="_1-1-å¤šä»»åŠ¡" tabindex="-1">1.1 å¤šä»»åŠ¡ <a class="header-anchor" href="#_1-1-å¤šä»»åŠ¡" aria-label="Permalink to &quot;1.1 å¤šä»»åŠ¡&quot;">&ZeroWidthSpace;</a></h2>
<p>æ€ä¹ˆæ¥ç†è§£å¤šä»»åŠ¡å‘¢ï¼Ÿå…¶å®å°±æ˜¯æŒ‡æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ ä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹åˆ·å¾®åšï¼Œä¸€è¾¹èŠ QQï¼Œä¸€è¾¹ç”¨ Markdown å†™ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰ 4 ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯ç•Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚</p>
<h2 id="_1-2-ä»€ä¹ˆæ˜¯å¹¶å‘" tabindex="-1">1.2 ä»€ä¹ˆæ˜¯å¹¶å‘ <a class="header-anchor" href="#_1-2-ä»€ä¹ˆæ˜¯å¹¶å‘" aria-label="Permalink to &quot;1.2 ä»€ä¹ˆæ˜¯å¹¶å‘&quot;">&ZeroWidthSpace;</a></h2>
<p>Go æ˜¯å¹¶å‘è¯­è¨€ï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¯­è¨€ã€‚åœ¨è®¨è®ºå¦‚ä½•åœ¨ Go ä¸­è¿›è¡Œå¹¶å‘å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Œä»¥åŠå®ƒä¸å¹¶è¡Œæ€§æœ‰ä»€ä¹ˆä¸åŒã€‚(Go is a concurrent language and not a parallel one. )</p>
<p><strong>å¹¶å‘æ€§ Concurrency æ˜¯åŒæ—¶å¤„ç†è®¸å¤šäº‹æƒ…çš„èƒ½åŠ›ã€‚</strong></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººåœ¨æ™¨è·‘ã€‚åœ¨æ™¨è·‘æ—¶ï¼Œä»–çš„é‹å¸¦æ¾äº†ã€‚ç°åœ¨è¿™ä¸ªäººåœæ­¢è·‘æ­¥ï¼Œç³»é‹å¸¦ï¼Œç„¶ååˆå¼€å§‹è·‘æ­¥ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¹¶å‘æ€§ç¤ºä¾‹ã€‚è¿™ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†è·‘æ­¥å’Œç³»é‹å¸¦ï¼Œè¿™æ˜¯ä¸€ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚</p>
<p>ä»€ä¹ˆæ˜¯å¹¶è¡Œæ€§ parallelismï¼Œå®ƒä¸å¹¶å‘ concurrency æœ‰ä»€ä¹ˆä¸åŒ?</p>
<p>å¹¶è¡Œå°±æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å¬èµ·æ¥å¯èƒ½ä¸å¹¶å‘ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„ã€‚</p>
<p>è®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ…¢è·‘ä¾‹å­æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªäººæ­£åœ¨æ…¢è·‘ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„æ‰‹æœºå¬éŸ³ä¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäººä¸€è¾¹æ…¢è·‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œé‚£å°±æ˜¯ä»–åŒæ—¶åœ¨åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§(parallelism)ã€‚</p>
<p>å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§â€”â€”ä¸€ç§æŠ€æœ¯ä¸Šçš„è§‚ç‚¹ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ª web æµè§ˆå™¨ã€‚web æµè§ˆå™¨æœ‰å„ç§ç»„ä»¶ã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯ web é¡µé¢å‘ˆç°åŒºåŸŸå’Œä¸‹è½½æ–‡ä»¶ä» internet ä¸‹è½½çš„ä¸‹è½½å™¨ã€‚å‡è®¾æˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼æ„å»ºäº†æµè§ˆå™¨çš„ä»£ç ï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰§è¡Œã€‚å½“è¿™ä¸ªæµè§ˆå™¨è¿è¡Œåœ¨å•ä¸ªæ ¸å¤„ç†å™¨ä¸­æ—¶ï¼Œå¤„ç†å™¨å°†åœ¨æµè§ˆå™¨çš„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å®ƒå¯èƒ½ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç„¶åå®ƒå¯èƒ½ä¼šåˆ‡æ¢åˆ°å‘ˆç°ç”¨æˆ·è¯·æ±‚çš„ç½‘é¡µçš„ htmlã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘æ€§ã€‚å¹¶å‘è¿›ç¨‹ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œå‘¨æœŸé‡å ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹è½½å’Œå‘ˆç°ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œé‡å ã€‚</p>
<p>å‡è®¾åŒä¸€æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½ç»„ä»¶å’Œ HTML å‘ˆç°ç»„ä»¶å¯èƒ½åŒæ—¶åœ¨ä¸åŒçš„å†…æ ¸ä¸­è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§ã€‚</p>
<p><img src="https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&amp;display=inline&amp;height=515&amp;margin=%5Bobject%20Object%5D&amp;originHeight=515&amp;originWidth=777&amp;status=done&amp;style=none&amp;width=777#alt=" alt=""></p>
<p><img src="https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&amp;display=inline&amp;height=515&amp;margin=%5Bobject%20Object%5D&amp;originHeight=515&amp;originWidth=777&amp;status=done&amp;style=none&amp;width=777#alt=" alt=""></p>
<p>å¹¶è¡Œæ€§ Parallelism ä¸ä¼šæ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºå¹¶è¡Œè¿è¡Œçš„ç»„ä»¶å¯èƒ½éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­ï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆæ—¶ï¼Œåº”è¯¥å°†å…¶ä¼ é€’ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚ä½¿ç”¨å¼¹å‡ºçª—å£ã€‚è¿™ç§é€šä¿¡å‘ç”Ÿåœ¨è´Ÿè´£ä¸‹è½½çš„ç»„ä»¶å’Œè´Ÿè´£å‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ä¹‹é—´ã€‚è¿™ç§é€šä¿¡å¼€é”€åœ¨å¹¶å‘ concurrent ç³»ç»Ÿä¸­å¾ˆä½ã€‚å½“ç»„ä»¶åœ¨å¤šä¸ªå†…æ ¸ä¸­å¹¶è¡Œ concurrent è¿è¡Œæ—¶ï¼Œè¿™ç§é€šä¿¡å¼€é”€å¾ˆé«˜ã€‚å› æ­¤ï¼Œå¹¶è¡Œç¨‹åºå¹¶ä¸æ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´!</p>
<p><img src="https://www.qfgolang.com/wp-content/uploads/2019/08/t.png#align=left&amp;display=inline&amp;height=664&amp;margin=%5Bobject%20Object%5D&amp;originHeight=664&amp;originWidth=787&amp;status=done&amp;style=none&amp;width=787#alt=" alt=""></p>
<h2 id="_1-3-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹" tabindex="-1">1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ <a class="header-anchor" href="#_1-3-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹" aria-label="Permalink to &quot;1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>è¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ï¼Œåç¨‹(Coroutineï¼Œä¹Ÿå«è½»é‡çº§çº¿ç¨‹)</strong></p>
<p>è¿›ç¨‹</p>
<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯ CPU èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚</p>
<p>è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ <strong>è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚</strong></p>
<p>çº¿ç¨‹</p>
<p>çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ CPU æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹ IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚</p>
<p>åç¨‹</p>
<p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡å Coroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œ.</p>
<p><strong>ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶&quot;è½»é‡çº§&quot;ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡ 1 ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚</strong></p>
<blockquote>
<p>åç¨‹ä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚</p>
</blockquote>
<p><strong>Go è¯­è¨€å¯¹äºå¹¶å‘çš„å®ç°æ˜¯é åç¨‹ï¼ŒGoroutine</strong></p>
]]></content:encoded>
            <enclosure url="https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Sublime text å¸¸ç”¨æ’ä»¶]]></title>
            <link>https://lpdswing.github.io//technology/other/Sublime-text-å¸¸ç”¨æ’ä»¶.html</link>
            <guid>https://lpdswing.github.io//technology/other/Sublime-text-å¸¸ç”¨æ’ä»¶.html</guid>
            <pubDate>Sat, 21 Apr 2018 00:15:21 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="sublime-text3å¸¸ç”¨æ’ä»¶" tabindex="-1">Sublime text3å¸¸ç”¨æ’ä»¶ <a class="header-anchor" href="#sublime-text3å¸¸ç”¨æ’ä»¶" aria-label="Permalink to &quot;Sublime text3å¸¸ç”¨æ’ä»¶&quot;">&ZeroWidthSpace;</a></h1>
<p>é›†æˆæ’ä»¶ï¼š</p>
<p>(1)Alignment: ä»£ç å¯¹é½æ’ä»¶ï¼Œå³â€=â€å·å¯¹é½ï¼Œå˜é‡å®šä¹‰å¤ªå¤šï¼Œé•¿çŸ­ä¸ä¸€ï¼Œå¯ä¸€é”®å¯¹é½ï¼Œé»˜è®¤å¿«æ·é”®Ctrl+Alt+Aå¯èƒ½å’ŒQQæˆªå±åŠŸèƒ½å†²çªï¼Œå¯è®¾ç½®å…¶ä»–å¿«æ·é”®å¦‚ï¼šCtrl+Shift+Alt+A
(2)AutoFileName: å¿«æ·è¾“å…¥æ–‡ä»¶åæ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆæ–‡ä»¶åçš„è¾“å…¥ï¼Œå¦‚å›¾ç‰‡é€‰å–ï¼Œè¾“å…¥â€/â€å³å¯çœ‹åˆ°ç›¸å¯¹äºæœ¬é¡¹ç›®æ–‡ä»¶å¤¹çš„å…¶ä»–æ–‡ä»¶ã€‚
(3)BracketHighlighter: ä»£ç åŒ¹é…æ’ä»¶ï¼Œå¯åŒ¹é…[], (), {}, â€œâ€, â€, ï¼Œé«˜äº®æ ‡è®°ï¼Œä¾¿äºæŸ¥çœ‹èµ·å§‹å’Œç»“æŸæ ‡è®°ï¼Œç‚¹å‡»å¯¹åº”ä»£ç å³å¯ã€‚
(4)ClipboardHistory: å‰ªåˆ‡æ¿å†å²è®°å½•æ’ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨å¤åˆ¶/å‰ªåˆ‡çš„å†…å®¹ï¼ŒCtrl+alt+vï¼šæ˜¾ç¤ºå†å²è®°å½•ï¼ŒCtrl+alt+dï¼šæ¸…ç©ºå†å²è®°å½•ï¼ŒCtrl+shift+vï¼šç²˜è´´ä¸Šä¸€æ¡è®°å½•ï¼ˆæœ€æ—§ï¼‰ï¼ŒCtrl+shift+alt+vï¼šç²˜è´´ä¸‹ä¸€æ¡è®°å½•ï¼ˆæœ€æ–°ï¼‰
(5)CodeFormatter: ä»£ç æ ¼å¼åŒ–æ’ä»¶ï¼Œæ”¯æŒPHPã€JavaScript/JSONã€HTMLã€CSS/SCSSã€Pythonã€Visual Basicã€Coldfusion/Railo/Luceeç­‰ç­‰ã€‚
(6)ConvertToUTF8: ç¼–è¾‘å¹¶ä¿å­˜ç›®å‰ç¼–ç ä¸è¢« Sublime Text æ”¯æŒçš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸­æ—¥éŸ©ç”¨æˆ·ä½¿ç”¨çš„GB2312ï¼ŒGBKï¼ŒBIG5ï¼ŒEUC-KRï¼ŒEUC-JP ï¼ŒANSIç­‰ã€‚
(7)DocBlockr: ä»£ç æ³¨é‡Šæ’ä»¶ï¼Œæ ‡å‡†çš„æ³¨é‡Šï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç­‰ï¼Œå¹¶ä»¥å¤šè¡Œæ˜¾ç¤ºï¼Œçœå»æ‰‹åŠ¨ç¼–å†™ã€‚
(8)Emmet: HTML/CSSä»£ç å¿«é€Ÿç¼–å†™æ’ä»¶ï¼Œå¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¯æ˜¯å¿…å¤‡æ’ä»¶ã€‚
(9)FileDiffs: å¼ºå¤§çš„æ¯”è¾ƒä»£ç ä¸åŒå·¥å…·ï¼Œæ¯”è¾ƒå½“å‰æ–‡ä»¶ä¸é€‰ä¸­çš„ä»£ç ã€å‰ªåˆ‡æ¿ä¸­ä»£ç ã€å¦ä¸€æ–‡ä»¶ã€æœªä¿å­˜æ–‡ä»¶ä¹‹é—´çš„å·®åˆ«ï¼Œå³é”®æ ‡ç­¾é¡µï¼Œå‡ºç°FileDiffs Menuæˆ–è€…Diff with Tabâ€¦é€‰æ‹©å¯¹åº”æ–‡ä»¶æ¯”è¾ƒå³å¯ã€‚
(10)Git: Gitç®¡ç†æ’ä»¶ï¼ŒåŸºæœ¬ä¸Šå®ç°äº†Gitçš„æ‰€æœ‰åŠŸèƒ½ã€‚
(11)IMESupport: å®ç°ä¸­æ–‡è¾“å…¥æ³•é¼ æ ‡è·Ÿéšæ’ä»¶ã€‚
(12)KeymapManager: å¿«æ·é”®ç®¡ç†æ’ä»¶ï¼Œé€šè¿‡Ctrl+alt+kæˆ–è€…é€šè¿‡é¡¶éƒ¨èœå•â€œæŸ¥çœ‹ -&gt; å¿«æ·é”®ç®¡ç†â€æ‰“å¼€é¢æ¿ã€‚
(13)PackageControl: æ’ä»¶ç®¡ç†æ’ä»¶ï¼Œæä¾›æ·»åŠ ã€åˆ é™¤ã€ç¦ç”¨ã€æŸ¥æ‰¾æ’ä»¶ç­‰åŠŸèƒ½ã€‚
(14)SideBarEnhancements: ä¾§è¾¹æ å³é”®å¢å¼ºæ’ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ‰“å¼€æ–¹å¼å¿«æ·é”®ï¼Œéå¸¸å®ç”¨ã€‚
(15)SublimeCodeIntel: ä»£ç è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œæ”¯æŒç»å¤§å¤šæ•°å‰ç«¯å¼€å‘è¯­è¨€ã€‚
(16)SublimeLinter: ä»£ç è¯­æ³•æ£€æµ‹æ’ä»¶ï¼Œæ”¯æŒC/C++ã€CSSã€HTMLã€Javaã€JavaScriptã€Luaã€Perlã€PHPã€Pythonã€Rubyã€XMLç­‰ç­‰ã€‚
(17)SyncedSidebarBg: ä¾§è¾¹æ ä¸ä¸»é¢˜é¢œè‰²åŒæ­¥æ›´æ–°æ’ä»¶ï¼Œè‡ªåŠ¨åŒæ­¥ä¾§è¾¹æ åº•è‰²ä¸ºç¼–è¾‘çª—å£åº•è‰²ã€‚
(18)Theme-Nil: å®Œç¾çš„ç¼–ç ä¸»é¢˜ï¼Œç”¨è¿‡çš„éƒ½è¯´å¾ˆå¥½ã€‚</p>
<h2 id="å¸¸è§é—®é¢˜" tabindex="-1">å¸¸è§é—®é¢˜ <a class="header-anchor" href="#å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<p>Qï¼šå¦‚ä½•å®‰è£…æ’ä»¶ï¼Ÿ
Aï¼šæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œè¾“å…¥ install å¹¶å›è½¦ï¼Œé€‰æ‹©ç›¸åº”æ’ä»¶å®‰è£…å³å¯ã€‚æˆ–è€…ä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹ â€“ æ’ä»¶æ§åˆ¶ â€“ Install Packageâ€è¿›è¡Œæ’ä»¶å®‰è£…ã€‚
Qï¼šå¦‚ä½•ä¿®æ”¹ä¾§è¾¹æ èƒŒæ™¯é¢œè‰²ï¼Ÿ
Aï¼šä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨æµé£æ¸…éŸ³æ±‰åŒ–ç‰ˆï¼Œå…¶é»˜è®¤ä¸»é¢˜ä¸ºâ€œNil-Themeâ€ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶çš„ç›¸åº”è·¯å¾„æ˜¯â€œData\Packages\Nil-Theme\Nil.sublime-themeâ€ã€‚</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/** Sidebar tree (bg) **/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œclassâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œsidebar_treeâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œdark_contentâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œrow_paddingâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œindentâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">13</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œindent_offsetâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œindent_top_levelâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œlayer0.tintâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/* darker gray */</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> /* è¾“å…¥å–œæ¬¢çš„é¢œè‰²çš„å¯¹åº”RGBå€¼å³å¯ */</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œlayer0.opacityâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œdark_contentâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span></code></pre>
</div><p>Qï¼šä¸ºä»€ä¹ˆåœ¨Win8ç³»ç»Ÿå‡ºç°ä¸­æ–‡ä¹±ç ï¼Ÿ
Aï¼šè¿™æ˜¯Win8æƒé™é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¸è½½åé‡è£…åˆ°ç³»ç»Ÿä¹‹å¤–çš„åˆ†åŒºï¼Œå¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚
Qï¼šä¸ºä»€ä¹ˆè¾“å…¥å…‰æ ‡å˜å¾—å¾ˆç²—ï¼Ÿ
Aï¼šä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰åŸæœ‰æ ¼å¼æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ã€‚æç¤ºï¼šè®°å¾—ç»™åŸæ¥çš„æœ€åä¸€è¡Œæœ«å°¾æ·»åŠ ä¸€ä¸ªåŠè§’é€—å·ã€‚
â€œcaret_styleâ€: â€œphaseâ€,
â€œcaret_extra_topâ€: 0,
â€œcaret_extra_bottomâ€: 0,
â€œcaret_extra_widthâ€: 1,
Qï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å‡ºç°åŒæ–‡ä»¶å¤¹å›¾æ ‡ï¼Ÿ
Aï¼šåœ¨ä¸»é¢˜æ¨¡æ¿è§„åˆ™ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ã€‚</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œclassâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œicon_folderâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œcontent_marginâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œclassâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œicon_file_typeâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œcontent_marginâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œclassâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œicon_folder_loadingâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">â€œcontent_marginâ€</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>Qï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å’Œæ ‡ç­¾æ ä¸Šä¸­æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºâ€œå£å£â€ï¼Œè€Œè‹±æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºæ­£å¸¸ï¼Ÿ
Aï¼šè¿™é‡Œä»¥Win7æ¥è¯´æ˜ï¼Œæ¡Œé¢ â€“ é¼ æ ‡å³é”® â€“ ä¸ªæ€§åŒ– â€“ æ˜¾ç¤º â€“ è®¾ç½®è‡ªå®šä¹‰æ–‡æœ¬å¤§å°(DPI) â€“ é€‰æ‹©â€œè¾ƒå° â€“ 100%(é»˜è®¤)â€å³å¯ã€‚æˆ–è€…ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æœ«å°¾åŠ ä¸Šä¸€è¡Œä»£ç è¦†ç›–ç³»ç»Ÿçš„DPIã€‚
â€œdpi_scaleâ€: 1.0,</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07(PS2307)]]></title>
            <link>https://lpdswing.github.io//technology/other/Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07-PS2307.html</link>
            <guid>https://lpdswing.github.io//technology/other/Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07-PS2307.html</guid>
            <pubDate>Mon, 16 Apr 2018 21:49:32 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="ç¾¤è”mpall-rel-7f-v5-03-0a-dl07é‡äº§ps2251-07-ps2307-æ­¥éª¤" tabindex="-1">ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤ <a class="header-anchor" href="#ç¾¤è”mpall-rel-7f-v5-03-0a-dl07é‡äº§ps2251-07-ps2307-æ­¥éª¤" aria-label="Permalink to &quot;ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤&quot;">&ZeroWidthSpace;</a></h1>
<p>æ•™ç¨‹æˆªå–è‡ª<a href="http://www.liangchanba.com/article-2442-1.html" target="_blank" rel="noreferrer">é‡äº§å§</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181009497.png" alt=""></p>
<h3 id="æ³¨æ„-æ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„uç›˜æœ‰å†™ä¿æŠ¤-ç¬¬åæ­¥æ—¶filesystemä¸è¦ç”¨default-é€‰æ‹©fat32-æœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚" tabindex="-1">æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚ <a class="header-anchor" href="#æ³¨æ„-æ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„uç›˜æœ‰å†™ä¿æŠ¤-ç¬¬åæ­¥æ—¶filesystemä¸è¦ç”¨default-é€‰æ‹©fat32-æœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚" aria-label="Permalink to &quot;æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚&quot;">&ZeroWidthSpace;</a></h3>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181009497.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[djangoè¿›é˜¶å­¦ä¹ -ä¸­é—´ä»¶]]></title>
            <link>https://lpdswing.github.io//technology/other/djangoè¿›é˜¶-ä¸­é—´ä»¶.html</link>
            <guid>https://lpdswing.github.io//technology/other/djangoè¿›é˜¶-ä¸­é—´ä»¶.html</guid>
            <pubDate>Wed, 03 May 2017 19:19:39 GMT</pubDate>
            <description><![CDATA[
# djangoè¿›é˜¶

1. **HTTP Objects**

    **HttpRequest** 

   â€‹	**è‡ªèº«å±æ€§** 

   â€‹		`request.path -> /foo/bar/ `

   â€‹		`request.method `

   â€‹		`request.GET `

   â€‹		`request.POST `

   â€‹		`request.COOKIES `

   â€‹		`request.FILES -> {name1: file1, name2: file2, ...} `

   â€‹		`request.META['REMOTE_ADDR'] `

   â€‹		`request.META['HTTP_USER_AGENT'] 	`

   â€‹	**ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§** 

   â€‹		request.session 

   â€‹		request.user 

   â€‹	**æ–¹æ³•** 

   â€‹		request.get_full_path() -> /foo/bar/?a=123 

   â€‹		request.get_signed_cookie(key) 

   **HttpResponse** 

   â€‹	**å±æ€§** 

   â€‹		response.status_code 

   â€‹		response.content 

   â€‹	**æ–¹æ³•** 

   â€‹		response.set_cookie(key, value, max_age=None) 

   **JsonHttpResponse** 

   	`response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`

2. django ä¸­é—´ä»¶

   æœ€ç®€å•çš„ä¸­é—´ä»¶:aopé¢å‘åˆ‡ç‰‡ç¼–ç¨‹

   è‡ªå·±å†™ä¸€ä¸ªè·å–æ¥å£æ•°æ®çš„ä¸­é—´ä»¶

   ```python
   class Result(MiddlewareMixin):
       def process_view(self,request,view_func,*args,**kwargs):
           #æ‰§è¡Œviewå‡½æ•°.è·å–rc
           try:
               print(args,kwargs)
               view_result =view_func(request)
               rc = 0
           except Exception as e:
               view_result = None
               rc = str(e)
               
           #è·å– msg
           uid = request.GET.get('uid')
           msg = cache.get(f'msg-{uid}') #python3æ‰æœ‰fæ‹¼æ¥
           
           data ={
               'result': view_result,
               'rc': rc,
               'msg':msg
           }
           return JsonResponse(data)
   ```

   æœ€ç®€å•çš„è£…é¥°å™¨â€”è£…é¥°å™¨å½¢å¼

```python
def simple_middeware(get_response):
    #do_something  for __init__()
    
    def middleware(request):
        # do something before_views()
		t=time.time()
        
        response = get_response(request) #view å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ
        
        print(time.time()-t)
        # do something after_views()
        return response
    return middleware
```

è£…é¥°å™¨çš„è¿è¡Œæ–¹å¼

```python
def timer(func):
    def wrap(*args,**kwargs):
        t= time.time()
        res= func(*args,**kwargs)
        print(time.time()-t)
        return res
    return wrap

@timer
def foo(n)
	time.sleep(n)
#è¢«è£…é¥°å,è¿™æ—¶å€™ foo.__name__ å·²ç»å˜æˆäº†wrapè€Œä¸æ˜¯fooäº†
# ç›¸å½“äºtimer(foo)(0.5)->wrap(0.5)
```

ä¸­é—´ä»¶ç±»

```python
class MyMiddleware:
    def __init__(self,view_func):
        self.view_func = view_func  #åŠ¨æ€æ·»åŠ å±æ€§
    def __call__(self,request):
        response = self.view_func(request)
        return response
    def process_view(self,request,view_func,view_args,view_kwargs):
        pass
]]></description>
            <content:encoded><![CDATA[<h1 id="djangoè¿›é˜¶" tabindex="-1">djangoè¿›é˜¶ <a class="header-anchor" href="#djangoè¿›é˜¶" aria-label="Permalink to &quot;djangoè¿›é˜¶&quot;">&ZeroWidthSpace;</a></h1>
<ol>
<li>
<p><strong>HTTP Objects</strong></p>
<p><strong>HttpRequest</strong></p>
<p>â€‹	<strong>è‡ªèº«å±æ€§</strong></p>
<p>â€‹		<code>request.path -&gt; /foo/bar/ </code></p>
<p>â€‹		<code>request.method </code></p>
<p>â€‹		<code>request.GET </code></p>
<p>â€‹		<code>request.POST </code></p>
<p>â€‹		<code>request.COOKIES </code></p>
<p>â€‹		<code>request.FILES -&gt; {name1: file1, name2: file2, ...} </code></p>
<p>â€‹		<code>request.META['REMOTE_ADDR'] </code></p>
<p>â€‹		<code>request.META['HTTP_USER_AGENT'] 	</code></p>
<p>â€‹	<strong>ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§</strong></p>
<p>â€‹		request.session</p>
<p>â€‹		request.user</p>
<p>â€‹	<strong>æ–¹æ³•</strong></p>
<p>â€‹		request.get_full_path() -&gt; /foo/bar/?a=123</p>
<p>â€‹		request.get_signed_cookie(key)</p>
<p><strong>HttpResponse</strong></p>
<p>â€‹	<strong>å±æ€§</strong></p>
<p>â€‹		response.status_code</p>
<p>â€‹		response.content</p>
<p>â€‹	<strong>æ–¹æ³•</strong></p>
<p>â€‹		response.set_cookie(key, value, max_age=None)</p>
<p><strong>JsonHttpResponse</strong></p>
<p><code>response = JsonHttpResponse({'a': 12, 'b': 'xyz'})</code></p>
</li>
<li>
<p>django ä¸­é—´ä»¶</p>
<p>æœ€ç®€å•çš„ä¸­é—´ä»¶:aopé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</p>
<p>è‡ªå·±å†™ä¸€ä¸ªè·å–æ¥å£æ•°æ®çš„ä¸­é—´ä»¶</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">MiddlewareMixin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self,request,view_func,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        #æ‰§è¡Œviewå‡½æ•°.è·å–rc</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(args,kwargs)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            view_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">view_func(request)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            view_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            rc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(e)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        #è·å– msg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        uid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'uid'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cache.get(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'msg-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">uid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#python3æ‰æœ‰fæ‹¼æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            'result'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: view_result,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            'rc'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: rc,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            'msg'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:msg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> JsonResponse(data)</span></span></code></pre>
</div><p>æœ€ç®€å•çš„è£…é¥°å™¨â€”è£…é¥°å™¨å½¢å¼</p>
</li>
</ol>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> simple_middeware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(get_response):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    #do_something  for __init__()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # do something before_views()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time.time()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> get_response(request) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#view å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time.time()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">t)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        # do something after_views()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> middleware</span></span></code></pre>
</div><p>è£…é¥°å™¨çš„è¿è¡Œæ–¹å¼</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(func):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> wrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> time.time()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> func(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time.time()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">t)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wrap</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">@timer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	time.sleep(n)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#è¢«è£…é¥°å,è¿™æ—¶å€™ foo.__name__ å·²ç»å˜æˆäº†wrapè€Œä¸æ˜¯fooäº†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç›¸å½“äºtimer(foo)(0.5)->wrap(0.5)</span></span></code></pre>
</div><p>ä¸­é—´ä»¶ç±»</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyMiddleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self,view_func):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.view_func </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> view_func  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#åŠ¨æ€æ·»åŠ å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self,request):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.view_func(request)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self,request,view_func,view_args,view_kwargs):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        pass</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">----------------</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    pass</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ‰§è¡Œfoo()å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯foo.__call__()</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    pass</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> A()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#a()æ²¡æœ‰callæ–¹æ³•,ä½†æ˜¯Aæ˜¯æœ‰çš„A.__call__()->Açš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">------------------</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self,n):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> A()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">a(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#ç°åœ¨a()æ˜¯å¯ä»¥è°ƒç”¨çš„,å¯ä»¥ç”¨callable(a)æŸ¥çœ‹</span></span></code></pre>
</div><h3 id="django1-10ä¹‹å‰çš„ä¸­é—´ä»¶" tabindex="-1">django1.10ä¹‹å‰çš„ä¸­é—´ä»¶ <a class="header-anchor" href="#django1-10ä¹‹å‰çš„ä¸­é—´ä»¶" aria-label="Permalink to &quot;django1.10ä¹‹å‰çš„ä¸­é—´ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>ç»§æ‰¿è‡ªMiddlewareMixin</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> django.utils.deprecation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> MiddlewareMixin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyMiddleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">MiddlewareMixin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">): </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, request):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		pass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, request, view_func, view_args, view_kwargs):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        pass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, request, response):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response</span></span></code></pre>
</div><p>æ‰§ï¨ˆé¡ºåº process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§ï¨ˆ</p>
<p>process_response ä»ä¸‹å¾€ä¸Šæ‰§ï¨ˆ</p>
<p><a href="https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering" target="_blank" rel="noreferrer">å†…ç½®ä¸­é—´ä»¶çš„æ’åº</a></p>
<ol start="6">
<li>
<p>Cache</p>
<p>é»˜è®¤ç¼“å­˜: from django.core.cache import cache</p>
<p>BACKEND: DatabaseCache / MemcachedCache / LocMemCache</p>
<p>LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ï¤…é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºï¦œè¡¨</p>
<p>ä½¿ç”¨ Redis åšç¼“å­˜</p>
<div class="language-Python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">CACHES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"default"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"BACKEND"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"django_redis.cache.RedisCache"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"LOCATION"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"redis://127.0.0.1:6379/1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	"OPTIONS"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		"CLIENT_CLASS"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"django_redis.client.DefaultClient"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		"PICKLE_VERSION"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: â€‘</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><strong>åŸºæœ¬æ–¹æ³•</strong></p>
<p><code>cache.set(key, value, timeout=None)</code></p>
<p><code>cache.get(key, default=None)</code></p>
</li>
</ol>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>   cache.delete(key) </span></span>
<span class="line"><span></span></span>
<span class="line"><span>   cache.incr('num') </span></span>
<span class="line"><span></span></span>
<span class="line"><span>   cache.decr('num') </span></span>
<span class="line"><span></span></span>
<span class="line"><span>   cache.get_or_set(key, default, timeout=None)</span></span></code></pre>
</div><p><code>cache.set_many({'a': 1, 'b': 2, 'c': 3})</code></p>
<p><code>cache.get_many(['a', 'b', 'c'])</code></p>
<p><strong>å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶</strong>: <code>django.middleware.cache.UpdateCacheMiddleware </code></p>
<p>â€‹	å‰ç½®ä¸­é—´ä»¶</p>
<pre><code>ç¼“å­˜æœŸé™: `CACHE_MIDDLEWARE_SECONDS `
</code></pre>
<p><strong>é¡µé¢ç¼“å­˜è£…é¥°ï¨¸</strong>: <code>from django.views.decorators.cache import cache_page </code></p>
<p><strong>å±æ€§ç¼“å­˜è£…é¥°ï¨¸</strong>: <code>from django.utils.functional import cached_property </code></p>
<p><strong>pickle</strong></p>
<p>â€‹	dumps</p>
<p>â€‹	loads</p>
<ol start="7">
<li>
<p><strong>Cookie å’Œ Session</strong></p>
<p><strong>Cookie:</strong> response.set_cookie(key, value, max_age=None)</p>
<p><strong>Session é…ç½®</strong></p>
<p>â€‹	a. å¼€å¯ Session ä¸­é—´ä»¶: django.contrib.sessions.middleware.SessionMiddleware</p>
<p>â€‹	b. é…ç½®ç¼“å­˜</p>
<p>â€‹	c. é…ç½® Session å¼•æ“: SESSION_ENGINE = &quot;django.contrib.sessions.backends.cache&quot;</p>
<p><strong>å¯é€‰é¡¹</strong></p>
<p>â€‹	SESSION_COOKIE_AGE ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨</p>
<p>â€‹	SESSION_COOKIE_NAME Session å, é»˜è®¤ 'sessionid'</p>
<p>SESSION_EXPIRE_AT_BROWSER_CLOSE æµè§ˆï¨¸å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ 													<code>SESSION_SAVE_EVERY_REQUEST æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session </code></p>
<p><strong>ç”¨æ³•</strong></p>
<p>request.session.session_key æŸ¥çœ‹ session_id</p>
<p>request.session.modified session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹</p>
<p>request.session['uid'] = 1234 å½“ session å‘ç”Ÿï¤æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜</p>
<p>request.session.get('uid') å–å€¼</p>
<p>request.session.save() æ‰‹åŠ¨ä¿å­˜</p>
</li>
</ol>
<hr>
<h3 id="æ‰‹å†™ä¸€ä¸ªlogin-requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•" tabindex="-1">æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• <a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ªlogin-requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•" aria-label="Permalink to &quot;æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> login_require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(view_func):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> check_login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.session.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'name'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> view_func(request)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> redirect(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/login/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> check_login</span></span></code></pre>
</div><div class="language-Python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#loginçš„viewå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'username'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'password'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">USER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> User(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        request.session[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'uid'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">user.id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> render()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> redirect(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/login/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><div class="language-Python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#æ‰‹å†™ä¸€ä¸ªä¸­é—´ä»¶éªŒè¯ç”¨æˆ·å·²ç»ç™»å½•,æ¯”å¦‚ç”¨æˆ·ç™»å½•åæ‰èƒ½ç¼–è¾‘è¯„è®ºç­‰(å…¨å±€çš„)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">MiddlewareMixin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self,request):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        uid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.session.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'uid'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> uid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> User.objects.get(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> uid)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            request.user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> user   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#åŠ¨æ€æ·»åŠ ä¸€ä¸ªuserå±æ€§ setattr(request,'user',user)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/user/login/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/user/register/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> redirect(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/login/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><ol start="8">
<li>
<p><strong>Logging</strong></p>
<p><strong>æ—¥å¿—çº§åˆ«</strong></p>
<p>â€‹	DEBUG</p>
<p>â€‹	INFO</p>
<p>â€‹	WARN</p>
<p>â€‹	ERROR</p>
<p>â€‹	FATAL</p>
<p><strong>ä½¿ç”¨</strong></p>
<p>logger.debug('xxxxxxxx')</p>
<p>logger.info('xxxxxxxx')</p>
<p>logger.warning('xxxxxxxx')</p>
<p>logger.error('xxxxxxxx')</p>
<p>logger.fatal('xxxxxxxx')</p>
<p><strong>æŸ¥æ‰¾ã€åˆ†æ</strong></p>
<p>tail</p>
<p>head</p>
<p>less</p>
<p>awk</p>
<p>grep</p>
<p><strong>é…ç½®</strong></p>
<div class="language-Python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">LOGGING</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	'version'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	'disable_existing_loggers'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	'formatters'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		'simple'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'format'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(asctime)s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> %(module)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(funcName)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(message)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		'datefmt'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'%Yâ€‘%mâ€‘</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> %H:%M:%S'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, }, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		'verbose'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'format'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(asctime)s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> %(levelname)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(process)d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">â€‘</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(threadName)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">] '</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">					  '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(module)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(funcName)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> line </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(lineno)d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%(message)s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'datefmt'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'%Yâ€‘%mâ€‘</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> %H:%M:%S'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			}, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">	'handlers'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		'inf'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'class'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'logging.handlers.TimedRotatingFileHandler'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'filename'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/data/web/gnt.out'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'when'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'W0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿— </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'backupCount'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'formatter'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'simple'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'level'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'DEBUG'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> DEBUG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'INFO'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			}, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'err'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'class'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'logging.handlers.TimedRotatingFileHandler'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'filename'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/data/web/gnt.err'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'when'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'D'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ¯å¤©åˆ‡å‰²æ—¥å¿— 'backupCount': 5, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'formatter'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'verbose'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'level'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'WARNING'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">				} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			}, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">		'loggers'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'inf'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'handlers'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inf'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'level'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'DEBUG'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'propagate'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">				}, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">			'err'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'handlers'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'err'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'level'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'DEBUG'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">				'propagate'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">				} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span></code></pre>
</div><p>ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„è£…é¥°å™¨</p>
<hr>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> statistic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(view_func):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> wrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">META</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'REMOTE_ADDR'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        aid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'aid'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        logger.info(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  {</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">aid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> view_func(request,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wrap</span></span></code></pre>
</div></li>
<li>
<p><strong>Django çš„æ€§èƒ½</strong></p>
<p><strong>Django è‡ªèº«ä¼˜åŒ–</strong></p>
<p>â€‹	<code>å……åˆ†ä¹‹ç”¨ç¼“å­˜ </code></p>
<p>â€‹	<code>æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£ï¨¸ </code></p>
<p>â€‹	<code>å°½ï¥¾ä½¿ç”¨ defer() å’Œ only() æŸ¥æ‰¾ </code></p>
<p>â€‹	<code>å°½ï¥¾ä½¿ç”¨ count() å’Œ exists() </code></p>
<p>â€‹	æ¨¡æ¿ä¸­<code>{</code>% block %<code>}</code>æ€§èƒ½ä¼˜äº<code> {</code>% include %<code>}</code></p>
<p>â€‹	<code>å¼€å¯æ¨¡æ¿ç¼“å­˜ </code></p>
<p>â€‹	<code>ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ </code></p>
<p><strong>å…¶ä»–ä¼˜åŒ–</strong></p>
<p>â€‹	<strong>I/O å¯†é›†å‹: å¼‚æ­¥åŒ–</strong></p>
<p>â€‹		è¯·æ±‚å¼‚æ­¥åŒ–</p>
<p>â€‹		æ•°æ®æ“ä½œå¼‚æ­¥åŒ–</p>
<p>â€‹		gevent, asyncio, aiopg, aiohttp, tornado</p>
<p>â€‹	<strong>è®¡ç®—å¯†é›†å‹</strong></p>
<p>â€‹		è€—æ—¶æ“ä½œç”¨ Celery ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ</p>
<p>â€‹	<strong>åˆ†åº“åˆ†è¡¨</strong></p>
<p>â€‹		å–ä½™ã€å“ˆå¸Œ</p>
<p>â€‹		èŒƒå›´</p>
<p>â€‹		ä¸€è‡´æ€§å“ˆå¸Œ</p>
<p>â€‹	<strong>ç´¢å¼•ä¼˜åŒ–</strong></p>
<p>â€‹	æ…¢æŸ¥è¯¢ä¼˜åŒ– (ç›¸å…³å·¥å…·: DjangoDebugToolbar)</p>
<p>â€‹	Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼ï§ç”¨å¤šæ ¸</p>
<p>â€‹	PyPy</p>
<p>â€‹	Cython</p>
</li>
</ol>
<hr>
<h3 id="å¼‚æ­¥è°ƒç”¨ä»»åŠ¡" tabindex="-1">å¼‚æ­¥è°ƒç”¨ä»»åŠ¡ <a class="header-anchor" href="#å¼‚æ­¥è°ƒç”¨ä»»åŠ¡" aria-label="Permalink to &quot;å¼‚æ­¥è°ƒç”¨ä»»åŠ¡&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-Python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> functools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> update_wrapper</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> async_call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(func):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '''å¼‚æ­¥è°ƒç”¨ä»»åŠ¡'''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    func.trace_err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">trace_err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    func.trace_info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(trace_code(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),func.func_name)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> wrapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    	global</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> main_thread</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            main_thread.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MMQ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.submit(func,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> AttributeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> func(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kwargs)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> update_wrapper(wrapper,func)</span></span></code></pre>
</div><h3 id="ç”Ÿæˆå™¨" tabindex="-1">ç”Ÿæˆå™¨ <a class="header-anchor" href="#ç”Ÿæˆå™¨" aria-label="Permalink to &quot;ç”Ÿæˆå™¨&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#ç”Ÿæˆå™¨  ä½¿ç”¨nextè°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        yield</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> foo()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(x)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#æƒ°æ€§æ±‚å€¼,å å†…å­˜å°  ----python2ä¸­çš„xrangeç±»ä¼¼</span></span></code></pre>
</div><h3 id="è¿­ä»£å™¨" tabindex="-1">è¿­ä»£å™¨ <a class="header-anchor" href="#è¿­ä»£å™¨" aria-label="Permalink to &quot;è¿­ä»£å™¨&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Iter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __iter__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __next__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">o </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Iter()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Iter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __iter__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __next__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.v   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#è¿­ä»£çš„è§„åˆ™å†™åœ¨nextæ–¹æ³•</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[djangoè¿›é˜¶-ç¬”è®°]]></title>
            <link>https://lpdswing.github.io//technology/other/Django_advanced.html</link>
            <guid>https://lpdswing.github.io//technology/other/Django_advanced.html</guid>
            <pubDate>Wed, 03 May 2017 18:16:44 GMT</pubDate>
            <description><![CDATA[
# Django è¿›é˜¶
```
1.  [HTTP Objects](https://docs.djangoproject.com/en/2.0/ref/request-response/)

    - HttpRequest
      - è‡ªèº«å±æ€§
        request.path -> `/foo/bar/`
        request.method
        request.GET
        request.POST
        request.COOKIES
        request.FILES -> `{name1: file1, name2: file2, ...}`
        request.META['REMOTE_ADDR']
        request.META['HTTP_USER_AGENT']
      - ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§
        - request.session
        - request.user
      - æ–¹æ³•
        - request.get_full_path() -> `/foo/bar/?a=123`
        - request.get_signed_cookie(key)
    - HttpResponse
      - å±æ€§
        - response.status_code
        - response.content
      - æ–¹æ³•
        - response.set_cookie(key, value, max_age=None)
    - JsonHttpResponse
      - `response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`

2.  Django ä¸­é—´ä»¶

    - æœ€ç®€å•çš„ä¸­é—´ä»¶
      ```python
              def simple_middleware(get_response):
                  # do_something_for_init()

                  def middleware(request):
                      # do_something_before_views()

                      response = get_response(request)  # views å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ

                      # do_something_after_views()

                      return response

                  return middleware
      ```
    - ä¸­é—´ä»¶ç±»

      ```python
          class MyMiddleware:
              def __init__(self, get_response):
                  self.get_response = get_response

              def __call__(self, request):
                  response = self.get_response(request)
                  return response

              def process_view(self, request, view_func, view_args, view_kwargs):
                  pass
      ```

    - Django-1.10 ä»¥å‰çš„ä¸­é—´ä»¶

      ```python
          from django.utils.deprecation import MiddlewareMixin

          class MyMiddleware(MiddlewareMixin):
              def process_request(self, request):
                  pass

              def process_view(self, request, view_func, view_args, view_kwargs):
                  pass

              def process_response(self, request, response):
                  return response
      ```

    - æ‰§è¡Œé¡ºåº
      - process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ
      - process_response ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ
    - [å†…ç½®ä¸­é—´ä»¶çš„æ’åº](https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering)

3.  Form è¡¨å•

    - form çš„ method åªèƒ½æ˜¯ POST æˆ– GET
    - method=GET æ—¶, è¡¨å•æäº¤çš„å‚æ•°ä¼šå‡ºç°åœ¨ URL é‡Œ
    - å±æ€§å’Œæ–¹æ³•
      - form.is_valid()
      - form.has_changed()
      - form.cleaned_data['fieldname']
    - Form çš„å®šä¹‰å’Œä½¿ç”¨

      ```python
          from django.forms import Form
          from django.forms import IntegerField, CharField, DateField, ChoiceField

          class TestForm(Form):
              TAGS = (
                  ('py', 'python'),
                  ('ln', 'linux'),
                  ('dj', 'django'),
              )
              fid = IntegerField()
              name = CharField(max_length=10)
              tag = ChoiceField(choices=TAGS)
              date = DateField()

          data = {'fid': 123, 'name': '1234567890', 'tag': 'dj', 'date': '2017-12-17'}
          form = TestForm(data)
          print(form.is_valid())
          print(form.cleaned_data)  # cleaned_data å±æ€§æ˜¯ is_valid å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€æ·»åŠ çš„
      ```

    - ModelForm
      ```python
          class UserForm(ModelForm):
              class Meta:
                  model = User
                  fields = ['name', 'birth']
      ```

4.  æ¨¡æ¿

    - base.html æ¨¡æ¿æ¨èå¸ƒå±€
      ```html
      <!DOCTYPE html>
      <html>
        <head>
          <title>{{title}}</title>
          <link rel="stylesheet" type="text/css" href="/static/css/style.css" />
          {% block "ext_css" %}{% endblock %}
        </head>
        <body>
          <!-- {% block "navbar" %}{% endblock %} -->
          {% block "sidebar" %}{% endblock %} {% block "content" %}{% endblock
          %}
          <!-- {% block "foot" %}{% endblock %} -->
          {% block "ext_js" %}{% endblock %}
        </body>
      </html>
      ```
    - [å†…å»º Tags](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#ref-templates-builtins-tags)

      - `autoescape`

              {% autoescape off %}
                  {{ body }}
              {% endautoescape %}

      - `csrf_token`

              <form>
              {% csrf_token %}
              </form>

      - `for...endfor` ä¸­çš„å˜é‡
        - `forloop.counter` ä» 1 å¼€å§‹è®¡æ•°
        - `forloop.counter0` ä» 0 å¼€å§‹è®¡æ•°
        - `forloop.revcounter` é€†åºè®¡æ•°åˆ° 1
        - `forloop.revcounter0` é€†åºè®¡æ•°åˆ° 0
        - `forloop.first` æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ª
        - `forloop.last` æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„æœ€åä¸€ä¸ª
        - `forloop.parentloop` ç”¨äºå¼•ç”¨ä¸Šçº§å¾ªç¯ä¸­çš„å˜é‡, å¦‚ `{{ forloop.parentloop.counter }}`
      - empty å­å¥

              {% for x in lst %}
                  <div>...</div>
              {% empty %}
                  <div>Sorry</div>
              {% endfor %}

      - load: åŠ è½½è‡ªå®šä¹‰ Tag {`%`load foo.bar `%`}
      - url: æ ¹æ® url name æ›¿æ¢ {`%` url 'your-url-name' v1 v2 `%`}
      - static

              {% load static %}
              <img src="{% static "img/smile.jpg" %}">

        æˆ–

              {% load static %}
              <img src="{% get_static_prefix %}img/smile.jpg">

    - [å†…å»ºçš„ filter](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#built-in-filter-reference)

      - safe å’Œ escape: `{{ var|safe|escape }}`

    - [ä½¿ç”¨ Jinja2 æ›¿æ¢å†…ç½®æ¨¡æ¿å¼•æ“](https://docs.djangoproject.com/en/2.0/topics/templates/#django.template.backends.jinja2.Jinja2)

5.  ORM

    - ä»€ä¹ˆæ˜¯ ORM
    - CURD (Create/Update/Retrieve/Delete)
    - [Field](https://docs.djangoproject.com/en/2.0/ref/models/fields/)
    - Field é€‰é¡¹
      - `null` é’ˆå¯¹æ•°æ®åº“, å…è®¸æ•°æ®åº“è¯¥å­—æ®µä¸º Null
      - `blank` é’ˆå¯¹ Model æœ¬èº«, å…è®¸ä¼ å…¥å­—æ®µä¸ºç©º. blank ä¸º True æ—¶, å¯¹æ•°æ®åº“æ¥è¯´, è¯¥å­—æ®µä¾ç„¶ä¸ºå¿…å¡«é¡¹
      - `default` å°½é‡ä½¿ç”¨ default, å°‘ç”¨ null å’Œ blank
      - `choices`
      - `primary_key` éå¿…è¦æ—¶ä¸è¦è®¾ç½®, ç”¨é»˜è®¤ id, ä¿æŒæ¡ç›®è‡ªå¢ã€æœ‰åº
      - `unique`
      - `db_index` (True | False)
      - `max_length`
      - `auto_now` æ¯æ¬¡ save æ—¶ï¼Œæ›´æ–°ä¸ºå½“å‰æ—¶é—´
      - `auto_now_add` åªè®°å½•åˆ›å»ºæ—¶çš„æ—¶é—´, ä¿å­˜æ—¶ä¸æ›´æ–°
    - [QuerySet](https://docs.djangoproject.com/en/2.0/ref/models/querysets/)
      - æ–¹æ³•
        - åˆ›å»º: `create() / get_or_create() / update_or_create() / bulk_create()`
        - æ¡ä»¶è¿‡æ»¤å’Œæ’é™¤: `filter() / exclude()`
        - åªåŠ è½½éœ€è¦çš„å­—æ®µ: `only() / defer()`
        - `order_by() / count() / exists()`
        - `latest() / earliest()`
        - `first() / last()`
      - æŸ¥æ‰¾æ¡ä»¶
        - `filter(id__in=[123, 555, 231])`
        - `filter(id__range=[123, 456])`
        - `filter(name__contains='123')`
        - `filter(name__regex='^\w+\d+')`
        - `gt / gte / lt / lte`
    - å…¶ä»– ORM
      - sqlalchemy
      - peewee
    - ä¸»é”®å’Œå¤–é”®çº¦æŸ
      - å†…éƒ¨ç³»ç»Ÿã€ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¯ä»¥ä½¿ç”¨ (éœ€è¦æ•°æ®é‡å¯æ§ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ•°é‡å¯æ§)
      - äº’è”ç½‘è¡Œä¸šä¸å»ºè®®ä½¿ç”¨
        - æ€§èƒ½ç¼ºé™·
        - ä¸èƒ½ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒ
        - ä¸å®¹æ˜“åšåˆ°æ•°æ®è§£è€¦

6.  Cache

    - é»˜è®¤ç¼“å­˜: `from django.core.cache import cache`
    - BACKEND: `DatabaseCache / MemcachedCache / LocMemCache`
    - LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ä¸²é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºåˆ—è¡¨
    - ä½¿ç”¨ Redis åšç¼“å­˜

            CACHES = {
                "default": {
                    "BACKEND": "django_redis.cache.RedisCache",
                    "LOCATION": "redis://127.0.0.1:6379/1",
                    "OPTIONS": {
                        "CLIENT_CLASS": "django_redis.client.DefaultClient",
                        "PICKLE_VERSION": -1,
                    }
                }
            }

    - åŸºæœ¬æ–¹æ³•
      - `cache.set(key, value, timeout=None)`
      - `cache.get(key, default=None)`
      - `cache.delete(key)`
      - `cache.incr('num')`
      - `cache.decr('num')`
      - `cache.get_or_set(key, default, timeout=None)`
      - `cache.set_many({'a': 1, 'b': 2, 'c': 3})`
      - `cache.get_many(['a', 'b', 'c'])`
    - å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶: `django.middleware.cache.UpdateCacheMiddleware`
      - å‰ç½®ä¸­é—´ä»¶
      - ç¼“å­˜æœŸé™: CACHE_MIDDLEWARE_SECONDS
    - é¡µé¢ç¼“å­˜è£…é¥°å™¨: `from django.views.decorators.cache import cache_page`
    - å±æ€§ç¼“å­˜è£…é¥°å™¨: `from django.utils.functional import cached_property`
    - pickle
      - dumps
      - loads

7.  Cookie å’Œ Session

    - Cookie: `response.set_cookie(key, value, max_age=None)`
    - Session é…ç½®
      1. å¼€å¯ Session ä¸­é—´ä»¶: `django.contrib.sessions.middleware.SessionMiddleware`
      2. é…ç½®ç¼“å­˜
      3. é…ç½® Session å¼•æ“: `SESSION_ENGINE = "django.contrib.sessions.backends.cache"`
    - å¯é€‰é¡¹
      - `SESSION_COOKIE_AGE` ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨
      - `SESSION_COOKIE_NAME` Session å, é»˜è®¤ 'sessionid'
      - `SESSION_EXPIRE_AT_BROWSER_CLOSE` æµè§ˆå™¨å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ
      - `SESSION_SAVE_EVERY_REQUEST` æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session
    - ç”¨æ³•
      - `request.session.session_key` æŸ¥çœ‹ session_id
      - `request.session.modified` session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹
      - `request.session['uid'] = 1234` å½“ session å‘ç”Ÿæ›´æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜
      - `request.session.get('uid')` å–å€¼
      - `request.session.save()` æ‰‹åŠ¨ä¿å­˜

8.  Logging

    - æ—¥å¿—çº§åˆ«
      - DEBUG
      - INFO
      - WARNING
      - ERROR
      - FATAL
    - ä½¿ç”¨
      - logger.debug('xxxxxxxx')
      - logger.info('xxxxxxxx')
      - logger.warning('xxxxxxxx')
      - logger.error('xxxxxxxx')
      - logger.fatal('xxxxxxxx')
    - æŸ¥æ‰¾ã€åˆ†æ
      - tail
      - head
      - less
      - awk
      - grep
    - [é…ç½®](https://docs.python.org/2/library/logging.html)

            LOGGING = {
                'version': 1,
                'disable_existing_loggers': True,
                'formatters': {
                    'simple': {
                        'format': '%(asctime)s %(module)s.%(funcName)s: %(message)s',
                        'datefmt': '%Y-%m-%d %H:%M:%S',
                    },
                    'verbose': {
                        'format': '%(asctime)s %(levelname)s [%(process)d-%(threadName)s] '
                                  '%(module)s.%(funcName)s line %(lineno)d: %(message)s',
                        'datefmt': '%Y-%m-%d %H:%M:%S',
                    }
                },

                'handlers': {
                    'inf': {
                        'class': 'logging.handlers.TimedRotatingFileHandler',
                        'filename': '/data/web/gnt.out',
                        'when': 'W0',  # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿—
                        'backupCount': 5,
                        'formatter': 'simple',
                        'level': 'DEBUG' if DEBUG else 'INFO',
                    },
                    'err': {
                        'class': 'logging.handlers.TimedRotatingFileHandler',
                        'filename': '/data/web/gnt.err',
                        'when': 'D',  # æ¯å¤©åˆ‡å‰²æ—¥å¿—
                        'backupCount': 5,
                        'formatter': 'verbose',
                        'level': 'WARNING',
                    }
                },

                'loggers': {
                    'inf': {
                        'handlers': ['inf'],
                        'level': 'DEBUG',
                        'propagate': True,
                    },
                    'err': {
                        'handlers': ['err'],
                        'level': 'DEBUG',
                        'propagate': True,
                    }
                }
            }

9.  Django çš„æ€§èƒ½

    - Django è‡ªèº«ä¼˜åŒ–
      - å……åˆ†ä¹‹ç”¨ç¼“å­˜
      - æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£å™¨
      - å°½é‡ä½¿ç”¨ `defer()` å’Œ `only()` æŸ¥æ‰¾
      - å°½é‡ä½¿ç”¨ `count()` å’Œ `exists()`
      - æ¨¡æ¿ä¸­ `{% block %}` æ€§èƒ½ä¼˜äº `{% include %}`
      - [å¼€å¯æ¨¡æ¿ç¼“å­˜](https://docs.djangoproject.com/en/2.0/ref/templates/api/#django.template.loaders.cached.Loader)
      - **ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼**
    - å…¶ä»–ä¼˜åŒ–
      - I/O å¯†é›†å‹: å¼‚æ­¥åŒ–
        - è¯·æ±‚å¼‚æ­¥åŒ–
        - æ•°æ®æ“ä½œå¼‚æ­¥åŒ–
        - gevent, asyncio, aiopg, aiohttp, tornado
      - è®¡ç®—å¯†é›†å‹
        - è€—æ—¶æ“ä½œç”¨ [Celery](http://docs.jinkan.org/docs/celery/) ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ
      - åˆ†åº“åˆ†è¡¨
        - å–ä½™ã€å“ˆå¸Œ
        - èŒƒå›´
        - ä¸€è‡´æ€§å“ˆå¸Œ
      - ç´¢å¼•ä¼˜åŒ–
      - æ…¢æŸ¥è¯¢ä¼˜åŒ– ([ç›¸å…³å·¥å…·: DjangoDebugToolbar](https://django-debug-toolbar.readthedocs.io))
      - Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼åˆ©ç”¨å¤šæ ¸
      - PyPy
      - Cython

10. Python / Django ç¯å¢ƒåŠ è½½

    - sys.argv
    - sys.path
    - os.environ

11. Git

    - å¸¸ç”¨æ“ä½œ
      - git init
      - git clone
      - git add
      - git commit -m 'xxxxxxxx'
      - git push
      - git pull
      - git fetch
      - git log
      - git checkout
      - git branch
      - git merge
    - ä»£ç ç®¡ç†
      - code review
        - å‘ç°ä»£ç é€»è¾‘é—®é¢˜
        - ä»£ç é£æ ¼åŠè§„èŒƒåŒ–é—®é¢˜
        - ç®—æ³•é—®é¢˜
        - é”™è¯¯çš„ä½¿ç”¨æ–¹å¼
        - èƒ½å¤Ÿå­¦ä¹ å…¶ä»–äººçš„ä¼˜ç§€ä»£ç 
      - åˆ†æ”¯: master / dev / feature

12. Blog

    1.  åŸºç¡€åŠŸèƒ½
        1. çœ‹æ–‡ç« 
        2. å†™æ–‡ç« 
        3. æŸ¥çœ‹æ–‡ç« åˆ—è¡¨
        4. æ ¹æ®æ­£æ–‡æœç´¢æ–‡ç« 
        5. å¯ä»¥è¯„è®º
    2.  æ‰©å±•åŠŸèƒ½ 0. å®ç°åˆ†é¡µåŠŸèƒ½: é¦–é¡µæ–‡ç« åˆ—è¡¨æ¯é¡µæ˜¾ç¤º 5 ç¯‡æ–‡ç« 

        1.  å®ç°ä¸€ä¸ªåŸºäº redis çš„æ–‡ç« ç¼“å­˜
        2.  ç»™é¦–é¡µå¢åŠ ä¸€ä¸ªæ¨¡å—, æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„ 10 ç¯‡æ–‡ç«  (ç‚¹å‡»ç‡æœ€é«˜çš„)
        3.  åˆ›å»ºç”¨æˆ·æ¨¡å—
            - å®ç°æ³¨å†Œã€ç™»å½•åŠŸèƒ½
            - æ·»åŠ ç”¨æˆ·ä¸ªäººä¿¡æ¯å±•ç¤º
            - å¼€å‘å¤´åƒä¸Šä¼ åŠŸèƒ½
        4.  å†™ä¸€ä¸ªè£…é¥°å™¨, åœ¨ blog.log æ–‡ä»¶ä¸­è¾“å‡ºé˜…è¯»æ–‡ç« çš„ç”¨æˆ· IP, åŠæ‰€è¯»æ–‡ç« çš„ ID
        5.  åŸºäºæ—¥å¿—çš„ç®€å•ç»Ÿè®¡

            - è®¡ç®—å‡ºé˜…è¯»æ¬¡æ•°æœ€å¤šçš„æ–‡ç« : `awk '{print $6}' blog6.log | sort | uniq -c | sort -r`

            - è®¡ç®—å‡ºæ¯ä¸ªè®¿å®¢è¯»äº†å¤šå°‘ç¯‡æ–‡ç« : `awk '{print $5}' blog6.log | sort | uniq -c | sort -r`

        6.  å†™ä¸€ä¸ªä¸­é—´ä»¶, é™åˆ¶ç”¨æˆ·çš„è®¿é—®é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡ï¼Œè¶…è¿‡ 2 æ¬¡æ—¶ï¼Œç­‰å¾…è‡³åˆç†æ—¶é—´å†è¿”å›
        7.  ç»™æ–‡ç« å¢åŠ  Tag åŠŸèƒ½:
            - æ¯ç¯‡æ–‡ç« å¯ä»¥æ·»åŠ å¤šä¸ª Tag
            - æ¯ä¸ª Tag åˆ†ç±»ä¸‹æœ‰å¤šç¯‡æ–‡ç« 
            - ç‚¹å‡»æ¯ä¸ª Tag ç›´æ¥è·³è½¬åˆ°æ­¤ tag çš„æ–‡ç« åˆ—è¡¨
            - ä¸è¦ä½¿ç”¨å¤–é”®
        8.  å®ç°æƒé™ç®¡ç†åŠŸèƒ½
            - æœªç™»å½•ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ–‡ç« 
            - æ™®é€šæ³¨å†Œç”¨æˆ·ï¼Œå¯ä»¥å‘è¡¨è¯„è®º
            - ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘è¡¨å’Œåˆ é™¤æ–‡ç« ã€è¯„è®º
        9.  [ä½¿ç”¨ Gunicorn é©±åŠ¨ Django, å¯¹æ¯”æ€§èƒ½å·®å¼‚](http://docs.gunicorn.org/en/latest/install.html)
            - æ–‡ä»¶æè¿°ç¬¦
            - å•å°æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°
            - TCP è¿æ¥ä¸Šé™
        10. Nginx

            - è´Ÿè½½å‡è¡¡: è½®è¯¢, æƒé‡, IP å“ˆå¸Œ

                                   User Requests
                                 |    |    |    |
                                 V    V    V    V
                                 www.example.com
                                     DNS è½®è®­
                                   /         \
                                  V           V
                              Nginx            Nginx
                           113.5.3.10        110.2.9.11         ]]></description>
            <content:encoded><![CDATA[<h1 id="django-è¿›é˜¶" tabindex="-1">Django è¿›é˜¶ <a class="header-anchor" href="#django-è¿›é˜¶" aria-label="Permalink to &quot;Django è¿›é˜¶&quot;">&ZeroWidthSpace;</a></h1>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>1.  [HTTP Objects](https://docs.djangoproject.com/en/2.0/ref/request-response/)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - HttpRequest</span></span>
<span class="line"><span>      - è‡ªèº«å±æ€§</span></span>
<span class="line"><span>        request.path -> `/foo/bar/`</span></span>
<span class="line"><span>        request.method</span></span>
<span class="line"><span>        request.GET</span></span>
<span class="line"><span>        request.POST</span></span>
<span class="line"><span>        request.COOKIES</span></span>
<span class="line"><span>        request.FILES -> `{name1: file1, name2: file2, ...}`</span></span>
<span class="line"><span>        request.META['REMOTE_ADDR']</span></span>
<span class="line"><span>        request.META['HTTP_USER_AGENT']</span></span>
<span class="line"><span>      - ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§</span></span>
<span class="line"><span>        - request.session</span></span>
<span class="line"><span>        - request.user</span></span>
<span class="line"><span>      - æ–¹æ³•</span></span>
<span class="line"><span>        - request.get_full_path() -> `/foo/bar/?a=123`</span></span>
<span class="line"><span>        - request.get_signed_cookie(key)</span></span>
<span class="line"><span>    - HttpResponse</span></span>
<span class="line"><span>      - å±æ€§</span></span>
<span class="line"><span>        - response.status_code</span></span>
<span class="line"><span>        - response.content</span></span>
<span class="line"><span>      - æ–¹æ³•</span></span>
<span class="line"><span>        - response.set_cookie(key, value, max_age=None)</span></span>
<span class="line"><span>    - JsonHttpResponse</span></span>
<span class="line"><span>      - `response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2.  Django ä¸­é—´ä»¶</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - æœ€ç®€å•çš„ä¸­é—´ä»¶</span></span>
<span class="line"><span>      ```python</span></span>
<span class="line"><span>              def simple_middleware(get_response):</span></span>
<span class="line"><span>                  # do_something_for_init()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  def middleware(request):</span></span>
<span class="line"><span>                      # do_something_before_views()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                      response = get_response(request)  # views å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                      # do_something_after_views()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                      return response</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  return middleware</span></span>
<span class="line"><span>      ```</span></span>
<span class="line"><span>    - ä¸­é—´ä»¶ç±»</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      ```python</span></span>
<span class="line"><span>          class MyMiddleware:</span></span>
<span class="line"><span>              def __init__(self, get_response):</span></span>
<span class="line"><span>                  self.get_response = get_response</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              def __call__(self, request):</span></span>
<span class="line"><span>                  response = self.get_response(request)</span></span>
<span class="line"><span>                  return response</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              def process_view(self, request, view_func, view_args, view_kwargs):</span></span>
<span class="line"><span>                  pass</span></span>
<span class="line"><span>      ```</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - Django-1.10 ä»¥å‰çš„ä¸­é—´ä»¶</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      ```python</span></span>
<span class="line"><span>          from django.utils.deprecation import MiddlewareMixin</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          class MyMiddleware(MiddlewareMixin):</span></span>
<span class="line"><span>              def process_request(self, request):</span></span>
<span class="line"><span>                  pass</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              def process_view(self, request, view_func, view_args, view_kwargs):</span></span>
<span class="line"><span>                  pass</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              def process_response(self, request, response):</span></span>
<span class="line"><span>                  return response</span></span>
<span class="line"><span>      ```</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - æ‰§è¡Œé¡ºåº</span></span>
<span class="line"><span>      - process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ</span></span>
<span class="line"><span>      - process_response ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ</span></span>
<span class="line"><span>    - [å†…ç½®ä¸­é—´ä»¶çš„æ’åº](https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3.  Form è¡¨å•</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - form çš„ method åªèƒ½æ˜¯ POST æˆ– GET</span></span>
<span class="line"><span>    - method=GET æ—¶, è¡¨å•æäº¤çš„å‚æ•°ä¼šå‡ºç°åœ¨ URL é‡Œ</span></span>
<span class="line"><span>    - å±æ€§å’Œæ–¹æ³•</span></span>
<span class="line"><span>      - form.is_valid()</span></span>
<span class="line"><span>      - form.has_changed()</span></span>
<span class="line"><span>      - form.cleaned_data['fieldname']</span></span>
<span class="line"><span>    - Form çš„å®šä¹‰å’Œä½¿ç”¨</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      ```python</span></span>
<span class="line"><span>          from django.forms import Form</span></span>
<span class="line"><span>          from django.forms import IntegerField, CharField, DateField, ChoiceField</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          class TestForm(Form):</span></span>
<span class="line"><span>              TAGS = (</span></span>
<span class="line"><span>                  ('py', 'python'),</span></span>
<span class="line"><span>                  ('ln', 'linux'),</span></span>
<span class="line"><span>                  ('dj', 'django'),</span></span>
<span class="line"><span>              )</span></span>
<span class="line"><span>              fid = IntegerField()</span></span>
<span class="line"><span>              name = CharField(max_length=10)</span></span>
<span class="line"><span>              tag = ChoiceField(choices=TAGS)</span></span>
<span class="line"><span>              date = DateField()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          data = {'fid': 123, 'name': '1234567890', 'tag': 'dj', 'date': '2017-12-17'}</span></span>
<span class="line"><span>          form = TestForm(data)</span></span>
<span class="line"><span>          print(form.is_valid())</span></span>
<span class="line"><span>          print(form.cleaned_data)  # cleaned_data å±æ€§æ˜¯ is_valid å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€æ·»åŠ çš„</span></span>
<span class="line"><span>      ```</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - ModelForm</span></span>
<span class="line"><span>      ```python</span></span>
<span class="line"><span>          class UserForm(ModelForm):</span></span>
<span class="line"><span>              class Meta:</span></span>
<span class="line"><span>                  model = User</span></span>
<span class="line"><span>                  fields = ['name', 'birth']</span></span>
<span class="line"><span>      ```</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4.  æ¨¡æ¿</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - base.html æ¨¡æ¿æ¨èå¸ƒå±€</span></span>
<span class="line"><span>      ```html</span></span>
<span class="line"><span>      &#x3C;!DOCTYPE html></span></span>
<span class="line"><span>      &#x3C;html></span></span>
<span class="line"><span>        &#x3C;head></span></span>
<span class="line"><span>          &#x3C;title>{{title}}&#x3C;/title></span></span>
<span class="line"><span>          &#x3C;link rel="stylesheet" type="text/css" href="/static/css/style.css" /></span></span>
<span class="line"><span>          {% block "ext_css" %}{% endblock %}</span></span>
<span class="line"><span>        &#x3C;/head></span></span>
<span class="line"><span>        &#x3C;body></span></span>
<span class="line"><span>          &#x3C;!-- {% block "navbar" %}{% endblock %} --></span></span>
<span class="line"><span>          {% block "sidebar" %}{% endblock %} {% block "content" %}{% endblock</span></span>
<span class="line"><span>          %}</span></span>
<span class="line"><span>          &#x3C;!-- {% block "foot" %}{% endblock %} --></span></span>
<span class="line"><span>          {% block "ext_js" %}{% endblock %}</span></span>
<span class="line"><span>        &#x3C;/body></span></span>
<span class="line"><span>      &#x3C;/html></span></span>
<span class="line"><span>      ```</span></span>
<span class="line"><span>    - [å†…å»º Tags](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#ref-templates-builtins-tags)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - `autoescape`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              {% autoescape off %}</span></span>
<span class="line"><span>                  {{ body }}</span></span>
<span class="line"><span>              {% endautoescape %}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - `csrf_token`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              &#x3C;form></span></span>
<span class="line"><span>              {% csrf_token %}</span></span>
<span class="line"><span>              &#x3C;/form></span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - `for...endfor` ä¸­çš„å˜é‡</span></span>
<span class="line"><span>        - `forloop.counter` ä» 1 å¼€å§‹è®¡æ•°</span></span>
<span class="line"><span>        - `forloop.counter0` ä» 0 å¼€å§‹è®¡æ•°</span></span>
<span class="line"><span>        - `forloop.revcounter` é€†åºè®¡æ•°åˆ° 1</span></span>
<span class="line"><span>        - `forloop.revcounter0` é€†åºè®¡æ•°åˆ° 0</span></span>
<span class="line"><span>        - `forloop.first` æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ª</span></span>
<span class="line"><span>        - `forloop.last` æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„æœ€åä¸€ä¸ª</span></span>
<span class="line"><span>        - `forloop.parentloop` ç”¨äºå¼•ç”¨ä¸Šçº§å¾ªç¯ä¸­çš„å˜é‡, å¦‚ `{{ forloop.parentloop.counter }}`</span></span>
<span class="line"><span>      - empty å­å¥</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              {% for x in lst %}</span></span>
<span class="line"><span>                  &#x3C;div>...&#x3C;/div></span></span>
<span class="line"><span>              {% empty %}</span></span>
<span class="line"><span>                  &#x3C;div>Sorry&#x3C;/div></span></span>
<span class="line"><span>              {% endfor %}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - load: åŠ è½½è‡ªå®šä¹‰ Tag {`%`load foo.bar `%`}</span></span>
<span class="line"><span>      - url: æ ¹æ® url name æ›¿æ¢ {`%` url 'your-url-name' v1 v2 `%`}</span></span>
<span class="line"><span>      - static</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              {% load static %}</span></span>
<span class="line"><span>              &#x3C;img src="{% static "img/smile.jpg" %}"></span></span>
<span class="line"><span></span></span>
<span class="line"><span>        æˆ–</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              {% load static %}</span></span>
<span class="line"><span>              &#x3C;img src="{% get_static_prefix %}img/smile.jpg"></span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - [å†…å»ºçš„ filter](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#built-in-filter-reference)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - safe å’Œ escape: `{{ var|safe|escape }}`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - [ä½¿ç”¨ Jinja2 æ›¿æ¢å†…ç½®æ¨¡æ¿å¼•æ“](https://docs.djangoproject.com/en/2.0/topics/templates/#django.template.backends.jinja2.Jinja2)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>5.  ORM</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - ä»€ä¹ˆæ˜¯ ORM</span></span>
<span class="line"><span>    - CURD (Create/Update/Retrieve/Delete)</span></span>
<span class="line"><span>    - [Field](https://docs.djangoproject.com/en/2.0/ref/models/fields/)</span></span>
<span class="line"><span>    - Field é€‰é¡¹</span></span>
<span class="line"><span>      - `null` é’ˆå¯¹æ•°æ®åº“, å…è®¸æ•°æ®åº“è¯¥å­—æ®µä¸º Null</span></span>
<span class="line"><span>      - `blank` é’ˆå¯¹ Model æœ¬èº«, å…è®¸ä¼ å…¥å­—æ®µä¸ºç©º. blank ä¸º True æ—¶, å¯¹æ•°æ®åº“æ¥è¯´, è¯¥å­—æ®µä¾ç„¶ä¸ºå¿…å¡«é¡¹</span></span>
<span class="line"><span>      - `default` å°½é‡ä½¿ç”¨ default, å°‘ç”¨ null å’Œ blank</span></span>
<span class="line"><span>      - `choices`</span></span>
<span class="line"><span>      - `primary_key` éå¿…è¦æ—¶ä¸è¦è®¾ç½®, ç”¨é»˜è®¤ id, ä¿æŒæ¡ç›®è‡ªå¢ã€æœ‰åº</span></span>
<span class="line"><span>      - `unique`</span></span>
<span class="line"><span>      - `db_index` (True | False)</span></span>
<span class="line"><span>      - `max_length`</span></span>
<span class="line"><span>      - `auto_now` æ¯æ¬¡ save æ—¶ï¼Œæ›´æ–°ä¸ºå½“å‰æ—¶é—´</span></span>
<span class="line"><span>      - `auto_now_add` åªè®°å½•åˆ›å»ºæ—¶çš„æ—¶é—´, ä¿å­˜æ—¶ä¸æ›´æ–°</span></span>
<span class="line"><span>    - [QuerySet](https://docs.djangoproject.com/en/2.0/ref/models/querysets/)</span></span>
<span class="line"><span>      - æ–¹æ³•</span></span>
<span class="line"><span>        - åˆ›å»º: `create() / get_or_create() / update_or_create() / bulk_create()`</span></span>
<span class="line"><span>        - æ¡ä»¶è¿‡æ»¤å’Œæ’é™¤: `filter() / exclude()`</span></span>
<span class="line"><span>        - åªåŠ è½½éœ€è¦çš„å­—æ®µ: `only() / defer()`</span></span>
<span class="line"><span>        - `order_by() / count() / exists()`</span></span>
<span class="line"><span>        - `latest() / earliest()`</span></span>
<span class="line"><span>        - `first() / last()`</span></span>
<span class="line"><span>      - æŸ¥æ‰¾æ¡ä»¶</span></span>
<span class="line"><span>        - `filter(id__in=[123, 555, 231])`</span></span>
<span class="line"><span>        - `filter(id__range=[123, 456])`</span></span>
<span class="line"><span>        - `filter(name__contains='123')`</span></span>
<span class="line"><span>        - `filter(name__regex='^\w+\d+')`</span></span>
<span class="line"><span>        - `gt / gte / lt / lte`</span></span>
<span class="line"><span>    - å…¶ä»– ORM</span></span>
<span class="line"><span>      - sqlalchemy</span></span>
<span class="line"><span>      - peewee</span></span>
<span class="line"><span>    - ä¸»é”®å’Œå¤–é”®çº¦æŸ</span></span>
<span class="line"><span>      - å†…éƒ¨ç³»ç»Ÿã€ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¯ä»¥ä½¿ç”¨ (éœ€è¦æ•°æ®é‡å¯æ§ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ•°é‡å¯æ§)</span></span>
<span class="line"><span>      - äº’è”ç½‘è¡Œä¸šä¸å»ºè®®ä½¿ç”¨</span></span>
<span class="line"><span>        - æ€§èƒ½ç¼ºé™·</span></span>
<span class="line"><span>        - ä¸èƒ½ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒ</span></span>
<span class="line"><span>        - ä¸å®¹æ˜“åšåˆ°æ•°æ®è§£è€¦</span></span>
<span class="line"><span></span></span>
<span class="line"><span>6.  Cache</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - é»˜è®¤ç¼“å­˜: `from django.core.cache import cache`</span></span>
<span class="line"><span>    - BACKEND: `DatabaseCache / MemcachedCache / LocMemCache`</span></span>
<span class="line"><span>    - LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ä¸²é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºåˆ—è¡¨</span></span>
<span class="line"><span>    - ä½¿ç”¨ Redis åšç¼“å­˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            CACHES = {</span></span>
<span class="line"><span>                "default": {</span></span>
<span class="line"><span>                    "BACKEND": "django_redis.cache.RedisCache",</span></span>
<span class="line"><span>                    "LOCATION": "redis://127.0.0.1:6379/1",</span></span>
<span class="line"><span>                    "OPTIONS": {</span></span>
<span class="line"><span>                        "CLIENT_CLASS": "django_redis.client.DefaultClient",</span></span>
<span class="line"><span>                        "PICKLE_VERSION": -1,</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - åŸºæœ¬æ–¹æ³•</span></span>
<span class="line"><span>      - `cache.set(key, value, timeout=None)`</span></span>
<span class="line"><span>      - `cache.get(key, default=None)`</span></span>
<span class="line"><span>      - `cache.delete(key)`</span></span>
<span class="line"><span>      - `cache.incr('num')`</span></span>
<span class="line"><span>      - `cache.decr('num')`</span></span>
<span class="line"><span>      - `cache.get_or_set(key, default, timeout=None)`</span></span>
<span class="line"><span>      - `cache.set_many({'a': 1, 'b': 2, 'c': 3})`</span></span>
<span class="line"><span>      - `cache.get_many(['a', 'b', 'c'])`</span></span>
<span class="line"><span>    - å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶: `django.middleware.cache.UpdateCacheMiddleware`</span></span>
<span class="line"><span>      - å‰ç½®ä¸­é—´ä»¶</span></span>
<span class="line"><span>      - ç¼“å­˜æœŸé™: CACHE_MIDDLEWARE_SECONDS</span></span>
<span class="line"><span>    - é¡µé¢ç¼“å­˜è£…é¥°å™¨: `from django.views.decorators.cache import cache_page`</span></span>
<span class="line"><span>    - å±æ€§ç¼“å­˜è£…é¥°å™¨: `from django.utils.functional import cached_property`</span></span>
<span class="line"><span>    - pickle</span></span>
<span class="line"><span>      - dumps</span></span>
<span class="line"><span>      - loads</span></span>
<span class="line"><span></span></span>
<span class="line"><span>7.  Cookie å’Œ Session</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - Cookie: `response.set_cookie(key, value, max_age=None)`</span></span>
<span class="line"><span>    - Session é…ç½®</span></span>
<span class="line"><span>      1. å¼€å¯ Session ä¸­é—´ä»¶: `django.contrib.sessions.middleware.SessionMiddleware`</span></span>
<span class="line"><span>      2. é…ç½®ç¼“å­˜</span></span>
<span class="line"><span>      3. é…ç½® Session å¼•æ“: `SESSION_ENGINE = "django.contrib.sessions.backends.cache"`</span></span>
<span class="line"><span>    - å¯é€‰é¡¹</span></span>
<span class="line"><span>      - `SESSION_COOKIE_AGE` ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨</span></span>
<span class="line"><span>      - `SESSION_COOKIE_NAME` Session å, é»˜è®¤ 'sessionid'</span></span>
<span class="line"><span>      - `SESSION_EXPIRE_AT_BROWSER_CLOSE` æµè§ˆå™¨å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ</span></span>
<span class="line"><span>      - `SESSION_SAVE_EVERY_REQUEST` æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session</span></span>
<span class="line"><span>    - ç”¨æ³•</span></span>
<span class="line"><span>      - `request.session.session_key` æŸ¥çœ‹ session_id</span></span>
<span class="line"><span>      - `request.session.modified` session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹</span></span>
<span class="line"><span>      - `request.session['uid'] = 1234` å½“ session å‘ç”Ÿæ›´æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜</span></span>
<span class="line"><span>      - `request.session.get('uid')` å–å€¼</span></span>
<span class="line"><span>      - `request.session.save()` æ‰‹åŠ¨ä¿å­˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>8.  Logging</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - æ—¥å¿—çº§åˆ«</span></span>
<span class="line"><span>      - DEBUG</span></span>
<span class="line"><span>      - INFO</span></span>
<span class="line"><span>      - WARNING</span></span>
<span class="line"><span>      - ERROR</span></span>
<span class="line"><span>      - FATAL</span></span>
<span class="line"><span>    - ä½¿ç”¨</span></span>
<span class="line"><span>      - logger.debug('xxxxxxxx')</span></span>
<span class="line"><span>      - logger.info('xxxxxxxx')</span></span>
<span class="line"><span>      - logger.warning('xxxxxxxx')</span></span>
<span class="line"><span>      - logger.error('xxxxxxxx')</span></span>
<span class="line"><span>      - logger.fatal('xxxxxxxx')</span></span>
<span class="line"><span>    - æŸ¥æ‰¾ã€åˆ†æ</span></span>
<span class="line"><span>      - tail</span></span>
<span class="line"><span>      - head</span></span>
<span class="line"><span>      - less</span></span>
<span class="line"><span>      - awk</span></span>
<span class="line"><span>      - grep</span></span>
<span class="line"><span>    - [é…ç½®](https://docs.python.org/2/library/logging.html)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            LOGGING = {</span></span>
<span class="line"><span>                'version': 1,</span></span>
<span class="line"><span>                'disable_existing_loggers': True,</span></span>
<span class="line"><span>                'formatters': {</span></span>
<span class="line"><span>                    'simple': {</span></span>
<span class="line"><span>                        'format': '%(asctime)s %(module)s.%(funcName)s: %(message)s',</span></span>
<span class="line"><span>                        'datefmt': '%Y-%m-%d %H:%M:%S',</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    'verbose': {</span></span>
<span class="line"><span>                        'format': '%(asctime)s %(levelname)s [%(process)d-%(threadName)s] '</span></span>
<span class="line"><span>                                  '%(module)s.%(funcName)s line %(lineno)d: %(message)s',</span></span>
<span class="line"><span>                        'datefmt': '%Y-%m-%d %H:%M:%S',</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                },</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                'handlers': {</span></span>
<span class="line"><span>                    'inf': {</span></span>
<span class="line"><span>                        'class': 'logging.handlers.TimedRotatingFileHandler',</span></span>
<span class="line"><span>                        'filename': '/data/web/gnt.out',</span></span>
<span class="line"><span>                        'when': 'W0',  # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿—</span></span>
<span class="line"><span>                        'backupCount': 5,</span></span>
<span class="line"><span>                        'formatter': 'simple',</span></span>
<span class="line"><span>                        'level': 'DEBUG' if DEBUG else 'INFO',</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    'err': {</span></span>
<span class="line"><span>                        'class': 'logging.handlers.TimedRotatingFileHandler',</span></span>
<span class="line"><span>                        'filename': '/data/web/gnt.err',</span></span>
<span class="line"><span>                        'when': 'D',  # æ¯å¤©åˆ‡å‰²æ—¥å¿—</span></span>
<span class="line"><span>                        'backupCount': 5,</span></span>
<span class="line"><span>                        'formatter': 'verbose',</span></span>
<span class="line"><span>                        'level': 'WARNING',</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                },</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                'loggers': {</span></span>
<span class="line"><span>                    'inf': {</span></span>
<span class="line"><span>                        'handlers': ['inf'],</span></span>
<span class="line"><span>                        'level': 'DEBUG',</span></span>
<span class="line"><span>                        'propagate': True,</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    'err': {</span></span>
<span class="line"><span>                        'handlers': ['err'],</span></span>
<span class="line"><span>                        'level': 'DEBUG',</span></span>
<span class="line"><span>                        'propagate': True,</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>9.  Django çš„æ€§èƒ½</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - Django è‡ªèº«ä¼˜åŒ–</span></span>
<span class="line"><span>      - å……åˆ†ä¹‹ç”¨ç¼“å­˜</span></span>
<span class="line"><span>      - æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£å™¨</span></span>
<span class="line"><span>      - å°½é‡ä½¿ç”¨ `defer()` å’Œ `only()` æŸ¥æ‰¾</span></span>
<span class="line"><span>      - å°½é‡ä½¿ç”¨ `count()` å’Œ `exists()`</span></span>
<span class="line"><span>      - æ¨¡æ¿ä¸­ `{% block %}` æ€§èƒ½ä¼˜äº `{% include %}`</span></span>
<span class="line"><span>      - [å¼€å¯æ¨¡æ¿ç¼“å­˜](https://docs.djangoproject.com/en/2.0/ref/templates/api/#django.template.loaders.cached.Loader)</span></span>
<span class="line"><span>      - **ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼**</span></span>
<span class="line"><span>    - å…¶ä»–ä¼˜åŒ–</span></span>
<span class="line"><span>      - I/O å¯†é›†å‹: å¼‚æ­¥åŒ–</span></span>
<span class="line"><span>        - è¯·æ±‚å¼‚æ­¥åŒ–</span></span>
<span class="line"><span>        - æ•°æ®æ“ä½œå¼‚æ­¥åŒ–</span></span>
<span class="line"><span>        - gevent, asyncio, aiopg, aiohttp, tornado</span></span>
<span class="line"><span>      - è®¡ç®—å¯†é›†å‹</span></span>
<span class="line"><span>        - è€—æ—¶æ“ä½œç”¨ [Celery](http://docs.jinkan.org/docs/celery/) ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ</span></span>
<span class="line"><span>      - åˆ†åº“åˆ†è¡¨</span></span>
<span class="line"><span>        - å–ä½™ã€å“ˆå¸Œ</span></span>
<span class="line"><span>        - èŒƒå›´</span></span>
<span class="line"><span>        - ä¸€è‡´æ€§å“ˆå¸Œ</span></span>
<span class="line"><span>      - ç´¢å¼•ä¼˜åŒ–</span></span>
<span class="line"><span>      - æ…¢æŸ¥è¯¢ä¼˜åŒ– ([ç›¸å…³å·¥å…·: DjangoDebugToolbar](https://django-debug-toolbar.readthedocs.io))</span></span>
<span class="line"><span>      - Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼åˆ©ç”¨å¤šæ ¸</span></span>
<span class="line"><span>      - PyPy</span></span>
<span class="line"><span>      - Cython</span></span>
<span class="line"><span></span></span>
<span class="line"><span>10. Python / Django ç¯å¢ƒåŠ è½½</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - sys.argv</span></span>
<span class="line"><span>    - sys.path</span></span>
<span class="line"><span>    - os.environ</span></span>
<span class="line"><span></span></span>
<span class="line"><span>11. Git</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - å¸¸ç”¨æ“ä½œ</span></span>
<span class="line"><span>      - git init</span></span>
<span class="line"><span>      - git clone</span></span>
<span class="line"><span>      - git add</span></span>
<span class="line"><span>      - git commit -m 'xxxxxxxx'</span></span>
<span class="line"><span>      - git push</span></span>
<span class="line"><span>      - git pull</span></span>
<span class="line"><span>      - git fetch</span></span>
<span class="line"><span>      - git log</span></span>
<span class="line"><span>      - git checkout</span></span>
<span class="line"><span>      - git branch</span></span>
<span class="line"><span>      - git merge</span></span>
<span class="line"><span>    - ä»£ç ç®¡ç†</span></span>
<span class="line"><span>      - code review</span></span>
<span class="line"><span>        - å‘ç°ä»£ç é€»è¾‘é—®é¢˜</span></span>
<span class="line"><span>        - ä»£ç é£æ ¼åŠè§„èŒƒåŒ–é—®é¢˜</span></span>
<span class="line"><span>        - ç®—æ³•é—®é¢˜</span></span>
<span class="line"><span>        - é”™è¯¯çš„ä½¿ç”¨æ–¹å¼</span></span>
<span class="line"><span>        - èƒ½å¤Ÿå­¦ä¹ å…¶ä»–äººçš„ä¼˜ç§€ä»£ç </span></span>
<span class="line"><span>      - åˆ†æ”¯: master / dev / feature</span></span>
<span class="line"><span></span></span>
<span class="line"><span>12. Blog</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    1.  åŸºç¡€åŠŸèƒ½</span></span>
<span class="line"><span>        1. çœ‹æ–‡ç« </span></span>
<span class="line"><span>        2. å†™æ–‡ç« </span></span>
<span class="line"><span>        3. æŸ¥çœ‹æ–‡ç« åˆ—è¡¨</span></span>
<span class="line"><span>        4. æ ¹æ®æ­£æ–‡æœç´¢æ–‡ç« </span></span>
<span class="line"><span>        5. å¯ä»¥è¯„è®º</span></span>
<span class="line"><span>    2.  æ‰©å±•åŠŸèƒ½ 0. å®ç°åˆ†é¡µåŠŸèƒ½: é¦–é¡µæ–‡ç« åˆ—è¡¨æ¯é¡µæ˜¾ç¤º 5 ç¯‡æ–‡ç« </span></span>
<span class="line"><span></span></span>
<span class="line"><span>        1.  å®ç°ä¸€ä¸ªåŸºäº redis çš„æ–‡ç« ç¼“å­˜</span></span>
<span class="line"><span>        2.  ç»™é¦–é¡µå¢åŠ ä¸€ä¸ªæ¨¡å—, æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„ 10 ç¯‡æ–‡ç«  (ç‚¹å‡»ç‡æœ€é«˜çš„)</span></span>
<span class="line"><span>        3.  åˆ›å»ºç”¨æˆ·æ¨¡å—</span></span>
<span class="line"><span>            - å®ç°æ³¨å†Œã€ç™»å½•åŠŸèƒ½</span></span>
<span class="line"><span>            - æ·»åŠ ç”¨æˆ·ä¸ªäººä¿¡æ¯å±•ç¤º</span></span>
<span class="line"><span>            - å¼€å‘å¤´åƒä¸Šä¼ åŠŸèƒ½</span></span>
<span class="line"><span>        4.  å†™ä¸€ä¸ªè£…é¥°å™¨, åœ¨ blog.log æ–‡ä»¶ä¸­è¾“å‡ºé˜…è¯»æ–‡ç« çš„ç”¨æˆ· IP, åŠæ‰€è¯»æ–‡ç« çš„ ID</span></span>
<span class="line"><span>        5.  åŸºäºæ—¥å¿—çš„ç®€å•ç»Ÿè®¡</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            - è®¡ç®—å‡ºé˜…è¯»æ¬¡æ•°æœ€å¤šçš„æ–‡ç« : `awk '{print $6}' blog6.log | sort | uniq -c | sort -r`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            - è®¡ç®—å‡ºæ¯ä¸ªè®¿å®¢è¯»äº†å¤šå°‘ç¯‡æ–‡ç« : `awk '{print $5}' blog6.log | sort | uniq -c | sort -r`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        6.  å†™ä¸€ä¸ªä¸­é—´ä»¶, é™åˆ¶ç”¨æˆ·çš„è®¿é—®é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡ï¼Œè¶…è¿‡ 2 æ¬¡æ—¶ï¼Œç­‰å¾…è‡³åˆç†æ—¶é—´å†è¿”å›</span></span>
<span class="line"><span>        7.  ç»™æ–‡ç« å¢åŠ  Tag åŠŸèƒ½:</span></span>
<span class="line"><span>            - æ¯ç¯‡æ–‡ç« å¯ä»¥æ·»åŠ å¤šä¸ª Tag</span></span>
<span class="line"><span>            - æ¯ä¸ª Tag åˆ†ç±»ä¸‹æœ‰å¤šç¯‡æ–‡ç« </span></span>
<span class="line"><span>            - ç‚¹å‡»æ¯ä¸ª Tag ç›´æ¥è·³è½¬åˆ°æ­¤ tag çš„æ–‡ç« åˆ—è¡¨</span></span>
<span class="line"><span>            - ä¸è¦ä½¿ç”¨å¤–é”®</span></span>
<span class="line"><span>        8.  å®ç°æƒé™ç®¡ç†åŠŸèƒ½</span></span>
<span class="line"><span>            - æœªç™»å½•ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ–‡ç« </span></span>
<span class="line"><span>            - æ™®é€šæ³¨å†Œç”¨æˆ·ï¼Œå¯ä»¥å‘è¡¨è¯„è®º</span></span>
<span class="line"><span>            - ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘è¡¨å’Œåˆ é™¤æ–‡ç« ã€è¯„è®º</span></span>
<span class="line"><span>        9.  [ä½¿ç”¨ Gunicorn é©±åŠ¨ Django, å¯¹æ¯”æ€§èƒ½å·®å¼‚](http://docs.gunicorn.org/en/latest/install.html)</span></span>
<span class="line"><span>            - æ–‡ä»¶æè¿°ç¬¦</span></span>
<span class="line"><span>            - å•å°æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°</span></span>
<span class="line"><span>            - TCP è¿æ¥ä¸Šé™</span></span>
<span class="line"><span>        10. Nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            - è´Ÿè½½å‡è¡¡: è½®è¯¢, æƒé‡, IP å“ˆå¸Œ</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                                   User Requests</span></span>
<span class="line"><span>                                 |    |    |    |</span></span>
<span class="line"><span>                                 V    V    V    V</span></span>
<span class="line"><span>                                 www.example.com</span></span>
<span class="line"><span>                                     DNS è½®è®­</span></span>
<span class="line"><span>                                   /         \</span></span>
<span class="line"><span>                                  V           V</span></span>
<span class="line"><span>                              Nginx            Nginx</span></span>
<span class="line"><span>                           113.5.3.10        110.2.9.11         ---> Nginx ç»‘å®šå…¬ç½‘ IP</span></span>
<span class="line"><span>                           /        |        |       \</span></span>
<span class="line"><span>                          V         V        V        V</span></span>
<span class="line"><span>                    AppServer  AppServer  AppServer  AppServer  ---> Gunicorn + Django</span></span>
<span class="line"><span>                    10.0.0.1   10.0.0.2   10.0.0.3   10.0.0.3   ---> AppServer ç»‘å®šå†…ç½‘ IP</span></span>
<span class="line"><span>                    weight:2   weight:5   weight:10  weight:20  ---> æƒé‡</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            - ä¸ºä»€ä¹ˆç”¨ Nginx, ä¸ç›´æ¥ç”¨ gunicorn</span></span>
<span class="line"><span>            - ä»£ç†ç½‘ç«™ã€å›¾ç‰‡</span></span>
<span class="line"><span>            - Nginx å’Œ Apache çš„åŒºåˆ«</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        11. å‹åŠ›æµ‹è¯•</span></span>
<span class="line"><span>            - ab</span></span>
<span class="line"><span>            - webbench</span></span>
<span class="line"><span>        12. å…¶ä»–: uWSGI, tornado</span></span>
<span class="line"><span></span></span>
<span class="line"><span>13. é¡¹ç›®</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - ä»£ç ç»„ç»‡</span></span>
<span class="line"><span>    - å¸¸ç”¨ç»„ä»¶</span></span>
<span class="line"><span>      - nginx</span></span>
<span class="line"><span>      - [Redis](http://redisdoc.com/)</span></span>
<span class="line"><span>      - MySQL</span></span>
<span class="line"><span>      - è½¯ä»¶å®‰è£…</span></span>
<span class="line"><span>        - `apt-get`</span></span>
<span class="line"><span>        - `yum`</span></span>
<span class="line"><span>        - `make` / `make install`</span></span>
<span class="line"><span>    - DB é›†ç¾¤</span></span>
<span class="line"><span>      - ä¸»ä»å¤‡ä»½</span></span>
<span class="line"><span>      - ä¸€ä¸»ä¸¤ä»</span></span>
<span class="line"><span>      - åŒä¸»äº’å¤‡</span></span>
<span class="line"><span></span></span>
<span class="line"><span>14. é™æ€æ–‡ä»¶å­˜å‚¨</span></span>
<span class="line"><span>    - çº¿ä¸Šç³»ç»Ÿ Django ä¼šå…³æ‰è‡ªèº«çš„é™æ€æ–‡ä»¶å¤„ç†</span></span>
<span class="line"><span>    - ç”¨ Nginx ä»£ç†é™æ€æ–‡ä»¶</span></span>
<span class="line"><span>    - CDN (å†…å®¹åˆ†å‘ç½‘ç»œ)</span></span>
<span class="line"><span>      - åŸºäºç¼“å­˜æŠ€æœ¯ä¸ºé™æ€èµ„æº (ä¸»è¦æ˜¯å¤šåª’ä½“èµ„æº) æä¾›è®¿é—®åŠ é€Ÿçš„æœåŠ¡</span></span>
<span class="line"><span>      - åœ¨ä¸åŒåœ°åŒºéƒ¨ç½²é•œåƒæœåŠ¡å™¨èŠ‚ç‚¹</span></span>
<span class="line"><span>      - å®šæœŸä¸æºç«™åšå†…å®¹åŒæ­¥</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webåŸºç¡€-django]]></title>
            <link>https://lpdswing.github.io//technology/other/WebåŸºç¡€.html</link>
            <guid>https://lpdswing.github.io//technology/other/WebåŸºç¡€.html</guid>
            <pubDate>Wed, 03 May 2017 18:16:44 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="web-åŸºç¡€" tabindex="-1">Web åŸºç¡€ <a class="header-anchor" href="#web-åŸºç¡€" aria-label="Permalink to &quot;Web åŸºç¡€&quot;">&ZeroWidthSpace;</a></h1>
<ol>
<li>
<p>HyperText Transfer Protocol</p>
<ol>
<li>HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)</li>
<li>æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®</li>
<li>åº”ç”¨é¢†åŸŸ</li>
<li>è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦)
<ul>
<li><code>http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1</code></li>
<li>ç»„æˆ
<ul>
<li>scheme: http</li>
<li>hostname: example.com</li>
<li>port: 80</li>
<li>path: /foo/bar/readme</li>
<li>query: ?x=0&amp;y=abc</li>
<li>fragment: #part1</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Python ç³»å¸¸è§ Web æ¡†æ¶</p>
<ul>
<li>Django
<ul>
<li>å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§</li>
</ul>
</li>
<li>Flask
<ul>
<li>å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ä¾¿äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ</li>
</ul>
</li>
<li>Tornado
<ul>
<li>å¼‚æ­¥å¤„ç†, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚</li>
</ul>
</li>
<li>web.py
<ul>
<li>ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç </li>
</ul>
</li>
<li>bottle
<ul>
<li>å•æ–‡ä»¶æ¡†æ¶</li>
</ul>
</li>
<li>å…¶ä»–
<ul>
<li>Falcon</li>
<li>web2py</li>
<li>Quixote</li>
<li>Sanic</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ</p>
<ol>
<li>DNSè§£æ
<ul>
<li>example.com -&gt; 93.184.216.34</li>
<li><code>dig example.com</code></li>
<li><code>nslookup example.com</code></li>
<li><code>/etc/hosts</code></li>
</ul>
</li>
<li>å»ºç«‹TCP
<ol>
<li>SYN</li>
<li>ACK + SYN</li>
<li>ACK</li>
</ol>
</li>
<li>ç”Ÿæˆ Request æŠ¥æ–‡</li>
<li>Client å‘é€ Request æŠ¥æ–‡</li>
<li>Server æ¥æ”¶æŠ¥æ–‡</li>
<li>é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡</li>
<li>Djangoã€Flask ç­‰åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘å¤„ç†
0. ç”Ÿæˆ Request å¯¹è±¡
<ol>
<li>process_request (Middleware)</li>
<li>URL match</li>
<li>process_views (Middleware)</li>
<li>Views  --&gt;  process_exception</li>
<li>Redner Template</li>
<li>Response</li>
<li>process_response (Middleware)</li>
</ol>
</li>
<li>ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡</li>
<li>Server è¿”å›æŠ¥æ–‡ç»™ Client</li>
<li>å…³é—­è¿æ¥</li>
<li>è§£æã€æ¸²æŸ“ HTML é¡µé¢</li>
</ol>
</li>
<li>
<p>æœ€ç®€å•çš„ Server</p>
<ul>
<li>HTTP Server
<ul>
<li>åˆ›å»ºã€å…³é—­è¿æ¥</li>
<li>å‘é€ã€æ¥æ”¶æ•°æ®</li>
</ul>
</li>
<li>WSGI: æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£</li>
<li>Web Application
<ul>
<li>ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘</li>
<li>è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¸¸è§ Header å­—æ®µ</p>
<ul>
<li>Accept            text/plain</li>
<li>Accept-Charset    utf-8</li>
<li>Accept-Encoding   gzip (Content-Encoding)</li>
<li>Accept-Language   zh-CN en-US</li>
<li>Cache-Control     true,max-age</li>
<li>Connection        keep-alive</li>
<li>Content-Length    è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦</li>
<li>Content-Type      ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html</li>
<li>User-Agent        æµè§ˆå™¨æ ‡è¯†</li>
</ul>
</li>
<li>
<p>HTTP çŠ¶æ€ç </p>
<ul>
<li>200 <strong>OK</strong>                      æˆåŠŸ</li>
<li>301 <strong>Moved Permanently</strong>       é‡å®šå‘ (æ°¸ä¹…è¿ç§»)</li>
<li>302 <strong>Moved Temporarily</strong>       é‡å®šå‘ (ä¸´æ—¶è¿ç§»)</li>
<li>303 <strong>See Other</strong>               é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘)</li>
<li>400 <strong>Bad Request</strong>             å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯</li>
<li>403 <strong>Forbidden</strong>               æ‹’ç»è®¿é—®</li>
<li>404 <strong>Not Found</strong>               æ‰¾ä¸åˆ°é¡µé¢</li>
<li>500 <strong>Internal Server Error</strong>   æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>
<li>502 <strong>Bad Gateway</strong>             ç½‘å…³é”™è¯¯</li>
<li>503 <strong>Service Unavailable</strong>     æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½</li>
<li>504 <strong>Gateway Timeout</strong>         è¯·æ±‚è¶…æ—¶</li>
</ul>
</li>
<li>
<p>GET å’Œ POST</p>
<ul>
<li>è¡¨è±¡
<ul>
<li>GET åœ¨æµè§ˆå™¨å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚</li>
<li>GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ä¸å¯ä»¥.</li>
<li>GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜, è€Œ POST ä¸ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®.</li>
<li>GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œ, è€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™.</li>
<li>GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›è¡Œ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼.</li>
<li>GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), è€Œ POST æ²¡æœ‰.</li>
<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶.</li>
<li>GET æ¯” POST æ›´ä¸å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Š, æ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯.</li>
<li>GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­.</li>
</ul>
</li>
<li>æ·±å±‚
<ul>
<li>GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ….</li>
<li>GET: æµè§ˆå™¨ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›</li>
<li>POST: æµè§ˆå™¨å…ˆå‘é€ header, æœåŠ¡å™¨å“åº” 100 continue, æµè§ˆå™¨å†å‘é€data, æœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>cookie å’Œ session</p>
<ul>
<li>æ— çŠ¶æ€åè®®çš„æ— å¥ˆä¹‹ä¸¾
<ul>
<li>é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ·</li>
</ul>
</li>
<li>å¼‚åŒ
<ol>
<li>session åœ¨æœåŠ¡å™¨ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</li>
<li>session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰</li>
<li>session çš„è¿è¡Œä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie , åŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰</li>
<li>session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥.</li>
<li>ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session</li>
</ol>
</li>
<li>äº§ç”Ÿè¿‡ç¨‹
<ol>
<li>å®¢æˆ·ç«¯è¯·æ±‚</li>
<li>æœåŠ¡å™¨äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆå™¨</li>
<li>æµè§ˆå™¨å°† session_id å†™å…¥ cookie</li>
<li>åç»­è¯·æ±‚ä¼šå†™å…¥ Header</li>
</ol>
</li>
<li>ä½¿ç”¨</li>
</ul>
</li>
<li>
<p>RESTful</p>
<ul>
<li>ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡†</li>
<li>ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº</li>
<li>ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ</li>
<li>å››ä¸ªåŠ¨è¯
<ul>
<li>GET: ç”¨æ¥è·å–èµ„æº</li>
<li>POST: ç”¨æ¥æ–°å»ºèµ„æº</li>
<li>PUT: ç”¨æ¥æ›´æ–°èµ„æº</li>
<li>DELETE: ç”¨æ¥åˆ é™¤èµ„æº</li>
</ul>
</li>
<li>è¯¯åŒº
<ul>
<li>URL ä¸­ä½¿ç”¨åŠ¨è¯</li>
<li>URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header</li>
</ul>
</li>
</ul>
</li>
<li>
<p>HTTPS</p>
<ul>
<li>
<p>ä¼˜ç‚¹</p>
<ul>
<li>é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨</li>
<li>é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹</li>
<li>æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹</p>
<ul>
<li>åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU</li>
<li>æ¡æ‰‹è¿‡ç¨‹ç¹ç</li>
</ul>
</li>
<li>
<p>SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)</p>
</li>
<li>
<p>åŠ å¯†ç®—æ³•</p>
<ul>
<li>
<p>å¯¹ç§°åŠ å¯†: TEA, AES, 3DES</p>
<pre><code>  text: abcdefg
          |  ^
          v  |
  key:    1234
          |  ^
          v  |
  new:  hasjdkfhasdf
</code></pre>
</li>
<li>
<p>éå¯¹ç§°åŠ å¯†: RSA, ED25519</p>
<pre><code>  text:   abcdefghijklmn
            |       ^
            v       |
  pub_key: 123      |
  pri_key:  |   1234567890123456789546789
            |       ^
            v       |
  new: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd
</code></pre>
</li>
</ul>
</li>
<li>
<p>Let's Encrypt: <a href="https://letsencrypt.org/" target="_blank" rel="noreferrer">https://letsencrypt.org/</a></p>
</li>
<li>
<p>ä¼ è¾“è¿‡ç¨‹ <img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181012607.png" alt=""></p>
</li>
</ul>
</li>
</ol>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181012607.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[pythonè¿›é˜¶ç¬”è®°]]></title>
            <link>https://lpdswing.github.io//technology/other/Pythonè¿›é˜¶.html</link>
            <guid>https://lpdswing.github.io//technology/other/Pythonè¿›é˜¶.html</guid>
            <pubDate>Wed, 03 May 2017 18:16:36 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="python-è¿›é˜¶" tabindex="-1">Python è¿›é˜¶ <a class="header-anchor" href="#python-è¿›é˜¶" aria-label="Permalink to &quot;Python è¿›é˜¶&quot;">&ZeroWidthSpace;</a></h1>
<ol>
<li>
<p>PEP8 ç¼–ç è§„èŒƒ, ä»¥åŠå¼€å‘ä¸­çš„ä¸€äº›æƒ¯ä¾‹å’Œå»ºè®®</p>
<ul>
<li>
<p>ä»£ç ç¼–æ’:</p>
<ul>
<li>ç¼©è¿› 4 ä¸ªç©ºæ ¼, ç¦æ­¢ç©ºæ ¼ä¸ Tab æ··ç”¨</li>
<li>è¡Œé•¿ 80: é˜²æ­¢å•è¡Œé€»è¾‘è¿‡äºå¤æ‚</li>
</ul>
</li>
<li>
<p>é€‚å½“æ·»åŠ ç©ºè¡Œ</p>
<ul>
<li>å‡½æ•°é—´: é¡¶çº§å‡½æ•°é—´ç©º 2 è¡Œ, ç±»çš„æ–¹æ³•ä¹‹é—´ç©º 1 è¡Œ</li>
<li>å‡½æ•°å†…: åŒä¸€å‡½æ•°å†…çš„é€»è¾‘å—ä¹‹é—´, ç©º 1 è¡Œ</li>
<li>æ–‡ä»¶ç»“å°¾: ç•™ä¸€ä¸ªç©ºè¡Œ</li>
</ul>
</li>
<li>
<p>import</p>
<ul>
<li>é¡ºåº
<ol>
<li>æ ‡å‡†åº“</li>
<li>ç¬¬ä¸‰æ–¹åº“</li>
<li>è‡ªå®šä¹‰åº“</li>
</ol>
</li>
<li>å•è¡Œä¸è¦ import å¤šä¸ªåº“</li>
<li>æ¨¡å—å†…ç”¨ä¸åˆ°çš„ä¸è¦å» import</li>
</ul>
</li>
<li>
<p>ç©ºæ ¼</p>
</li>
<li>
<p>æ³¨é‡Š</p>
<ul>
<li>è¡Œæ³¨é‡Š</li>
<li>å—æ³¨é‡Š</li>
<li>å¼•å…¥å¤–æ¥ç®—æ³•æˆ–è€…é…ç½®æ—¶é¡»åœ¨æ³¨é‡Šä¸­æ·»åŠ æºè¿æ¥, æ ‡æ˜å‡ºå¤„</li>
<li>å‡½æ•°å’Œç±»å°½å¯èƒ½æ·»åŠ  <code>docstring</code></li>
</ul>
</li>
<li>
<p>å‘½å</p>
<ul>
<li>åŒ…åã€æ¨¡å—åã€å‡½æ•°åã€æ–¹æ³•åå…¨éƒ¨ä½¿ç”¨å°å†™, å•è¯é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥</li>
<li>ç±»åã€å¼‚å¸¸åä½¿ç”¨ CapWords çš„æ–¹å¼, å¼‚å¸¸åç»“å°¾åŠ  <code>Error</code> æˆ– <code>Wraning</code> åç¼€</li>
<li>å…¨å±€å˜é‡å°½é‡ä½¿ç”¨å¤§å†™, ä¸€ç»„åŒç±»å‹çš„å…¨å±€å˜é‡è¦åŠ ä¸Šç»Ÿä¸€å‰ç¼€, å•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥</li>
</ul>
</li>
<li>
<p>å­—ç¬¦ä¸²æ‹¼æ¥å°½é‡ä½¿ç”¨ <code>join</code> æ–¹å¼: é€Ÿåº¦å¿«, å†…å­˜æ¶ˆè€—å°</p>
</li>
<li>
<p>è¯­æ„æ˜ç¡®ã€ç›´ç™½</p>
<ul>
<li><code>not xx in yy</code> vs <code>xx not in yy</code></li>
<li><code>not a is b</code> vs <code>a is not b</code></li>
</ul>
</li>
<li>
<p>ç¨‹åºæ„å»º</p>
<ul>
<li>ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…, å¹¶æŠŠè¿™ä»¶äº‹åšå¥½</li>
<li>å¤§çš„åŠŸèƒ½ç”¨å°å‡½æ•°ä¹‹é—´çµæ´»ç»„åˆæ¥å®Œæˆ</li>
<li>é¿å…ç¼–å†™åºå¤§çš„ç¨‹åº, â€œå¤§â€æ„å‘³ç€ä½“ç§¯åºå¤§, é€»è¾‘å¤æ‚ç”šè‡³æ··ä¹±</li>
</ul>
</li>
<li>
<p>å‡½æ•°åå¿…é¡»æœ‰åŠ¨è¯, æœ€å¥½æ˜¯ do_something çš„å¥å¼, æˆ–è€… somebody_do_something å¥å¼</p>
</li>
<li>
<p>è‡ªå®šä¹‰çš„å˜é‡åã€å‡½æ•°åä¸è¦ä¸æ ‡å‡†åº“ä¸­çš„åå­—å†²çª</p>
</li>
<li>
<p>pip install pep8</p>
</li>
<li>
<p>ç»ƒä¹ : è§„èŒƒåŒ–è¿™æ®µä»£ç </p>
<pre><code>  from django.conf import settings
  import sys, os
  mod=0xffffffff
  def foo ( a , b = 123 ) :
      c = { 'x' : 111 , 'y' : 222 }  # å®šä¹‰ä¸€ä¸ªå­—å…¸
      d = [ 1, 3 , 5 ]
      return a , b , c
  def bar(x):
      if x%2 ==0: return true
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>*</code> å’Œ <code>**</code> çš„ç”¨æ³•</p>
<ul>
<li>
<p>å‡½æ•°å®šä¹‰</p>
<pre><code>  def foo(*args, **kwargs):
      pass
</code></pre>
</li>
<li>
<p>å‚æ•°ä¼ é€’</p>
<pre><code>  def foo(x, y, z, a, b):
      print(x)
      print(y)
      print(z)
      print(a)
      print(b)
  lst = [1, 2, 3]
  dic = {'a': 22, 'b': 77}
  foo(*lst, **dic)
</code></pre>
</li>
<li>
<p>å¼ºåˆ¶å‘½åå‚æ•°</p>
<pre><code>  def foo(a, *, b, c=123):
      pass
</code></pre>
</li>
<li>
<p>è§£åŒ…è¯­æ³•: <code>a, b, *ignored, c = [1, 2, 3, 4, 5, 6, 7]</code></p>
</li>
</ul>
</li>
<li>
<p>Python çš„èµ‹å€¼å’Œå¼•ç”¨</p>
<ul>
<li>
<p><code>==, is</code>: <code>==</code> åˆ¤æ–­çš„æ˜¯å€¼, <code>is</code> åˆ¤æ–­çš„æ˜¯å†…å­˜åœ°å€ (å³å¯¹è±¡çš„id)</p>
</li>
<li>
<p>å°æ•´æ•°å¯¹è±¡: [-5, 256]</p>
</li>
<li>
<p><code>copy, deepcopy</code> çš„åŒºåˆ«</p>
<ul>
<li><code>copy</code>: åªæ‹·è´è¡¨å±‚å…ƒç´ </li>
<li><code>deepcopy</code>: åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºæ‰€æœ‰å­å…ƒç´ </li>
<li><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181010449.png" alt=""></li>
</ul>
</li>
<li>
<p>ç»ƒä¹ 1: è¯´å‡ºæ‰§è¡Œç»“æœ</p>
<pre><code>  def extendList(val, lst=[]):
      lst.append(val)
      return lst

  list1 = extendList(10)
  list2 = extendList(123, [])
  list3 = extendList('a')
</code></pre>
</li>
<li>
<p>ç»ƒä¹ 2: è¯´å‡ºä¸‹é¢æ‰§è¡Œç»“æœ</p>
<pre><code>  from copy import copy, deepcopy
  from pickle import dumps, loads

  a = [1, 2, 3]
  b = [a] * 3
  c = copy(b)
  d = deepcopy(b)
  e = loads(dumps(b, 4))

  b[1].append(999)
  c[1].append(999)
  d[1].append(999)
  e[1].append(999)
  d[1].append(777)
  e[1].append(777)
</code></pre>
</li>
<li>
<p>è‡ªå®šä¹‰ deepcopy: <code>my_deepcopy = lambda item: loads(dumps(item, 4))</code></p>
</li>
</ul>
</li>
<li>
<p>è¿­ä»£å™¨, ç”Ÿæˆå™¨, itertools, yield, åˆ—è¡¨ / å­—å…¸ / é›†åˆçš„æ¨å¯¼</p>
<pre><code> class Range:
     def __init__(self, start, end):
         self.start = start - 1
         self.end = end

     def __iter__(self):
         return self

     def __next__(self):
         self.start += 1
         if self.start &lt; self.end:
             return self.start
         else:
             raise StopIteration()
</code></pre>
<ul>
<li>
<p>iterator: ä»»ä½•å®ç°äº† <code>__iter__</code> å’Œ <code>__next__</code> (python2ä¸­æ˜¯ <code>next()</code>) æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯è¿­ä»£å™¨.</p>
<ul>
<li><code>__iter__</code>è¿”å›è¿­ä»£å™¨è‡ªèº«</li>
<li><code>__next__</code> è¿”å›å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼</li>
<li>å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ›´å¤šå…ƒç´ , åˆ™æŠ›å‡ºStopIterationå¼‚å¸¸</li>
</ul>
</li>
<li>
<p>generator: ç”Ÿæˆå™¨å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨, ä¸éœ€è¦è‡ªå®šä¹‰ <code>__iter__</code> å’Œ <code>__next__</code></p>
<ul>
<li>ç”Ÿæˆå™¨å‡½æ•° (yield)</li>
<li>ç”Ÿæˆå™¨è¡¨è¾¾å¼</li>
</ul>
</li>
<li>
<p>ç»ƒä¹ 1: è‡ªå®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>
<pre><code>  class Fib:
      def __init__(self, count):
          self.prev = 0
          self.curr = 1
          self.count = count

      def __iter__(self):
          return self

      def __next__(self):
          if self.count &gt; 0:
              # è®¡æ•°
              self.count -= 1
              # è®¡ç®—å½“å‰çš„å€¼
              current = self.curr
              # ä¸ºä¸‹æ¬¡åšå‡†å¤‡
              self.prev, self.curr = self.curr, (self.curr + self.prev)
              # è¿”å›å½“å‰å€¼
              return current
          else:
              raise StopIteration()
</code></pre>
</li>
<li>
<p>ç»ƒä¹ 2: è‡ªå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>
<pre><code>      def fib(max_value):
          prev = 0
          curr = 1
          while curr &lt; max_value:
              yield curr
              prev, curr = curr, curr + prev
</code></pre>
</li>
<li>
<p>ç»ƒä¹ 3: å®šä¹‰ä¸€ä¸ªéšæœºæ•°è¿­ä»£å™¨, éšæœºèŒƒå›´ä¸º [1, 50], æœ€å¤§è¿­ä»£æ¬¡æ•° 30</p>
<pre><code>  import random

  class RandomIter:
      def __init__(self, start, end, times):
          self.start = start
          self.end = end
          self.max_times = times
          self.count = 0

      def __iter__(self):
          return self

      def __next__(self):
          self.count += 1
          if self.count &lt;= self.max_times:
              return random.randint(self.start, self.end)
          else:
              raise StopIteration()
</code></pre>
</li>
<li>
<p>è¿­ä»£å™¨ã€ç”Ÿæˆå™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>
<ul>
<li>èŠ‚çœå†…å­˜</li>
<li>æƒ°æ€§æ±‚å€¼</li>
</ul>
</li>
<li>
<p>itertools</p>
<ul>
<li>æ— é™è¿­ä»£
<ul>
<li><code>count(start=0, step=1)</code></li>
<li><code>cycle(iterable)</code></li>
<li><code>repeat(object [,times])</code></li>
</ul>
</li>
<li>æœ‰é™è¿­ä»£
<ul>
<li><code>chain(*iterables)</code></li>
</ul>
</li>
<li>æ’åˆ—ç»„åˆ
<ul>
<li><code>product(*iterables, repeat=1)</code> ç¬›å¡å°”ç§¯</li>
<li><code>permutations(iterable[, r-length])</code> å…¨æ’åˆ—</li>
<li><code>combinations(iterable, r-length)</code> ç»„åˆ</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>method</code>, <code>classmethod</code> å’Œ <code>staticmethod</code></p>
<ul>
<li>
<p><code>method</code>: é€šè¿‡å®ä¾‹è°ƒç”¨æ—¶, å¯ä»¥å¼•ç”¨ç±»å†…éƒ¨çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•</p>
</li>
<li>
<p><code>classmethod</code>: æ— éœ€å®ä¾‹åŒ–, å¯ä»¥è°ƒç”¨ç±»å±æ€§å’Œç±»æ–¹æ³•, æ— æ³•å–åˆ°æ™®é€šçš„æˆå‘˜å±æ€§å’Œæ–¹æ³•</p>
</li>
<li>
<p><code>staticmethod</code>: æ— è®ºç”¨ç±»è°ƒç”¨è¿˜æ˜¯ç”¨å®ä¾‹è°ƒç”¨, éƒ½æ— æ³•å–åˆ°ç±»å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•, å®Œå…¨ç‹¬ç«‹çš„ä¸€ä¸ªæ–¹æ³•</p>
</li>
<li>
<p>ç»ƒä¹ : è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœ</p>
<pre><code>  class Test(object):
      x = 123

      def __init__(self):
          self.y = 456

      def bar1(self):
          print('i am a method')

      @classmethod
      def bar2(cls):
          print('i am a classmethod')

      @staticmethod
      def bar3():
          print('i am a staticmethod')

      def foo1(self):
          print(self.x)
          print(self.y)
          self.bar1()
          self.bar2()
          self.bar3()

      @classmethod
      def foo2(cls):
          print(cls.x)
          # print(cls.y)
          # cls.bar1()
          Test.bar2()
          Test.bar3()

      @staticmethod
      def foo3(obj):
          print(obj.x)
          print(obj.y)
          obj.bar1()
          obj.bar2()
          obj.bar3()

  t = Test()
  t.foo1()
  t.foo2()
  t.foo3()
</code></pre>
</li>
</ul>
</li>
<li>
<p>Python é­”æœ¯æ–¹æ³•</p>
<ol>
<li>
<p><code>__str__</code>, <code>__repr__</code></p>
</li>
<li>
<p><code>__init__</code> å’Œ <code>__new__</code></p>
<ul>
<li><code>__new__</code> è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹, <code>__init__</code> æ— è¿”å›å€¼</li>
<li><code>__new__</code> æ˜¯ä¸€ä¸ªç±»æ–¹æ³•
<ul>
<li>
<p>å•ä¾‹æ¨¡å¼</p>
<pre><code>  class A(object):
      '''å•ä¾‹æ¨¡å¼'''
      obj = None
      def __new__(cls, *args, **kwargs):
          if cls.obj is None:
              cls.obj = object.__new__(cls)
          return cls.obj
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ¯”è¾ƒè¿ç®—ã€æ•°å­¦è¿ç®—</p>
<ul>
<li>
<p>è¿ç®—ç¬¦é‡è½½</p>
<ul>
<li><code>+</code>: <code>__add__(value)</code></li>
<li><code>-</code>: <code>__sub__(value)</code></li>
<li><code>*</code>: <code>__mul__(value)</code></li>
<li><code>/</code>: <code>__truediv__(value)</code> (Python 3.x), <code>__div__(value)</code> (Python 2.x)</li>
<li><code>//</code>: <code>__floordiv__(value)</code></li>
<li><code>%</code>: <code>__mod__(value)</code></li>
<li><code>&amp;</code>: <code>__and__(value)</code></li>
<li><code>|</code>: <code>__or__(value)</code></li>
</ul>
</li>
<li>
<p>ç»ƒä¹ : å®ç°å­—å…¸çš„ <code>__add__</code> æ–¹æ³•, ä½œç”¨ç›¸å½“äº d.update(other)</p>
<pre><code>  class Dict(dict):
      def __add__(self, other):
          if isinstance(other, dict):
              new_dict = {}
              new_dict.update(self)
              new_dict.update(other)
              return new_dict
          else:
              raise TypeError('not a dict')
</code></pre>
</li>
<li>
<p>æ¯”è¾ƒè¿ç®—ç¬¦çš„é‡è½½</p>
<ul>
<li><code>==</code>: <code>__eq__</code></li>
<li><code>!=</code>: <code>__ne__</code></li>
<li><code>&gt;</code>: <code>__gt__</code></li>
<li><code>&gt;=</code>: <code>__ge__</code></li>
<li><code>&lt;</code>: <code>__lt__</code></li>
<li><code>&lt;=</code>: <code>__le__</code></li>
</ul>
</li>
<li>
<p>ç»ƒä¹ : å®Œæˆä¸€ä¸ªç±», å®ç°æ•°å­¦ä¸Šæ— ç©·å¤§çš„æ¦‚å¿µ</p>
<pre><code>  class Inf:
      def __lt__(self, other):
          return False
      def __le__(self, other):
          return False
      def __ge__(self, other):
          return True
      def __gt__(self, other):
          return True
      def __eq__(self, other):
          return False
      def __ne__(self, other):
          return True
</code></pre>
</li>
</ul>
</li>
<li>
<p>å®¹å™¨æ–¹æ³•</p>
<ul>
<li>
<p><code>__len__, __iter__, __contains__</code></p>
</li>
<li>
<p><code>__getitem__</code> å¯¹ <code>string, list, tuple, dict</code> æœ‰æ•ˆ</p>
</li>
<li>
<p><code>__setitem__</code> å¯¹ <code>list, dict</code> æœ‰æ•ˆ</p>
</li>
<li>
<p><code>__missing__</code> å¯¹ <code>dict</code> æœ‰æ•ˆ</p>
<pre><code>  class Dict(dict):
      def __missing__(self, key):
          self[key] = None  # å½“æ£€æŸ¥åˆ° Key ç¼ºå¤±æ—¶, å¯ä»¥åšä»»ä½•é»˜è®¤è¡Œä¸º
</code></pre>
</li>
</ul>
</li>
<li>
<p>å¯æ‰§è¡Œå¯¹è±¡: <code>__call__</code></p>
</li>
<li>
<p>with:</p>
<ul>
<li><code>__enter__</code> è¿›å…¥ <code>with</code> ä»£ç å—å‰çš„å‡†å¤‡æ“ä½œ</li>
<li><code>__exit__</code> é€€å‡ºæ—¶çš„å–„åæ“ä½œ</li>
</ul>
</li>
<li>
<p><code>__setattr__, __getattribute__, __getattr__, __dict__</code></p>
<ul>
<li>
<p>å¸¸ç”¨æ¥åšå±æ€§ç›‘å¬</p>
<pre><code>  class A:
      '''TestClass'''
      z = [7,8,9]
      def __init__(self):
          self.x = 123
          self.y = 'abc'

      def __setattr__(self, name, value):
          print('set %s to %s' % (name, value))
          object.__setattr__(self, name, value)

      def __getattribute__(self, name):
          print('get %s' % name)
          return object.__getattribute__(self, name)

      def __getattr__(self, name):
          print('not has %s' % name)
          return -1

      def foo(self, x, y):
          return x ** y

  # å¯¹æ¯”
  a = A()
  print(A.__dict__)
  print(a.__dict__)
</code></pre>
</li>
</ul>
</li>
<li>
<p>æè¿°å™¨: <code>__set__, __get__</code></p>
<ul>
<li><a href="http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html" target="_blank" rel="noreferrer">http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html</a></li>
<li>å¸¸è§åº”ç”¨åœºæ™¯: ORM çš„å„ç§ Field ç±»</li>
</ul>
</li>
<li>
<p>æ§½: <code>__slots__</code></p>
<ul>
<li>
<p>å›ºå®šç±»æ‰€å…·æœ‰çš„å±æ€§</p>
</li>
<li>
<p>å®ä¾‹ä¸ä¼šåˆ†é… <code>__dict__</code></p>
</li>
<li>
<p>å®ä¾‹æ— æ³•åŠ¨æ€æ·»åŠ å±æ€§</p>
</li>
<li>
<p>ä¼˜åŒ–å†…å­˜åˆ†é…</p>
<pre><code>  class A:
      __slots__ = ('x', 'y')
</code></pre>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Python æ€§èƒ½ä¹‹å›°</p>
<ol>
<li>è®¡ç®—å¯†é›†å‹
<ul>
<li>CPU é•¿æ—¶é—´æ»¡è´Ÿè·è¿è¡Œ, å¦‚å›¾åƒå¤„ç†ã€å¤§æ•°æ®è¿ç®—ã€åœ†å‘¨ç‡è®¡ç®—ç­‰</li>
<li>è®¡ç®—å¯†é›†å‹: ç”¨ C è¯­è¨€è¡¥å……</li>
<li>Profile, timeit</li>
</ul>
</li>
<li>I/O å¯†é›†å‹: ç½‘ç»œ IO, æ–‡ä»¶ IO, è®¾å¤‡ IO ç­‰
<ul>
<li>å¤šçº¿ç¨‹ / å¤šè¿›ç¨‹ / åç¨‹</li>
<li>é˜»å¡ -&gt; éé˜»å¡</li>
<li>åŒæ­¥ -&gt; å¼‚æ­¥</li>
</ul>
</li>
<li>GIL å…¨å±€è§£é‡Šå™¨é”
<ul>
<li>å®ƒç¡®ä¿ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªPythonçº¿ç¨‹æ‰§è¡Œã€‚
<img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181010949.png" alt=""></li>
</ul>
</li>
<li>ä»€ä¹ˆæ˜¯è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Ÿ
<ul>
<li>è¿›ç¨‹: èµ„æºæ¶ˆè€—å¤§, ç³»ç»Ÿæ•´ä½“å¼€é”€å¤§, æ•°æ®é€šä¿¡ä¸æ–¹ä¾¿</li>
<li>çº¿ç¨‹: èµ„æºæ¶ˆè€—å°, å¯å…±äº«æ•°æ®ã€‚ä¸Šä¸‹æ–‡å¼€é”€å¤§ã€‚æŒ‰æ—¶é—´ç‰‡å¼ºåˆ¶åˆ‡æ¢, ä¸å¤Ÿçµæ´»</li>
<li>åç¨‹: å†…å­˜å¼€é”€æ›´å°, ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€æ›´å°ã€‚å¯æ ¹æ®äº‹ä»¶åˆ‡æ¢, æ›´åŠ æœ‰æ•ˆçš„åˆ©ç”¨ CPU</li>
</ul>
</li>
<li>ä»€ä¹ˆæ˜¯åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ï¼Ÿ
<ul>
<li>åŒæ­¥, å¼‚æ­¥: å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡å™¨æ¥å£æ—¶</li>
<li>é˜»å¡, éé˜»å¡: æœåŠ¡ç«¯å‘ç”Ÿç­‰å¾…</li>
</ul>
</li>
<li>äº‹ä»¶é©±åŠ¨ + å¤šè·¯å¤ç”¨
<ul>
<li>è½®è¯¢: select, poll</li>
<li>äº‹ä»¶é©±åŠ¨: epoll æœ‰æ•ˆè½®è¯¢</li>
</ul>
</li>
<li>Greenlets / gevent | tornado / asyncio</li>
<li>çº¿ç¨‹å®‰å…¨, é”
<ul>
<li>è·å¾—é”ä¹‹å, ä¸€å®šè¦é‡Šæ”¾, é¿å…æ­»é”</li>
<li>è·å¾—é”ä¹‹å, æ‰§è¡Œçš„è¯­å¥, åªè·Ÿè¢«é”èµ„æºæœ‰å…³</li>
<li>åŒºåˆ†æ™®é€šé” Lock, å¯é‡å…¥é” RLock</li>
<li>çº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤äº’å°½é‡ä½¿ç”¨ Queue</li>
</ul>
</li>
<li>gevent
<ul>
<li>monkey.patch</li>
<li>gevent.sleep éé˜»å¡å¼ç­‰å¾…</li>
<li>Queue åç¨‹é—´æ•°æ®äº¤äº’, é¿å…ç«äº‰</li>
</ul>
</li>
</ol>
</li>
<li>
<p>è£…é¥°å™¨</p>
<ul>
<li>
<p>æœ€ç®€è£…é¥°å™¨</p>
<pre><code>  def deco(func):
      def wrap(*args, **kwargs):
          return func(*args, **kwargs)
      return wrap

  @deco
  def foo(a, b):
      return a ** b
</code></pre>
</li>
<li>
<p>åŸç†</p>
<ul>
<li>
<p>å¯¹æ¯”è¢«è£…é¥°å‰åçš„ <code>foo.__name__</code> å’Œ <code>foo.__doc__</code></p>
<pre><code>  from functools import wraps
  def deco(func):
      '''i am deco'''
      @wraps(func)
      def wrap(*args, **kwargs):
          '''i am wrap'''
          return func(*args, **kwargs)
      return wrap
</code></pre>
</li>
<li>
<p>ç®€å•è¿‡ç¨‹</p>
<pre><code>  fn = deco(func)
  fn(*args, **kwargs)
</code></pre>
</li>
<li>
<p>å¤šä¸ªè£…é¥°å™¨è°ƒç”¨è¿‡ç¨‹</p>
<pre><code>  @deco1
  @deco2
  @deco3
  def foo(x, y):
      return x ** y
</code></pre>
</li>
</ul>
</li>
<li>
<p>å¸¦å‚æ•°çš„è£…é¥°å™¨</p>
<pre><code>  def deco(n):
      def wrap1(func):
          def wrap2(*args, **kwargs):
              return func(*args, **kwargs)
          return wrap2
      return wrap1
</code></pre>
</li>
<li>
<p>è£…é¥°å™¨ç±»å’Œ <code>__call__</code></p>
</li>
<li>
<p>ä½¿ç”¨åœºæ™¯</p>
<ul>
<li>å‚æ•°ã€ç»“æœæ£€æŸ¥</li>
<li>ç¼“å­˜ã€è®¡æ•°</li>
<li>æ—¥å¿—ã€ç»Ÿè®¡</li>
<li>æƒé™ç®¡ç†</li>
<li>é‡è¯•</li>
<li>å…¶ä»–</li>
</ul>
</li>
<li>
<p>ç»ƒä¹ 1ï¼šå†™ä¸€ä¸ª timer è£…é¥°å™¨, è®¡ç®—å‡ºè¢«è£…é¥°å‡½æ•°è°ƒç”¨ä¸€æ¬¡èŠ±å¤šé•¿æ—¶é—´, å¹¶æŠŠæ—¶é—´æ‰“å°å‡ºæ¥</p>
</li>
<li>
<p>ç»ƒä¹ 2: å†™ä¸€ä¸ªæƒé™ç®¡ç†è£…é¥°å™¨, æƒé™åˆ†ä¸º <code>admin / member / guest</code> ä¸‰çº§</p>
</li>
<li>
<p>ç»ƒä¹ 3: å†™ä¸€ä¸ª Retry è£…é¥°å™¨</p>
<pre><code>  import time

  class retry(object):
      def __init__(self, max_retries=3, wait=0, exceptions=(Exception,)):
          self.max_retries = max_retries
          self.exceptions = exceptions
          self.wait = wait

      def __call__(self, f):
          def wrapper(*args, **kwargs):
              for i in range(self.max_retries + 1):
                  try:
                      result = f(*args, **kwargs)
                  except self.exceptions:
                      time.sleep(self.wait)
                      continue
                  else:
                      return result
          return wrapper
</code></pre>
</li>
</ul>
</li>
<li>
<p>é—­åŒ…</p>
<ul>
<li>
<p>è¯´å‡ºä¸‹é¢å‡½æ•°è¿”å›å€¼</p>
<pre><code>  def foo():
      l = []
      def bar(i):
          l.append(i)
          return l
      return bar

  f1 = foo()
  f2 = foo()

  # è¯´å‡ºä¸‹åˆ—è¯­å¥æ‰§è¡Œç»“æœ
  f1(1)
  f1(2)
  f2(3)
</code></pre>
</li>
<li>
<p>ä½œç”¨åŸŸ</p>
<ul>
<li>
<p>global</p>
</li>
<li>
<p>nonlocal</p>
</li>
<li>
<p>globals()</p>
</li>
<li>
<p>locals()</p>
</li>
<li>
<p>vars()</p>
<pre><code>  local namespace
      |
      V
  global namespace
      |
      V
  builtin namespace
</code></pre>
</li>
</ul>
</li>
<li>
<p>æ›´æ·±å…¥ä¸€ç‚¹: <code>__closure__</code></p>
</li>
</ul>
</li>
<li>
<p>Garbage Collection (GC)</p>
<ul>
<li>
<p>å¼•ç”¨è®¡æ•°</p>
<ul>
<li>
<p>ä¼˜ç‚¹: ç®€å•ã€å®æ—¶æ€§é«˜</p>
</li>
<li>
<p>ç¼ºç‚¹: æ¶ˆè€—èµ„æºã€å¾ªç¯å¼•ç”¨</p>
<pre><code>  l1, l2 = [], []
  l1.append(l2)
  l2.append(l1)
</code></pre>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181011763.png" alt=""></p>
</li>
<li>
<p>æ ‡è®°-æ¸…é™¤, åˆ†ä»£æ”¶é›†</p>
</li>
</ul>
</li>
<li>
<p>ç»§æ‰¿ã€å¤šç»§æ‰¿ã€å¤šæ€ã€Mixinã€super</p>
<ul>
<li>
<p>ç»§æ‰¿</p>
</li>
<li>
<p>å¤šæ€</p>
</li>
<li>
<p>å¤šç»§æ‰¿ å’Œ Mixin</p>
</li>
<li>
<p>super</p>
<pre><code>  class A:
      def __init__(self):
          print('enter A')
          self.x = 111
          print('exit A')


  class B(A):
      def __init__(self):
          print('enter B')
          A.__init__(self)
          # super().__init__()
          print('exit B')


  class C(A):
      def __init__(self):
          print('enter C')
          A.__init__(self)
          # super().__init__()
          print('exit C')


  class D(B, C):
      def __init__(self):
          print('enter D')
          B.__init__(self)
          C.__init__(self)
          # super().__init__()
          print('exit D')

  d = D()
</code></pre>
</li>
</ul>
</li>
<li>
<p>ä¸€äº›æŠ€å·§å’Œè¯¯åŒº</p>
<ol>
<li>
<p>æ ¼å¼åŒ–æ‰“å°</p>
<ul>
<li>json.dumps(obj, indent=4)</li>
<li>json å‹ç¼©: <code>json.dumps(obj, separators=[',',':'])</code></li>
<li>pprint</li>
</ul>
</li>
<li>
<p>ç¡®ä¿èƒ½å–åˆ°æœ‰æ•ˆå€¼</p>
<ul>
<li><code>d.get(k, default)</code></li>
<li><code>d.setdefault</code></li>
<li><code>defaultdict</code></li>
<li><code>a or b</code></li>
<li><code>x = a if foo() else b</code></li>
</ul>
</li>
<li>
<p>try...except... çš„æ»¥ç”¨</p>
<ul>
<li>ä¸è¦æŠŠæ‰€æœ‰ä¸œè¥¿å…¨éƒ½åŒ…ä½, ç¨‹åºé”™è¯¯éœ€è¦æŠ¥å‡ºæ¥</li>
<li>ä½¿ç”¨ <code>try...except</code> è¦æŒ‡æ˜å…·ä½“é”™è¯¯, <code>try</code> ç»“æ„ä¸æ˜¯ç”¨æ¥éšè—é”™è¯¯çš„, è€Œæ˜¯ç”¨æ¥æœ‰æ–¹å‘çš„å¤„ç†é”™è¯¯çš„</li>
</ul>
</li>
<li>
<p>åˆ©ç”¨ dict åšæ¨¡å¼åŒ¹é…</p>
<pre><code> def do1():
     print('i am do1')

 def do2():
     print('i am do2')

 def do3():
     print('i am do3')

 def do4():
     print('i am do4')

 mapping = {1: do1, 2: do2, 3: do3, 4: do4}
 mod = random.randint(1, 10)
 func = mapping.get(mod, do4)
 func()
</code></pre>
</li>
<li>
<p><code>inf, -inf, nan</code></p>
</li>
<li>
<p>pyenv, venv, å‘½åç©ºé—´</p>
<ul>
<li><a href="https://github.com/pyenv/pyenv-installer" target="_blank" rel="noreferrer">pyenv</a>: ç®¡ç† Python ç‰ˆæœ¬</li>
<li>venv: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ, åšç¯å¢ƒéš”ç¦», venv ç›®å½•ç›´æ¥æ”¾åˆ°é¡¹ç›®çš„ç›®å½•é‡Œ</li>
</ul>
</li>
<li>
<p>property: æŠŠä¸€ä¸ªæ–¹æ³•å±æ€§åŒ–</p>
<pre><code> class C(object):
     @property
     def x(self):
         &quot;I am the 'x' property.&quot;
         return self._x
     @x.setter
     def x(self, value):
         self._x = value
     @x.deleter
     def x(self):
         del self._x
</code></pre>
</li>
<li>
<p>else å­å¥: <code>if, for, while, try</code></p>
</li>
<li>
<p>collections æ¨¡å—</p>
<ul>
<li>defaultdict</li>
<li>namedtuple</li>
<li>Counter</li>
</ul>
</li>
</ol>
</li>
</ol>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181010449.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[djangoè¿›é˜¶-webåŸºç¡€]]></title>
            <link>https://lpdswing.github.io//technology/other/djangoè¿›é˜¶-webåŸºç¡€.html</link>
            <guid>https://lpdswing.github.io//technology/other/djangoè¿›é˜¶-webåŸºç¡€.html</guid>
            <pubDate>Wed, 03 May 2017 18:16:33 GMT</pubDate>
            <description><![CDATA[
# webåŸºç¡€

##æœ€ç®€å•çš„webæ¡†æ¶:

```python
# coding: utf-8
import socket

(HOST, PORT) = '0.0.0.0', 8888

RESPONSE = b'''
HTTP/1.1 200 OK

<!DOCTYPE html>
<html>
<head>
    <title>Hello</title>
</head>
<body>
<img src="https://www.baidu.com/img/bd_logo1.png">
</body>
</html>
'''

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)   # å»ºç«‹ SOCK è¿æ¥
server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) # è®¾ç½®å‚æ•°
server_socket.bind((HOST, PORT))                                    # ç»‘å®š IP:ç«¯å£
server_socket.listen(100)                                           # å¼€å§‹ç›‘å¬

print('Serving HTTP on port %s ...' % PORT)

while True:
    client_socket, client_address = server_socket.accept()  # æ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚
    request = client_socket.recv(1024)                      # æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®, ä¸€æ¬¡æœ€å¤š 1024 å­—èŠ‚

    # WSGI

    print('Request >>>')
    print(request.decode('utf-8'))
    http_response = RESPONSE

    # WSGI

    client_socket.sendall(http_response)
    client_socket.close()

```

ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹

`client`â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”`server`

1                 syn   ->

2 <-         ack + syn   ackæ˜¯å¯¹synçš„åº”ç­”

3                    ->ack

]]></description>
            <content:encoded><![CDATA[<h1 id="webåŸºç¡€" tabindex="-1">webåŸºç¡€ <a class="header-anchor" href="#webåŸºç¡€" aria-label="Permalink to &quot;webåŸºç¡€&quot;">&ZeroWidthSpace;</a></h1>
<p>##æœ€ç®€å•çš„webæ¡†æ¶:</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># coding: utf-8</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '0.0.0.0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8888</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">RESPONSE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'''</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">HTTP/1.1 200 OK</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;!DOCTYPE html></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;html></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;head></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    &#x3C;title>Hello&#x3C;/title></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;/head></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;body></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;img src="https://www.baidu.com/img/bd_logo1.png"></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;/body></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x3C;/html></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'''</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server_socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> socket.socket(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">AF_INET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">SOCK_STREAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å»ºç«‹ SOCK è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server_socket.setsockopt(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">SOL_SOCKET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">SO_REUSEADDR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># è®¾ç½®å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server_socket.bind((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))                                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç»‘å®š IP:ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server_socket.listen(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)                                           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å¼€å§‹ç›‘å¬</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Serving HTTP on port </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ...'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> %</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    client_socket, client_address </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> server_socket.accept()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> client_socket.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®, ä¸€æ¬¡æœ€å¤š 1024 å­—èŠ‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # WSGI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Request >>>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request.decode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    http_response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RESPONSE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # WSGI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    client_socket.sendall(http_response)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    client_socket.close()</span></span></code></pre>
</div><p>ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹</p>
<p><code>client</code>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<code>server</code></p>
<p>1                 syn   -&gt;</p>
<p>2 &lt;-         ack + syn   ackæ˜¯å¯¹synçš„åº”ç­”</p>
<p>3                    -&gt;ack</p>
<hr>
<p><code>python:æ¨¡å—,åŒ…,è£…é¥°å™¨,è¿­ä»£å™¨,ç”Ÿæˆå™¨,with,__new__,__dict__,é­”æœ¯æ–¹æ³•</code></p>
<p><code>æ¡†æ¶:django,falsk,scrapy,gevent,tornado</code></p>
<p><code>Nginx,Redis,MySQL</code></p>
<hr>
<h3 id="webåŸºç¡€æ€»ç»“" tabindex="-1">webåŸºç¡€æ€»ç»“ <a class="header-anchor" href="#webåŸºç¡€æ€»ç»“" aria-label="Permalink to &quot;webåŸºç¡€æ€»ç»“&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>
<p><strong>HyperText Transfer Protocol</strong></p>
<p>i. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)</p>
<p>ii. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®</p>
<p>iii. åº”ç”¨é¢†åŸŸ</p>
<p>iv. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦)</p>
<p><a href="http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1" target="_blank" rel="noreferrer">http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1</a></p>
<p>ç»„æˆ</p>
<p>scheme: http</p>
<p>hostname: example.com</p>
<p>port: 80</p>
<p>path: /foo/bar/readme</p>
<p>query: ?x=0&amp;y=abc</p>
<p>fragment: #part1</p>
</li>
<li>
<p><strong>Python ç³»å¸¸è§ Web æ¡†æ¶</strong></p>
<p><strong>Django</strong></p>
<p>å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§</p>
<p><strong>Flask</strong></p>
<p>å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ï¥¥äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ <strong>Tornado</strong></p>
<p>å¼‚æ­¥å¤„ï§¤, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚</p>
<p><strong>web.py</strong></p>
<p>ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç </p>
<p><strong>bottle</strong></p>
<p>å•æ–‡ä»¶æ¡†æ¶</p>
<p><strong>å…¶ä»–</strong></p>
<p>Falcon web2py Quixote Sanic</p>
</li>
<li>
<p><strong>ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿï¦ºï§½ä¹ˆ</strong></p>
<p>i. <strong>DNSè§£æ</strong></p>
<p>â€‹	example.com -&gt; 93.184.216.34</p>
<p>â€‹	dig example.com</p>
<p>â€‹	nslookup example.com</p>
<p>â€‹	/etc/hosts</p>
<p>ii. <strong>å»ºç«‹TCP</strong></p>
<p>â€‹	a. SYN</p>
<p>â€‹	b. ACK + SYN</p>
<p>â€‹	c. ACK</p>
<p>iii. <strong>æµè§ˆå™¨ç”Ÿæˆ Request æŠ¥æ–‡</strong></p>
<p>iv. <strong>Client å‘é€ Request æŠ¥æ–‡</strong></p>
<p>v. <strong>Server æ¥æ”¶æŠ¥æ–‡</strong></p>
<p>vi. <strong>é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡</strong></p>
<p>vii. <strong>Django</strong>ã€<strong>Flask ç­‰åº”ç”¨ç¨‹åºè¿›ï¨ˆé€»è¾‘å¤„ï§¤</strong></p>
<p>â€‹	a. ç”Ÿæˆ Request å¯¹è±¡</p>
<p>â€‹	b. process_request (Middleware)</p>
<p>â€‹	c. URL match</p>
<p>â€‹	d. process_views (Middleware)</p>
<p>â€‹	e. Views --&gt; process_exception</p>
<p>â€‹	f. Redner Template</p>
<p>â€‹	g. Response</p>
<p>â€‹	h. process_response (Middleware)</p>
<p>**viii. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡ **</p>
<p>**ix. Server è¿”å›æŠ¥æ–‡ç»™ Client **</p>
<p>**x. å…³é—­è¿æ¥ **</p>
<p><strong>xi. è§£æã€æ¸²æŸ“ HTML é¡µé¢</strong></p>
</li>
<li>
<p>**æœ€ç®€å•çš„ Server **</p>
<p><strong>HTTP Server</strong></p>
<pre><code> åˆ›å»ºã€å…³é—­è¿æ¥

 å‘é€ã€æ¥æ”¶æ•°æ®
</code></pre>
<p><strong>WSGI:</strong></p>
<p>â€‹	æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£</p>
<p><strong>Web Application</strong></p>
<p>â€‹	ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘ è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢</p>
</li>
<li>
<p><strong>å¸¸è§ Header å­—æ®µ</strong></p>
<p>Accept text/plain</p>
<p>Accept-Charset utf-8</p>
<p>Accept-Encoding gzip (Content-Encoding)</p>
<p>Accept-Language zh-CN en-US</p>
<p>Cache-Control true,max-age</p>
<p>Connection keep-alive</p>
<p>Content-Length è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦</p>
<p>Content-Type ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html User-Agent æµè§ˆï¨¸æ ‡è¯†</p>
</li>
<li>
<p><strong>HTTP çŠ¶æ€ç </strong></p>
<p>200 <strong>OK</strong> æˆåŠŸ</p>
<p>301 <strong>Moved Permanently</strong> é‡å®šå‘ (æ°¸ä¹…è¿ç§»)</p>
<p>302 <strong>Moved Temporarily</strong> é‡å®šå‘ (ä¸´æ—¶è¿ç§»)</p>
<p>303 <strong>See Other</strong> é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘)</p>
<p>400 <strong>Bad Request</strong> å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯</p>
<p>403 <strong>Forbidden</strong> æ‹’ç»è®¿é—®</p>
<p>404 <strong>Not Found</strong> æ‰¾ï¥§åˆ°é¡µé¢</p>
<p>500 <strong>Internal Server Error</strong> æœåŠ¡ï¨¸å†…éƒ¨é”™è¯¯</p>
<p>502 <strong>Bad Gateway</strong> ç½‘å…³é”™è¯¯</p>
<p>503 <strong>Service Unavailable</strong> æœåŠ¡ï¨¸ç»´æŠ¤æˆ–è€…è¿‡è½½</p>
<p>504 <strong>Gateway Timeout</strong> è¯·æ±‚è¶…æ—¶</p>
</li>
<li>
<p><strong>GET å’Œ POST</strong></p>
<p><strong>è¡¨è±¡</strong></p>
<p>â€‹	GET åœ¨æµè§ˆï¨¸å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚</p>
<p>â€‹	GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ï¥§å¯ä»¥.</p>
<p>â€‹	GET è¯·æ±‚ä¼šè¢«æµè§ˆï¨¸ä¸»åŠ¨ç¼“å­˜, è€Œ POST ï¥§ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®.</p>
<p>â€‹	GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ï§åœ¨æµè§ˆï¨¸å†å²è®°å½•ï§©, è€Œ POST ä¸­çš„å‚æ•°ï¥§ä¼šè¢«ä¿ï§.</p>
<p>â€‹	GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›ï¨ˆ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼.</p>
<p>â€‹	GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶.</p>
<p>â€‹	GET æ¯” POST ï¤ï¥§å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥ï¨†ï¤¸åœ¨URLä¸Š, æ‰€ä»¥ï¥§èƒ½ç”¨æ¥ä¼ é€’ï©æ„Ÿä¿¡æ¯.</p>
<p>â€‹	GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­.</p>
<p><strong>æ·±å±‚</strong></p>
<p>â€‹	GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ….</p>
<p>â€‹	GET: æµè§ˆï¨¸ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡ï¨¸å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰</p>
<p>â€‹	POST: æµè§ˆï¨¸å…ˆå‘é€ header, æœåŠ¡ï¨¸å“åº” 100 continue, æµè§ˆï¨¸å†å‘é€data, æœåŠ¡ï¨¸</p>
</li>
<li>
<p><strong>cookie å’Œ session</strong></p>
<p><strong>æ— çŠ¶æ€åè®®çš„æ— ï¤Œä¹‹ä¸¾</strong></p>
<p>â€‹	é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ·</p>
<p><strong>å¼‚åŒ</strong></p>
<p>â€‹	a. session åœ¨æœåŠ¡ï¨¸ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆï¨¸ï¼‰</p>
<p>â€‹	b. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡ï¨¸çš„ä¸€ä¸ªæ–‡ä»¶ï§©ï¼ˆï¥§æ˜¯å†…å­˜ï¼‰</p>
<p>â€‹	c. session çš„è¿ï¨ˆä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰</p>
<p>â€‹	d. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥.</p>
<p>â€‹	e. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session</p>
<p><strong>äº§ç”Ÿè¿‡ç¨‹</strong></p>
<p>â€‹	a. å®¢æˆ·ç«¯è¯·æ±‚</p>
<p>â€‹	b. æœåŠ¡ï¨¸äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆï¨¸</p>
<p>â€‹	c. æµè§ˆï¨¸å°† session_id å†™å…¥ cookie</p>
<p>â€‹	d. åç»­è¯·æ±‚ä¼šå†™å…¥ Header ä½¿ç”¨</p>
</li>
<li>
<p><strong>RESTful</strong></p>
<p>ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡†</p>
<p>ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº</p>
<p>ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ</p>
<p><strong>å››ä¸ªåŠ¨è¯</strong></p>
<p>â€‹	GET: ç”¨æ¥è·å–èµ„æº</p>
<p>â€‹	POST: ç”¨æ¥æ–°å»ºèµ„æº</p>
<p>â€‹	PUT: ç”¨æ¥ï¤æ–°èµ„æº</p>
<p>â€‹	DELETE: ç”¨æ¥åˆ é™¤èµ„æº</p>
<p><strong>è¯¯åŒº</strong></p>
<p>â€‹	URL ä¸­ä½¿ç”¨åŠ¨è¯</p>
<p>â€‹	URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header</p>
</li>
<li>
<p><strong>HTTPS</strong></p>
<p><strong>ä¼˜ç‚¹</strong></p>
<p>â€‹	é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨</p>
<p>â€‹	é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹</p>
<p>â€‹	æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§</p>
<p><strong>ç¼ºç‚¹</strong></p>
<p>â€‹	åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU</p>
<p>â€‹	æ¡æ‰‹è¿‡ç¨‹ç¹ç</p>
<p><strong>SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)</strong></p>
<p><strong>åŠ å¯†ç®—æ³•</strong></p>
<p>â€‹	<strong>å¯¹ç§°åŠ å¯†: TEA, AES, 3DES</strong></p>
<p>â€‹		text: abcdefg</p>
<p>â€‹			|   ^</p>
<p>â€‹			v   |</p>
<p>â€‹		key: 1234</p>
<p>â€‹			|  ^</p>
<p>â€‹			v  |</p>
<p>â€‹		new: hasjdkfhasdf</p>
<p>â€‹	<strong>éå¯¹ç§°åŠ å¯†: RSA, ED25519</strong></p>
<p>â€‹		text: abcdefghijklmn</p>
<p>â€‹				|      ^</p>
<p>â€‹				v      |</p>
<p>â€‹		pub_key: 123 |</p>
<p>â€‹		pri_key:  | 	1234567890123456789546789</p>
<p>â€‹				|       ^</p>
<p>â€‹				v	 |</p>
<p>â€‹		new: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd</p>
<p><strong>Let's Encrypt: <a href="https://letsencrypt.org/" target="_blank" rel="noreferrer">https://letsencrypt.org/</a></strong></p>
<p><strong>ä¼ è¾“è¿‡ç¨‹</strong></p>
</li>
</ol>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pythonå­¦ä¹ ç¬”è®°]]></title>
            <link>https://lpdswing.github.io//technology/other/å­¦ä¹ ç¬”è®°.html</link>
            <guid>https://lpdswing.github.io//technology/other/å­¦ä¹ ç¬”è®°.html</guid>
            <pubDate>Mon, 24 Apr 2017 16:10:15 GMT</pubDate>
            <description><![CDATA[
å­¦ä¹ ç¬”è®°
========

å¼€å‘å·¥å…·æ ˆ
]]></description>
            <content:encoded><![CDATA[<h1 id="å­¦ä¹ ç¬”è®°" tabindex="-1">å­¦ä¹ ç¬”è®° <a class="header-anchor" href="#å­¦ä¹ ç¬”è®°" aria-label="Permalink to &quot;å­¦ä¹ ç¬”è®°&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å¼€å‘å·¥å…·æ ˆ" tabindex="-1">å¼€å‘å·¥å…·æ ˆ <a class="header-anchor" href="#å¼€å‘å·¥å…·æ ˆ" aria-label="Permalink to &quot;å¼€å‘å·¥å…·æ ˆ&quot;">&ZeroWidthSpace;</a></h2>
<pre><code>1. sublime
2. zsh + oh-my-zsh
3. tmux
4. vim
5. å¸¸ç”¨é…ç½®: &lt;https://github.com/seamile/Weeds/tree/master/rc.d&gt;
</code></pre>
<h2 id="é™åˆ¶è®¿é—®é¢‘ç‡" tabindex="-1">é™åˆ¶è®¿é—®é¢‘ç‡ <a class="header-anchor" href="#é™åˆ¶è®¿é—®é¢‘ç‡" aria-label="Permalink to &quot;é™åˆ¶è®¿é—®é¢‘ç‡&quot;">&ZeroWidthSpace;</a></h2>
<p>é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡</p>
<pre><code>    requests     time.time()
    --------     -----------
    request 1 -&gt; 1000.000
    request 2 -&gt; 1000.230
    request 3 -&gt; 1001.930
    request 4 -&gt; 1002.900
    request 5 -&gt; (1003.130 - 1001.930) &lt; 1
    request 6 -&gt; 1003.140
    request 7 -&gt; 1003.140
    request 8 -&gt; 1003.140
    request 9 -&gt; 1003.140
    request 10 -&gt; 1003.140
    request 11 -&gt; 1003.140
</code></pre>
<h2 id="tags" tabindex="-1">Tags <a class="header-anchor" href="#tags" aria-label="Permalink to &quot;Tags&quot;">&ZeroWidthSpace;</a></h2>
<ol>
<li>å¤šå¯¹å¤šå…³ç³»ï¼Œä¸€èˆ¬å»ºç«‹ä¸€ä¸ªå…³ç³»è¡¨</li>
</ol>
<p>Article è¡¨
id</p>
<p>Tag è¡¨
id
name</p>
<p>å…³ç³»è¡¨
article_id
tag_id</p>
<h2 id="åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹" tabindex="-1">åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹ <a class="header-anchor" href="#åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹" aria-label="Permalink to &quot;åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹&quot;">&ZeroWidthSpace;</a></h2>
<p>æ–‡ç«  Article(33)</p>
<pre><code>   1        2         3
</code></pre>
<p>åŸæ¥çš„ 'python', 'django', 'linux'
ä¼ å…¥   'python', 'django',          'mongodb'
4</p>
<p>ArticleTags</p>
<p>33 1
33 2</p>
<p>33 4</p>
<h2 id="æƒé™ç®¡ç†åŠŸèƒ½" tabindex="-1">æƒé™ç®¡ç†åŠŸèƒ½ <a class="header-anchor" href="#æƒé™ç®¡ç†åŠŸèƒ½" aria-label="Permalink to &quot;æƒé™ç®¡ç†åŠŸèƒ½&quot;">&ZeroWidthSpace;</a></h2>
<p>åšè®¾è®¡æ—¶è¦æœ‰ â€œå‰ç»æ€§â€</p>
<p>ç»™ç”¨æˆ·æ·»åŠ æƒé™</p>
<p>user
id</p>
<p>permission
id</p>
<p>group
id
pid</p>
<p>å‚è€ƒé“¾æ¥
<a href="https://www.zhihu.com/question/20313385" target="_blank" rel="noreferrer">https://www.zhihu.com/question/20313385</a>
<a href="http://blog.csdn.net/painsonline/article/details/7183613/" target="_blank" rel="noreferrer">http://blog.csdn.net/painsonline/article/details/7183613/</a></p>
<h2 id="gunicorn" tabindex="-1">Gunicorn <a class="header-anchor" href="#gunicorn" aria-label="Permalink to &quot;Gunicorn&quot;">&ZeroWidthSpace;</a></h2>
<p>å¤šè¿›ç¨‹ + åç¨‹ (greenlet)</p>
<p>Gunicorn
uWSGI</p>
<p>å‹åŠ›æµ‹è¯•
ab (Apache Bench)
webbench
autobench</p>
<p>RPS æ¯ç§’è¯·æ±‚é‡
QPS æ¯ç§’æŸ¥è¯¢é‡</p>
<p>10 Concurrency  1000 Request
gunicorn 614 r/s
django   510 r/s</p>
<p>Unix ä¸€åˆ‡çš†æ–‡ä»¶</p>
<p>æ–‡ä»¶æè¿°ç¬¦</p>
<h2 id="nginx" tabindex="-1">Nginx <a class="header-anchor" href="#nginx" aria-label="Permalink to &quot;Nginx&quot;">&ZeroWidthSpace;</a></h2>
<p>æ­£å‘ä»£ç†</p>
<p>å†…ç½‘ç¯å¢ƒ -&gt; ä»£ç† -&gt; å…¬ç½‘æœºå™¨</p>
<p>åå‘ä»£ç†</p>
<p>ç”¨æˆ· -&gt; Nginx -&gt; æœåŠ¡å™¨å†…ç½‘ç¯å¢ƒ</p>
<h2 id="db-é›†ç¾¤" tabindex="-1">DB é›†ç¾¤ <a class="header-anchor" href="#db-é›†ç¾¤" aria-label="Permalink to &quot;DB é›†ç¾¤&quot;">&ZeroWidthSpace;</a></h2>
<p>è¯»å†™åˆ†ç¦»</p>
<h2 id="ä¸»ä»ç»“æ„" tabindex="-1">ä¸»ä»ç»“æ„ <a class="header-anchor" href="#ä¸»ä»ç»“æ„" aria-label="Permalink to &quot;ä¸»ä»ç»“æ„&quot;">&ZeroWidthSpace;</a></h2>
<pre><code> å†™     è¯»
 |      ^
 V      |
ä¸»æœº -&gt; ä»æœº
</code></pre>
<p>ä¸€ä¸»ä¸¤ä»ç”šè‡³ä¸€ä¸»å¤šä»</p>
<h2 id="åŒä¸»äº’å¤‡" tabindex="-1">åŒä¸»äº’å¤‡ <a class="header-anchor" href="#åŒä¸»äº’å¤‡" aria-label="Permalink to &quot;åŒä¸»äº’å¤‡&quot;">&ZeroWidthSpace;</a></h2>
<pre><code>ä¸»æœº &lt;-&gt; ä¸»æœº

     ä»
</code></pre>
<h2 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-label="Permalink to &quot;CDN&quot;">&ZeroWidthSpace;</a></h2>
<p>åŒ—äº¬    æºç«™
ä¸Šæµ·    é•œåƒç«™
æ·±åœ³    é•œåƒç«™
ä¹Œé²æœ¨é½ é•œåƒç«™
.
.
.
ç¾å›½    é•œåƒç«™</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pythonå¸¸ç”¨é¢è¯•]]></title>
            <link>https://lpdswing.github.io//technology/other/é¢è¯•æ€»ç»“.html</link>
            <guid>https://lpdswing.github.io//technology/other/é¢è¯•æ€»ç»“.html</guid>
            <pubDate>Mon, 24 Apr 2017 16:10:15 GMT</pubDate>
            <description><![CDATA[
## æŠ€æœ¯é¢è¯•å‡†å¤‡

https://github.com/taizilongxu/interview_python

### pythonåŸºç¡€

* é¢å‘å¯¹è±¡

  ä¸‰å¤§ç‰¹æ€§:ç»§æ‰¿,å¤šæ€,å°è£…

  é¢å‘è¿‡ç¨‹vsé¢å‘å¯¹è±¡: é¢å‘è¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ç¨‹åºå¤æ‚åº¦ä½,åªè¦é¡ºç€æ‰§è¡Œæ­¥éª¤å †å ä»£ç å³å¯,ç¼ºç‚¹æ˜¯ä¸€å¥—æµç¨‹è§£å†³ä¸€ä¸ªé—®é¢˜,ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«.

  è‘—åçš„åº”ç”¨:Linuxå†…æ ¸,git,Apache serverç­‰

  é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³ä¸‡ç‰©çš†å¯¹è±¡,è§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§,å¯¹æŸä¸ªå¯¹è±¡ä¿®æ”¹ä¼šç«‹åˆ»ååº”åˆ°ä½“ç³»ä¸­.ç¼ºç‚¹æ˜¯å¯æ§æ€§å·®,è§£å†³é—®é¢˜ä¸€å¼€å§‹å°±æ˜¯ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ¥è§£å†³.

  - ç±»,å¯¹è±¡,å®ä¾‹,å®ä¾‹åŒ–

    ç±»:å…·æœ‰ç›¸åŒç‰¹å¾çš„ä¸€ç±»äº‹ç‰©     å¯¹è±¡/å®ä¾‹:å…·ä½“çš„æŸä¸ªäº‹ç‰©

    å®ä¾‹åŒ–,ç±»â€”>å¯¹è±¡çš„è¿‡ç¨‹

    ```
    >>> dict #ç±»å‹dictå°±æ˜¯ç±»dict
    <class 'dict'>
    >>> d=dict(name='eva') #å®ä¾‹åŒ–
    >>> d.pop('name') #å‘då‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰§è¡Œdçš„æ–¹æ³•pop
    'eva'
    ]]></description>
            <content:encoded><![CDATA[<h2 id="æŠ€æœ¯é¢è¯•å‡†å¤‡" tabindex="-1">æŠ€æœ¯é¢è¯•å‡†å¤‡ <a class="header-anchor" href="#æŠ€æœ¯é¢è¯•å‡†å¤‡" aria-label="Permalink to &quot;æŠ€æœ¯é¢è¯•å‡†å¤‡&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="https://github.com/taizilongxu/interview_python" target="_blank" rel="noreferrer">https://github.com/taizilongxu/interview_python</a></p>
<h3 id="pythonåŸºç¡€" tabindex="-1">pythonåŸºç¡€ <a class="header-anchor" href="#pythonåŸºç¡€" aria-label="Permalink to &quot;pythonåŸºç¡€&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>
<p>é¢å‘å¯¹è±¡</p>
<p>ä¸‰å¤§ç‰¹æ€§:ç»§æ‰¿,å¤šæ€,å°è£…</p>
<p>é¢å‘è¿‡ç¨‹vsé¢å‘å¯¹è±¡: é¢å‘è¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ç¨‹åºå¤æ‚åº¦ä½,åªè¦é¡ºç€æ‰§è¡Œæ­¥éª¤å †å ä»£ç å³å¯,ç¼ºç‚¹æ˜¯ä¸€å¥—æµç¨‹è§£å†³ä¸€ä¸ªé—®é¢˜,ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«.</p>
<p>è‘—åçš„åº”ç”¨:Linuxå†…æ ¸,git,Apache serverç­‰</p>
<p>é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³ä¸‡ç‰©çš†å¯¹è±¡,è§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§,å¯¹æŸä¸ªå¯¹è±¡ä¿®æ”¹ä¼šç«‹åˆ»ååº”åˆ°ä½“ç³»ä¸­.ç¼ºç‚¹æ˜¯å¯æ§æ€§å·®,è§£å†³é—®é¢˜ä¸€å¼€å§‹å°±æ˜¯ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ¥è§£å†³.</p>
<ul>
<li>
<p>ç±»,å¯¹è±¡,å®ä¾‹,å®ä¾‹åŒ–</p>
<p>ç±»:å…·æœ‰ç›¸åŒç‰¹å¾çš„ä¸€ç±»äº‹ç‰©     å¯¹è±¡/å®ä¾‹:å…·ä½“çš„æŸä¸ªäº‹ç‰©</p>
<p>å®ä¾‹åŒ–,ç±»â€”&gt;å¯¹è±¡çš„è¿‡ç¨‹</p>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>>>> dict #ç±»å‹dictå°±æ˜¯ç±»dict</span></span>
<span class="line"><span>&#x3C;class 'dict'></span></span>
<span class="line"><span>>>> d=dict(name='eva') #å®ä¾‹åŒ–</span></span>
<span class="line"><span>>>> d.pop('name') #å‘då‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰§è¡Œdçš„æ–¹æ³•pop</span></span>
<span class="line"><span>'eva'</span></span>
<span class="line"><span>--------------------------</span></span>
<span class="line"><span>egg = Person('egon')  #ç±»å()å°±ç­‰äºåœ¨æ‰§è¡ŒPerson.__init__()</span></span>
<span class="line"><span>#æ‰§è¡Œå®Œ__init__()å°±ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ç±»ä¼¼ä¸€ä¸ªå­—å…¸ï¼Œå­˜ç€å±äºè¿™ä¸ªäººæœ¬èº«çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚</span></span>
<span class="line"><span>#ä½ å¯ä»¥å·å·çš„ç†è§£ï¼šegg = {'name':'egon','walk':walk}</span></span></code></pre>
</div></li>
</ul>
</li>
<li>
<p>è®¾è®¡æ¨¡å¼ - å•ä¾‹ - è£…é¥°å™¨ - MVC</p>
<ul>
<li>
<p>å•ä¾‹æ¨¡å¼ - å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹ç±»çš„ç‰¹æ®Šç±»,é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ä¸”è¯¥å®ä¾‹æ˜“äºå¤–æ¥è®¿é—®,ä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹çš„ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æº.å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ª,å•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ._<em>new</em>_()åœ¨_<em>init</em>_()ä¹‹å‰è¢«è°ƒç”¨,ç”¨äºç”Ÿäº§å®ä¾‹å¯¹è±¡,åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å’Œç±»å±æ€§å¯ä»¥å®ç°å•ä¾‹.</p>
<p>ä½¿ç”¨_<em>new</em>_()</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __new__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cls,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kw):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'_instance'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Func,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">__new__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kw) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._instance</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Myclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span></code></pre>
</div><p>import æ–¹æ³•</p>
<p>è£…é¥°å™¨æ–¹æ³•</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cls,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kw):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    instances </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> get_instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cls</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> instances:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            instances[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kw)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> instances[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> get_instance</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">@func</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    ...</span></span></code></pre>
</div></li>
</ul>
</li>
<li>
<p>ç½‘ç»œç¼–ç¨‹-HTTP,TCP,UDP,ajax</p>
<ul>
<li>
<p>AJAX,Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰, æ˜¯ä¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯</p>
</li>
<li>
<p>http:æ˜¯ç”¨äºwwwæµè§ˆçš„ä¸€ä¸ªåè®®ã€‚ä½†æ˜¯åŸºäºtcpçš„
tcpï¼šæ˜¯æœºå™¨ä¹‹é—´å»ºç«‹è¿æ¥ç”¨çš„åˆ°çš„ä¸€ä¸ªåè®®ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ˜¯å¦è¿æ¥</td>
<td>é¢å‘è¿æ¥</td>
<td>é¢å‘éè¿æ¥</td>
</tr>
<tr>
<td>ä¼ è¾“å¯é æ€§</td>
<td>å¯é </td>
<td>ä¸å¯é </td>
</tr>
<tr>
<td>åº”ç”¨åœºåˆ</td>
<td>ä¼ è¾“å¤§é‡çš„æ•°æ®ï¼Œå¯¹å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆ</td>
<td>ä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯</td>
</tr>
<tr>
<td>é€Ÿåº¦</td>
<td>æ…¢</td>
<td>å¿«</td>
</tr>
</tbody>
</table>
<p>1 ä¸‰æ¬¡æ¡æ‰‹
å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•° Aã€‚
æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACK çš„ç¡®è®¤ç åº”ä¸º A+1ï¼ŒSYN/ACK åŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºåºå· Bã€‚
æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚å½“æœåŠ¡ç«¯å—åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰è·¯æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚æ­¤æ—¶åŒ…åºå·è¢«è®¾å®šä¸ºæ”¶åˆ°çš„ç¡®è®¤å· A+1ï¼Œè€Œå“åº”åˆ™ä¸º B+1ã€‚
2 å››æ¬¡æŒ¥æ‰‹
æ³¨æ„: ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯. ä¸‹é¢ä»…ä»¥å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¸¾ä¾‹, åä¹‹äº¦ç„¶.</p>
<p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†æ®µ, å…¶ä¸­çš„ FIN æ ‡è®°è®¾ç½®ä¸º1. å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT çŠ¶æ€. è¯¥çŠ¶æ€ä¸‹å®¢æˆ·ç«¯åªæ¥æ”¶æ•°æ®, ä¸å†å‘é€æ•°æ®.
æœåŠ¡å™¨æ¥æ”¶åˆ°å¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å‘é€å¸¦æœ‰ ACK = 1 çš„å‰©ä½™æ•°æ®åˆ†æ®µ, ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ FIN ä¿¡æ¯.
æœåŠ¡å™¨ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¼ è¾“ç»“æŸ, å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å¹¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€, ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥å¸¦æœ‰ ACK = 1 çš„ç¡®è®¤æŠ¥æ–‡.
å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥å¸¦æœ‰ FIN = 1 çš„æŠ¥æ–‡, è¿”å› ACK = 1 çš„æŠ¥æ–‡ç¡®è®¤, ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç«¯æœªæ”¶åˆ°éœ€è¦é‡å‘, è¿›å…¥ TIME-WAIT çŠ¶æ€. æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡åå…³é—­è¿æ¥. å®¢æˆ·ç«¯ç­‰å¾… 2MSL åæœªæ”¶åˆ°å›å¤, åˆ™è®¤ä¸ºæœåŠ¡å™¨æˆåŠŸå…³é—­, å®¢æˆ·ç«¯å…³é—­è¿æ¥.</p>
</li>
</ul>
</li>
<li>
<p>å¤šçº¿ç¨‹,å¤šè¿›ç¨‹,åç¨‹</p>
<ul>
<li>
<p>è®¡ç®—æœºç¡¬ä»¶è§’åº¦:</p>
<p>è®¡ç®—æœºæ ¸å¿ƒæ˜¯cpu,æ‰¿æ‹…äº†æ‰€æœ‰çš„è®¡ç®—ä»»åŠ¡,ä¸€ä¸ªcpu,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œåªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº.</p>
</li>
<li>
<p>ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦:</p>
<p>è¿›ç¨‹å’Œçº¿ç¨‹,éƒ½æ˜¯ä¸€ç§cpuçš„æ‰§è¡Œå•å…ƒ,è¿›ç¨‹:è¡¨ç¤ºä¸€ä¸ªç¨‹åºçš„ä¸Šä¸‹æ–‡æ‰§è¡Œæ´»åŠ¨(æ‰“å¼€,æ‰§è¡Œ,ä¿å­˜)</p>
<p>çº¿ç¨‹:è¿›ç¨‹æ‰§è¡Œç¨‹åºæ—¶çš„æœ€å°è°ƒåº¦å•ä½,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹.</p>
</li>
<li>
<p>å¹¶è¡Œ:</p>
<p>å¤šä¸ªcpuæ ¸å¿ƒ,ä¸åŒçš„ç¨‹åºåˆ†ç»™ä¸åŒçš„cpuè¿è¡Œ,å¯ä»¥è®©å¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œ.</p>
</li>
<li>
<p>å¹¶å‘:å•ä¸ªcpuæ ¸å¿ƒ,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº,å¦‚æœéœ€è¦è¿è¡Œå¤šä¸ªç¨‹åº,åˆ™ä¸²è¡Œæ‰§è¡Œ.</p>
</li>
<li>
<p>å¤šè¿›ç¨‹  - å¤šçº¿ç¨‹</p>
<p>åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡</p>
<p>è¿›ç¨‹:æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´,ä¸åŒè¿›ç¨‹ä¹‹é—´çš„å†…å­˜ç©ºé—´ä¸å…±äº«,è¿›åŸä¹‹é—´çš„é€šä¿¡ç”±æ“ä½œç³»ç»Ÿå¿è¿˜åœ°,å¯¼è‡´é€šè®¯æ•ˆç‡ä½,åˆ‡æ¢å¼€é”€å¤§.</p>
<p>çº¿ç¨‹:ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œé€šè®¯æ•ˆç‡é«˜ï¼Œåˆ‡æ¢å¼€é”€å°ã€‚å…±äº«æ„å‘³ç€ç«äº‰ï¼Œå¯¼è‡´æ•°æ®ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿æŠ¤å†…å­˜ç©ºé—´çš„æ•°æ®å®‰å…¨ï¼Œå¼•å…¥&quot;äº’æ–¥é”&quot;ã€‚</p>
<p>ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å†…å­˜ç©ºé—´æ—¶å…¶ä»–çº¿ç¨‹ä¸å…è®¸è®¿é—®,å¿…é¡»ç­‰å¾…ä¹‹å‰çš„çº¿ç¨‹è®¿é—®ç»“æŸ,æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå†…å­˜ç©ºé—´.</p>
<hr>
<p>Pythonçš„å¤šçº¿ç¨‹ï¼š</p>
<p>GIL å…¨å±€è§£é‡Šå™¨é”ï¼šçº¿ç¨‹çš„æ‰§è¡Œæƒé™ï¼Œåœ¨Pythonçš„è¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªGILã€‚</p>
<p>ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è·å–GILã€‚</p>
<p>å¥½å¤„ï¼šç›´æ¥æœç»äº†å¤šä¸ªçº¿ç¨‹è®¿é—®å†…å­˜ç©ºé—´çš„å®‰å…¨é—®é¢˜ã€‚
åå¤„ï¼šPythonçš„å¤šçº¿ç¨‹ä¸æ˜¯çœŸæ­£å¤šçº¿ç¨‹ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„èµ„æºã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨I/Oé˜»å¡çš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šé‡Šæ”¾GILã€‚</p>
<p>å¤šè¿›ç¨‹ï¼šå¯†é›†CPUä»»åŠ¡ï¼Œéœ€è¦å……åˆ†ä½¿ç”¨å¤šæ ¸CPUèµ„æºï¼ˆæœåŠ¡å™¨ï¼Œå¤§é‡çš„å¹¶è¡Œè®¡ç®—ï¼‰çš„æ—¶å€™ï¼Œç”¨å¤šè¿›ç¨‹ã€‚ multiprocessing
ç¼ºé™·ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´é€šä¿¡æˆæœ¬é«˜ï¼Œåˆ‡æ¢å¼€é”€å¤§ã€‚</p>
<p>å¤šçº¿ç¨‹ï¼šå¯†é›†I/Oä»»åŠ¡ï¼ˆç½‘ç»œI/Oï¼Œç£ç›˜I/Oï¼Œæ•°æ®åº“I/Oï¼‰ä½¿ç”¨å¤šçº¿ç¨‹åˆé€‚ã€‚
threading.Threadã€multiprocessing.dummy
ç¼ºé™·ï¼šåŒä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½åšåˆ°é«˜å¹¶è¡Œï¼Œä½†æ˜¯å¯ä»¥åšåˆ°é«˜å¹¶å‘ã€‚</p>
<p>åç¨‹ï¼šåˆç§°å¾®çº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹ä¸Šæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œç”¨å‡½æ•°åˆ‡æ¢ï¼Œå¼€é”€æå°ã€‚ä¸é€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œæ²¡æœ‰è¿›ç¨‹ã€çº¿ç¨‹çš„åˆ‡æ¢å¼€é”€ã€‚genventï¼Œmonkey.patchall</p>
<p>å¤šçº¿ç¨‹è¯·æ±‚è¿”å›æ˜¯æ— åºçš„ï¼Œé‚£ä¸ªçº¿ç¨‹æœ‰æ•°æ®è¿”å›å°±å¤„ç†é‚£ä¸ªçº¿ç¨‹ï¼Œè€Œåç¨‹è¿”å›çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚</p>
<p>ç¼ºé™·ï¼šå•çº¿ç¨‹æ‰§è¡Œï¼Œå¤„ç†å¯†é›†CPUå’Œæœ¬åœ°ç£ç›˜IOçš„æ—¶å€™ï¼Œæ€§èƒ½è¾ƒä½ã€‚å¤„ç†ç½‘ç»œI/Oæ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒé«˜.</p>
<hr>
<p>å¤šè¿›ç¨‹multiprocessingæ¨¡å—</p>
<p>å¤šçº¿ç¨‹threading</p>
<p>åç¨‹ from gevent import monkey</p>
<hr>
<p>å¤„ç†é«˜å¹¶å‘:</p>
<p>twistedâ€”&gt;tornad0â€”&gt;gevent</p>
</li>
</ul>
</li>
<li>
<p>æ•°æ®åº“</p>
<ul>
<li>
<p>äº‹åŠ¡</p>
<p>åŸå­æ€§,ä¸€è‡´æ€§,éš”ç¦»æ€§,æŒä¹…æ€§</p>
</li>
<li>
<p>æ•°æ®åº“ç´¢å¼•</p>
<p>å»ºç«‹ç´¢å¼•çš„åŸåˆ™:</p>
<p>1,æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™,MySQLä¼šä¸€ç›´å‘å³åŒ¹é…åˆ°èŒƒå›´æŸ¥è¯¢å°±åœæ­¢åŒ¹é….</p>
<p>æ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚</p>
<p>2,=å’Œinå¯ä»¥ä¹±åºæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼</p>
<p>3,å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•</p>
<p>4,ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è¿ç®—</p>
<p>5,å°½é‡çš„æ‰©å±•ç´¢å¼•,ä¸è¦æ–°å»ºç´¢å¼•</p>
<hr>
<p><a href="https://tech.meituan.com/mysql-index.html" target="_blank" rel="noreferrer">https://tech.meituan.com/mysql-index.html</a></p>
<p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noreferrer">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>
</li>
<li>
<p>redis</p>
<p>k-væ•°æ®åº“,ä¸°å¯Œçš„æ•°æ®ç»“æ„string,map,list,sets,sorted sets</p>
<blockquote>
<p>â€‹	é€šå¸¸å±€é™ç‚¹æ¥è¯´ï¼ŒRedisä¹Ÿä»¥æ¶ˆæ¯é˜Ÿåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œä½œä¸ºå†…åµŒçš„Listå­˜åœ¨ï¼Œæ»¡è¶³å®æ—¶çš„é«˜å¹¶å‘éœ€æ±‚ã€‚åœ¨ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œredisæ¯”memcachedå…·æœ‰æ›´å¤šçš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”æ”¯æŒæ›´å¤šçš„æ•°æ®ç±»å‹ï¼ŒæŠŠrediså½“ä½œä¸€ä¸ªä¸­é—´å­˜å‚¨ç³»ç»Ÿï¼Œç”¨æ¥å¤„ç†é«˜å¹¶å‘çš„æ•°æ®åº“æ“ä½œ</p>
</blockquote>
<ul>
<li>é€Ÿåº¦å¿«ï¼šä½¿ç”¨æ ‡å‡†Cå†™ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œè¯»å†™é€Ÿåº¦åˆ†åˆ«è¾¾åˆ°10ä¸‡/20ä¸‡</li>
<li>æŒä¹…åŒ–ï¼šå¯¹æ•°æ®çš„æ›´æ–°é‡‡ç”¨Copy-on-writeæŠ€æœ¯ï¼Œå¯ä»¥å¼‚æ­¥åœ°ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥ï¼Œä¸€æ˜¯æ ¹æ®æ—¶é—´ï¼Œæ›´æ–°æ¬¡æ•°çš„å¿«ç…§ï¼ˆsave 300 10 ï¼‰äºŒæ˜¯åŸºäºè¯­å¥è¿½åŠ æ–¹å¼(Append-only fileï¼Œaof)</li>
<li>è‡ªåŠ¨æ“ä½œï¼šå¯¹ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œéƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå¾ˆå®‰å…¨</li>
<li>å¿«é€Ÿçš„ä¸»--ä»å¤åˆ¶ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ•°æ®ï¼ŒSlaveåœ¨21ç§’å³å®Œæˆäº†å¯¹Amazonç½‘ç«™10G key setçš„å¤åˆ¶ã€‚</li>
<li>ShardingæŠ€æœ¯ï¼š å¾ˆå®¹æ˜“å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªRediså®ä¾‹ä¸­ï¼Œæ•°æ®åº“çš„æ‰©å±•æ˜¯ä¸ªæ°¸æ’çš„è¯é¢˜ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œä¸»è¦æ˜¯ä»¥æ·»åŠ ç¡¬ä»¶ã€ä»¥åˆ†åŒºä¸ºä¸»è¦æŠ€æœ¯å½¢å¼çš„çºµå‘æ‰©å±•è§£å†³äº†å¾ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä½†éšç€web2.0ã€ç§»åŠ¨äº’è”ç½‘ã€äº‘è®¡ç®—ç­‰åº”ç”¨çš„å…´èµ·ï¼Œè¿™ç§æ‰©å±•æ¨¡å¼å·²ç»ä¸å¤ªé€‚åˆäº†ï¼Œæ‰€ä»¥è¿‘å¹´æ¥ï¼Œåƒé‡‡ç”¨ä¸»ä»é…ç½®ã€æ•°æ®åº“å¤åˆ¶å½¢å¼çš„ï¼ŒShardingè¿™ç§æŠ€æœ¯æŠŠè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªç‰¹ç†èŠ‚ç‚¹ä¸Šå»çš„æ¨ªå‘æ‰©å±•æ–¹å¼ç”¨å¤„è¶Šæ¥è¶Šå¤šã€‚</li>
</ul>
</li>
<li>
<p>redisçš„ç¼ºç‚¹</p>
<ul>
<li>æ˜¯æ•°æ®åº“å®¹é‡å—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶,ä¸èƒ½ç”¨ä½œæµ·é‡æ•°æ®çš„é«˜æ€§èƒ½è¯»å†™,å› æ­¤Redisé€‚åˆçš„åœºæ™¯ä¸»è¦å±€é™åœ¨è¾ƒå°æ•°æ®é‡çš„é«˜æ€§èƒ½æ“ä½œå’Œè¿ç®—ä¸Šã€‚</li>
<li>Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ä¸ºé¿å…è¿™ä¸€é—®é¢˜ï¼Œè¿ç»´äººå‘˜åœ¨ç³»ç»Ÿä¸Šçº¿æ—¶å¿…é¡»ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¿™å¯¹èµ„æºé€ æˆäº†å¾ˆå¤§çš„æµªè´¹ã€‚</li>
</ul>
</li>
<li>
<p>ä¹è§‚é”å’Œæ‚²è§‚é”</p>
<p>æ‚²è§‚é”ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œ</p>
<p>ä¹è§‚é”ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚</p>
</li>
<li>
<p>6 MyISAMå’ŒInnoDB
MyISAM é€‚åˆäºä¸€äº›éœ€è¦å¤§é‡æŸ¥è¯¢çš„åº”ç”¨ï¼Œä½†å…¶å¯¹äºæœ‰å¤§é‡å†™æ“ä½œå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ç”šè‡³ä½ åªæ˜¯éœ€è¦updateä¸€ä¸ªå­—æ®µï¼Œæ•´ä¸ªè¡¨éƒ½ä¼šè¢«é”èµ·æ¥ï¼Œè€Œåˆ«çš„è¿›ç¨‹ï¼Œå°±ç®—æ˜¯è¯»è¿›ç¨‹éƒ½æ— æ³•æ“ä½œç›´åˆ°è¯»æ“ä½œå®Œæˆã€‚å¦å¤–ï¼ŒMyISAM å¯¹äº SELECT COUNT(*) è¿™ç±»çš„è®¡ç®—æ˜¯è¶…å¿«æ— æ¯”çš„ã€‚</p>
<p>InnoDB çš„è¶‹åŠ¿ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å­˜å‚¨å¼•æ“ï¼Œå¯¹äºä¸€äº›å°çš„åº”ç”¨ï¼Œå®ƒä¼šæ¯” MyISAM è¿˜æ…¢ã€‚ä»–æ˜¯å®ƒæ”¯æŒâ€œè¡Œé”â€ ï¼Œäºæ˜¯åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šæ›´ä¼˜ç§€ã€‚å¹¶ä¸”ï¼Œä»–è¿˜æ”¯æŒæ›´å¤šçš„é«˜çº§åº”ç”¨ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡ã€‚</p>
<p>mysql æ•°æ®åº“å¼•æ“: <a href="http://www.cnblogs.com/0201zcr/p/5296843.html" target="_blank" rel="noreferrer">http://www.cnblogs.com/0201zcr/p/5296843.html</a> MySQLå­˜å‚¨å¼•æ“ï¼ï¼MyISAMä¸InnoDBåŒºåˆ«: <a href="https://segmentfault.com/a/1190000008227211" target="_blank" rel="noreferrer">https://segmentfault.com/a/1190000008227211</a></p>
<p>â€‹</p>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[gitè§£å†³pushæŠ¥é”™]]></title>
            <link>https://lpdswing.github.io//technology/other/git-è§£å†³pushæŠ¥é”™.html</link>
            <guid>https://lpdswing.github.io//technology/other/git-è§£å†³pushæŠ¥é”™.html</guid>
            <pubDate>Sat, 22 Apr 2017 18:04:30 GMT</pubDate>
            <description><![CDATA[
# git -è§£å†³pushæŠ¥é”™é—®é¢˜

### é—®é¢˜å‡ºç°åœºæ™¯

githubæ–°å»ºä»“åº“,æƒ³æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°github

]]></description>
            <content:encoded><![CDATA[<h1 id="git-è§£å†³pushæŠ¥é”™é—®é¢˜" tabindex="-1">git -è§£å†³pushæŠ¥é”™é—®é¢˜ <a class="header-anchor" href="#git-è§£å†³pushæŠ¥é”™é—®é¢˜" aria-label="Permalink to &quot;git -è§£å†³pushæŠ¥é”™é—®é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h3 id="é—®é¢˜å‡ºç°åœºæ™¯" tabindex="-1">é—®é¢˜å‡ºç°åœºæ™¯ <a class="header-anchor" href="#é—®é¢˜å‡ºç°åœºæ™¯" aria-label="Permalink to &quot;é—®é¢˜å‡ºç°åœºæ™¯&quot;">&ZeroWidthSpace;</a></h3>
<p>githubæ–°å»ºä»“åº“,æƒ³æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°github</p>
<hr>
<p>æ“ä½œæ­¥éª¤</p>
<ol>
<li>
<p>è¿›å…¥æœ¬åœ°ä»“åº“,å‡è®¾é¡¹ç›®ä¸ºtest</p>
<p><code>cd test</code></p>
<p><code>git init</code></p>
</li>
<li>
<p>æŸ¥çœ‹çŠ¶æ€</p>
<p><code>git status</code></p>
</li>
<li>
<p>æŠŠæ›´æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æœ¬åœ°gitä»“åº“</p>
<p><code>git add .</code></p>
</li>
<li>
<p>è®¾ç½®ç”¨æˆ·åé‚®ç®±</p>
<p><code>git config --global user.name 'jimi'</code></p>
<p><code>git config --global user.email 'jimi@163.com</code></p>
</li>
<li>
<p>æäº¤</p>
<p><code>git commit -m &quot;first commit&quot;</code></p>
</li>
<li>
<p>æŠŠæœ¬åœ°testé¡¹ç›®å’Œgithhubçš„testé¡¹ç›®è¿›è¡Œå…³è”</p>
<p><code>git remote add origin xxxxx@xxxx</code></p>
</li>
<li>
<p>å‘è¿œç¨‹ä»“åº“æäº¤ä»£ç (é…ç½®å¥½sshæˆ–è€…å¯†ç )</p>
<p><code>git push origin master</code></p>
<p>å¯èƒ½ä¼šå‡ºç°é—®é¢˜:</p>
<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> master</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">To</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> github.com:JasonLi-cn/test.git</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [rejected]        </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">master</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> master</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (fetch </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> some</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> refs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'git@github.com:JasonLi-cn/test.git'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hint:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> Updates</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> were</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> rejected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> because</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> contains</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> work</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> that</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hint:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> have</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> locally.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> This</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> usually</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> caused</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> another</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> repository</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pushing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hint:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> same</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ref.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> You</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> may</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> want</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> first</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> integrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> changes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hint:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (e.g., </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'git pull ...'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) before pushing again.  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hint:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> See</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Note about fast-forwards'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'git push --help'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> details.</span></span></code></pre>
</div><p>è¯´æ˜è¿œç¨‹ä»“åº“æœ‰æœ¬åœ°ä»“åº“æ²¡æœ‰çš„æ–‡ä»¶,éœ€è¦å…ˆpull</p>
<p><code>git pull origin master</code></p>
<p>è¿™æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜:</p>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>$ git pull origin master  </span></span>
<span class="line"><span>From github.com:JasonLi-cn/test  </span></span>
<span class="line"><span> * branch            master     -> FETCH_HEAD  </span></span>
<span class="line"><span>fatal: refusing to merge unrelated histories</span></span></code></pre>
</div><p>è§£å†³åŠæ³•:</p>
<p><code>git pull origin master --allow-unrelated-histories</code></p>
<p>è¿™æ—¶å°±å¯ä»¥pushäº†.</p>
<p>å¦‚æœè¿œç¨‹ä»“åº“æœ‰å’Œæœ¬åœ°ä»“åº“ä¸€æ ·çš„æ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥push,git statuså‘ç°:</p>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span>On branch master</span></span>
<span class="line"><span>You have unmerged paths.</span></span>
<span class="line"><span>  (fix conflicts and run "git commit")</span></span>
<span class="line"><span>  (use "git merge --abort" to abort the merge)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Unmerged paths:</span></span>
<span class="line"><span>  (use "git add &#x3C;file>..." to mark resolution)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	both added:      LICENSE</span></span></code></pre>
</div><p>åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹æ“ä½œç„¶åé‡æ–°æäº¤å°±è¡Œäº†</p>
<div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> LICENSE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "merge"</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> master</span></span></code></pre>
</div></li>
</ol>
<hr>
<p>æœ€å¥½æ¨èå‡ ç¯‡å†™çš„éå¸¸ä¸é”™çš„gitå…¥é—¨æ–‡ç« :</p>
<p><a href="http://stormzhang.com/github/2016/05/25/learn-github-from-zero1/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œåˆè¯† GitHubã€</a></p>
<p><a href="http://stormzhang.com/github/2016/05/26/learn-github-from-zero2/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒåŠ å…¥ GitHubã€</a></p>
<p><a href="http://stormzhang.com/github/2016/05/30/learn-github-from-zero3/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit é€Ÿæˆã€</a></p>
<p><a href="http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå‘GitHub æäº¤ä»£ç ã€</a></p>
<p><a href="http://stormzhang.com/github/2016/06/16/learn-github-from-zero5/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit è¿›é˜¶ã€</a></p>
<p><a href="http://stormzhang.com/github/2016/07/09/learn-from-github-from-zero6/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå›¢é˜Ÿåˆä½œåˆ©å™¨ BRANCHã€</a></p>
<p><a href="http://stormzhang.com/github/2016/07/28/learn-github-from-zero7/" target="_blank" rel="noreferrer">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå¦‚ä½•å‘ç°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Ÿã€</a></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pycharmæ“ä½œæŠ€å·§]]></title>
            <link>https://lpdswing.github.io//technology/other/pycharmæ“ä½œæŠ€å·§.html</link>
            <guid>https://lpdswing.github.io//technology/other/pycharmæ“ä½œæŠ€å·§.html</guid>
            <pubDate>Thu, 20 Apr 2017 00:42:43 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="pycharmä½¿ç”¨æŠ€å·§" tabindex="-1">pycharmä½¿ç”¨æŠ€å·§ <a class="header-anchor" href="#pycharmä½¿ç”¨æŠ€å·§" aria-label="Permalink to &quot;pycharmä½¿ç”¨æŠ€å·§&quot;">&ZeroWidthSpace;</a></h1>
<ul>
<li>
<p>å¸¸ç”¨å¿«æ·é”®</p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181006382.jpg" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181007005.jpg" alt=""></p>
</li>
<li>
<p>æŸ¥çœ‹ä½¿ç”¨åº“æºç </p>
<p><code>Command+B</code>  æˆ– <code>command+click</code></p>
</li>
<li>
<p>è®©ä»£ç PEP8</p>
<p><code>Command+OPtion+L</code></p>
</li>
<li>
<p>æŸ¥æ‰¾æ–‡ä»¶,ç±»,æ–¹æ³•</p>
<p><code>Command+Shift+O</code></p>
</li>
<li>
<p>å¿«é€Ÿé€‰æ‹©ä»£ç </p>
<p>é€‰æ‹©æŸä¸ªå‡½æ•°æ—¶,æŠŠå…‰æ ‡æ”¾åœ¨æœ€å‰é¢ç„¶åç‚¹å‡»</p>
<p><code>Command+Option+Shift+[</code></p>
</li>
<li>
<p>å¿«é€Ÿæ³¨é‡Š</p>
<p><code>Command+/</code></p>
</li>
<li>
<p>å¿«é€Ÿæ’å…¥å¸¸ç”¨ä»£ç å¦‚if_name_=='__main__':</p>
<p><code>command+J</code></p>
</li>
<li>
<p>è¿è¡Œ/è°ƒè¯•ä»£ç </p>
<p><code>command+R</code></p>
</li>
<li>
<p>ç¼©è¿›ä»£ç å—</p>
<p><code>shift+ä¸Šä¸‹é”®</code> ç„¶åç”¨Tabé”®</p>
</li>
<li>
<p>å±•å¼€/æ”¶ç¼©ä»£ç </p>
<p><code>command+shift+åŠ å‡å·</code></p>
</li>
<li>
<p>è®¾ç½®ä»£ç æ¨¡æ¿</p>
<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre v-pre class="shiki shiki-themes github-light github-dark vp-code" ><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#-*- coding:utf-8 _*-  </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""" </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">@author:${USER} </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">@file: ${NAME}.py </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">@time: ${YEAR}/${MONTH}/{DAY} </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"""</span></span></code></pre>
</div></li>
<li>
<p>å‡½æ•°è°ƒç”¨å±‚çº§å¯è§†åŒ–</p>
<p><code>å¯¼èˆª(Navigate)è°ƒç”¨å±‚æ¬¡ç»“æ„(call H*)</code></p>
</li>
<li>
<p>æ˜¾ç¤ºæ–‡æ¡£å’Œå‡½æ•°å‚æ•°</p>
<p><code>command+P</code></p>
</li>
<li>
<p>è¶…å®ç”¨æœç´¢Search Everywhere</p>
<p><code>double shift</code></p>
</li>
<li>
<p>å¿«é€Ÿåˆ›å»ºæµ‹è¯•</p>
<p><code>å¯¼èˆª  test</code></p>
</li>
<li>
<p>å¯ä»¥åˆ©ç”¨sshè¿œç¨‹éƒ¨ç½²</p>
<p>tools -&gt;ç¬¬ä¸€è¡Œé‡Œé¢çš„configserver</p>
</li>
</ul>
]]></content:encoded>
            <enclosure url="https://cdn.jsdelivr.net/gh/lpdswing/oss@main/202305181006382.jpg" length="0" type="image/jpg"/>
        </item>
    </channel>
</rss>