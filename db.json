{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"source/Staticfile","path":"Staticfile","modified":1,"renderable":0},{"_id":"source/favicon.ico","path":"favicon.ico","modified":1,"renderable":0},{"_id":"source/image/GC.png","path":"image/GC.png","modified":1,"renderable":0},{"_id":"source/image/pycharm for mac.jpg","path":"image/pycharm for mac.jpg","modified":1,"renderable":0},{"_id":"source/image/pycharm for win.jpg","path":"image/pycharm for win.jpg","modified":1,"renderable":0},{"_id":"source/image/GIL.png","path":"image/GIL.png","modified":1,"renderable":0},{"_id":"source/image/https.png","path":"image/https.png","modified":1,"renderable":0},{"_id":"source/image/Copy.png","path":"image/Copy.png","modified":1,"renderable":0},{"_id":"themes/Butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/algolia.svg","path":"img/algolia.svg","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/avatar.png","path":"img/avatar.png","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/icp.png","path":"img/icp.png","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/loading.gif","path":"img/loading.gif","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/ClickShowText.js","path":"js/third-party/ClickShowText.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/activate-power-mode.js","path":"js/third-party/activate-power-mode.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/canvas-nest.js","path":"js/third-party/canvas-nest.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/canvas-ribbon.js","path":"js/third-party/canvas-ribbon.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/click_heart.js","path":"js/third-party/click_heart.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/fireworks.js","path":"js/third-party/fireworks.js","modified":1,"renderable":1},{"_id":"themes/Butterfly/source/js/third-party/piao.js","path":"js/third-party/piao.js","modified":1,"renderable":1},{"_id":"source/image/huaban.png","path":"image/huaban.png","modified":1,"renderable":0}],"Cache":[{"_id":"source/Staticfile","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1589111972048},{"_id":"source/.DS_Store","hash":"4269a33863c0cf5e95880d5126e374f260d08875","modified":1589111972048},{"_id":"source/README.md","hash":"f94d15c9a524edf65357af25d31b42d25cdeabd3","modified":1589111972048},{"_id":"source/favicon.ico","hash":"2c0fa376e92229e8d93df00e558ec26052a3337a","modified":1589111972052},{"_id":"themes/Butterfly/.DS_Store","hash":"e89982a29c35d8b6692f04a073eabe19c63c31fb","modified":1589111972064},{"_id":"themes/Butterfly/LICENSE","hash":"c372b56b7553dafd2d8a8abf12d0dd71b4e2bfc0","modified":1589111972064},{"_id":"themes/Butterfly/README.md","hash":"8e4d01331f9a820ec30fca075c6956859772530e","modified":1589111972064},{"_id":"themes/Butterfly/README_CN.md","hash":"4fd3e96f5c18f721118c175c807e19ae874a7793","modified":1589111972064},{"_id":"themes/Butterfly/_config.yml","hash":"51ca4942bcc007372b637996a4db7b7961a902f5","modified":1589111972064},{"_id":"themes/Butterfly/package.json","hash":"43a92e039fe98e01259dc84ee4066b5d5efb8e7f","modified":1589111972064},{"_id":"source/_data/friends.json","hash":"d89ab3aa1224b250d9c186884dab4d852418e41d","modified":1589111972048},{"_id":"source/_data/link.yml","hash":"2297828a06edbfda10528f6f9b05def8323cbe75","modified":1589111972048},{"_id":"source/_posts/.DS_Store","hash":"e7863c1c42eae3051baea6a1450d5c7ebfdbf989","modified":1589111972048},{"_id":"source/_posts/Djangoè¿›é˜¶.md","hash":"6550e37eecd2991ce47a352d8ccf3a1f1072632c","modified":1589111972048},{"_id":"source/_posts/Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½².md","hash":"08e0f5ae0423cabcb5831fca25a1e4d7a82e0cfe","modified":1589112007028},{"_id":"source/_posts/Pythonç®—æ³•ä¹‹æ ˆ.md","hash":"22be874c715a0888d2204c1664999232f64bf9a0","modified":1589112006860},{"_id":"source/_posts/Pythonè¿›é˜¶.md","hash":"e4ee476444d8b22918522cb162d2ddc49e377bb9","modified":1589111972048},{"_id":"source/_posts/Sublime-text-å¸¸ç”¨æ’ä»¶.md","hash":"c7e5a68878f1b924392c234e66057a492aa4d760","modified":1589111972048},{"_id":"source/_posts/Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07-PS2307.md","hash":"eb71499ad4bf28734d2c4073569d277682cc1bd0","modified":1589111972048},{"_id":"source/_posts/WebåŸºç¡€.md","hash":"e6485baa9f6bf0ce6c2b847c1cb858d784a99c49","modified":1589111972048},{"_id":"source/_posts/djangoè¿›é˜¶-webåŸºç¡€.md","hash":"a2bbe63bbfc7995ca458a4a572beba9fdf7be650","modified":1589111972048},{"_id":"source/_posts/djangoè¿›é˜¶-ä¸­é—´ä»¶.md","hash":"b7d1fe08f133677ac32a88d25a016f345ef8786c","modified":1589111972048},{"_id":"source/_posts/git-è§£å†³pushæŠ¥é”™.md","hash":"b5d75cd3c727073dcf6e6feaa9360563b4158fc6","modified":1589111972048},{"_id":"source/_posts/pycharmæ“ä½œæŠ€å·§.md","hash":"7cda065d1c1153c09567ed356b2392fec9ce7aa9","modified":1589111972048},{"_id":"source/_posts/sqlalchemyä¹‹eventä½¿ç”¨.md","hash":"01b20c651bcac02404535b72d7db8e9d873a43ac","modified":1589112007032},{"_id":"source/_posts/windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨.md","hash":"9719ad3d7f4ca286110a439728155d82c71084de","modified":1589112006832},{"_id":"source/_posts/å­¦ä¹ ç¬”è®°.md","hash":"49296118c63c7ade4d69e2560e07024f947f09d2","modified":1589111972048},{"_id":"source/_posts/å­¦ä¹ ç¬”è®°2.md","hash":"1cca70eaf2e4b7cf62a6d92476c6db0a698ab3ad","modified":1589111972048},{"_id":"source/_posts/ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹.md","hash":"00bc3c557f6fad8feb909f5ab35b2ce0651ab0d7","modified":1589112006952},{"_id":"source/_posts/é¢è¯•æ€»ç»“.md","hash":"7fcdbbf6862b3722891ed7af2348e16d51107bc6","modified":1589111972048},{"_id":"source/about/index.md","hash":"603d57337b28ec9c378119e6b6ed41eb62f0a83f","modified":1589111972052},{"_id":"source/categories/index.md","hash":"92fbb150b354ea1eda23b15a0e5d0c1a84ec7327","modified":1589111972052},{"_id":"source/contact/index.md","hash":"e7c8ff851ef82774bd68cd810d474e1300eaa3d5","modified":1589111972052},{"_id":"source/friends/index.md","hash":"78a89856d320a5448b3a12361f0e8a7017381f25","modified":1589111972052},{"_id":"source/image/GC.png","hash":"54a6a6495d5a29c7f3f3832bc87dfde6e1e08989","modified":1589111972052},{"_id":"source/link/index.md","hash":"0226a2737b9969d99d81dd6f50a4622c6d7b1bb8","modified":1589111972064},{"_id":"source/tags/index.md","hash":"3941339c4371fdfff067ae2aa7bf07e7d27b757c","modified":1589111972064},{"_id":"themes/Butterfly/.github/ISSUE_TEMPLATE.md","hash":"bc427d7f13fec05cfd2dcc10953cbb2a96bc31be","modified":1589111972064},{"_id":"themes/Butterfly/.github/stale.yml","hash":"cd5a929ce25a6293a9f449e7b80dfe4307326797","modified":1589111972064},{"_id":"themes/Butterfly/languages/default.yml","hash":"8cc398208ebd0326d0bdac09cf96b8aeeed78fcc","modified":1589111972064},{"_id":"source/image/pycharm for mac.jpg","hash":"60fca2065198f41243d004417bbff88bcabf02fc","modified":1589111972064},{"_id":"source/image/pycharm for win.jpg","hash":"48e5599f460ce4a34843c47243f56e6a48d6312b","modified":1589111972064},{"_id":"themes/Butterfly/languages/en.yml","hash":"8cc398208ebd0326d0bdac09cf96b8aeeed78fcc","modified":1589111972064},{"_id":"themes/Butterfly/layout/archive.pug","hash":"bd62286afb64a51c97e800c5945620d51605d5fa","modified":1589111972064},{"_id":"themes/Butterfly/layout/category.pug","hash":"d014234c26d2c07caaea6703f7b48cb69c51907d","modified":1589111972064},{"_id":"themes/Butterfly/layout/flink.pug","hash":"f922cafc12857cff327d6621ea5517976e85c229","modified":1589111972064},{"_id":"themes/Butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1589111972064},{"_id":"themes/Butterfly/layout/page.pug","hash":"130ab657a6acfe149dbc59e481dc05d4d7d926a3","modified":1589111972064},{"_id":"themes/Butterfly/layout/post.pug","hash":"2e34fd65d36508faec9fd015d6cdb108d4c29b58","modified":1589111972064},{"_id":"themes/Butterfly/layout/tag.pug","hash":"3bb2a700c6d709d2757d55d357eed1fca5644e24","modified":1589111972064},{"_id":"themes/Butterfly/source/.DS_Store","hash":"84f35e390633eadc3c78584a28f5f5f8ce7f43a5","modified":1589111972064},{"_id":"source/image/GIL.png","hash":"443e410d1f1fddc8b06e8a3c2a0c9a7e60cbc766","modified":1589111972052},{"_id":"themes/Butterfly/languages/zh-CN.yml","hash":"848871887cc5ea38c50292df7f7c9d9dbb07b5ca","modified":1589111972064},{"_id":"themes/Butterfly/languages/zh-TW.yml","hash":"6dc0abceee6a1c4b47d3ecdae81667ffb4a09f88","modified":1589111972064},{"_id":"themes/Butterfly/layout/404.pug","hash":"3ade9903e1e0dedfb11b46d7161f2100defba31e","modified":1589111972064},{"_id":"source/image/https.png","hash":"44397432dfa3ad15bb5523a46480f4b849f9a652","modified":1589111972052},{"_id":"source/image/Copy.png","hash":"5a0b9a3f64a0ecdb83737c5820e51bee5dbc96ce","modified":1589111972052},{"_id":"themes/Butterfly/layout/includes/additional-js.pug","hash":"5265bfbd6514fde10b42f5f5482776450e2bd582","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/footer.pug","hash":"855c5d7e427730178c2f6e4f3e816d7fbee40198","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head.pug","hash":"901122c065cb08589a52911773d9baf01c599faa","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/layout.pug","hash":"055747cdb64b27ac707402481e79c82ce946b0d3","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/pagination.pug","hash":"385a186f0e77900db685b97d40bb4d26fa48a4d5","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/rightside.pug","hash":"9ba725c0f9661a156f82dee35a422fdd4639a5ce","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/sidebar.pug","hash":"b41c97424c588209c0d24817f5120b50933135fd","modified":1589111972064},{"_id":"themes/Butterfly/scripts/events/404.js","hash":"3c30dbd8b910ce7d8d7d8353cf2266cbc5d8775d","modified":1589111972064},{"_id":"themes/Butterfly/scripts/events/replace_config.js","hash":"537e556e76760ce2103f359d5a424c6e2b9a0710","modified":1589111972064},{"_id":"themes/Butterfly/scripts/filters/post_lazyload.js","hash":"4c7f4562183f28acb359b7e826eb0a198086e3f0","modified":1589111972064},{"_id":"themes/Butterfly/scripts/filters/random_cover.js","hash":"0b4775aaa955b75f03648fc1957fb88a6d440803","modified":1589111972064},{"_id":"themes/Butterfly/scripts/helpers/aside_archives.js","hash":"87c63d5b46fdc13724d5d213cdfde608af6a5bb3","modified":1589111972064},{"_id":"themes/Butterfly/scripts/helpers/aside_categories.js","hash":"21c89a1502e9964cb48d32ab0476427cc41b010d","modified":1589111972064},{"_id":"themes/Butterfly/scripts/helpers/page.js","hash":"729a9f40c5bf603036f6e9443db93b1704cf17d9","modified":1589111972064},{"_id":"themes/Butterfly/scripts/helpers/related_post.js","hash":"7ebe4dc2b42094a5b55799c0af5c28d6ab97d25f","modified":1589111972064},{"_id":"themes/Butterfly/scripts/tags/gallery.js","hash":"2fad0a9e6645613631aad36dc3473fe8e032809b","modified":1589111972064},{"_id":"themes/Butterfly/scripts/tags/hide.js","hash":"8c70135d5367b9a589ec92be66841488e9acdd29","modified":1589111972064},{"_id":"themes/Butterfly/scripts/tags/mermaid.js","hash":"53eaff19d8da32e04e2c871300ea495356d633cd","modified":1589111972064},{"_id":"themes/Butterfly/scripts/tags/note.js","hash":"c739846637c48b4779df2f62effb78e15100fd9f","modified":1589111972064},{"_id":"themes/Butterfly/source/css/index.styl","hash":"96eb343f77fc891ff5adedb1f4a3fb34ab4ee20f","modified":1589111972068},{"_id":"themes/Butterfly/source/css/var.styl","hash":"907b5ee1d5cb44ebb90493b068c00bef068ef748","modified":1589111972068},{"_id":"themes/Butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1589111972068},{"_id":"themes/Butterfly/source/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1589111972068},{"_id":"themes/Butterfly/source/img/avatar.png","hash":"2a6287308628881ce27b9a7de53ba15c2be00d02","modified":1589111972068},{"_id":"themes/Butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1589111972068},{"_id":"themes/Butterfly/source/img/icp.png","hash":"cb1fd69b38ec23ce8366668ddffbbd0160de0104","modified":1589111972068},{"_id":"themes/Butterfly/source/img/loading.gif","hash":"5f0287fb8fb98872fe1998c6f781111819e71806","modified":1589111972068},{"_id":"themes/Butterfly/source/js/main.js","hash":"8a398625427c6dc3d2d23b55faa4ebbd8f45cea4","modified":1589111972068},{"_id":"themes/Butterfly/source/js/tw_cn.js","hash":"d468bf1634950ed1ffd7cedd3c87f2037e27543f","modified":1589111972068},{"_id":"themes/Butterfly/source/js/utils.js","hash":"1906e1b61590368aa567e7064ff7f2492b57b257","modified":1589111972068},{"_id":"themes/Butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1589111972068},{"_id":"themes/Butterfly/layout/includes/comments/disqus.pug","hash":"821d968122bab8ce1ce04dc553b731eaf8e0d181","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/disqusjs.pug","hash":"050085054a68942e8833c6a4033fb437b6b01e52","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/facebook_comments.pug","hash":"7b7bb7d2b39b639cc8e1edf1274148460796662e","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/gitalk.pug","hash":"e98f5c199a76ad939a29a46c0dcbf7e85ec60ed2","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/index.pug","hash":"f9556b40b00d5a566c64904afa833aa2e0d9449d","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/laibili.pug","hash":"00022f763085b6852bc172b0ba91b0eacb403389","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/utterances.pug","hash":"9427cb07bcfe2bc7198755eeebf60f9fe430a342","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/comments/valine.pug","hash":"4f6e49639896bc8a4d4fe2257502f98ab63f6a7d","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/Open_Graph.pug","hash":"6ba5794cffb47cfd2727e388b7cd7370c43e3559","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/analytics.pug","hash":"8ec0609f14c284c3e6120940d7c4d7f1f201cd67","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/comment.pug","hash":"7de136bdce45afa81341b13e61b7a3926e15f03b","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/config.pug","hash":"dd7cd1b3b20873044e0c0ed1280001a0e06ea358","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/config_site.pug","hash":"2c7a5a097a2f815ba43a4e99c810405da3b9eebc","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/darkmode.pug","hash":"dcc8c01e1b0f8a4960ed873f49fb0f18d9912d21","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/dns_prefetch.pug","hash":"d2f81fadc68532cd27db8895c1834cdefb7e577e","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/google_adsense.pug","hash":"ff4ceda534cdd711cfa2cb9e95e36258988674e1","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/noscript.pug","hash":"47a10164395d8200c8d962df68a01e7deee4053b","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/pwa.pug","hash":"be1ff710e4381fc684243313dcadf0140d7469de","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/site_verification.pug","hash":"f5c8ec73c797ff3455e732fa7c92c856692f3ce5","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/head/subtitle.pug","hash":"bbdb2280a74cd7b573b8e03e1c2b44c37571ad22","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/header/header.pug","hash":"0b50e70efa91519e3ba7fa7a55e9603f33a8e6eb","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/header/index.pug","hash":"e612fe17bbd8cb39772e9dac54df3fcd1da99ba6","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/header/menu_item.pug","hash":"addeb5765ab0635c665dcca99f7918561131ae09","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/header/post-info.pug","hash":"9c50171335c65533af09a1c11648860b59be3299","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/header/social.pug","hash":"0d684f897fcdfe1e98300851b7fd955a30b68dd9","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/loading/loading-js.pug","hash":"3cf431a4f04997b55873f7099c1402155b19cc95","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/loading/loading.pug","hash":"5276937fbcceb9d62879dc47be880cd469a27349","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/math/index.pug","hash":"ec97f284626b67208370b5084e5c5822844fa30a","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/math/katex.pug","hash":"73356f1068c7426597e268d6c4aefa2b0ac3a1d9","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/math/mathjax.pug","hash":"6ccfaa776fc913ccf8b34825d918ab2b4d457434","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/math/mermaid.pug","hash":"db848ff451d4c58670af415882ca6bb2e0da971b","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/mixins/article-sort.pug","hash":"53cd1b89dc4bc45c315a2f54bfce9d6c3a695f27","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/mixins/post-ui.pug","hash":"40108322ce7f5b5ac52765ca39901fa2c00348d6","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/mobile-sidebar/index.pug","hash":"d12fab033fb32b55abbc9be9b04cc6ab6465b98e","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/mobile-sidebar/mobile-menus.pug","hash":"b7f1b9ff32ea868965e5dbb533c0117ce195663f","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/post/post-copyright.pug","hash":"8efc0b7886bdb5959e173b5e11f5ffb8d1c5230e","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/post/reward.pug","hash":"6612174871d833981f1a4a4ec67bc0fbd6913fd8","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/search/algolia.pug","hash":"44d5a061df53a276d22b3855652645d90117d0b6","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/search/index.pug","hash":"b01828b37d789797aeb5433f1705cff3c540a4d5","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/search/local-search.pug","hash":"a45b5453e35479e58cd44b6bd2af0e08789890af","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/share/addtoany.pug","hash":"bbf5b70460b17c4fecb9ee6880aa71cdb2d807a8","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/third-party/canvas-ribbon-piao.pug","hash":"001f28c633d2ec2d5ef9ca047fb1fe61ffefd66f","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/third-party/canvas-ribbon.pug","hash":"b4acf48c98ba2a6a5a5fb5387a0fd610bdfd55ef","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/third-party/pangu.pug","hash":"3f7de99f4307ac9bfd89e669aaa7c2ae54d5224a","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_ad.pug","hash":"2e940de1a6261fd378e16e4cd3362a9d69c12f50","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_announcement.pug","hash":"edf9658dbb95c964e4c6d60bd71d1dc7ebfbb0ac","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_archives.pug","hash":"8274404ec2f83f1ba6439d42e8a4e29e932067ac","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_author.pug","hash":"56d27e39fa050a4d311d92b572ce291d7618026a","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_categories.pug","hash":"9fe3e264236835cfb6a91f54ee96bb3a79e36539","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_recent_post.pug","hash":"07eebb9d024feba44a2c66e04aef19151df8991c","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_tags.pug","hash":"c0309c49a92c1176f008ad322f86a8a19031b41e","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/card_webinfo.pug","hash":"6caff3cb958ccb0da7d88b51d87e22d27fcd9625","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/widget/index.pug","hash":"15fb3730f829e237c102a70ab9781178471fd786","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_global/index.styl","hash":"d9d19c2f5dbe671815b6048ff40b876e02d0fd7b","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_highlight/diff.styl","hash":"b0079f6da761935b720d70dafd826ef62fad86d2","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_highlight/highlight.styl","hash":"4a61f436cd9a44a3bb4259549b05adf72cd941d7","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_highlight/theme.styl","hash":"efceb8105830544cef5e4afad3243326b3118fc1","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/404.styl","hash":"964d16c30f307ec354b47375aa5f00f0417c7bf0","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/aside.styl","hash":"aeadbc2b3a057ab11f409b584d8c39c1d72ed0e7","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/category.styl","hash":"7267043e52a9e620adfa860bdb3e4de400ff2596","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/flink.styl","hash":"0631c50cdccd29ca41fbac3423b2fd91a9be49b8","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/footer.styl","hash":"d8709e29efcfa0a7356384026dfbaac8861d3baa","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/head.styl","hash":"a23ff8c52bfc581a741158c75f3d4923c4cdf810","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/loadding.styl","hash":"144ef01b03ae34d3ede4b9aa18f4c8cd3d6651ea","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/mobile-sidebar.styl","hash":"5492d68c1c9bb85898d41b357f695d6fb17ec646","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/page.styl","hash":"970bd971b06411be85146c97ca30884ff3847910","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/pagination.styl","hash":"d6f0b7d9dc10761c15a5a2b84cc63e914a10d339","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/third-party/canvas-nest.pug","hash":"3d7a3654ae03fd2665ea355ee9eac48af0ee82af","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/share/share-js.pug","hash":"828a04c6e8e3a56c3c7f3c9bb1ecf4f99ed842fe","modified":1589111972064},{"_id":"themes/Butterfly/layout/includes/share/index.pug","hash":"c341aaa00113681b22f945f5004e6b22c8a0ca69","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/post.styl","hash":"e20057cc5a065078cb57821a63595ef9a0c36648","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/relatedposts.styl","hash":"1103f2cead8ab1aa9945c20c7d608bb4b829d2cd","modified":1589111972064},{"_id":"themes/Butterfly/source/css/_layout/reward.styl","hash":"92b615795f02eff2a018edb425f923968c9e9814","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_layout/rightside.styl","hash":"9a44881bd4c2aea0b0774809d91d58e4067496ed","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_layout/sidebar.styl","hash":"33da3da65715ce1a85b8ecab92e0eab6ce620a58","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_layout/third-party.styl","hash":"0fcfeef99c0bef8d48be9180b6fed5aace55acba","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_mode/darkmode.styl","hash":"fa20ccacd51b0c87f4a9ae107bb20b629d5953ab","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_mode/readmode.styl","hash":"919f0a869203a03ca783dd3fc9df1aeb229de2c2","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_search/algolia.styl","hash":"641ef2bc7af135c17fd90f3f974e78ebbaf1ac13","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_search/index.styl","hash":"e31b475cbac2af8d3401fba6382d34968c8063ef","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_search/local-search.styl","hash":"da791f46239eabbbf28eb30b9e441f1ac2a8ced1","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_tags/gallery.styl","hash":"d6af5c4f1966b5b575427c117712c173e23657ad","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_tags/hide.styl","hash":"a1de1df9f3cff44bcee7822107ec1e51d9a1b0b1","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_tags/note.styl","hash":"1ec06d5ac4148798babd2475a5d10f0d3a1b5870","modified":1589111972068},{"_id":"themes/Butterfly/source/css/_third-party/normalize.min.css","hash":"001bd6d68a9b9af5dd0158fe116889434f36b1fd","modified":1589111972068},{"_id":"themes/Butterfly/source/js/search/algolia.js","hash":"09219d497f54c834ec506a4f63d02f6cad7c2dc7","modified":1589111972068},{"_id":"themes/Butterfly/source/js/search/local-search.js","hash":"497993860b3c42bdc926a3bd83b4b8f480febd99","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/ClickShowText.js","hash":"32864aee35b5d739a36702b8d916b17bac52b17e","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/activate-power-mode.js","hash":"2c4ab494225b7d04eed934efc43a43791e596f4a","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/canvas-nest.js","hash":"978402a16f3ceebe453806e3e25a5905a89776be","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/canvas-ribbon.js","hash":"2496200178510a12b2436947a93bb15120560937","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/click_heart.js","hash":"004ea645ed8c5e354711b5fc0dbfe015e181916b","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/fireworks.js","hash":"411ced4031a856a5b87f7c62d3800027d12bacec","modified":1589111972068},{"_id":"themes/Butterfly/source/js/third-party/piao.js","hash":"05da3437664bb335e2336a52be8587e7719f7b89","modified":1589111972068},{"_id":"source/image/huaban.png","hash":"9c118ed72516dab6b4aa251d5686b63d46b31acb","modified":1589111972060},{"_id":"public/search.xml","hash":"4aba6e545f7b87e3241f4efaaba350ce2e61d908","modified":1589112010199},{"_id":"public/404.html","hash":"ab982af7e97a35059046706762f0e4af1c46907e","modified":1589112010199},{"_id":"public/README.html","hash":"ec1b49cc61c6dcdb97b538392334f0f26bd82a14","modified":1589112010199},{"_id":"public/about/index.html","hash":"f78ec95dca9624d6867dcdf1a2169b9f9de980a0","modified":1589112010199},{"_id":"public/categories/index.html","hash":"d918d906af97e516d0ce909050c2d953015e9af8","modified":1589112010199},{"_id":"public/contact/index.html","hash":"fba86db21b4c39339aec379af02a0247f371e990","modified":1589112010199},{"_id":"public/friends/index.html","hash":"d7a17309209ed82cd78b6919466ae2cce6125183","modified":1589112010199},{"_id":"public/link/index.html","hash":"3d876d03ec35cf7780a08fcb2e856bee75e0a4f5","modified":1589112010199},{"_id":"public/tags/index.html","hash":"459d34428d0a5c45e8abd382b31eb0059d27917d","modified":1589112010199},{"_id":"public/2020/05/10/windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨/index.html","hash":"6f9c066dfa0ef5ef154e2ae13b93acd560d96042","modified":1589112010199},{"_id":"public/2020/05/10/Pythonç®—æ³•ä¹‹æ ˆ/index.html","hash":"a5bffb6eb434ea948f830ca94279337581bb7940","modified":1589112010199},{"_id":"public/2020/05/10/ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹/index.html","hash":"3bf9c71ca8c7a1d854b131530c32514fc2778b8e","modified":1589112010199},{"_id":"public/2020/05/10/Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²/index.html","hash":"6643fa52b1d650d6b47cf9fabba474fafb0ee562","modified":1589112010199},{"_id":"public/2020/04/24/sqlalchemyä¹‹eventä½¿ç”¨/index.html","hash":"53b8741e4848edc57ad580055994d062927d3396","modified":1589112010199},{"_id":"public/2018/04/21/Sublime-text-å¸¸ç”¨æ’ä»¶/index.html","hash":"363db11ae41b0d7c946fda710c84ff1eb9d6606d","modified":1589112010199},{"_id":"public/2018/04/16/Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07-PS2307/index.html","hash":"3155dadd248388681dac56675d31486cac917355","modified":1589112010199},{"_id":"public/2017/05/03/djangoè¿›é˜¶-ä¸­é—´ä»¶/index.html","hash":"81db2a439718d9b03309cec5a56b1515e42c1513","modified":1589112010199},{"_id":"public/2017/05/03/Djangoè¿›é˜¶/index.html","hash":"db9f6118a916dc9e656179ee5bdcdd921a2d3ba1","modified":1589112010199},{"_id":"public/2017/05/03/WebåŸºç¡€/index.html","hash":"009ced5ee34bc93721d9abe1dbebc19a1f1604f6","modified":1589112010199},{"_id":"public/2017/05/03/Pythonè¿›é˜¶/index.html","hash":"09bc40bb4ada4b6c45460d19801c4e331de9d193","modified":1589112010199},{"_id":"public/2017/05/03/å­¦ä¹ ç¬”è®°2/index.html","hash":"13affd5b90b3ec51c9427d056db28db6c63b7864","modified":1589112010199},{"_id":"public/2017/05/03/å­¦ä¹ ç¬”è®°/index.html","hash":"e654ab52987dd71413f0e6e45d6f6f1e1d666b7c","modified":1589112010199},{"_id":"public/2017/05/03/djangoè¿›é˜¶-webåŸºç¡€/index.html","hash":"3f74a9a2f4006c1d1d7f30119fe475343ca6b3f3","modified":1589112010199},{"_id":"public/2017/04/24/é¢è¯•æ€»ç»“/index.html","hash":"2696aff5c23577549efabf641f6605ec19af43c9","modified":1589112010199},{"_id":"public/2017/04/22/git-è§£å†³pushæŠ¥é”™/index.html","hash":"c78b4eec20e6e63396eb3d7f67cbd6a1d477cb63","modified":1589112010199},{"_id":"public/2017/04/20/pycharmæ“ä½œæŠ€å·§/index.html","hash":"8e778d2c2c28b30cb395bbbd609b5e9fd3625925","modified":1589112010199},{"_id":"public/archives/index.html","hash":"922c589a5a697b4e3458669cd87ddd9f3d1fdc00","modified":1589112010199},{"_id":"public/archives/page/2/index.html","hash":"e4500d071ff444c62bb2f0beb0133fa2b4e05af3","modified":1589112010199},{"_id":"public/archives/2017/index.html","hash":"af4637c4c7a94d9290796c2d84f851ed57d690e7","modified":1589112010199},{"_id":"public/archives/2017/04/index.html","hash":"b8e02858762ec1f4f8a801156b568fee07f224f9","modified":1589112010199},{"_id":"public/archives/2017/05/index.html","hash":"46fcea06a17ecac3fd26fbe85892e7ff4acfeaf5","modified":1589112010199},{"_id":"public/archives/2018/index.html","hash":"9d27f0e643d9cb3bc05077f9716dae2ee40a3138","modified":1589112010199},{"_id":"public/archives/2018/04/index.html","hash":"c2fbb50159eee50d8f2088893a4be1e97d993e84","modified":1589112010199},{"_id":"public/archives/2020/index.html","hash":"a85c7baea98bde9e74e28929530f858dea35e450","modified":1589112010199},{"_id":"public/archives/2020/04/index.html","hash":"363c3c00e5ce83fe5e110d7ca6dcb4b516eb078c","modified":1589112010199},{"_id":"public/archives/2020/05/index.html","hash":"026de49104f4372861ddd5d02afc9165e6e37e87","modified":1589112010199},{"_id":"public/categories/Python/index.html","hash":"6d60274d75e5ac58915dbde360cd861a7a92e096","modified":1589112010199},{"_id":"public/categories/Uç›˜ä¿®å¤/index.html","hash":"d7929382ad18ff3ecb13a002b59d15ea0bef1c75","modified":1589112010199},{"_id":"public/categories/Django/index.html","hash":"5783e9146e46f0dfbac2b18cc166e7a86803c2cd","modified":1589112010199},{"_id":"public/categories/Git/index.html","hash":"5600fb1c5eb056a6609f457499a735a485c0336d","modified":1589112010199},{"_id":"public/index.html","hash":"9250a7e799115c3e6ab93bb96ba322b30de72001","modified":1589112010199},{"_id":"public/page/2/index.html","hash":"75b805741884cc76d7133d5f088a7652d37c622f","modified":1589112010199},{"_id":"public/tags/ç¼–è¾‘å™¨/index.html","hash":"987af29f3c68672c126102d9b92543902e724121","modified":1589112010199},{"_id":"public/tags/ç¡¬ä»¶/index.html","hash":"29ce8671486f54a43f0c2a5d8b0f9a998365ea76","modified":1589112010199},{"_id":"public/tags/django/index.html","hash":"94227bdc93513a5b1b892fd309c2dae7bf1de303","modified":1589112010199},{"_id":"public/tags/python/index.html","hash":"8071c4924dac3b4eedb7f445e068ee9d85b214f7","modified":1589112010199},{"_id":"public/tags/git/index.html","hash":"0a9d58e575b6c94421e3049d8f9c15f42ca69aa5","modified":1589112010199},{"_id":"public/Staticfile","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1589112010199},{"_id":"public/favicon.ico","hash":"2c0fa376e92229e8d93df00e558ec26052a3337a","modified":1589112010199},{"_id":"public/image/GC.png","hash":"54a6a6495d5a29c7f3f3832bc87dfde6e1e08989","modified":1589112010199},{"_id":"public/image/pycharm for mac.jpg","hash":"60fca2065198f41243d004417bbff88bcabf02fc","modified":1589112010199},{"_id":"public/image/pycharm for win.jpg","hash":"48e5599f460ce4a34843c47243f56e6a48d6312b","modified":1589112010199},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1589112010199},{"_id":"public/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1589112010199},{"_id":"public/img/avatar.png","hash":"2a6287308628881ce27b9a7de53ba15c2be00d02","modified":1589112010199},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1589112010199},{"_id":"public/img/icp.png","hash":"cb1fd69b38ec23ce8366668ddffbbd0160de0104","modified":1589112010199},{"_id":"public/img/loading.gif","hash":"5f0287fb8fb98872fe1998c6f781111819e71806","modified":1589112010199},{"_id":"public/css/prism-tomorrow.css","hash":"3b99487dfc9b4e51e9105a93743b92a761840e34","modified":1589112010199},{"_id":"public/image/GIL.png","hash":"443e410d1f1fddc8b06e8a3c2a0c9a7e60cbc766","modified":1589112010199},{"_id":"public/image/https.png","hash":"44397432dfa3ad15bb5523a46480f4b849f9a652","modified":1589112010199},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1589112010199},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1589112010199},{"_id":"public/js/utils.js","hash":"1906e1b61590368aa567e7064ff7f2492b57b257","modified":1589112010199},{"_id":"public/js/search/algolia.js","hash":"09219d497f54c834ec506a4f63d02f6cad7c2dc7","modified":1589112010199},{"_id":"public/js/search/local-search.js","hash":"497993860b3c42bdc926a3bd83b4b8f480febd99","modified":1589112010199},{"_id":"public/js/third-party/ClickShowText.js","hash":"32864aee35b5d739a36702b8d916b17bac52b17e","modified":1589112010199},{"_id":"public/js/third-party/activate-power-mode.js","hash":"2c4ab494225b7d04eed934efc43a43791e596f4a","modified":1589112010199},{"_id":"public/js/third-party/canvas-nest.js","hash":"978402a16f3ceebe453806e3e25a5905a89776be","modified":1589112010199},{"_id":"public/js/third-party/canvas-ribbon.js","hash":"2496200178510a12b2436947a93bb15120560937","modified":1589112010199},{"_id":"public/js/third-party/click_heart.js","hash":"004ea645ed8c5e354711b5fc0dbfe015e181916b","modified":1589112010199},{"_id":"public/js/third-party/fireworks.js","hash":"411ced4031a856a5b87f7c62d3800027d12bacec","modified":1589112010199},{"_id":"public/css/index.css","hash":"5442c7ddcf582b18613545003ff6f757c0aa0cff","modified":1589112010199},{"_id":"public/js/third-party/piao.js","hash":"05da3437664bb335e2336a52be8587e7719f7b89","modified":1589112010199},{"_id":"public/image/Copy.png","hash":"5a0b9a3f64a0ecdb83737c5820e51bee5dbc96ce","modified":1589112010199},{"_id":"public/js/main.js","hash":"8a398625427c6dc3d2d23b55faa4ebbd8f45cea4","modified":1589112010199},{"_id":"public/js/tw_cn.js","hash":"d468bf1634950ed1ffd7cedd3c87f2037e27543f","modified":1589112010199},{"_id":"public/image/huaban.png","hash":"9c118ed72516dab6b4aa251d5686b63d46b31acb","modified":1589112010199}],"Category":[{"name":"Python","_id":"cka109fo300093kzjeyphgd4b"},{"name":"Uç›˜ä¿®å¤","_id":"cka109fo8000e3kzjbxzya6w9"},{"name":"Django","_id":"cka109fob000k3kzj02tc9qvd"},{"name":"Git","_id":"cka109fog000v3kzjce0nc8d5"}],"Data":[{"_id":"friends","data":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}]},{"_id":"link","data":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}],"Page":[{"_content":"# lpdswing.github.io\n\n\n\nåšå®¢\n\nè®¿é—®åœ°å€  [ç‚¹å‡»](https://lpdswing.com)","source":"README.md","raw":"# lpdswing.github.io\n\n\n\nåšå®¢\n\nè®¿é—®åœ°å€  [ç‚¹å‡»](https://lpdswing.com)","date":"2020-05-10T11:59:32.048Z","updated":"2020-05-10T11:59:32.048Z","path":"README.html","title":"","comments":1,"layout":"page","_id":"cka109fn400003kzjgwdxgcqh","content":"<h1 id=\"lpdswing-github-io\"><a href=\"#lpdswing-github-io\" class=\"headerlink\" title=\"lpdswing.github.io\"></a>lpdswing.github.io</h1><p>åšå®¢</p>\n<p>è®¿é—®åœ°å€  <a href=\"https://lpdswing.com\">ç‚¹å‡»</a></p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"lpdswing-github-io\"><a href=\"#lpdswing-github-io\" class=\"headerlink\" title=\"lpdswing.github.io\"></a>lpdswing.github.io</h1><p>åšå®¢</p>\n<p>è®¿é—®åœ°å€  <a href=\"https://lpdswing.com\">ç‚¹å‡»</a></p>\n"},{"title":"about","date":"2018-05-04T16:52:48.000Z","type":"about","layout":"about","_content":"\n## å…³äºæˆ‘\n\nğŸ‘¨â€ğŸ’»â€: Python\n\nEmail: lpdswing@163.com\n\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2018-05-05 00:52:48\ntype: \"about\"\nlayout: \"about\"\n---\n\n## å…³äºæˆ‘\n\nğŸ‘¨â€ğŸ’»â€: Python\n\nEmail: lpdswing@163.com\n\n","updated":"2020-05-10T11:59:32.052Z","path":"about/index.html","comments":1,"_id":"cka109fnx00023kzj8g3q9dex","content":"<h2 id=\"å…³äºæˆ‘\"><a href=\"#å…³äºæˆ‘\" class=\"headerlink\" title=\"å…³äºæˆ‘\"></a>å…³äºæˆ‘</h2><p>ğŸ‘¨â€ğŸ’»â€: Python</p>\n<p>Email: <a href=\"mailto:lpdswing@163.com\">lpdswing@163.com</a></p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h2 id=\"å…³äºæˆ‘\"><a href=\"#å…³äºæˆ‘\" class=\"headerlink\" title=\"å…³äºæˆ‘\"></a>å…³äºæˆ‘</h2><p>ğŸ‘¨â€ğŸ’»â€: Python</p>\n<p>Email: <a href=\"mailto:lpdswing@163.com\">lpdswing@163.com</a></p>\n"},{"title":"categories","date":"2018-05-04T16:50:58.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-05-05 00:50:58\ntype: \"categories\" \nlayout: \"categories\"\n---\n","updated":"2020-05-10T11:59:32.052Z","path":"categories/index.html","comments":1,"_id":"cka109fnz00043kzj8kbr8lcb","content":"<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":""},{"title":"contact","date":"2020-04-18T05:50:06.000Z","type":"contact","layout":"contact","_content":"\n# <center>æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ</center>\n# <center>æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ</center>\n# <center>æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ</center>\n# <center>å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ ...</center>","source":"contact/index.md","raw":"---\ntitle: contact\ndate: 2020-04-18 13:50:06\ntype: \"contact\"\nlayout: \"contact\"\n---\n\n# <center>æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ</center>\n# <center>æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ</center>\n# <center>æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ</center>\n# <center>å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ ...</center>","updated":"2020-05-10T11:59:32.052Z","path":"contact/index.html","comments":1,"_id":"cka109fo000063kzj182h1awq","content":"<h1 id=\"æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ\"><a href=\"#æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ\"></a><center>æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ</center></h1><h1 id=\"æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ\"><a href=\"#æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ\"></a><center>æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ</center></h1><h1 id=\"æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ\"><a href=\"#æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ\"></a><center>æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ</center></h1><h1 id=\"å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€-â€¦\"><a href=\"#å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€-â€¦\" class=\"headerlink\" title=\"å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ â€¦\"></a><center>å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ â€¦</center></h1><script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ\"><a href=\"#æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ\"></a><center>æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ</center></h1><h1 id=\"æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ\"><a href=\"#æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ\"></a><center>æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ</center></h1><h1 id=\"æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ\"><a href=\"#æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ\"></a><center>æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ</center></h1><h1 id=\"å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€-â€¦\"><a href=\"#å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€-â€¦\" class=\"headerlink\" title=\"å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ â€¦\"></a><center>å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ â€¦</center></h1>"},{"title":"friends","date":"2020-04-21T14:03:37.000Z","type":"friends","layout":"friends","_content":"","source":"friends/index.md","raw":"---\ntitle: friends\ndate: 2020-04-21 22:03:37\ntype: \"friends\"\nlayout: \"friends\"\n---\n","updated":"2020-05-10T11:59:32.052Z","path":"friends/index.html","comments":1,"_id":"cka109fo200083kzj36pn2roe","content":"<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":""},{"title":"å‹æƒ…é“¾æ¥","date":"2020-05-10T08:20:01.000Z","type":"link","_content":"\n# å‹é“¾æ¥æ ¼å¼\n\nname: lpdswing\nlink: https://lpdswing.com\navatar: https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg\ndescr: æˆ‘ä¸æ˜¯å¤§ç‰›ï¼Œä½†æ˜¯æ­£åœ¨æˆä¸ºå¤§ç‰›çš„è·¯ä¸Š~~","source":"link/index.md","raw":"---\ntitle: å‹æƒ…é“¾æ¥\ndate: 2020-05-10 16:20:01\ntype: \"link\"\n---\n\n# å‹é“¾æ¥æ ¼å¼\n\nname: lpdswing\nlink: https://lpdswing.com\navatar: https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg\ndescr: æˆ‘ä¸æ˜¯å¤§ç‰›ï¼Œä½†æ˜¯æ­£åœ¨æˆä¸ºå¤§ç‰›çš„è·¯ä¸Š~~","updated":"2020-05-10T11:59:32.064Z","path":"link/index.html","comments":1,"layout":"page","_id":"cka109hnc001i3kzj9d6a3coa","content":"<h1 id=\"å‹é“¾æ¥æ ¼å¼\"><a href=\"#å‹é“¾æ¥æ ¼å¼\" class=\"headerlink\" title=\"å‹é“¾æ¥æ ¼å¼\"></a>å‹é“¾æ¥æ ¼å¼</h1><p>name: lpdswing<br>link: <a href=\"https://lpdswing.com\">https://lpdswing.com</a><br>avatar: <a href=\"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg\" target=\"_blank\" rel=\"noopener\">https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg</a><br>descr: æˆ‘ä¸æ˜¯å¤§ç‰›ï¼Œä½†æ˜¯æ­£åœ¨æˆä¸ºå¤§ç‰›çš„è·¯ä¸Š~~</p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"å‹é“¾æ¥æ ¼å¼\"><a href=\"#å‹é“¾æ¥æ ¼å¼\" class=\"headerlink\" title=\"å‹é“¾æ¥æ ¼å¼\"></a>å‹é“¾æ¥æ ¼å¼</h1><p>name: lpdswing<br>link: <a href=\"https://lpdswing.com\">https://lpdswing.com</a><br>avatar: <a href=\"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg\" target=\"_blank\" rel=\"noopener\">https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg</a><br>descr: æˆ‘ä¸æ˜¯å¤§ç‰›ï¼Œä½†æ˜¯æ­£åœ¨æˆä¸ºå¤§ç‰›çš„è·¯ä¸Š~~</p>\n"},{"title":"tags","date":"2018-05-04T16:57:17.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-05-05 00:57:17\ntype: \"tags\"\nlayout: \"tags\"\n---\n","updated":"2020-05-10T11:59:32.064Z","path":"tags/index.html","comments":1,"_id":"cka109hnf001k3kzj1ykvgi9c","content":"<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":""}],"Post":[{"title":"Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²","urlname":"zy4wle","date":"2020-05-10T11:28:00.000Z","_content":"\n---\n\n\ntitle: è¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\n\ndate: 2020/4/8 20:46:25\n\ntags:\n\n- è‡ªåŠ¨æ„å»º\n\ncategories:\n- hexo\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\n# Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\n\npsï¼šå‚è€ƒæ–‡ç« ï¼š[https://www.yuque.com/u46795/blog/dlloc7](https://www.yuque.com/u46795/blog/dlloc7)\n\nä¸Šæ–‡æ‰€ç”¨çš„æ˜¯ GitHub actionï¼Œä¸è¿‡æˆ‘ä»¬ç”¨çš„æ˜¯ coding å¹³å°ï¼Œå¥½å¤„æ˜¯å›½å†…è®¿é—®é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²ç®€å•ã€‚\n\né¦–å…ˆè¦æœ‰ä¸€ä¸ª hexo åšå®¢ï¼Œæ­¤å¤„ç•¥è¿‡ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å‘ã€‚\n\n## åŸç†\n\n- coding æŒç»­é›†æˆç¼–è¯‘åšå®¢æºç æ„å»ºé™æ€æ–‡ä»¶\n- ä½¿ç”¨è…¾è®¯äº‘å‡½æ•°è°ƒç”¨ coding æ„å»ºçš„ api\n- è¯­é›€çš„ webhook åŠŸèƒ½è°ƒç”¨è…¾è®¯äº‘çš„å‡½æ•°è°ƒç”¨ã€‚\n\n## coding è‡ªåŠ¨æ„å»º hexo\n\n- æŒç»­é›†æˆ\n\nå‚è€ƒæ–‡ç« ï¼š[http://www.mamicode.com/info-detail-2922484.html](http://www.mamicode.com/info-detail-2922484.html)\n\nä»–çš„ pipeline æœ‰äº›å‘ï¼Œnode ä¸æ”¯æŒï¼Œé™„ä¸Šæˆ‘çš„é…ç½®ï¼š\n\nä¸‹é¢è¿™ä¸ªæ˜¯ç›´æ¥ç²˜è¿‡æ¥çš„ï¼Œæ–¹ä¾¿ç†è§£\n\n- ä»¤ç‰Œç”¨æˆ·åæ˜¯ï¼š`root`\n- ä»¤ç‰Œå¯†ç æ˜¯ï¼š`abcdefg`\n- é¡¹ç›®åœ°å€æ˜¯`[https://e.coding.net/test/test.git](https://e.coding.net/test/test.git)`\n\né‚£ä¹ˆæˆ‘ä»¬çš„è®¿é—®åœ°å€å°±æ˜¯`[https://root:abcdefg@e.coding.net/test/test.git](https://root:abcdefg@e.coding.net/test/test.git)`\n\n```bash\npipeline {\n  agent any\n  stages {\n    stage('hexo') {\n      steps {\n        sh 'npm install -g hexo-cli'\n      }\n    }\n    stage('æ‹‰å–ä»“åº“') {\n      steps {\n        sh 'git clone https://ä»¤ç‰Œç”¨æˆ·å:ä»¤ç‰Œå¯†ç @e.coding.net/lpdswing/hexo_blog.git .'\n        sh 'npm install hexo --save'\n        sh 'npm install yuque-hexo --save'\n        sh 'npm install hexo-deployer-git --save'\n      }\n    }\n    stage('å‘å¸ƒ') {\n      steps {\n        sh 'npm run start'\n        sh 'mv source/_yuque/* source/_posts'\n        sh 'ls source/_posts'\n        sh 'hexo clean && hexo g -d'\n\n      }\n    }\n  }\n}\n```\n\n**å‘ 1** ï¼šyuque-hexo ä¼šæŠŠæˆ‘ä»¬æœ¬æ¥çš„\\_post æ–‡ä»¶å¤¹ç›´æ¥åˆ æ‰è¦†ç›–ï¼Œå¯¼è‡´æœ¬æ¥æœ‰çš„æ–‡ç« è¢«åˆ é™¤ï¼Œæ‰€ä»¥è¿™é‡Œå†é…ç½® yuque çš„æ—¶å€™æ–‡ç« ç›®å½•ä½¿ç”¨çš„æ˜¯\\_yuque,ä¸€ä¼šä¼šä»‹ç»åˆ°ï¼Œyuque-hexo çš„é…ç½®ã€‚æ›²çº¿æ•‘å›½ï¼Œæˆ‘ä»¬å†è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ç§»åŠ¨æ–‡ç« åˆ° post æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ„å»ºé™æ€æ–‡ç« ã€‚\n\n## è…¾è®¯äº‘å‡½æ•°\n\n- ä½¿ç”¨çš„ python3.6\n\nå‚è€ƒç¬¬ä¸€ä¸ªæ–‡ç« çš„ä»£ç ï¼Œé™„ä¸Šé…ç½®ï¼š\n\n```python\n# -*- coding: utf8 -*-\nimport requests\n\ndef main_handler(event, context):\n\n\n    url = \"https://xxxxx\" # è¿™ä¸ªurlå†codingè‡ªåŠ¨æ„å»ºçš„è§¦å‘è§„åˆ™>APIè§¦å‘å“ªé‡Œå¤åˆ¶è¿‡æ¥\n\n    payload = {\"ref\": \"master\",\"envs\": []}\n    headers = {\n    'Content-Type': 'application/json',\n    }\n\t# codingçš„apiè§¦å‘ç”¨åˆ°æ˜¯http basic authéªŒè¯ï¼Œè¿™é‡Œçš„ç”¨æˆ·å¯†ç ä¹Ÿå»codingçš„é¡¹ç›®tokenæ‹·è´\n    # å¼€å‘è€…é€‰é¡¹-é¡¹ç›®ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰å°±æ–°å»ºï¼Œä»“åº“æƒé™å…¨å‹¾ä¸Š\n    response = requests.post( url, headers=headers, json = payload,auth=('ä»¤ç‰Œç”¨æˆ·å','ä»¤ç‰Œå¯†ç '))\n\n    return response.text\n```\n\n- æµ‹è¯•è…¾è®¯äº‘å‡½æ•°æˆåŠŸå°±å¯ä»¥ä¸‹ä¸€æ­¥äº†\n\n## è¯­é›€é…ç½®\n\n- å‘å¸ƒæ–‡ç« \n\næ–‡ç« å‘å¸ƒçš„æ—¶å€™å‹¾é€‰æ¨é€ç»™å…³æ³¨çš„äººé€‰é¡¹æ‰ä¼šè°ƒç”¨ webhookã€‚\n\n## hexo æœ¬åœ°é…ç½®\n\n- package.json é…ç½®\n\n```json\n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"yuqueConfig\": {\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"ä½ çš„ä¸ªäººè·¯å¾„\",\n    \"repo\": \"ä½ çš„çŸ¥è¯†åº“åç§°\",\n    \"mdNameFormat\": \"title\",\n    \"postPath\": \"source/_yuque\",\n    \"token\": \"ä½ çš„tokenï¼Œå†ç”¨æˆ·è®¾ç½®çš„tokené‚£é‡Œæ–°å»º\",\n    \"onlyPublished\": false\n  },\n  \"scripts\": {\n    \"build\": \"hexo generate\",\n    \"clean\": \"hexo clean\",\n    \"server\": \"hexo server\",\n    \"sync\": \"yuque-hexo sync\",\n    \"deploy\": \"hexo deploy\",\n    \"start\": \"yuque-hexo clean && yuque-hexo sync\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.0\"\n  },\n  \"dependencies\": {\n    \"hexo\": \"^4.2.0\",\n    \"hexo-generator-archive\": \"^1.0.0\",\n    \"hexo-generator-category\": \"^1.0.0\",\n    \"hexo-generator-index\": \"^1.0.0\",\n    \"hexo-generator-tag\": \"^1.0.0\",\n    \"hexo-renderer-ejs\": \"^1.0.0\",\n    \"hexo-renderer-marked\": \"^2.0.0\",\n    \"hexo-renderer-stylus\": \"^1.1.0\",\n    \"hexo-server\": \"^1.0.0\",\n    \"yuque-hexo\": \"^1.6.4\"\n  }\n}\n```\n\n- å‘ 1\n\n  - login å‚æ•°è¿™ä¸ªå¡«çš„ä¸æ˜¯ url åœ°å€ï¼Œæ˜¯ url åç¼€ç±»ä¼¼ç”¨æˆ·åçš„å­—ç¬¦ä¸²\n\n- å‘ 2\n\n  - å¦‚æœä½ æœ¬æ¥æœ‰æ–‡ç« çš„è¯ï¼Œ\"postPath\": \"source/\\_yuque\",ç”¨æˆ‘è¿™ä¸ªé…ç½®ï¼Œä¸è¦ç”¨\\_postï¼Œå¦åˆ™å† yuque-hexo sync çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åˆ é™¤é‡å»ºï¼ŒåŸæ¥å†™çš„æ–‡ç« ä¹Ÿå°±æ²¡äº†ï¼Œæ‰€ä»¥ä½¿ç”¨å¦ä¸€ç§åŠæ³•ï¼Œå† coding è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ä»‹ç»äº†ã€‚\n\n## æŠŠ hexo çš„æºç  push åˆ° coding\n\nåœ¨è¯­é›€å‘å¸ƒä¸€ç¯‡æ–‡ç« ï¼Œå‘ç°æ–‡ç« åŒæ­¥è¿‡å»äº†ï¼Œå¤§åŠŸå‘Šæˆï¼\n\npsï¼š coding æœ‰æ—¶å€™ä¼šæœ‰æ„å»ºå¤±è´¥çš„é—®é¢˜ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šæ˜¯å•¥åŸå› ï¼Œä¿®æ”¹ä¸€ä¸‹æ–‡ç« å†å‘å¸ƒä¸€æ¬¡æå®šã€‚\n","source":"_posts/Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½².md","raw":"---\ntitle: Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\nurlname: zy4wle\ndate: 2020-05-10 19:28:00 +0800\ntags: []\ncategories: []\n---\n\n---\n\n\ntitle: è¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\n\ndate: 2020/4/8 20:46:25\n\ntags:\n\n- è‡ªåŠ¨æ„å»º\n\ncategories:\n- hexo\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\n# Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\n\npsï¼šå‚è€ƒæ–‡ç« ï¼š[https://www.yuque.com/u46795/blog/dlloc7](https://www.yuque.com/u46795/blog/dlloc7)\n\nä¸Šæ–‡æ‰€ç”¨çš„æ˜¯ GitHub actionï¼Œä¸è¿‡æˆ‘ä»¬ç”¨çš„æ˜¯ coding å¹³å°ï¼Œå¥½å¤„æ˜¯å›½å†…è®¿é—®é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²ç®€å•ã€‚\n\né¦–å…ˆè¦æœ‰ä¸€ä¸ª hexo åšå®¢ï¼Œæ­¤å¤„ç•¥è¿‡ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å‘ã€‚\n\n## åŸç†\n\n- coding æŒç»­é›†æˆç¼–è¯‘åšå®¢æºç æ„å»ºé™æ€æ–‡ä»¶\n- ä½¿ç”¨è…¾è®¯äº‘å‡½æ•°è°ƒç”¨ coding æ„å»ºçš„ api\n- è¯­é›€çš„ webhook åŠŸèƒ½è°ƒç”¨è…¾è®¯äº‘çš„å‡½æ•°è°ƒç”¨ã€‚\n\n## coding è‡ªåŠ¨æ„å»º hexo\n\n- æŒç»­é›†æˆ\n\nå‚è€ƒæ–‡ç« ï¼š[http://www.mamicode.com/info-detail-2922484.html](http://www.mamicode.com/info-detail-2922484.html)\n\nä»–çš„ pipeline æœ‰äº›å‘ï¼Œnode ä¸æ”¯æŒï¼Œé™„ä¸Šæˆ‘çš„é…ç½®ï¼š\n\nä¸‹é¢è¿™ä¸ªæ˜¯ç›´æ¥ç²˜è¿‡æ¥çš„ï¼Œæ–¹ä¾¿ç†è§£\n\n- ä»¤ç‰Œç”¨æˆ·åæ˜¯ï¼š`root`\n- ä»¤ç‰Œå¯†ç æ˜¯ï¼š`abcdefg`\n- é¡¹ç›®åœ°å€æ˜¯`[https://e.coding.net/test/test.git](https://e.coding.net/test/test.git)`\n\né‚£ä¹ˆæˆ‘ä»¬çš„è®¿é—®åœ°å€å°±æ˜¯`[https://root:abcdefg@e.coding.net/test/test.git](https://root:abcdefg@e.coding.net/test/test.git)`\n\n```bash\npipeline {\n  agent any\n  stages {\n    stage('hexo') {\n      steps {\n        sh 'npm install -g hexo-cli'\n      }\n    }\n    stage('æ‹‰å–ä»“åº“') {\n      steps {\n        sh 'git clone https://ä»¤ç‰Œç”¨æˆ·å:ä»¤ç‰Œå¯†ç @e.coding.net/lpdswing/hexo_blog.git .'\n        sh 'npm install hexo --save'\n        sh 'npm install yuque-hexo --save'\n        sh 'npm install hexo-deployer-git --save'\n      }\n    }\n    stage('å‘å¸ƒ') {\n      steps {\n        sh 'npm run start'\n        sh 'mv source/_yuque/* source/_posts'\n        sh 'ls source/_posts'\n        sh 'hexo clean && hexo g -d'\n\n      }\n    }\n  }\n}\n```\n\n**å‘ 1** ï¼šyuque-hexo ä¼šæŠŠæˆ‘ä»¬æœ¬æ¥çš„\\_post æ–‡ä»¶å¤¹ç›´æ¥åˆ æ‰è¦†ç›–ï¼Œå¯¼è‡´æœ¬æ¥æœ‰çš„æ–‡ç« è¢«åˆ é™¤ï¼Œæ‰€ä»¥è¿™é‡Œå†é…ç½® yuque çš„æ—¶å€™æ–‡ç« ç›®å½•ä½¿ç”¨çš„æ˜¯\\_yuque,ä¸€ä¼šä¼šä»‹ç»åˆ°ï¼Œyuque-hexo çš„é…ç½®ã€‚æ›²çº¿æ•‘å›½ï¼Œæˆ‘ä»¬å†è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ç§»åŠ¨æ–‡ç« åˆ° post æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ„å»ºé™æ€æ–‡ç« ã€‚\n\n## è…¾è®¯äº‘å‡½æ•°\n\n- ä½¿ç”¨çš„ python3.6\n\nå‚è€ƒç¬¬ä¸€ä¸ªæ–‡ç« çš„ä»£ç ï¼Œé™„ä¸Šé…ç½®ï¼š\n\n```python\n# -*- coding: utf8 -*-\nimport requests\n\ndef main_handler(event, context):\n\n\n    url = \"https://xxxxx\" # è¿™ä¸ªurlå†codingè‡ªåŠ¨æ„å»ºçš„è§¦å‘è§„åˆ™>APIè§¦å‘å“ªé‡Œå¤åˆ¶è¿‡æ¥\n\n    payload = {\"ref\": \"master\",\"envs\": []}\n    headers = {\n    'Content-Type': 'application/json',\n    }\n\t# codingçš„apiè§¦å‘ç”¨åˆ°æ˜¯http basic authéªŒè¯ï¼Œè¿™é‡Œçš„ç”¨æˆ·å¯†ç ä¹Ÿå»codingçš„é¡¹ç›®tokenæ‹·è´\n    # å¼€å‘è€…é€‰é¡¹-é¡¹ç›®ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰å°±æ–°å»ºï¼Œä»“åº“æƒé™å…¨å‹¾ä¸Š\n    response = requests.post( url, headers=headers, json = payload,auth=('ä»¤ç‰Œç”¨æˆ·å','ä»¤ç‰Œå¯†ç '))\n\n    return response.text\n```\n\n- æµ‹è¯•è…¾è®¯äº‘å‡½æ•°æˆåŠŸå°±å¯ä»¥ä¸‹ä¸€æ­¥äº†\n\n## è¯­é›€é…ç½®\n\n- å‘å¸ƒæ–‡ç« \n\næ–‡ç« å‘å¸ƒçš„æ—¶å€™å‹¾é€‰æ¨é€ç»™å…³æ³¨çš„äººé€‰é¡¹æ‰ä¼šè°ƒç”¨ webhookã€‚\n\n## hexo æœ¬åœ°é…ç½®\n\n- package.json é…ç½®\n\n```json\n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"yuqueConfig\": {\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"ä½ çš„ä¸ªäººè·¯å¾„\",\n    \"repo\": \"ä½ çš„çŸ¥è¯†åº“åç§°\",\n    \"mdNameFormat\": \"title\",\n    \"postPath\": \"source/_yuque\",\n    \"token\": \"ä½ çš„tokenï¼Œå†ç”¨æˆ·è®¾ç½®çš„tokené‚£é‡Œæ–°å»º\",\n    \"onlyPublished\": false\n  },\n  \"scripts\": {\n    \"build\": \"hexo generate\",\n    \"clean\": \"hexo clean\",\n    \"server\": \"hexo server\",\n    \"sync\": \"yuque-hexo sync\",\n    \"deploy\": \"hexo deploy\",\n    \"start\": \"yuque-hexo clean && yuque-hexo sync\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.0\"\n  },\n  \"dependencies\": {\n    \"hexo\": \"^4.2.0\",\n    \"hexo-generator-archive\": \"^1.0.0\",\n    \"hexo-generator-category\": \"^1.0.0\",\n    \"hexo-generator-index\": \"^1.0.0\",\n    \"hexo-generator-tag\": \"^1.0.0\",\n    \"hexo-renderer-ejs\": \"^1.0.0\",\n    \"hexo-renderer-marked\": \"^2.0.0\",\n    \"hexo-renderer-stylus\": \"^1.1.0\",\n    \"hexo-server\": \"^1.0.0\",\n    \"yuque-hexo\": \"^1.6.4\"\n  }\n}\n```\n\n- å‘ 1\n\n  - login å‚æ•°è¿™ä¸ªå¡«çš„ä¸æ˜¯ url åœ°å€ï¼Œæ˜¯ url åç¼€ç±»ä¼¼ç”¨æˆ·åçš„å­—ç¬¦ä¸²\n\n- å‘ 2\n\n  - å¦‚æœä½ æœ¬æ¥æœ‰æ–‡ç« çš„è¯ï¼Œ\"postPath\": \"source/\\_yuque\",ç”¨æˆ‘è¿™ä¸ªé…ç½®ï¼Œä¸è¦ç”¨\\_postï¼Œå¦åˆ™å† yuque-hexo sync çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åˆ é™¤é‡å»ºï¼ŒåŸæ¥å†™çš„æ–‡ç« ä¹Ÿå°±æ²¡äº†ï¼Œæ‰€ä»¥ä½¿ç”¨å¦ä¸€ç§åŠæ³•ï¼Œå† coding è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ä»‹ç»äº†ã€‚\n\n## æŠŠ hexo çš„æºç  push åˆ° coding\n\nåœ¨è¯­é›€å‘å¸ƒä¸€ç¯‡æ–‡ç« ï¼Œå‘ç°æ–‡ç« åŒæ­¥è¿‡å»äº†ï¼Œå¤§åŠŸå‘Šæˆï¼\n\npsï¼š coding æœ‰æ—¶å€™ä¼šæœ‰æ„å»ºå¤±è´¥çš„é—®é¢˜ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šæ˜¯å•¥åŸå› ï¼Œä¿®æ”¹ä¸€ä¸‹æ–‡ç« å†å‘å¸ƒä¸€æ¬¡æå®šã€‚\n","slug":"Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²","published":1,"updated":"2020-05-10T12:00:07.028Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fnu00013kzj70rog7ny","content":"<hr>\n<p>title: è¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²</p>\n<p>date: 2020/4/8 20:46:25</p>\n<p>tags:</p>\n<ul>\n<li>è‡ªåŠ¨æ„å»º</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>hexo</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<h1 id=\"Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ-Coding-æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\"><a href=\"#Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ-Coding-æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\" class=\"headerlink\" title=\"Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\"></a>Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²</h1><p>psï¼šå‚è€ƒæ–‡ç« ï¼š<a href=\"https://www.yuque.com/u46795/blog/dlloc7\" target=\"_blank\" rel=\"noopener\">https://www.yuque.com/u46795/blog/dlloc7</a></p>\n<p>ä¸Šæ–‡æ‰€ç”¨çš„æ˜¯ GitHub actionï¼Œä¸è¿‡æˆ‘ä»¬ç”¨çš„æ˜¯ coding å¹³å°ï¼Œå¥½å¤„æ˜¯å›½å†…è®¿é—®é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²ç®€å•ã€‚</p>\n<p>é¦–å…ˆè¦æœ‰ä¸€ä¸ª hexo åšå®¢ï¼Œæ­¤å¤„ç•¥è¿‡ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å‘ã€‚</p>\n<h2 id=\"åŸç†\"><a href=\"#åŸç†\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h2><ul>\n<li>coding æŒç»­é›†æˆç¼–è¯‘åšå®¢æºç æ„å»ºé™æ€æ–‡ä»¶</li>\n<li>ä½¿ç”¨è…¾è®¯äº‘å‡½æ•°è°ƒç”¨ coding æ„å»ºçš„ api</li>\n<li>è¯­é›€çš„ webhook åŠŸèƒ½è°ƒç”¨è…¾è®¯äº‘çš„å‡½æ•°è°ƒç”¨ã€‚</li>\n</ul>\n<h2 id=\"coding-è‡ªåŠ¨æ„å»º-hexo\"><a href=\"#coding-è‡ªåŠ¨æ„å»º-hexo\" class=\"headerlink\" title=\"coding è‡ªåŠ¨æ„å»º hexo\"></a>coding è‡ªåŠ¨æ„å»º hexo</h2><ul>\n<li>æŒç»­é›†æˆ</li>\n</ul>\n<p>å‚è€ƒæ–‡ç« ï¼š<a href=\"http://www.mamicode.com/info-detail-2922484.html\" target=\"_blank\" rel=\"noopener\">http://www.mamicode.com/info-detail-2922484.html</a></p>\n<p>ä»–çš„ pipeline æœ‰äº›å‘ï¼Œnode ä¸æ”¯æŒï¼Œé™„ä¸Šæˆ‘çš„é…ç½®ï¼š</p>\n<p>ä¸‹é¢è¿™ä¸ªæ˜¯ç›´æ¥ç²˜è¿‡æ¥çš„ï¼Œæ–¹ä¾¿ç†è§£</p>\n<ul>\n<li>ä»¤ç‰Œç”¨æˆ·åæ˜¯ï¼š<code>root</code></li>\n<li>ä»¤ç‰Œå¯†ç æ˜¯ï¼š<code>abcdefg</code></li>\n<li>é¡¹ç›®åœ°å€æ˜¯<code>[https://e.coding.net/test/test.git](https://e.coding.net/test/test.git)</code></li>\n</ul>\n<p>é‚£ä¹ˆæˆ‘ä»¬çš„è®¿é—®åœ°å€å°±æ˜¯<code>[https://root:abcdefg@e.coding.net/test/test.git](https://root:abcdefg@e.coding.net/test/test.git)</code></p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipeline {</span><br><span class=\"line\">  agent any</span><br><span class=\"line\">  stages {</span><br><span class=\"line\">    stage(<span class=\"string\">'hexo'</span>) {</span><br><span class=\"line\">      steps {</span><br><span class=\"line\">        sh <span class=\"string\">'npm install -g hexo-cli'</span></span><br><span class=\"line\">      }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    stage(<span class=\"string\">'æ‹‰å–ä»“åº“'</span>) {</span><br><span class=\"line\">      steps {</span><br><span class=\"line\">        sh <span class=\"string\">'git clone https://ä»¤ç‰Œç”¨æˆ·å:ä»¤ç‰Œå¯†ç @e.coding.net/lpdswing/hexo_blog.git .'</span></span><br><span class=\"line\">        sh <span class=\"string\">'npm install hexo --save'</span></span><br><span class=\"line\">        sh <span class=\"string\">'npm install yuque-hexo --save'</span></span><br><span class=\"line\">        sh <span class=\"string\">'npm install hexo-deployer-git --save'</span></span><br><span class=\"line\">      }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    stage(<span class=\"string\">'å‘å¸ƒ'</span>) {</span><br><span class=\"line\">      steps {</span><br><span class=\"line\">        sh <span class=\"string\">'npm run start'</span></span><br><span class=\"line\">        sh <span class=\"string\">'mv source/_yuque/* source/_posts'</span></span><br><span class=\"line\">        sh <span class=\"string\">'ls source/_posts'</span></span><br><span class=\"line\">        sh <span class=\"string\">'hexo clean &amp;&amp; hexo g -d'</span></span><br><span class=\"line\"></span><br><span class=\"line\">      }</span><br><span class=\"line\">    }</span><br><span class=\"line\">  }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n\n<p><strong>å‘ 1</strong> ï¼šyuque-hexo ä¼šæŠŠæˆ‘ä»¬æœ¬æ¥çš„_post æ–‡ä»¶å¤¹ç›´æ¥åˆ æ‰è¦†ç›–ï¼Œå¯¼è‡´æœ¬æ¥æœ‰çš„æ–‡ç« è¢«åˆ é™¤ï¼Œæ‰€ä»¥è¿™é‡Œå†é…ç½® yuque çš„æ—¶å€™æ–‡ç« ç›®å½•ä½¿ç”¨çš„æ˜¯_yuque,ä¸€ä¼šä¼šä»‹ç»åˆ°ï¼Œyuque-hexo çš„é…ç½®ã€‚æ›²çº¿æ•‘å›½ï¼Œæˆ‘ä»¬å†è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ç§»åŠ¨æ–‡ç« åˆ° post æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ„å»ºé™æ€æ–‡ç« ã€‚</p>\n<h2 id=\"è…¾è®¯äº‘å‡½æ•°\"><a href=\"#è…¾è®¯äº‘å‡½æ•°\" class=\"headerlink\" title=\"è…¾è®¯äº‘å‡½æ•°\"></a>è…¾è®¯äº‘å‡½æ•°</h2><ul>\n<li>ä½¿ç”¨çš„ python3.6</li>\n</ul>\n<p>å‚è€ƒç¬¬ä¸€ä¸ªæ–‡ç« çš„ä»£ç ï¼Œé™„ä¸Šé…ç½®ï¼š</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main_handler</span><span class=\"params\">(event, context)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    url = <span class=\"string\">\"https://xxxxx\"</span> <span class=\"comment\"># è¿™ä¸ªurlå†codingè‡ªåŠ¨æ„å»ºçš„è§¦å‘è§„åˆ™&gt;APIè§¦å‘å“ªé‡Œå¤åˆ¶è¿‡æ¥</span></span><br><span class=\"line\"></span><br><span class=\"line\">    payload = {<span class=\"string\">\"ref\"</span>: <span class=\"string\">\"master\"</span>,<span class=\"string\">\"envs\"</span>: []}</span><br><span class=\"line\">    headers = {</span><br><span class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">    }</span><br><span class=\"line\">\t<span class=\"comment\"># codingçš„apiè§¦å‘ç”¨åˆ°æ˜¯http basic authéªŒè¯ï¼Œè¿™é‡Œçš„ç”¨æˆ·å¯†ç ä¹Ÿå»codingçš„é¡¹ç›®tokenæ‹·è´</span></span><br><span class=\"line\">    <span class=\"comment\"># å¼€å‘è€…é€‰é¡¹-é¡¹ç›®ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰å°±æ–°å»ºï¼Œä»“åº“æƒé™å…¨å‹¾ä¸Š</span></span><br><span class=\"line\">    response = requests.post( url, headers=headers, json = payload,auth=(<span class=\"string\">'ä»¤ç‰Œç”¨æˆ·å'</span>,<span class=\"string\">'ä»¤ç‰Œå¯†ç '</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.text</span><br></pre></td></tr></tbody></table></figure>\n\n<ul>\n<li>æµ‹è¯•è…¾è®¯äº‘å‡½æ•°æˆåŠŸå°±å¯ä»¥ä¸‹ä¸€æ­¥äº†</li>\n</ul>\n<h2 id=\"è¯­é›€é…ç½®\"><a href=\"#è¯­é›€é…ç½®\" class=\"headerlink\" title=\"è¯­é›€é…ç½®\"></a>è¯­é›€é…ç½®</h2><ul>\n<li>å‘å¸ƒæ–‡ç« </li>\n</ul>\n<p>æ–‡ç« å‘å¸ƒçš„æ—¶å€™å‹¾é€‰æ¨é€ç»™å…³æ³¨çš„äººé€‰é¡¹æ‰ä¼šè°ƒç”¨ webhookã€‚</p>\n<h2 id=\"hexo-æœ¬åœ°é…ç½®\"><a href=\"#hexo-æœ¬åœ°é…ç½®\" class=\"headerlink\" title=\"hexo æœ¬åœ°é…ç½®\"></a>hexo æœ¬åœ°é…ç½®</h2><ul>\n<li>package.json é…ç½®</li>\n</ul>\n<figure class=\"highlight json\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">{</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"hexo-site\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"0.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"private\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"yuqueConfig\"</span>: {</span><br><span class=\"line\">    <span class=\"attr\">\"baseUrl\"</span>: <span class=\"string\">\"https://www.yuque.com/api/v2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"login\"</span>: <span class=\"string\">\"ä½ çš„ä¸ªäººè·¯å¾„\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"repo\"</span>: <span class=\"string\">\"ä½ çš„çŸ¥è¯†åº“åç§°\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mdNameFormat\"</span>: <span class=\"string\">\"title\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"postPath\"</span>: <span class=\"string\">\"source/_yuque\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"token\"</span>: <span class=\"string\">\"ä½ çš„tokenï¼Œå†ç”¨æˆ·è®¾ç½®çš„tokené‚£é‡Œæ–°å»º\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"onlyPublished\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">  },</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: {</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"hexo generate\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"clean\"</span>: <span class=\"string\">\"hexo clean\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"server\"</span>: <span class=\"string\">\"hexo server\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"sync\"</span>: <span class=\"string\">\"yuque-hexo sync\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"deploy\"</span>: <span class=\"string\">\"hexo deploy\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"yuque-hexo clean &amp;&amp; yuque-hexo sync\"</span></span><br><span class=\"line\">  },</span><br><span class=\"line\">  <span class=\"attr\">\"hexo\"</span>: {</span><br><span class=\"line\">    <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"4.2.0\"</span></span><br><span class=\"line\">  },</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: {</span><br><span class=\"line\">    <span class=\"attr\">\"hexo\"</span>: <span class=\"string\">\"^4.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-archive\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-category\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-index\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-tag\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-renderer-ejs\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-renderer-marked\"</span>: <span class=\"string\">\"^2.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-renderer-stylus\"</span>: <span class=\"string\">\"^1.1.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-server\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"yuque-hexo\"</span>: <span class=\"string\">\"^1.6.4\"</span></span><br><span class=\"line\">  }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n\n<ul>\n<li><p>å‘ 1</p>\n<ul>\n<li>login å‚æ•°è¿™ä¸ªå¡«çš„ä¸æ˜¯ url åœ°å€ï¼Œæ˜¯ url åç¼€ç±»ä¼¼ç”¨æˆ·åçš„å­—ç¬¦ä¸²</li>\n</ul>\n</li>\n<li><p>å‘ 2</p>\n<ul>\n<li>å¦‚æœä½ æœ¬æ¥æœ‰æ–‡ç« çš„è¯ï¼Œâ€postPathâ€: â€œsource/_yuqueâ€,ç”¨æˆ‘è¿™ä¸ªé…ç½®ï¼Œä¸è¦ç”¨_postï¼Œå¦åˆ™å† yuque-hexo sync çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åˆ é™¤é‡å»ºï¼ŒåŸæ¥å†™çš„æ–‡ç« ä¹Ÿå°±æ²¡äº†ï¼Œæ‰€ä»¥ä½¿ç”¨å¦ä¸€ç§åŠæ³•ï¼Œå† coding è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ä»‹ç»äº†ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æŠŠ-hexo-çš„æºç -push-åˆ°-coding\"><a href=\"#æŠŠ-hexo-çš„æºç -push-åˆ°-coding\" class=\"headerlink\" title=\"æŠŠ hexo çš„æºç  push åˆ° coding\"></a>æŠŠ hexo çš„æºç  push åˆ° coding</h2><p>åœ¨è¯­é›€å‘å¸ƒä¸€ç¯‡æ–‡ç« ï¼Œå‘ç°æ–‡ç« åŒæ­¥è¿‡å»äº†ï¼Œå¤§åŠŸå‘Šæˆï¼</p>\n<p>psï¼š coding æœ‰æ—¶å€™ä¼šæœ‰æ„å»ºå¤±è´¥çš„é—®é¢˜ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šæ˜¯å•¥åŸå› ï¼Œä¿®æ”¹ä¸€ä¸‹æ–‡ç« å†å‘å¸ƒä¸€æ¬¡æå®šã€‚</p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<hr>\n<p>title: è¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²</p>\n<p>date: 2020/4/8 20:46:25</p>\n<p>tags:</p>\n<ul>\n<li>è‡ªåŠ¨æ„å»º</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>hexo</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<h1 id=\"Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ-Coding-æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\"><a href=\"#Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ-Coding-æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\" class=\"headerlink\" title=\"Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²\"></a>Hexoï¼šè¯­é›€äº‘ç«¯å†™ä½œ Coding æŒç»­é›†æˆå®ç°è‡ªåŠ¨éƒ¨ç½²</h1><p>psï¼šå‚è€ƒæ–‡ç« ï¼š<a href=\"https://www.yuque.com/u46795/blog/dlloc7\" target=\"_blank\" rel=\"noopener\">https://www.yuque.com/u46795/blog/dlloc7</a></p>\n<p>ä¸Šæ–‡æ‰€ç”¨çš„æ˜¯ GitHub actionï¼Œä¸è¿‡æˆ‘ä»¬ç”¨çš„æ˜¯ coding å¹³å°ï¼Œå¥½å¤„æ˜¯å›½å†…è®¿é—®é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²ç®€å•ã€‚</p>\n<p>é¦–å…ˆè¦æœ‰ä¸€ä¸ª hexo åšå®¢ï¼Œæ­¤å¤„ç•¥è¿‡ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å‘ã€‚</p>\n<h2 id=\"åŸç†\"><a href=\"#åŸç†\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h2><ul>\n<li>coding æŒç»­é›†æˆç¼–è¯‘åšå®¢æºç æ„å»ºé™æ€æ–‡ä»¶</li>\n<li>ä½¿ç”¨è…¾è®¯äº‘å‡½æ•°è°ƒç”¨ coding æ„å»ºçš„ api</li>\n<li>è¯­é›€çš„ webhook åŠŸèƒ½è°ƒç”¨è…¾è®¯äº‘çš„å‡½æ•°è°ƒç”¨ã€‚</li>\n</ul>\n<h2 id=\"coding-è‡ªåŠ¨æ„å»º-hexo\"><a href=\"#coding-è‡ªåŠ¨æ„å»º-hexo\" class=\"headerlink\" title=\"coding è‡ªåŠ¨æ„å»º hexo\"></a>coding è‡ªåŠ¨æ„å»º hexo</h2><ul>\n<li>æŒç»­é›†æˆ</li>\n</ul>\n<p>å‚è€ƒæ–‡ç« ï¼š<a href=\"http://www.mamicode.com/info-detail-2922484.html\" target=\"_blank\" rel=\"noopener\">http://www.mamicode.com/info-detail-2922484.html</a></p>\n<p>ä»–çš„ pipeline æœ‰äº›å‘ï¼Œnode ä¸æ”¯æŒï¼Œé™„ä¸Šæˆ‘çš„é…ç½®ï¼š</p>\n<p>ä¸‹é¢è¿™ä¸ªæ˜¯ç›´æ¥ç²˜è¿‡æ¥çš„ï¼Œæ–¹ä¾¿ç†è§£</p>\n<ul>\n<li>ä»¤ç‰Œç”¨æˆ·åæ˜¯ï¼š<code>root</code></li>\n<li>ä»¤ç‰Œå¯†ç æ˜¯ï¼š<code>abcdefg</code></li>\n<li>é¡¹ç›®åœ°å€æ˜¯<code>[https://e.coding.net/test/test.git](https://e.coding.net/test/test.git)</code></li>\n</ul>\n<p>é‚£ä¹ˆæˆ‘ä»¬çš„è®¿é—®åœ°å€å°±æ˜¯<code>[https://root:abcdefg@e.coding.net/test/test.git](https://root:abcdefg@e.coding.net/test/test.git)</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipeline &#123;</span><br><span class=\"line\">  agent any</span><br><span class=\"line\">  stages &#123;</span><br><span class=\"line\">    stage(<span class=\"string\">'hexo'</span>) &#123;</span><br><span class=\"line\">      steps &#123;</span><br><span class=\"line\">        sh <span class=\"string\">'npm install -g hexo-cli'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stage(<span class=\"string\">'æ‹‰å–ä»“åº“'</span>) &#123;</span><br><span class=\"line\">      steps &#123;</span><br><span class=\"line\">        sh <span class=\"string\">'git clone https://ä»¤ç‰Œç”¨æˆ·å:ä»¤ç‰Œå¯†ç @e.coding.net/lpdswing/hexo_blog.git .'</span></span><br><span class=\"line\">        sh <span class=\"string\">'npm install hexo --save'</span></span><br><span class=\"line\">        sh <span class=\"string\">'npm install yuque-hexo --save'</span></span><br><span class=\"line\">        sh <span class=\"string\">'npm install hexo-deployer-git --save'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stage(<span class=\"string\">'å‘å¸ƒ'</span>) &#123;</span><br><span class=\"line\">      steps &#123;</span><br><span class=\"line\">        sh <span class=\"string\">'npm run start'</span></span><br><span class=\"line\">        sh <span class=\"string\">'mv source/_yuque/* source/_posts'</span></span><br><span class=\"line\">        sh <span class=\"string\">'ls source/_posts'</span></span><br><span class=\"line\">        sh <span class=\"string\">'hexo clean &amp;&amp; hexo g -d'</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å‘ 1</strong> ï¼šyuque-hexo ä¼šæŠŠæˆ‘ä»¬æœ¬æ¥çš„_post æ–‡ä»¶å¤¹ç›´æ¥åˆ æ‰è¦†ç›–ï¼Œå¯¼è‡´æœ¬æ¥æœ‰çš„æ–‡ç« è¢«åˆ é™¤ï¼Œæ‰€ä»¥è¿™é‡Œå†é…ç½® yuque çš„æ—¶å€™æ–‡ç« ç›®å½•ä½¿ç”¨çš„æ˜¯_yuque,ä¸€ä¼šä¼šä»‹ç»åˆ°ï¼Œyuque-hexo çš„é…ç½®ã€‚æ›²çº¿æ•‘å›½ï¼Œæˆ‘ä»¬å†è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ç§»åŠ¨æ–‡ç« åˆ° post æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ„å»ºé™æ€æ–‡ç« ã€‚</p>\n<h2 id=\"è…¾è®¯äº‘å‡½æ•°\"><a href=\"#è…¾è®¯äº‘å‡½æ•°\" class=\"headerlink\" title=\"è…¾è®¯äº‘å‡½æ•°\"></a>è…¾è®¯äº‘å‡½æ•°</h2><ul>\n<li>ä½¿ç”¨çš„ python3.6</li>\n</ul>\n<p>å‚è€ƒç¬¬ä¸€ä¸ªæ–‡ç« çš„ä»£ç ï¼Œé™„ä¸Šé…ç½®ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main_handler</span><span class=\"params\">(event, context)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    url = <span class=\"string\">\"https://xxxxx\"</span> <span class=\"comment\"># è¿™ä¸ªurlå†codingè‡ªåŠ¨æ„å»ºçš„è§¦å‘è§„åˆ™&gt;APIè§¦å‘å“ªé‡Œå¤åˆ¶è¿‡æ¥</span></span><br><span class=\"line\"></span><br><span class=\"line\">    payload = &#123;<span class=\"string\">\"ref\"</span>: <span class=\"string\">\"master\"</span>,<span class=\"string\">\"envs\"</span>: []&#125;</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\"># codingçš„apiè§¦å‘ç”¨åˆ°æ˜¯http basic authéªŒè¯ï¼Œè¿™é‡Œçš„ç”¨æˆ·å¯†ç ä¹Ÿå»codingçš„é¡¹ç›®tokenæ‹·è´</span></span><br><span class=\"line\">    <span class=\"comment\"># å¼€å‘è€…é€‰é¡¹-é¡¹ç›®ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰å°±æ–°å»ºï¼Œä»“åº“æƒé™å…¨å‹¾ä¸Š</span></span><br><span class=\"line\">    response = requests.post( url, headers=headers, json = payload,auth=(<span class=\"string\">'ä»¤ç‰Œç”¨æˆ·å'</span>,<span class=\"string\">'ä»¤ç‰Œå¯†ç '</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.text</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•è…¾è®¯äº‘å‡½æ•°æˆåŠŸå°±å¯ä»¥ä¸‹ä¸€æ­¥äº†</li>\n</ul>\n<h2 id=\"è¯­é›€é…ç½®\"><a href=\"#è¯­é›€é…ç½®\" class=\"headerlink\" title=\"è¯­é›€é…ç½®\"></a>è¯­é›€é…ç½®</h2><ul>\n<li>å‘å¸ƒæ–‡ç« </li>\n</ul>\n<p>æ–‡ç« å‘å¸ƒçš„æ—¶å€™å‹¾é€‰æ¨é€ç»™å…³æ³¨çš„äººé€‰é¡¹æ‰ä¼šè°ƒç”¨ webhookã€‚</p>\n<h2 id=\"hexo-æœ¬åœ°é…ç½®\"><a href=\"#hexo-æœ¬åœ°é…ç½®\" class=\"headerlink\" title=\"hexo æœ¬åœ°é…ç½®\"></a>hexo æœ¬åœ°é…ç½®</h2><ul>\n<li>package.json é…ç½®</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"hexo-site\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"0.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"private\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"yuqueConfig\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"baseUrl\"</span>: <span class=\"string\">\"https://www.yuque.com/api/v2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"login\"</span>: <span class=\"string\">\"ä½ çš„ä¸ªäººè·¯å¾„\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"repo\"</span>: <span class=\"string\">\"ä½ çš„çŸ¥è¯†åº“åç§°\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mdNameFormat\"</span>: <span class=\"string\">\"title\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"postPath\"</span>: <span class=\"string\">\"source/_yuque\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"token\"</span>: <span class=\"string\">\"ä½ çš„tokenï¼Œå†ç”¨æˆ·è®¾ç½®çš„tokené‚£é‡Œæ–°å»º\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"onlyPublished\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"hexo generate\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"clean\"</span>: <span class=\"string\">\"hexo clean\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"server\"</span>: <span class=\"string\">\"hexo server\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"sync\"</span>: <span class=\"string\">\"yuque-hexo sync\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"deploy\"</span>: <span class=\"string\">\"hexo deploy\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"yuque-hexo clean &amp;&amp; yuque-hexo sync\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"hexo\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"4.2.0\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"hexo\"</span>: <span class=\"string\">\"^4.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-archive\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-category\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-index\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-generator-tag\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-renderer-ejs\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-renderer-marked\"</span>: <span class=\"string\">\"^2.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-renderer-stylus\"</span>: <span class=\"string\">\"^1.1.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"hexo-server\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"yuque-hexo\"</span>: <span class=\"string\">\"^1.6.4\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å‘ 1</p>\n<ul>\n<li>login å‚æ•°è¿™ä¸ªå¡«çš„ä¸æ˜¯ url åœ°å€ï¼Œæ˜¯ url åç¼€ç±»ä¼¼ç”¨æˆ·åçš„å­—ç¬¦ä¸²</li>\n</ul>\n</li>\n<li><p>å‘ 2</p>\n<ul>\n<li>å¦‚æœä½ æœ¬æ¥æœ‰æ–‡ç« çš„è¯ï¼Œâ€postPathâ€: â€œsource/_yuqueâ€,ç”¨æˆ‘è¿™ä¸ªé…ç½®ï¼Œä¸è¦ç”¨_postï¼Œå¦åˆ™å† yuque-hexo sync çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åˆ é™¤é‡å»ºï¼ŒåŸæ¥å†™çš„æ–‡ç« ä¹Ÿå°±æ²¡äº†ï¼Œæ‰€ä»¥ä½¿ç”¨å¦ä¸€ç§åŠæ³•ï¼Œå† coding è‡ªåŠ¨æ„å»ºçš„æ—¶å€™ä»‹ç»äº†ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æŠŠ-hexo-çš„æºç -push-åˆ°-coding\"><a href=\"#æŠŠ-hexo-çš„æºç -push-åˆ°-coding\" class=\"headerlink\" title=\"æŠŠ hexo çš„æºç  push åˆ° coding\"></a>æŠŠ hexo çš„æºç  push åˆ° coding</h2><p>åœ¨è¯­é›€å‘å¸ƒä¸€ç¯‡æ–‡ç« ï¼Œå‘ç°æ–‡ç« åŒæ­¥è¿‡å»äº†ï¼Œå¤§åŠŸå‘Šæˆï¼</p>\n<p>psï¼š coding æœ‰æ—¶å€™ä¼šæœ‰æ„å»ºå¤±è´¥çš„é—®é¢˜ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šæ˜¯å•¥åŸå› ï¼Œä¿®æ”¹ä¸€ä¸‹æ–‡ç« å†å‘å¸ƒä¸€æ¬¡æå®šã€‚</p>\n"},{"title":"Pythonç®—æ³•ä¹‹æ ˆ","urlname":"ul55iv","date":"2020-05-10T11:40:16.000Z","_content":"\n---\n\n\ntitle: Pythonç®—æ³•ä¹‹æ ˆ\n\ndate: 2019-04-24 16:10:15\n\ntags:\n\n- Python\n\ncategories:\n- Python\n- ç®—æ³•\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\næ ˆ(stack)åˆç§°ä¹‹ä¸ºå †æ ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœ‰åºè¡¨ï¼Œå…¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œè¿ä½œã€‚\n\n## æ ˆçš„æ¥å£\n\nlist å°±ç±»ä¼¼ä¸€ä¸ªæ ˆ\n\n| æ¥å£      | list å¯¹åº”æ–¹æ³• |\n| --------- | ------------- |\n| push()    | append()      |\n| pop()     | pop()         |\n| isEmpty() | not list      |\n| length()  | len()         |\n| getTop()  | list[-1]      |\n\n## åº”ç”¨\n\n- å‡å¦‚è¡¨è¾¾å¼ä¸­å…è®¸åŒ…å«ä¸‰ä¸­æ‹¬å·`()`ã€`[]`ã€`{}`ï¼Œå…¶åµŒå¥—é¡ºåºæ˜¯ä»»æ„çš„ï¼Œä¾‹å¦‚ï¼š\n\n`{()[]}`\n\né”™è¯¯çš„æ ¼å¼å¦‚:\n\n> [(]),[()),(()}\n\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œæ‹¬å·åŒ¹é…æ˜¯å¦æ­£ç¡®\n\n- æ€è·¯\n\nåˆ›å»ºä¸€ä¸ªç©ºæ ˆï¼Œç”¨æ¥å­˜å‚¨å°šæœªæ‰¾åˆ°çš„å·¦æ‹¬å·ï¼›\n\nä¾¿åˆ©å­—ç¬¦ä¸²ï¼Œé‡åˆ°å·¦æ‹¬å·åˆ™å‹æ ˆï¼Œé‡åˆ°å³æ‹¬å·åˆ™å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·è¿›è¡ŒåŒ¹é…ï¼›\n\nåœ¨ç¬¬äºŒæ­¥éª¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç©ºæ ˆæƒ…å†µä¸‹é‡åˆ°å³æ‹¬å·ï¼Œè¯´æ˜ç¼ºå°‘å·¦æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›\n\nåœ¨ç¬¬äºŒæ­¥éª¤éå†ç»“æŸæ—¶ï¼Œæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼ºå°‘å³æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›\n\n- ä»£ç \n\n```python\nLEFT = {'(', '[', '{'}\nRIGHT = {')', ']', '}'}\n\n\ndef match(expr):\n    '''\n    :param expr : str\n    :return bool\n    '''\n    stack = []\n    for brackets in expr:\n        if brackets in LEFT:\n            stack.append(brackets) # å·¦æ‹¬å·å…¥æ ˆ\n        elif brackets in RIGHT:\n            if not stack or not 1 <= ord(brackets) - ord(stack[-1]) <=2:\n                return False\n            stack.pop()\n    return not stack\n```\n\n## æ‹“å±•\n\næ£€æµ‹ä¸€æ®µä»£ç çš„æ‹¬å·æ˜¯å¦æ­£ç¡®\n\n- ä»£ç \n\n```python\nimport re\n\nLEFT = {'(', '[', '{'}\nRIGHT = {')', ']', '}'}\n\ndef get_brackets(s):\n    '''è·å–æ‹¬å·'''\n    result = ''.join(re.findall(r'[\\(\\)\\[\\]\\{\\}]',s))\n    return result\n\ndef match(expr):\n    '''\n    :param expr : str\n    :return bool\n    '''\n    stack = []\n    for brackets in expr:\n        if brackets in LEFT:\n            stack.append(brackets) # å·¦æ‹¬å·å…¥æ ˆ\n        elif brackets in RIGHT:\n            if not stack or not 1 <= ord(brackets) - ord(stack[-1]) <=2:\n                return False\n            stack.pop()\n    return not stack\n\n\n\nif __name__ == \"__main__\":\n    s = '''\n\n    function myFunction(x, y) {\n    if (y === undefined) {\n          y = 0;\n    } (\n}\n    '''\n    expr = get_brackets(s)\n    print(expr)    # (){(){}(}\n    print(match(expr)) # False\n```\n","source":"_posts/Pythonç®—æ³•ä¹‹æ ˆ.md","raw":"---\ntitle: Pythonç®—æ³•ä¹‹æ ˆ\nurlname: ul55iv\ndate: 2020-05-10 19:40:16 +0800\ntags: []\ncategories: []\n---\n\n---\n\n\ntitle: Pythonç®—æ³•ä¹‹æ ˆ\n\ndate: 2019-04-24 16:10:15\n\ntags:\n\n- Python\n\ncategories:\n- Python\n- ç®—æ³•\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\næ ˆ(stack)åˆç§°ä¹‹ä¸ºå †æ ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœ‰åºè¡¨ï¼Œå…¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œè¿ä½œã€‚\n\n## æ ˆçš„æ¥å£\n\nlist å°±ç±»ä¼¼ä¸€ä¸ªæ ˆ\n\n| æ¥å£      | list å¯¹åº”æ–¹æ³• |\n| --------- | ------------- |\n| push()    | append()      |\n| pop()     | pop()         |\n| isEmpty() | not list      |\n| length()  | len()         |\n| getTop()  | list[-1]      |\n\n## åº”ç”¨\n\n- å‡å¦‚è¡¨è¾¾å¼ä¸­å…è®¸åŒ…å«ä¸‰ä¸­æ‹¬å·`()`ã€`[]`ã€`{}`ï¼Œå…¶åµŒå¥—é¡ºåºæ˜¯ä»»æ„çš„ï¼Œä¾‹å¦‚ï¼š\n\n`{()[]}`\n\né”™è¯¯çš„æ ¼å¼å¦‚:\n\n> [(]),[()),(()}\n\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œæ‹¬å·åŒ¹é…æ˜¯å¦æ­£ç¡®\n\n- æ€è·¯\n\nåˆ›å»ºä¸€ä¸ªç©ºæ ˆï¼Œç”¨æ¥å­˜å‚¨å°šæœªæ‰¾åˆ°çš„å·¦æ‹¬å·ï¼›\n\nä¾¿åˆ©å­—ç¬¦ä¸²ï¼Œé‡åˆ°å·¦æ‹¬å·åˆ™å‹æ ˆï¼Œé‡åˆ°å³æ‹¬å·åˆ™å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·è¿›è¡ŒåŒ¹é…ï¼›\n\nåœ¨ç¬¬äºŒæ­¥éª¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç©ºæ ˆæƒ…å†µä¸‹é‡åˆ°å³æ‹¬å·ï¼Œè¯´æ˜ç¼ºå°‘å·¦æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›\n\nåœ¨ç¬¬äºŒæ­¥éª¤éå†ç»“æŸæ—¶ï¼Œæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼ºå°‘å³æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›\n\n- ä»£ç \n\n```python\nLEFT = {'(', '[', '{'}\nRIGHT = {')', ']', '}'}\n\n\ndef match(expr):\n    '''\n    :param expr : str\n    :return bool\n    '''\n    stack = []\n    for brackets in expr:\n        if brackets in LEFT:\n            stack.append(brackets) # å·¦æ‹¬å·å…¥æ ˆ\n        elif brackets in RIGHT:\n            if not stack or not 1 <= ord(brackets) - ord(stack[-1]) <=2:\n                return False\n            stack.pop()\n    return not stack\n```\n\n## æ‹“å±•\n\næ£€æµ‹ä¸€æ®µä»£ç çš„æ‹¬å·æ˜¯å¦æ­£ç¡®\n\n- ä»£ç \n\n```python\nimport re\n\nLEFT = {'(', '[', '{'}\nRIGHT = {')', ']', '}'}\n\ndef get_brackets(s):\n    '''è·å–æ‹¬å·'''\n    result = ''.join(re.findall(r'[\\(\\)\\[\\]\\{\\}]',s))\n    return result\n\ndef match(expr):\n    '''\n    :param expr : str\n    :return bool\n    '''\n    stack = []\n    for brackets in expr:\n        if brackets in LEFT:\n            stack.append(brackets) # å·¦æ‹¬å·å…¥æ ˆ\n        elif brackets in RIGHT:\n            if not stack or not 1 <= ord(brackets) - ord(stack[-1]) <=2:\n                return False\n            stack.pop()\n    return not stack\n\n\n\nif __name__ == \"__main__\":\n    s = '''\n\n    function myFunction(x, y) {\n    if (y === undefined) {\n          y = 0;\n    } (\n}\n    '''\n    expr = get_brackets(s)\n    print(expr)    # (){(){}(}\n    print(match(expr)) # False\n```\n","slug":"Pythonç®—æ³•ä¹‹æ ˆ","published":1,"updated":"2020-05-10T12:00:06.860Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fny00033kzj2u3wex2u","content":"<hr>\n<p>title: Pythonç®—æ³•ä¹‹æ ˆ</p>\n<p>date: 2019-04-24 16:10:15</p>\n<p>tags:</p>\n<ul>\n<li>Python</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>Python</li>\n<li>ç®—æ³•</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<p>æ ˆ(stack)åˆç§°ä¹‹ä¸ºå †æ ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœ‰åºè¡¨ï¼Œå…¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œè¿ä½œã€‚</p>\n<h2 id=\"æ ˆçš„æ¥å£\"><a href=\"#æ ˆçš„æ¥å£\" class=\"headerlink\" title=\"æ ˆçš„æ¥å£\"></a>æ ˆçš„æ¥å£</h2><p>list å°±ç±»ä¼¼ä¸€ä¸ªæ ˆ</p>\n<table>\n<thead>\n<tr>\n<th>æ¥å£</th>\n<th>list å¯¹åº”æ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>push()</td>\n<td>append()</td>\n</tr>\n<tr>\n<td>pop()</td>\n<td>pop()</td>\n</tr>\n<tr>\n<td>isEmpty()</td>\n<td>not list</td>\n</tr>\n<tr>\n<td>length()</td>\n<td>len()</td>\n</tr>\n<tr>\n<td>getTop()</td>\n<td>list[-1]</td>\n</tr>\n</tbody></table>\n<h2 id=\"åº”ç”¨\"><a href=\"#åº”ç”¨\" class=\"headerlink\" title=\"åº”ç”¨\"></a>åº”ç”¨</h2><ul>\n<li>å‡å¦‚è¡¨è¾¾å¼ä¸­å…è®¸åŒ…å«ä¸‰ä¸­æ‹¬å·<code>()</code>ã€<code>[]</code>ã€<code>{}</code>ï¼Œå…¶åµŒå¥—é¡ºåºæ˜¯ä»»æ„çš„ï¼Œä¾‹å¦‚ï¼š</li>\n</ul>\n<p><code>{()[]}</code></p>\n<p>é”™è¯¯çš„æ ¼å¼å¦‚:</p>\n<blockquote>\n<p>[(]),[()),(()}</p>\n</blockquote>\n<p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œæ‹¬å·åŒ¹é…æ˜¯å¦æ­£ç¡®</p>\n<ul>\n<li>æ€è·¯</li>\n</ul>\n<p>åˆ›å»ºä¸€ä¸ªç©ºæ ˆï¼Œç”¨æ¥å­˜å‚¨å°šæœªæ‰¾åˆ°çš„å·¦æ‹¬å·ï¼›</p>\n<p>ä¾¿åˆ©å­—ç¬¦ä¸²ï¼Œé‡åˆ°å·¦æ‹¬å·åˆ™å‹æ ˆï¼Œé‡åˆ°å³æ‹¬å·åˆ™å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·è¿›è¡ŒåŒ¹é…ï¼›</p>\n<p>åœ¨ç¬¬äºŒæ­¥éª¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç©ºæ ˆæƒ…å†µä¸‹é‡åˆ°å³æ‹¬å·ï¼Œè¯´æ˜ç¼ºå°‘å·¦æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›</p>\n<p>åœ¨ç¬¬äºŒæ­¥éª¤éå†ç»“æŸæ—¶ï¼Œæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼ºå°‘å³æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›</p>\n<ul>\n<li>ä»£ç </li>\n</ul>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LEFT = {<span class=\"string\">'('</span>, <span class=\"string\">'['</span>, <span class=\"string\">'{'</span>}</span><br><span class=\"line\">RIGHT = {<span class=\"string\">')'</span>, <span class=\"string\">']'</span>, <span class=\"string\">'}'</span>}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">match</span><span class=\"params\">(expr)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">    :param expr : str</span></span><br><span class=\"line\"><span class=\"string\">    :return bool</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    stack = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> brackets <span class=\"keyword\">in</span> expr:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> brackets <span class=\"keyword\">in</span> LEFT:</span><br><span class=\"line\">            stack.append(brackets) <span class=\"comment\"># å·¦æ‹¬å·å…¥æ ˆ</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> brackets <span class=\"keyword\">in</span> RIGHT:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> stack <span class=\"keyword\">or</span> <span class=\"keyword\">not</span> <span class=\"number\">1</span> &lt;= ord(brackets) - ord(stack[<span class=\"number\">-1</span>]) &lt;=<span class=\"number\">2</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">            stack.pop()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">not</span> stack</span><br></pre></td></tr></tbody></table></figure>\n\n<h2 id=\"æ‹“å±•\"><a href=\"#æ‹“å±•\" class=\"headerlink\" title=\"æ‹“å±•\"></a>æ‹“å±•</h2><p>æ£€æµ‹ä¸€æ®µä»£ç çš„æ‹¬å·æ˜¯å¦æ­£ç¡®</p>\n<ul>\n<li>ä»£ç </li>\n</ul>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"></span><br><span class=\"line\">LEFT = {<span class=\"string\">'('</span>, <span class=\"string\">'['</span>, <span class=\"string\">'{'</span>}</span><br><span class=\"line\">RIGHT = {<span class=\"string\">')'</span>, <span class=\"string\">']'</span>, <span class=\"string\">'}'</span>}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_brackets</span><span class=\"params\">(s)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''è·å–æ‹¬å·'''</span></span><br><span class=\"line\">    result = <span class=\"string\">''</span>.join(re.findall(<span class=\"string\">r'[\\(\\)\\[\\]\\{\\}]'</span>,s))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">match</span><span class=\"params\">(expr)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">    :param expr : str</span></span><br><span class=\"line\"><span class=\"string\">    :return bool</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    stack = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> brackets <span class=\"keyword\">in</span> expr:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> brackets <span class=\"keyword\">in</span> LEFT:</span><br><span class=\"line\">            stack.append(brackets) <span class=\"comment\"># å·¦æ‹¬å·å…¥æ ˆ</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> brackets <span class=\"keyword\">in</span> RIGHT:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> stack <span class=\"keyword\">or</span> <span class=\"keyword\">not</span> <span class=\"number\">1</span> &lt;= ord(brackets) - ord(stack[<span class=\"number\">-1</span>]) &lt;=<span class=\"number\">2</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">            stack.pop()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">not</span> stack</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    s = <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    function myFunction(x, y) {</span></span><br><span class=\"line\"><span class=\"string\">    if (y === undefined) {</span></span><br><span class=\"line\"><span class=\"string\">          y = 0;</span></span><br><span class=\"line\"><span class=\"string\">    } (</span></span><br><span class=\"line\"><span class=\"string\">}</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    expr = get_brackets(s)</span><br><span class=\"line\">    print(expr)    <span class=\"comment\"># (){(){}(}</span></span><br><span class=\"line\">    print(match(expr)) <span class=\"comment\"># False</span></span><br></pre></td></tr></tbody></table></figure>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<hr>\n<p>title: Pythonç®—æ³•ä¹‹æ ˆ</p>\n<p>date: 2019-04-24 16:10:15</p>\n<p>tags:</p>\n<ul>\n<li>Python</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>Python</li>\n<li>ç®—æ³•</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<p>æ ˆ(stack)åˆç§°ä¹‹ä¸ºå †æ ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æœ‰åºè¡¨ï¼Œå…¶æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œè¿ä½œã€‚</p>\n<h2 id=\"æ ˆçš„æ¥å£\"><a href=\"#æ ˆçš„æ¥å£\" class=\"headerlink\" title=\"æ ˆçš„æ¥å£\"></a>æ ˆçš„æ¥å£</h2><p>list å°±ç±»ä¼¼ä¸€ä¸ªæ ˆ</p>\n<table>\n<thead>\n<tr>\n<th>æ¥å£</th>\n<th>list å¯¹åº”æ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>push()</td>\n<td>append()</td>\n</tr>\n<tr>\n<td>pop()</td>\n<td>pop()</td>\n</tr>\n<tr>\n<td>isEmpty()</td>\n<td>not list</td>\n</tr>\n<tr>\n<td>length()</td>\n<td>len()</td>\n</tr>\n<tr>\n<td>getTop()</td>\n<td>list[-1]</td>\n</tr>\n</tbody></table>\n<h2 id=\"åº”ç”¨\"><a href=\"#åº”ç”¨\" class=\"headerlink\" title=\"åº”ç”¨\"></a>åº”ç”¨</h2><ul>\n<li>å‡å¦‚è¡¨è¾¾å¼ä¸­å…è®¸åŒ…å«ä¸‰ä¸­æ‹¬å·<code>()</code>ã€<code>[]</code>ã€<code>{}</code>ï¼Œå…¶åµŒå¥—é¡ºåºæ˜¯ä»»æ„çš„ï¼Œä¾‹å¦‚ï¼š</li>\n</ul>\n<p><code>{()[]}</code></p>\n<p>é”™è¯¯çš„æ ¼å¼å¦‚:</p>\n<blockquote>\n<p>[(]),[()),(()}</p>\n</blockquote>\n<p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œæ‹¬å·åŒ¹é…æ˜¯å¦æ­£ç¡®</p>\n<ul>\n<li>æ€è·¯</li>\n</ul>\n<p>åˆ›å»ºä¸€ä¸ªç©ºæ ˆï¼Œç”¨æ¥å­˜å‚¨å°šæœªæ‰¾åˆ°çš„å·¦æ‹¬å·ï¼›</p>\n<p>ä¾¿åˆ©å­—ç¬¦ä¸²ï¼Œé‡åˆ°å·¦æ‹¬å·åˆ™å‹æ ˆï¼Œé‡åˆ°å³æ‹¬å·åˆ™å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·è¿›è¡ŒåŒ¹é…ï¼›</p>\n<p>åœ¨ç¬¬äºŒæ­¥éª¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç©ºæ ˆæƒ…å†µä¸‹é‡åˆ°å³æ‹¬å·ï¼Œè¯´æ˜ç¼ºå°‘å·¦æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›</p>\n<p>åœ¨ç¬¬äºŒæ­¥éª¤éå†ç»“æŸæ—¶ï¼Œæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼ºå°‘å³æ‹¬å·ï¼Œä¸åŒ¹é…ï¼›</p>\n<ul>\n<li>ä»£ç </li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LEFT = &#123;<span class=\"string\">'('</span>, <span class=\"string\">'['</span>, <span class=\"string\">'&#123;'</span>&#125;</span><br><span class=\"line\">RIGHT = &#123;<span class=\"string\">')'</span>, <span class=\"string\">']'</span>, <span class=\"string\">'&#125;'</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">match</span><span class=\"params\">(expr)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">    :param expr : str</span></span><br><span class=\"line\"><span class=\"string\">    :return bool</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    stack = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> brackets <span class=\"keyword\">in</span> expr:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> brackets <span class=\"keyword\">in</span> LEFT:</span><br><span class=\"line\">            stack.append(brackets) <span class=\"comment\"># å·¦æ‹¬å·å…¥æ ˆ</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> brackets <span class=\"keyword\">in</span> RIGHT:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> stack <span class=\"keyword\">or</span> <span class=\"keyword\">not</span> <span class=\"number\">1</span> &lt;= ord(brackets) - ord(stack[<span class=\"number\">-1</span>]) &lt;=<span class=\"number\">2</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">            stack.pop()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">not</span> stack</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ‹“å±•\"><a href=\"#æ‹“å±•\" class=\"headerlink\" title=\"æ‹“å±•\"></a>æ‹“å±•</h2><p>æ£€æµ‹ä¸€æ®µä»£ç çš„æ‹¬å·æ˜¯å¦æ­£ç¡®</p>\n<ul>\n<li>ä»£ç </li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"></span><br><span class=\"line\">LEFT = &#123;<span class=\"string\">'('</span>, <span class=\"string\">'['</span>, <span class=\"string\">'&#123;'</span>&#125;</span><br><span class=\"line\">RIGHT = &#123;<span class=\"string\">')'</span>, <span class=\"string\">']'</span>, <span class=\"string\">'&#125;'</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_brackets</span><span class=\"params\">(s)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''è·å–æ‹¬å·'''</span></span><br><span class=\"line\">    result = <span class=\"string\">''</span>.join(re.findall(<span class=\"string\">r'[\\(\\)\\[\\]\\&#123;\\&#125;]'</span>,s))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">match</span><span class=\"params\">(expr)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">    :param expr : str</span></span><br><span class=\"line\"><span class=\"string\">    :return bool</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    stack = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> brackets <span class=\"keyword\">in</span> expr:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> brackets <span class=\"keyword\">in</span> LEFT:</span><br><span class=\"line\">            stack.append(brackets) <span class=\"comment\"># å·¦æ‹¬å·å…¥æ ˆ</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> brackets <span class=\"keyword\">in</span> RIGHT:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> stack <span class=\"keyword\">or</span> <span class=\"keyword\">not</span> <span class=\"number\">1</span> &lt;= ord(brackets) - ord(stack[<span class=\"number\">-1</span>]) &lt;=<span class=\"number\">2</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">            stack.pop()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">not</span> stack</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    s = <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    function myFunction(x, y) &#123;</span></span><br><span class=\"line\"><span class=\"string\">    if (y === undefined) &#123;</span></span><br><span class=\"line\"><span class=\"string\">          y = 0;</span></span><br><span class=\"line\"><span class=\"string\">    &#125; (</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    expr = get_brackets(s)</span><br><span class=\"line\">    print(expr)    <span class=\"comment\"># ()&#123;()&#123;&#125;(&#125;</span></span><br><span class=\"line\">    print(match(expr)) <span class=\"comment\"># False</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Sublime text å¸¸ç”¨æ’ä»¶","date":"2018-04-20T16:15:21.000Z","_content":"\n# Sublime text3å¸¸ç”¨æ’ä»¶\n\né›†æˆæ’ä»¶ï¼š\n\n(1)Alignment: ä»£ç å¯¹é½æ’ä»¶ï¼Œå³â€=â€å·å¯¹é½ï¼Œå˜é‡å®šä¹‰å¤ªå¤šï¼Œé•¿çŸ­ä¸ä¸€ï¼Œå¯ä¸€é”®å¯¹é½ï¼Œé»˜è®¤å¿«æ·é”®Ctrl+Alt+Aå¯èƒ½å’ŒQQæˆªå±åŠŸèƒ½å†²çªï¼Œå¯è®¾ç½®å…¶ä»–å¿«æ·é”®å¦‚ï¼šCtrl+Shift+Alt+A\n(2)AutoFileName: å¿«æ·è¾“å…¥æ–‡ä»¶åæ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆæ–‡ä»¶åçš„è¾“å…¥ï¼Œå¦‚å›¾ç‰‡é€‰å–ï¼Œè¾“å…¥â€/â€å³å¯çœ‹åˆ°ç›¸å¯¹äºæœ¬é¡¹ç›®æ–‡ä»¶å¤¹çš„å…¶ä»–æ–‡ä»¶ã€‚\n(3)BracketHighlighter: ä»£ç åŒ¹é…æ’ä»¶ï¼Œå¯åŒ¹é…[], (), {}, â€œâ€, â€, ï¼Œé«˜äº®æ ‡è®°ï¼Œä¾¿äºæŸ¥çœ‹èµ·å§‹å’Œç»“æŸæ ‡è®°ï¼Œç‚¹å‡»å¯¹åº”ä»£ç å³å¯ã€‚\n(4)ClipboardHistory: å‰ªåˆ‡æ¿å†å²è®°å½•æ’ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨å¤åˆ¶/å‰ªåˆ‡çš„å†…å®¹ï¼ŒCtrl+alt+vï¼šæ˜¾ç¤ºå†å²è®°å½•ï¼ŒCtrl+alt+dï¼šæ¸…ç©ºå†å²è®°å½•ï¼ŒCtrl+shift+vï¼šç²˜è´´ä¸Šä¸€æ¡è®°å½•ï¼ˆæœ€æ—§ï¼‰ï¼ŒCtrl+shift+alt+vï¼šç²˜è´´ä¸‹ä¸€æ¡è®°å½•ï¼ˆæœ€æ–°ï¼‰\n(5)CodeFormatter: ä»£ç æ ¼å¼åŒ–æ’ä»¶ï¼Œæ”¯æŒPHPã€JavaScript/JSONã€HTMLã€CSS/SCSSã€Pythonã€Visual Basicã€Coldfusion/Railo/Luceeç­‰ç­‰ã€‚\n(6)ConvertToUTF8: ç¼–è¾‘å¹¶ä¿å­˜ç›®å‰ç¼–ç ä¸è¢« Sublime Text æ”¯æŒçš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸­æ—¥éŸ©ç”¨æˆ·ä½¿ç”¨çš„GB2312ï¼ŒGBKï¼ŒBIG5ï¼ŒEUC-KRï¼ŒEUC-JP ï¼ŒANSIç­‰ã€‚\n(7)DocBlockr: ä»£ç æ³¨é‡Šæ’ä»¶ï¼Œæ ‡å‡†çš„æ³¨é‡Šï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç­‰ï¼Œå¹¶ä»¥å¤šè¡Œæ˜¾ç¤ºï¼Œçœå»æ‰‹åŠ¨ç¼–å†™ã€‚\n(8)Emmet: HTML/CSSä»£ç å¿«é€Ÿç¼–å†™æ’ä»¶ï¼Œå¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¯æ˜¯å¿…å¤‡æ’ä»¶ã€‚\n(9)FileDiffs: å¼ºå¤§çš„æ¯”è¾ƒä»£ç ä¸åŒå·¥å…·ï¼Œæ¯”è¾ƒå½“å‰æ–‡ä»¶ä¸é€‰ä¸­çš„ä»£ç ã€å‰ªåˆ‡æ¿ä¸­ä»£ç ã€å¦ä¸€æ–‡ä»¶ã€æœªä¿å­˜æ–‡ä»¶ä¹‹é—´çš„å·®åˆ«ï¼Œå³é”®æ ‡ç­¾é¡µï¼Œå‡ºç°FileDiffs Menuæˆ–è€…Diff with Tabâ€¦é€‰æ‹©å¯¹åº”æ–‡ä»¶æ¯”è¾ƒå³å¯ã€‚\n(10)Git: Gitç®¡ç†æ’ä»¶ï¼ŒåŸºæœ¬ä¸Šå®ç°äº†Gitçš„æ‰€æœ‰åŠŸèƒ½ã€‚\n(11)IMESupport: å®ç°ä¸­æ–‡è¾“å…¥æ³•é¼ æ ‡è·Ÿéšæ’ä»¶ã€‚\n(12)KeymapManager: å¿«æ·é”®ç®¡ç†æ’ä»¶ï¼Œé€šè¿‡Ctrl+alt+kæˆ–è€…é€šè¿‡é¡¶éƒ¨èœå•â€œæŸ¥çœ‹ -> å¿«æ·é”®ç®¡ç†â€æ‰“å¼€é¢æ¿ã€‚\n(13)PackageControl: æ’ä»¶ç®¡ç†æ’ä»¶ï¼Œæä¾›æ·»åŠ ã€åˆ é™¤ã€ç¦ç”¨ã€æŸ¥æ‰¾æ’ä»¶ç­‰åŠŸèƒ½ã€‚\n(14)SideBarEnhancements: ä¾§è¾¹æ å³é”®å¢å¼ºæ’ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ‰“å¼€æ–¹å¼å¿«æ·é”®ï¼Œéå¸¸å®ç”¨ã€‚\n(15)SublimeCodeIntel: ä»£ç è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œæ”¯æŒç»å¤§å¤šæ•°å‰ç«¯å¼€å‘è¯­è¨€ã€‚\n(16)SublimeLinter: ä»£ç è¯­æ³•æ£€æµ‹æ’ä»¶ï¼Œæ”¯æŒC/C++ã€CSSã€HTMLã€Javaã€JavaScriptã€Luaã€Perlã€PHPã€Pythonã€Rubyã€XMLç­‰ç­‰ã€‚\n(17)SyncedSidebarBg: ä¾§è¾¹æ ä¸ä¸»é¢˜é¢œè‰²åŒæ­¥æ›´æ–°æ’ä»¶ï¼Œè‡ªåŠ¨åŒæ­¥ä¾§è¾¹æ åº•è‰²ä¸ºç¼–è¾‘çª—å£åº•è‰²ã€‚\n(18)Theme-Nil: å®Œç¾çš„ç¼–ç ä¸»é¢˜ï¼Œç”¨è¿‡çš„éƒ½è¯´å¾ˆå¥½ã€‚\n\n## å¸¸è§é—®é¢˜\n\nQï¼šå¦‚ä½•å®‰è£…æ’ä»¶ï¼Ÿ\nAï¼šæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œè¾“å…¥ install å¹¶å›è½¦ï¼Œé€‰æ‹©ç›¸åº”æ’ä»¶å®‰è£…å³å¯ã€‚æˆ–è€…ä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹ â€“ æ’ä»¶æ§åˆ¶ â€“ Install Packageâ€è¿›è¡Œæ’ä»¶å®‰è£…ã€‚\nQï¼šå¦‚ä½•ä¿®æ”¹ä¾§è¾¹æ èƒŒæ™¯é¢œè‰²ï¼Ÿ\nAï¼šä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨æµé£æ¸…éŸ³æ±‰åŒ–ç‰ˆï¼Œå…¶é»˜è®¤ä¸»é¢˜ä¸ºâ€œNil-Themeâ€ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶çš„ç›¸åº”è·¯å¾„æ˜¯â€œData\\Packages\\Nil-Theme\\Nil.sublime-themeâ€ã€‚\n\n```json\n/** Sidebar tree (bg) **/\n{\nâ€œclassâ€: â€œsidebar_treeâ€,\nâ€œdark_contentâ€: true,\nâ€œrow_paddingâ€: [12, 4],\nâ€œindentâ€: 13,\nâ€œindent_offsetâ€: 15,\nâ€œindent_top_levelâ€: false,\nâ€œlayer0.tintâ€: [32,32,32], /* darker gray */ /* è¾“å…¥å–œæ¬¢çš„é¢œè‰²çš„å¯¹åº”RGBå€¼å³å¯ */\nâ€œlayer0.opacityâ€: 1.0,\nâ€œdark_contentâ€: true\n},\n```\n\nQï¼šä¸ºä»€ä¹ˆåœ¨Win8ç³»ç»Ÿå‡ºç°ä¸­æ–‡ä¹±ç ï¼Ÿ\nAï¼šè¿™æ˜¯Win8æƒé™é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¸è½½åé‡è£…åˆ°ç³»ç»Ÿä¹‹å¤–çš„åˆ†åŒºï¼Œå¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚\nQï¼šä¸ºä»€ä¹ˆè¾“å…¥å…‰æ ‡å˜å¾—å¾ˆç²—ï¼Ÿ\nAï¼šä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰åŸæœ‰æ ¼å¼æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ã€‚æç¤ºï¼šè®°å¾—ç»™åŸæ¥çš„æœ€åä¸€è¡Œæœ«å°¾æ·»åŠ ä¸€ä¸ªåŠè§’é€—å·ã€‚\nâ€œcaret_styleâ€: â€œphaseâ€,\nâ€œcaret_extra_topâ€: 0,\nâ€œcaret_extra_bottomâ€: 0,\nâ€œcaret_extra_widthâ€: 1,\nQï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å‡ºç°åŒæ–‡ä»¶å¤¹å›¾æ ‡ï¼Ÿ\nAï¼šåœ¨ä¸»é¢˜æ¨¡æ¿è§„åˆ™ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ã€‚\n\n```json\n{\n\nâ€œclassâ€: â€œicon_folderâ€,\n\nâ€œcontent_marginâ€: [0,0]\n\n},\n\n{\n\nâ€œclassâ€: â€œicon_file_typeâ€,\n\nâ€œcontent_marginâ€: [0,0]\n\n},\n\n{\n\nâ€œclassâ€: â€œicon_folder_loadingâ€,\n\nâ€œcontent_marginâ€: [0,0]\n\n}\n\n```\n\n\nQï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å’Œæ ‡ç­¾æ ä¸Šä¸­æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºâ€œå£å£â€ï¼Œè€Œè‹±æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºæ­£å¸¸ï¼Ÿ\nAï¼šè¿™é‡Œä»¥Win7æ¥è¯´æ˜ï¼Œæ¡Œé¢ â€“ é¼ æ ‡å³é”® â€“ ä¸ªæ€§åŒ– â€“ æ˜¾ç¤º â€“ è®¾ç½®è‡ªå®šä¹‰æ–‡æœ¬å¤§å°(DPI) â€“ é€‰æ‹©â€œè¾ƒå° â€“ 100%(é»˜è®¤)â€å³å¯ã€‚æˆ–è€…ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æœ«å°¾åŠ ä¸Šä¸€è¡Œä»£ç è¦†ç›–ç³»ç»Ÿçš„DPIã€‚\nâ€œdpi_scaleâ€: 1.0,","source":"_posts/Sublime-text-å¸¸ç”¨æ’ä»¶.md","raw":"---\ntitle: Sublime text å¸¸ç”¨æ’ä»¶\ndate: 2018-04-21 00:15:21\ntags: [ç¼–è¾‘å™¨]\ncategories: Python\n---\n\n# Sublime text3å¸¸ç”¨æ’ä»¶\n\né›†æˆæ’ä»¶ï¼š\n\n(1)Alignment: ä»£ç å¯¹é½æ’ä»¶ï¼Œå³â€=â€å·å¯¹é½ï¼Œå˜é‡å®šä¹‰å¤ªå¤šï¼Œé•¿çŸ­ä¸ä¸€ï¼Œå¯ä¸€é”®å¯¹é½ï¼Œé»˜è®¤å¿«æ·é”®Ctrl+Alt+Aå¯èƒ½å’ŒQQæˆªå±åŠŸèƒ½å†²çªï¼Œå¯è®¾ç½®å…¶ä»–å¿«æ·é”®å¦‚ï¼šCtrl+Shift+Alt+A\n(2)AutoFileName: å¿«æ·è¾“å…¥æ–‡ä»¶åæ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆæ–‡ä»¶åçš„è¾“å…¥ï¼Œå¦‚å›¾ç‰‡é€‰å–ï¼Œè¾“å…¥â€/â€å³å¯çœ‹åˆ°ç›¸å¯¹äºæœ¬é¡¹ç›®æ–‡ä»¶å¤¹çš„å…¶ä»–æ–‡ä»¶ã€‚\n(3)BracketHighlighter: ä»£ç åŒ¹é…æ’ä»¶ï¼Œå¯åŒ¹é…[], (), {}, â€œâ€, â€, ï¼Œé«˜äº®æ ‡è®°ï¼Œä¾¿äºæŸ¥çœ‹èµ·å§‹å’Œç»“æŸæ ‡è®°ï¼Œç‚¹å‡»å¯¹åº”ä»£ç å³å¯ã€‚\n(4)ClipboardHistory: å‰ªåˆ‡æ¿å†å²è®°å½•æ’ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨å¤åˆ¶/å‰ªåˆ‡çš„å†…å®¹ï¼ŒCtrl+alt+vï¼šæ˜¾ç¤ºå†å²è®°å½•ï¼ŒCtrl+alt+dï¼šæ¸…ç©ºå†å²è®°å½•ï¼ŒCtrl+shift+vï¼šç²˜è´´ä¸Šä¸€æ¡è®°å½•ï¼ˆæœ€æ—§ï¼‰ï¼ŒCtrl+shift+alt+vï¼šç²˜è´´ä¸‹ä¸€æ¡è®°å½•ï¼ˆæœ€æ–°ï¼‰\n(5)CodeFormatter: ä»£ç æ ¼å¼åŒ–æ’ä»¶ï¼Œæ”¯æŒPHPã€JavaScript/JSONã€HTMLã€CSS/SCSSã€Pythonã€Visual Basicã€Coldfusion/Railo/Luceeç­‰ç­‰ã€‚\n(6)ConvertToUTF8: ç¼–è¾‘å¹¶ä¿å­˜ç›®å‰ç¼–ç ä¸è¢« Sublime Text æ”¯æŒçš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸­æ—¥éŸ©ç”¨æˆ·ä½¿ç”¨çš„GB2312ï¼ŒGBKï¼ŒBIG5ï¼ŒEUC-KRï¼ŒEUC-JP ï¼ŒANSIç­‰ã€‚\n(7)DocBlockr: ä»£ç æ³¨é‡Šæ’ä»¶ï¼Œæ ‡å‡†çš„æ³¨é‡Šï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç­‰ï¼Œå¹¶ä»¥å¤šè¡Œæ˜¾ç¤ºï¼Œçœå»æ‰‹åŠ¨ç¼–å†™ã€‚\n(8)Emmet: HTML/CSSä»£ç å¿«é€Ÿç¼–å†™æ’ä»¶ï¼Œå¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¯æ˜¯å¿…å¤‡æ’ä»¶ã€‚\n(9)FileDiffs: å¼ºå¤§çš„æ¯”è¾ƒä»£ç ä¸åŒå·¥å…·ï¼Œæ¯”è¾ƒå½“å‰æ–‡ä»¶ä¸é€‰ä¸­çš„ä»£ç ã€å‰ªåˆ‡æ¿ä¸­ä»£ç ã€å¦ä¸€æ–‡ä»¶ã€æœªä¿å­˜æ–‡ä»¶ä¹‹é—´çš„å·®åˆ«ï¼Œå³é”®æ ‡ç­¾é¡µï¼Œå‡ºç°FileDiffs Menuæˆ–è€…Diff with Tabâ€¦é€‰æ‹©å¯¹åº”æ–‡ä»¶æ¯”è¾ƒå³å¯ã€‚\n(10)Git: Gitç®¡ç†æ’ä»¶ï¼ŒåŸºæœ¬ä¸Šå®ç°äº†Gitçš„æ‰€æœ‰åŠŸèƒ½ã€‚\n(11)IMESupport: å®ç°ä¸­æ–‡è¾“å…¥æ³•é¼ æ ‡è·Ÿéšæ’ä»¶ã€‚\n(12)KeymapManager: å¿«æ·é”®ç®¡ç†æ’ä»¶ï¼Œé€šè¿‡Ctrl+alt+kæˆ–è€…é€šè¿‡é¡¶éƒ¨èœå•â€œæŸ¥çœ‹ -> å¿«æ·é”®ç®¡ç†â€æ‰“å¼€é¢æ¿ã€‚\n(13)PackageControl: æ’ä»¶ç®¡ç†æ’ä»¶ï¼Œæä¾›æ·»åŠ ã€åˆ é™¤ã€ç¦ç”¨ã€æŸ¥æ‰¾æ’ä»¶ç­‰åŠŸèƒ½ã€‚\n(14)SideBarEnhancements: ä¾§è¾¹æ å³é”®å¢å¼ºæ’ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ‰“å¼€æ–¹å¼å¿«æ·é”®ï¼Œéå¸¸å®ç”¨ã€‚\n(15)SublimeCodeIntel: ä»£ç è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œæ”¯æŒç»å¤§å¤šæ•°å‰ç«¯å¼€å‘è¯­è¨€ã€‚\n(16)SublimeLinter: ä»£ç è¯­æ³•æ£€æµ‹æ’ä»¶ï¼Œæ”¯æŒC/C++ã€CSSã€HTMLã€Javaã€JavaScriptã€Luaã€Perlã€PHPã€Pythonã€Rubyã€XMLç­‰ç­‰ã€‚\n(17)SyncedSidebarBg: ä¾§è¾¹æ ä¸ä¸»é¢˜é¢œè‰²åŒæ­¥æ›´æ–°æ’ä»¶ï¼Œè‡ªåŠ¨åŒæ­¥ä¾§è¾¹æ åº•è‰²ä¸ºç¼–è¾‘çª—å£åº•è‰²ã€‚\n(18)Theme-Nil: å®Œç¾çš„ç¼–ç ä¸»é¢˜ï¼Œç”¨è¿‡çš„éƒ½è¯´å¾ˆå¥½ã€‚\n\n## å¸¸è§é—®é¢˜\n\nQï¼šå¦‚ä½•å®‰è£…æ’ä»¶ï¼Ÿ\nAï¼šæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œè¾“å…¥ install å¹¶å›è½¦ï¼Œé€‰æ‹©ç›¸åº”æ’ä»¶å®‰è£…å³å¯ã€‚æˆ–è€…ä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹ â€“ æ’ä»¶æ§åˆ¶ â€“ Install Packageâ€è¿›è¡Œæ’ä»¶å®‰è£…ã€‚\nQï¼šå¦‚ä½•ä¿®æ”¹ä¾§è¾¹æ èƒŒæ™¯é¢œè‰²ï¼Ÿ\nAï¼šä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨æµé£æ¸…éŸ³æ±‰åŒ–ç‰ˆï¼Œå…¶é»˜è®¤ä¸»é¢˜ä¸ºâ€œNil-Themeâ€ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶çš„ç›¸åº”è·¯å¾„æ˜¯â€œData\\Packages\\Nil-Theme\\Nil.sublime-themeâ€ã€‚\n\n```json\n/** Sidebar tree (bg) **/\n{\nâ€œclassâ€: â€œsidebar_treeâ€,\nâ€œdark_contentâ€: true,\nâ€œrow_paddingâ€: [12, 4],\nâ€œindentâ€: 13,\nâ€œindent_offsetâ€: 15,\nâ€œindent_top_levelâ€: false,\nâ€œlayer0.tintâ€: [32,32,32], /* darker gray */ /* è¾“å…¥å–œæ¬¢çš„é¢œè‰²çš„å¯¹åº”RGBå€¼å³å¯ */\nâ€œlayer0.opacityâ€: 1.0,\nâ€œdark_contentâ€: true\n},\n```\n\nQï¼šä¸ºä»€ä¹ˆåœ¨Win8ç³»ç»Ÿå‡ºç°ä¸­æ–‡ä¹±ç ï¼Ÿ\nAï¼šè¿™æ˜¯Win8æƒé™é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¸è½½åé‡è£…åˆ°ç³»ç»Ÿä¹‹å¤–çš„åˆ†åŒºï¼Œå¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚\nQï¼šä¸ºä»€ä¹ˆè¾“å…¥å…‰æ ‡å˜å¾—å¾ˆç²—ï¼Ÿ\nAï¼šä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰åŸæœ‰æ ¼å¼æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ã€‚æç¤ºï¼šè®°å¾—ç»™åŸæ¥çš„æœ€åä¸€è¡Œæœ«å°¾æ·»åŠ ä¸€ä¸ªåŠè§’é€—å·ã€‚\nâ€œcaret_styleâ€: â€œphaseâ€,\nâ€œcaret_extra_topâ€: 0,\nâ€œcaret_extra_bottomâ€: 0,\nâ€œcaret_extra_widthâ€: 1,\nQï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å‡ºç°åŒæ–‡ä»¶å¤¹å›¾æ ‡ï¼Ÿ\nAï¼šåœ¨ä¸»é¢˜æ¨¡æ¿è§„åˆ™ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ã€‚\n\n```json\n{\n\nâ€œclassâ€: â€œicon_folderâ€,\n\nâ€œcontent_marginâ€: [0,0]\n\n},\n\n{\n\nâ€œclassâ€: â€œicon_file_typeâ€,\n\nâ€œcontent_marginâ€: [0,0]\n\n},\n\n{\n\nâ€œclassâ€: â€œicon_folder_loadingâ€,\n\nâ€œcontent_marginâ€: [0,0]\n\n}\n\n```\n\n\nQï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å’Œæ ‡ç­¾æ ä¸Šä¸­æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºâ€œå£å£â€ï¼Œè€Œè‹±æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºæ­£å¸¸ï¼Ÿ\nAï¼šè¿™é‡Œä»¥Win7æ¥è¯´æ˜ï¼Œæ¡Œé¢ â€“ é¼ æ ‡å³é”® â€“ ä¸ªæ€§åŒ– â€“ æ˜¾ç¤º â€“ è®¾ç½®è‡ªå®šä¹‰æ–‡æœ¬å¤§å°(DPI) â€“ é€‰æ‹©â€œè¾ƒå° â€“ 100%(é»˜è®¤)â€å³å¯ã€‚æˆ–è€…ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æœ«å°¾åŠ ä¸Šä¸€è¡Œä»£ç è¦†ç›–ç³»ç»Ÿçš„DPIã€‚\nâ€œdpi_scaleâ€: 1.0,","slug":"Sublime-text-å¸¸ç”¨æ’ä»¶","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fo000053kzjeaur0y09","content":"<h1 id=\"Sublime-text3å¸¸ç”¨æ’ä»¶\"><a href=\"#Sublime-text3å¸¸ç”¨æ’ä»¶\" class=\"headerlink\" title=\"Sublime text3å¸¸ç”¨æ’ä»¶\"></a>Sublime text3å¸¸ç”¨æ’ä»¶</h1><p>é›†æˆæ’ä»¶ï¼š</p>\n<p>(1)Alignment: ä»£ç å¯¹é½æ’ä»¶ï¼Œå³â€=â€å·å¯¹é½ï¼Œå˜é‡å®šä¹‰å¤ªå¤šï¼Œé•¿çŸ­ä¸ä¸€ï¼Œå¯ä¸€é”®å¯¹é½ï¼Œé»˜è®¤å¿«æ·é”®Ctrl+Alt+Aå¯èƒ½å’ŒQQæˆªå±åŠŸèƒ½å†²çªï¼Œå¯è®¾ç½®å…¶ä»–å¿«æ·é”®å¦‚ï¼šCtrl+Shift+Alt+A<br>(2)AutoFileName: å¿«æ·è¾“å…¥æ–‡ä»¶åæ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆæ–‡ä»¶åçš„è¾“å…¥ï¼Œå¦‚å›¾ç‰‡é€‰å–ï¼Œè¾“å…¥â€/â€å³å¯çœ‹åˆ°ç›¸å¯¹äºæœ¬é¡¹ç›®æ–‡ä»¶å¤¹çš„å…¶ä»–æ–‡ä»¶ã€‚<br>(3)BracketHighlighter: ä»£ç åŒ¹é…æ’ä»¶ï¼Œå¯åŒ¹é…[], (), {}, â€œâ€, â€, ï¼Œé«˜äº®æ ‡è®°ï¼Œä¾¿äºæŸ¥çœ‹èµ·å§‹å’Œç»“æŸæ ‡è®°ï¼Œç‚¹å‡»å¯¹åº”ä»£ç å³å¯ã€‚<br>(4)ClipboardHistory: å‰ªåˆ‡æ¿å†å²è®°å½•æ’ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨å¤åˆ¶/å‰ªåˆ‡çš„å†…å®¹ï¼ŒCtrl+alt+vï¼šæ˜¾ç¤ºå†å²è®°å½•ï¼ŒCtrl+alt+dï¼šæ¸…ç©ºå†å²è®°å½•ï¼ŒCtrl+shift+vï¼šç²˜è´´ä¸Šä¸€æ¡è®°å½•ï¼ˆæœ€æ—§ï¼‰ï¼ŒCtrl+shift+alt+vï¼šç²˜è´´ä¸‹ä¸€æ¡è®°å½•ï¼ˆæœ€æ–°ï¼‰<br>(5)CodeFormatter: ä»£ç æ ¼å¼åŒ–æ’ä»¶ï¼Œæ”¯æŒPHPã€JavaScript/JSONã€HTMLã€CSS/SCSSã€Pythonã€Visual Basicã€Coldfusion/Railo/Luceeç­‰ç­‰ã€‚<br>(6)ConvertToUTF8: ç¼–è¾‘å¹¶ä¿å­˜ç›®å‰ç¼–ç ä¸è¢« Sublime Text æ”¯æŒçš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸­æ—¥éŸ©ç”¨æˆ·ä½¿ç”¨çš„GB2312ï¼ŒGBKï¼ŒBIG5ï¼ŒEUC-KRï¼ŒEUC-JP ï¼ŒANSIç­‰ã€‚<br>(7)DocBlockr: ä»£ç æ³¨é‡Šæ’ä»¶ï¼Œæ ‡å‡†çš„æ³¨é‡Šï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç­‰ï¼Œå¹¶ä»¥å¤šè¡Œæ˜¾ç¤ºï¼Œçœå»æ‰‹åŠ¨ç¼–å†™ã€‚<br>(8)Emmet: HTML/CSSä»£ç å¿«é€Ÿç¼–å†™æ’ä»¶ï¼Œå¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¯æ˜¯å¿…å¤‡æ’ä»¶ã€‚<br>(9)FileDiffs: å¼ºå¤§çš„æ¯”è¾ƒä»£ç ä¸åŒå·¥å…·ï¼Œæ¯”è¾ƒå½“å‰æ–‡ä»¶ä¸é€‰ä¸­çš„ä»£ç ã€å‰ªåˆ‡æ¿ä¸­ä»£ç ã€å¦ä¸€æ–‡ä»¶ã€æœªä¿å­˜æ–‡ä»¶ä¹‹é—´çš„å·®åˆ«ï¼Œå³é”®æ ‡ç­¾é¡µï¼Œå‡ºç°FileDiffs Menuæˆ–è€…Diff with Tabâ€¦é€‰æ‹©å¯¹åº”æ–‡ä»¶æ¯”è¾ƒå³å¯ã€‚<br>(10)Git: Gitç®¡ç†æ’ä»¶ï¼ŒåŸºæœ¬ä¸Šå®ç°äº†Gitçš„æ‰€æœ‰åŠŸèƒ½ã€‚<br>(11)IMESupport: å®ç°ä¸­æ–‡è¾“å…¥æ³•é¼ æ ‡è·Ÿéšæ’ä»¶ã€‚<br>(12)KeymapManager: å¿«æ·é”®ç®¡ç†æ’ä»¶ï¼Œé€šè¿‡Ctrl+alt+kæˆ–è€…é€šè¿‡é¡¶éƒ¨èœå•â€œæŸ¥çœ‹ -&gt; å¿«æ·é”®ç®¡ç†â€æ‰“å¼€é¢æ¿ã€‚<br>(13)PackageControl: æ’ä»¶ç®¡ç†æ’ä»¶ï¼Œæä¾›æ·»åŠ ã€åˆ é™¤ã€ç¦ç”¨ã€æŸ¥æ‰¾æ’ä»¶ç­‰åŠŸèƒ½ã€‚<br>(14)SideBarEnhancements: ä¾§è¾¹æ å³é”®å¢å¼ºæ’ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ‰“å¼€æ–¹å¼å¿«æ·é”®ï¼Œéå¸¸å®ç”¨ã€‚<br>(15)SublimeCodeIntel: ä»£ç è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œæ”¯æŒç»å¤§å¤šæ•°å‰ç«¯å¼€å‘è¯­è¨€ã€‚<br>(16)SublimeLinter: ä»£ç è¯­æ³•æ£€æµ‹æ’ä»¶ï¼Œæ”¯æŒC/C++ã€CSSã€HTMLã€Javaã€JavaScriptã€Luaã€Perlã€PHPã€Pythonã€Rubyã€XMLç­‰ç­‰ã€‚<br>(17)SyncedSidebarBg: ä¾§è¾¹æ ä¸ä¸»é¢˜é¢œè‰²åŒæ­¥æ›´æ–°æ’ä»¶ï¼Œè‡ªåŠ¨åŒæ­¥ä¾§è¾¹æ åº•è‰²ä¸ºç¼–è¾‘çª—å£åº•è‰²ã€‚<br>(18)Theme-Nil: å®Œç¾çš„ç¼–ç ä¸»é¢˜ï¼Œç”¨è¿‡çš„éƒ½è¯´å¾ˆå¥½ã€‚</p>\n<h2 id=\"å¸¸è§é—®é¢˜\"><a href=\"#å¸¸è§é—®é¢˜\" class=\"headerlink\" title=\"å¸¸è§é—®é¢˜\"></a>å¸¸è§é—®é¢˜</h2><p>Qï¼šå¦‚ä½•å®‰è£…æ’ä»¶ï¼Ÿ<br>Aï¼šæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œè¾“å…¥ install å¹¶å›è½¦ï¼Œé€‰æ‹©ç›¸åº”æ’ä»¶å®‰è£…å³å¯ã€‚æˆ–è€…ä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹ â€“ æ’ä»¶æ§åˆ¶ â€“ Install Packageâ€è¿›è¡Œæ’ä»¶å®‰è£…ã€‚<br>Qï¼šå¦‚ä½•ä¿®æ”¹ä¾§è¾¹æ èƒŒæ™¯é¢œè‰²ï¼Ÿ<br>Aï¼šä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨æµé£æ¸…éŸ³æ±‰åŒ–ç‰ˆï¼Œå…¶é»˜è®¤ä¸»é¢˜ä¸ºâ€œNil-Themeâ€ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶çš„ç›¸åº”è·¯å¾„æ˜¯â€œData\\Packages\\Nil-Theme\\Nil.sublime-themeâ€ã€‚</p>\n<figure class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** Sidebar tree (bg) **/</span></span><br><span class=\"line\">{</span><br><span class=\"line\">â€œclassâ€: â€œsidebar_treeâ€,</span><br><span class=\"line\">â€œdark_contentâ€: true,</span><br><span class=\"line\">â€œrow_paddingâ€: [12, 4],</span><br><span class=\"line\">â€œindentâ€: 13,</span><br><span class=\"line\">â€œindent_offsetâ€: 15,</span><br><span class=\"line\">â€œindent_top_levelâ€: false,</span><br><span class=\"line\">â€œlayer0.tintâ€: [32,32,32], /* darker gray */ /* è¾“å…¥å–œæ¬¢çš„é¢œè‰²çš„å¯¹åº”RGBå€¼å³å¯ */</span><br><span class=\"line\">â€œlayer0.opacityâ€: 1.0,</span><br><span class=\"line\">â€œdark_contentâ€: true</span><br><span class=\"line\">},</span><br></pre></td></tr></tbody></table></figure>\n\n<p>Qï¼šä¸ºä»€ä¹ˆåœ¨Win8ç³»ç»Ÿå‡ºç°ä¸­æ–‡ä¹±ç ï¼Ÿ<br>Aï¼šè¿™æ˜¯Win8æƒé™é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¸è½½åé‡è£…åˆ°ç³»ç»Ÿä¹‹å¤–çš„åˆ†åŒºï¼Œå¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚<br>Qï¼šä¸ºä»€ä¹ˆè¾“å…¥å…‰æ ‡å˜å¾—å¾ˆç²—ï¼Ÿ<br>Aï¼šä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰åŸæœ‰æ ¼å¼æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ã€‚æç¤ºï¼šè®°å¾—ç»™åŸæ¥çš„æœ€åä¸€è¡Œæœ«å°¾æ·»åŠ ä¸€ä¸ªåŠè§’é€—å·ã€‚<br>â€œcaret_styleâ€: â€œphaseâ€,<br>â€œcaret_extra_topâ€: 0,<br>â€œcaret_extra_bottomâ€: 0,<br>â€œcaret_extra_widthâ€: 1,<br>Qï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å‡ºç°åŒæ–‡ä»¶å¤¹å›¾æ ‡ï¼Ÿ<br>Aï¼šåœ¨ä¸»é¢˜æ¨¡æ¿è§„åˆ™ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ã€‚</p>\n<figure class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">{</span><br><span class=\"line\"></span><br><span class=\"line\">â€œclassâ€: â€œicon_folderâ€,</span><br><span class=\"line\"></span><br><span class=\"line\">â€œcontent_marginâ€: [0,0]</span><br><span class=\"line\"></span><br><span class=\"line\">},</span><br><span class=\"line\"></span><br><span class=\"line\">{</span><br><span class=\"line\"></span><br><span class=\"line\">â€œclassâ€: â€œicon_file_typeâ€,</span><br><span class=\"line\"></span><br><span class=\"line\">â€œcontent_marginâ€: [0,0]</span><br><span class=\"line\"></span><br><span class=\"line\">},</span><br><span class=\"line\"></span><br><span class=\"line\">{</span><br><span class=\"line\"></span><br><span class=\"line\">â€œclassâ€: â€œicon_folder_loadingâ€,</span><br><span class=\"line\"></span><br><span class=\"line\">â€œcontent_marginâ€: [0,0]</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n\n\n<p>Qï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å’Œæ ‡ç­¾æ ä¸Šä¸­æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºâ€œå£å£â€ï¼Œè€Œè‹±æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºæ­£å¸¸ï¼Ÿ<br>Aï¼šè¿™é‡Œä»¥Win7æ¥è¯´æ˜ï¼Œæ¡Œé¢ â€“ é¼ æ ‡å³é”® â€“ ä¸ªæ€§åŒ– â€“ æ˜¾ç¤º â€“ è®¾ç½®è‡ªå®šä¹‰æ–‡æœ¬å¤§å°(DPI) â€“ é€‰æ‹©â€œè¾ƒå° â€“ 100%(é»˜è®¤)â€å³å¯ã€‚æˆ–è€…ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æœ«å°¾åŠ ä¸Šä¸€è¡Œä»£ç è¦†ç›–ç³»ç»Ÿçš„DPIã€‚<br>â€œdpi_scaleâ€: 1.0,</p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"Sublime-text3å¸¸ç”¨æ’ä»¶\"><a href=\"#Sublime-text3å¸¸ç”¨æ’ä»¶\" class=\"headerlink\" title=\"Sublime text3å¸¸ç”¨æ’ä»¶\"></a>Sublime text3å¸¸ç”¨æ’ä»¶</h1><p>é›†æˆæ’ä»¶ï¼š</p>\n<p>(1)Alignment: ä»£ç å¯¹é½æ’ä»¶ï¼Œå³â€=â€å·å¯¹é½ï¼Œå˜é‡å®šä¹‰å¤ªå¤šï¼Œé•¿çŸ­ä¸ä¸€ï¼Œå¯ä¸€é”®å¯¹é½ï¼Œé»˜è®¤å¿«æ·é”®Ctrl+Alt+Aå¯èƒ½å’ŒQQæˆªå±åŠŸèƒ½å†²çªï¼Œå¯è®¾ç½®å…¶ä»–å¿«æ·é”®å¦‚ï¼šCtrl+Shift+Alt+A<br>(2)AutoFileName: å¿«æ·è¾“å…¥æ–‡ä»¶åæ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆæ–‡ä»¶åçš„è¾“å…¥ï¼Œå¦‚å›¾ç‰‡é€‰å–ï¼Œè¾“å…¥â€/â€å³å¯çœ‹åˆ°ç›¸å¯¹äºæœ¬é¡¹ç›®æ–‡ä»¶å¤¹çš„å…¶ä»–æ–‡ä»¶ã€‚<br>(3)BracketHighlighter: ä»£ç åŒ¹é…æ’ä»¶ï¼Œå¯åŒ¹é…[], (), {}, â€œâ€, â€, ï¼Œé«˜äº®æ ‡è®°ï¼Œä¾¿äºæŸ¥çœ‹èµ·å§‹å’Œç»“æŸæ ‡è®°ï¼Œç‚¹å‡»å¯¹åº”ä»£ç å³å¯ã€‚<br>(4)ClipboardHistory: å‰ªåˆ‡æ¿å†å²è®°å½•æ’ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨å¤åˆ¶/å‰ªåˆ‡çš„å†…å®¹ï¼ŒCtrl+alt+vï¼šæ˜¾ç¤ºå†å²è®°å½•ï¼ŒCtrl+alt+dï¼šæ¸…ç©ºå†å²è®°å½•ï¼ŒCtrl+shift+vï¼šç²˜è´´ä¸Šä¸€æ¡è®°å½•ï¼ˆæœ€æ—§ï¼‰ï¼ŒCtrl+shift+alt+vï¼šç²˜è´´ä¸‹ä¸€æ¡è®°å½•ï¼ˆæœ€æ–°ï¼‰<br>(5)CodeFormatter: ä»£ç æ ¼å¼åŒ–æ’ä»¶ï¼Œæ”¯æŒPHPã€JavaScript/JSONã€HTMLã€CSS/SCSSã€Pythonã€Visual Basicã€Coldfusion/Railo/Luceeç­‰ç­‰ã€‚<br>(6)ConvertToUTF8: ç¼–è¾‘å¹¶ä¿å­˜ç›®å‰ç¼–ç ä¸è¢« Sublime Text æ”¯æŒçš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸­æ—¥éŸ©ç”¨æˆ·ä½¿ç”¨çš„GB2312ï¼ŒGBKï¼ŒBIG5ï¼ŒEUC-KRï¼ŒEUC-JP ï¼ŒANSIç­‰ã€‚<br>(7)DocBlockr: ä»£ç æ³¨é‡Šæ’ä»¶ï¼Œæ ‡å‡†çš„æ³¨é‡Šï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç­‰ï¼Œå¹¶ä»¥å¤šè¡Œæ˜¾ç¤ºï¼Œçœå»æ‰‹åŠ¨ç¼–å†™ã€‚<br>(8)Emmet: HTML/CSSä»£ç å¿«é€Ÿç¼–å†™æ’ä»¶ï¼Œå¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¯æ˜¯å¿…å¤‡æ’ä»¶ã€‚<br>(9)FileDiffs: å¼ºå¤§çš„æ¯”è¾ƒä»£ç ä¸åŒå·¥å…·ï¼Œæ¯”è¾ƒå½“å‰æ–‡ä»¶ä¸é€‰ä¸­çš„ä»£ç ã€å‰ªåˆ‡æ¿ä¸­ä»£ç ã€å¦ä¸€æ–‡ä»¶ã€æœªä¿å­˜æ–‡ä»¶ä¹‹é—´çš„å·®åˆ«ï¼Œå³é”®æ ‡ç­¾é¡µï¼Œå‡ºç°FileDiffs Menuæˆ–è€…Diff with Tabâ€¦é€‰æ‹©å¯¹åº”æ–‡ä»¶æ¯”è¾ƒå³å¯ã€‚<br>(10)Git: Gitç®¡ç†æ’ä»¶ï¼ŒåŸºæœ¬ä¸Šå®ç°äº†Gitçš„æ‰€æœ‰åŠŸèƒ½ã€‚<br>(11)IMESupport: å®ç°ä¸­æ–‡è¾“å…¥æ³•é¼ æ ‡è·Ÿéšæ’ä»¶ã€‚<br>(12)KeymapManager: å¿«æ·é”®ç®¡ç†æ’ä»¶ï¼Œé€šè¿‡Ctrl+alt+kæˆ–è€…é€šè¿‡é¡¶éƒ¨èœå•â€œæŸ¥çœ‹ -&gt; å¿«æ·é”®ç®¡ç†â€æ‰“å¼€é¢æ¿ã€‚<br>(13)PackageControl: æ’ä»¶ç®¡ç†æ’ä»¶ï¼Œæä¾›æ·»åŠ ã€åˆ é™¤ã€ç¦ç”¨ã€æŸ¥æ‰¾æ’ä»¶ç­‰åŠŸèƒ½ã€‚<br>(14)SideBarEnhancements: ä¾§è¾¹æ å³é”®å¢å¼ºæ’ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ‰“å¼€æ–¹å¼å¿«æ·é”®ï¼Œéå¸¸å®ç”¨ã€‚<br>(15)SublimeCodeIntel: ä»£ç è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œæ”¯æŒç»å¤§å¤šæ•°å‰ç«¯å¼€å‘è¯­è¨€ã€‚<br>(16)SublimeLinter: ä»£ç è¯­æ³•æ£€æµ‹æ’ä»¶ï¼Œæ”¯æŒC/C++ã€CSSã€HTMLã€Javaã€JavaScriptã€Luaã€Perlã€PHPã€Pythonã€Rubyã€XMLç­‰ç­‰ã€‚<br>(17)SyncedSidebarBg: ä¾§è¾¹æ ä¸ä¸»é¢˜é¢œè‰²åŒæ­¥æ›´æ–°æ’ä»¶ï¼Œè‡ªåŠ¨åŒæ­¥ä¾§è¾¹æ åº•è‰²ä¸ºç¼–è¾‘çª—å£åº•è‰²ã€‚<br>(18)Theme-Nil: å®Œç¾çš„ç¼–ç ä¸»é¢˜ï¼Œç”¨è¿‡çš„éƒ½è¯´å¾ˆå¥½ã€‚</p>\n<h2 id=\"å¸¸è§é—®é¢˜\"><a href=\"#å¸¸è§é—®é¢˜\" class=\"headerlink\" title=\"å¸¸è§é—®é¢˜\"></a>å¸¸è§é—®é¢˜</h2><p>Qï¼šå¦‚ä½•å®‰è£…æ’ä»¶ï¼Ÿ<br>Aï¼šæŒ‰å¿«æ·é”®Ctrl+Shift+Pï¼Œè¾“å…¥ install å¹¶å›è½¦ï¼Œé€‰æ‹©ç›¸åº”æ’ä»¶å®‰è£…å³å¯ã€‚æˆ–è€…ä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹ â€“ æ’ä»¶æ§åˆ¶ â€“ Install Packageâ€è¿›è¡Œæ’ä»¶å®‰è£…ã€‚<br>Qï¼šå¦‚ä½•ä¿®æ”¹ä¾§è¾¹æ èƒŒæ™¯é¢œè‰²ï¼Ÿ<br>Aï¼šä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨æµé£æ¸…éŸ³æ±‰åŒ–ç‰ˆï¼Œå…¶é»˜è®¤ä¸»é¢˜ä¸ºâ€œNil-Themeâ€ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶çš„ç›¸åº”è·¯å¾„æ˜¯â€œData\\Packages\\Nil-Theme\\Nil.sublime-themeâ€ã€‚</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** Sidebar tree (bg) **/</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">â€œclassâ€: â€œsidebar_treeâ€,</span><br><span class=\"line\">â€œdark_contentâ€: true,</span><br><span class=\"line\">â€œrow_paddingâ€: [12, 4],</span><br><span class=\"line\">â€œindentâ€: 13,</span><br><span class=\"line\">â€œindent_offsetâ€: 15,</span><br><span class=\"line\">â€œindent_top_levelâ€: false,</span><br><span class=\"line\">â€œlayer0.tintâ€: [32,32,32], /* darker gray */ /* è¾“å…¥å–œæ¬¢çš„é¢œè‰²çš„å¯¹åº”RGBå€¼å³å¯ */</span><br><span class=\"line\">â€œlayer0.opacityâ€: 1.0,</span><br><span class=\"line\">â€œdark_contentâ€: true</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p>Qï¼šä¸ºä»€ä¹ˆåœ¨Win8ç³»ç»Ÿå‡ºç°ä¸­æ–‡ä¹±ç ï¼Ÿ<br>Aï¼šè¿™æ˜¯Win8æƒé™é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯å¸è½½åé‡è£…åˆ°ç³»ç»Ÿä¹‹å¤–çš„åˆ†åŒºï¼Œå¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚<br>Qï¼šä¸ºä»€ä¹ˆè¾“å…¥å…‰æ ‡å˜å¾—å¾ˆç²—ï¼Ÿ<br>Aï¼šä¾æ¬¡ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰åŸæœ‰æ ¼å¼æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ã€‚æç¤ºï¼šè®°å¾—ç»™åŸæ¥çš„æœ€åä¸€è¡Œæœ«å°¾æ·»åŠ ä¸€ä¸ªåŠè§’é€—å·ã€‚<br>â€œcaret_styleâ€: â€œphaseâ€,<br>â€œcaret_extra_topâ€: 0,<br>â€œcaret_extra_bottomâ€: 0,<br>â€œcaret_extra_widthâ€: 1,<br>Qï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å‡ºç°åŒæ–‡ä»¶å¤¹å›¾æ ‡ï¼Ÿ<br>Aï¼šåœ¨ä¸»é¢˜æ¨¡æ¿è§„åˆ™ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ã€‚</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">â€œclassâ€: â€œicon_folderâ€,</span><br><span class=\"line\"></span><br><span class=\"line\">â€œcontent_marginâ€: [0,0]</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">â€œclassâ€: â€œicon_file_typeâ€,</span><br><span class=\"line\"></span><br><span class=\"line\">â€œcontent_marginâ€: [0,0]</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">â€œclassâ€: â€œicon_folder_loadingâ€,</span><br><span class=\"line\"></span><br><span class=\"line\">â€œcontent_marginâ€: [0,0]</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>Qï¼šä¸ºä»€ä¹ˆä¾§è¾¹æ å’Œæ ‡ç­¾æ ä¸Šä¸­æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºâ€œå£å£â€ï¼Œè€Œè‹±æ–‡çš„æ–‡ä»¶åæ˜¾ç¤ºæ­£å¸¸ï¼Ÿ<br>Aï¼šè¿™é‡Œä»¥Win7æ¥è¯´æ˜ï¼Œæ¡Œé¢ â€“ é¼ æ ‡å³é”® â€“ ä¸ªæ€§åŒ– â€“ æ˜¾ç¤º â€“ è®¾ç½®è‡ªå®šä¹‰æ–‡æœ¬å¤§å°(DPI) â€“ é€‰æ‹©â€œè¾ƒå° â€“ 100%(é»˜è®¤)â€å³å¯ã€‚æˆ–è€…ç‚¹å‡»â€œé¦–é€‰é¡¹â€ â€“ â€œè®¾ç½® â€“ ç”¨æˆ·â€æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æœ«å°¾åŠ ä¸Šä¸€è¡Œä»£ç è¦†ç›–ç³»ç»Ÿçš„DPIã€‚<br>â€œdpi_scaleâ€: 1.0,</p>\n"},{"title":"Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07(PS2307)","date":"2018-04-16T13:49:32.000Z","_content":"\n```\n\n```\n\n\n\n# ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤\n\næ•™ç¨‹æˆªå–è‡ª[é‡äº§å§](http://www.liangchanba.com/article-2442-1.html)\n\n![](/image/huaban.png)\n\n### æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚","source":"_posts/Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07-PS2307.md","raw":"---\ntitle: Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07(PS2307)\ndate: 2018-04-16 21:49:32\ntags: [ç¡¬ä»¶]\ncategories: Uç›˜ä¿®å¤\n---\n\n```\n\n```\n\n\n\n# ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤\n\næ•™ç¨‹æˆªå–è‡ª[é‡äº§å§](http://www.liangchanba.com/article-2442-1.html)\n\n![](/image/huaban.png)\n\n### æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚","slug":"Uç›˜é‡äº§ä¿®å¤é‡‘å£«é¡¿PS2251-07-PS2307","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fo100073kzj8cb4hdce","content":"<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n\n\n\n<h1 id=\"ç¾¤è”MPALL-Rel-7F-V5-03-0A-DL07é‡äº§PS2251-07-PS2307-æ­¥éª¤\"><a href=\"#ç¾¤è”MPALL-Rel-7F-V5-03-0A-DL07é‡äº§PS2251-07-PS2307-æ­¥éª¤\" class=\"headerlink\" title=\"ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤\"></a>ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤</h1><p>æ•™ç¨‹æˆªå–è‡ª<a href=\"http://www.liangchanba.com/article-2442-1.html\" target=\"_blank\" rel=\"noopener\">é‡äº§å§</a></p>\n<p><img src=\"/image/huaban.png\" alt=\"\"></p>\n<h3 id=\"æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚\"><a href=\"#æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚\" class=\"headerlink\" title=\"æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚\"></a>æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚</h3><script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"ç¾¤è”MPALL-Rel-7F-V5-03-0A-DL07é‡äº§PS2251-07-PS2307-æ­¥éª¤\"><a href=\"#ç¾¤è”MPALL-Rel-7F-V5-03-0A-DL07é‡äº§PS2251-07-PS2307-æ­¥éª¤\" class=\"headerlink\" title=\"ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤\"></a>ç¾¤è”MPALL(Rel)-7F-V5.03.0A-DL07é‡äº§PS2251-07(PS2307)æ­¥éª¤</h1><p>æ•™ç¨‹æˆªå–è‡ª<a href=\"http://www.liangchanba.com/article-2442-1.html\" target=\"_blank\" rel=\"noopener\">é‡äº§å§</a></p>\n<p><img src=\"/image/huaban.png\" alt=\"\"></p>\n<h3 id=\"æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚\"><a href=\"#æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚\" class=\"headerlink\" title=\"æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚\"></a>æ³¨æ„ï¼šæ ¹æ®æ­¤æ•™ç¨‹é‡äº§çš„Uç›˜æœ‰å†™ä¿æŠ¤ï¼Œç¬¬åæ­¥æ—¶Filesystemä¸è¦ç”¨defaultï¼Œé€‰æ‹©fat32ï¼Œæœ€åå®Œæˆå˜ç»¿æ—¶é©¬ä¸Šæ‹”ä¸‹Uç›˜ã€‚å¯ä»¥è§£å†³æœ‰å†™ä¿æŠ¤çš„é—®é¢˜ã€‚</h3>"},{"title":"webåŸºç¡€-zxç‰ˆ","date":"2017-05-03T10:16:44.000Z","_content":"\n\n\nWeb åŸºç¡€\n========\n\n\n\n\n1. HyperText Transfer Protocol\n    1. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)\n    2. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®\n    3. åº”ç”¨é¢†åŸŸ\n    4. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦)\n        * `http://example.com:80/foo/bar/readme?x=0&y=abc#part1`\n        * ç»„æˆ\n            - scheme: http\n            - hostname: example.com\n            - port: 80\n            - path: /foo/bar/readme\n            - query: ?x=0&y=abc\n            - fragment: #part1\n\n2. Python ç³»å¸¸è§ Web æ¡†æ¶\n    - Django\n        - å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§\n    - Flask\n        - å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ä¾¿äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ\n    - Tornado\n        - å¼‚æ­¥å¤„ç†, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚\n    - web.py\n        - ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç \n    - bottle\n        - å•æ–‡ä»¶æ¡†æ¶\n    - å…¶ä»–\n        - Falcon\n        - web2py\n        - Quixote\n        - Sanic\n\n3. ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ\n    1. DNSè§£æ\n        - example.com -> 93.184.216.34\n        - `dig example.com`\n        - `nslookup example.com`\n        - `/etc/hosts`\n    2. å»ºç«‹TCP\n        1. SYN\n        2. ACK + SYN\n        3. ACK\n    3. ç”Ÿæˆ Request æŠ¥æ–‡\n    4. Client å‘é€ Request æŠ¥æ–‡\n    5. Server æ¥æ”¶æŠ¥æ–‡\n    6. é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡\n    7. Djangoã€Flask ç­‰åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘å¤„ç†\n        0. ç”Ÿæˆ Request å¯¹è±¡\n        1. process_request (Middleware)\n        2. URL match\n        3. process_views (Middleware)\n        4. Views  -->  process_exception\n        5. Redner Template\n        6. Response\n        7. process_response (Middleware)\n    9. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡\n    10. Server è¿”å›æŠ¥æ–‡ç»™ Client\n    11. å…³é—­è¿æ¥\n    12. è§£æã€æ¸²æŸ“ HTML é¡µé¢\n\n4. æœ€ç®€å•çš„ Server\n    - HTTP Server\n        - åˆ›å»ºã€å…³é—­è¿æ¥\n        - å‘é€ã€æ¥æ”¶æ•°æ®\n    - WSGI: æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£\n    - Web Application\n        - ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘\n        - è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢\n\n5. å¸¸è§ Header å­—æ®µ\n    - Accept            text/plain\n    - Accept-Charset    utf-8\n    - Accept-Encoding   gzip (Content-Encoding)\n    - Accept-Language   zh-CN en-US\n    - Cache-Control     true,max-age\n    - Connection        keep-alive\n    - Content-Length    è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦\n    - Content-Type      ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html\n    - User-Agent        æµè§ˆå™¨æ ‡è¯†\n\n6. HTTP çŠ¶æ€ç \n    - 200 **OK**                      æˆåŠŸ\n    - 301 **Moved Permanently**       é‡å®šå‘ (æ°¸ä¹…è¿ç§»)\n    - 302 **Moved Temporarily**       é‡å®šå‘ (ä¸´æ—¶è¿ç§»)\n    - 303 **See Other**               é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘)\n    - 400 **Bad Request**             å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯\n    - 403 **Forbidden**               æ‹’ç»è®¿é—®\n    - 404 **Not Found**               æ‰¾ä¸åˆ°é¡µé¢\n    - 500 **Internal Server Error**   æœåŠ¡å™¨å†…éƒ¨é”™è¯¯\n    - 502 **Bad Gateway**             ç½‘å…³é”™è¯¯\n    - 503 **Service Unavailable**     æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½\n    - 504 **Gateway Timeout**         è¯·æ±‚è¶…æ—¶\n\n7. GET å’Œ POST\n    - è¡¨è±¡\n        - GET åœ¨æµè§ˆå™¨å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚\n        - GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ä¸å¯ä»¥.\n        - GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜, è€Œ POST ä¸ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®.\n        - GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œ, è€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™.\n        - GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›è¡Œ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼.\n        - GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), è€Œ POST æ²¡æœ‰.\n        - å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶.\n        - GET æ¯” POST æ›´ä¸å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Š, æ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯.\n        - GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­.\n    - æ·±å±‚\n        - GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ….\n        - GET: æµè§ˆå™¨ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›\n        - POST: æµè§ˆå™¨å…ˆå‘é€ header, æœåŠ¡å™¨å“åº” 100 continue, æµè§ˆå™¨å†å‘é€data, æœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰.\n\n8. cookie å’Œ session\n    - æ— çŠ¶æ€åè®®çš„æ— å¥ˆä¹‹ä¸¾\n        - é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ·\n    - å¼‚åŒ\n        1. session åœ¨æœåŠ¡å™¨ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰\n        2. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰\n        3. session çš„è¿è¡Œä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie , åŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰\n        4. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥.\n        5. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session\n    - äº§ç”Ÿè¿‡ç¨‹\n        1. å®¢æˆ·ç«¯è¯·æ±‚\n        2. æœåŠ¡å™¨äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆå™¨\n        3. æµè§ˆå™¨å°† session_id å†™å…¥ cookie\n        4. åç»­è¯·æ±‚ä¼šå†™å…¥ Header\n    - ä½¿ç”¨\n\n9. RESTful\n    - ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡†\n    - ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº\n    - ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ\n    - å››ä¸ªåŠ¨è¯\n        - GET: ç”¨æ¥è·å–èµ„æº\n        - POST: ç”¨æ¥æ–°å»ºèµ„æº\n        - PUT: ç”¨æ¥æ›´æ–°èµ„æº\n        - DELETE: ç”¨æ¥åˆ é™¤èµ„æº\n    - è¯¯åŒº\n        - URL ä¸­ä½¿ç”¨åŠ¨è¯\n        - URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header\n\n10. HTTPS\n    - ä¼˜ç‚¹\n        - é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨\n        - é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹\n        - æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§\n    - ç¼ºç‚¹\n        - åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU\n        - æ¡æ‰‹è¿‡ç¨‹ç¹ç\n    - SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)\n    - åŠ å¯†ç®—æ³•\n        - å¯¹ç§°åŠ å¯†: TEA, AES, 3DES\n\n                text: abcdefg\n                        |  ^\n                        v  |\n                key:    1234\n                        |  ^\n                        v  |\n                new:  hasjdkfhasdf\n\n        - éå¯¹ç§°åŠ å¯†: RSA, ED25519\n\n                text:   abcdefghijklmn\n                          |       ^\n                          v       |\n                pub_key: 123      |\n                pri_key:  |   1234567890123456789546789\n                          |       ^\n                          v       |\n                new: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd\n\n    - Let's Encrypt: <https://letsencrypt.org/>\n    - ä¼ è¾“è¿‡ç¨‹ ![HTTPS](/image/https.png)\n","source":"_posts/WebåŸºç¡€.md","raw":"---\ntitle: webåŸºç¡€-zxç‰ˆ\ndate: 2017-05-03 18:16:44\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\n\n\nWeb åŸºç¡€\n========\n\n\n\n\n1. HyperText Transfer Protocol\n    1. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)\n    2. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®\n    3. åº”ç”¨é¢†åŸŸ\n    4. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦)\n        * `http://example.com:80/foo/bar/readme?x=0&y=abc#part1`\n        * ç»„æˆ\n            - scheme: http\n            - hostname: example.com\n            - port: 80\n            - path: /foo/bar/readme\n            - query: ?x=0&y=abc\n            - fragment: #part1\n\n2. Python ç³»å¸¸è§ Web æ¡†æ¶\n    - Django\n        - å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§\n    - Flask\n        - å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ä¾¿äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ\n    - Tornado\n        - å¼‚æ­¥å¤„ç†, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚\n    - web.py\n        - ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç \n    - bottle\n        - å•æ–‡ä»¶æ¡†æ¶\n    - å…¶ä»–\n        - Falcon\n        - web2py\n        - Quixote\n        - Sanic\n\n3. ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ\n    1. DNSè§£æ\n        - example.com -> 93.184.216.34\n        - `dig example.com`\n        - `nslookup example.com`\n        - `/etc/hosts`\n    2. å»ºç«‹TCP\n        1. SYN\n        2. ACK + SYN\n        3. ACK\n    3. ç”Ÿæˆ Request æŠ¥æ–‡\n    4. Client å‘é€ Request æŠ¥æ–‡\n    5. Server æ¥æ”¶æŠ¥æ–‡\n    6. é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡\n    7. Djangoã€Flask ç­‰åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘å¤„ç†\n        0. ç”Ÿæˆ Request å¯¹è±¡\n        1. process_request (Middleware)\n        2. URL match\n        3. process_views (Middleware)\n        4. Views  -->  process_exception\n        5. Redner Template\n        6. Response\n        7. process_response (Middleware)\n    9. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡\n    10. Server è¿”å›æŠ¥æ–‡ç»™ Client\n    11. å…³é—­è¿æ¥\n    12. è§£æã€æ¸²æŸ“ HTML é¡µé¢\n\n4. æœ€ç®€å•çš„ Server\n    - HTTP Server\n        - åˆ›å»ºã€å…³é—­è¿æ¥\n        - å‘é€ã€æ¥æ”¶æ•°æ®\n    - WSGI: æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£\n    - Web Application\n        - ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘\n        - è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢\n\n5. å¸¸è§ Header å­—æ®µ\n    - Accept            text/plain\n    - Accept-Charset    utf-8\n    - Accept-Encoding   gzip (Content-Encoding)\n    - Accept-Language   zh-CN en-US\n    - Cache-Control     true,max-age\n    - Connection        keep-alive\n    - Content-Length    è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦\n    - Content-Type      ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html\n    - User-Agent        æµè§ˆå™¨æ ‡è¯†\n\n6. HTTP çŠ¶æ€ç \n    - 200 **OK**                      æˆåŠŸ\n    - 301 **Moved Permanently**       é‡å®šå‘ (æ°¸ä¹…è¿ç§»)\n    - 302 **Moved Temporarily**       é‡å®šå‘ (ä¸´æ—¶è¿ç§»)\n    - 303 **See Other**               é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘)\n    - 400 **Bad Request**             å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯\n    - 403 **Forbidden**               æ‹’ç»è®¿é—®\n    - 404 **Not Found**               æ‰¾ä¸åˆ°é¡µé¢\n    - 500 **Internal Server Error**   æœåŠ¡å™¨å†…éƒ¨é”™è¯¯\n    - 502 **Bad Gateway**             ç½‘å…³é”™è¯¯\n    - 503 **Service Unavailable**     æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½\n    - 504 **Gateway Timeout**         è¯·æ±‚è¶…æ—¶\n\n7. GET å’Œ POST\n    - è¡¨è±¡\n        - GET åœ¨æµè§ˆå™¨å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚\n        - GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ä¸å¯ä»¥.\n        - GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜, è€Œ POST ä¸ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®.\n        - GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œ, è€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™.\n        - GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›è¡Œ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼.\n        - GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), è€Œ POST æ²¡æœ‰.\n        - å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶.\n        - GET æ¯” POST æ›´ä¸å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Š, æ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯.\n        - GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­.\n    - æ·±å±‚\n        - GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ….\n        - GET: æµè§ˆå™¨ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›\n        - POST: æµè§ˆå™¨å…ˆå‘é€ header, æœåŠ¡å™¨å“åº” 100 continue, æµè§ˆå™¨å†å‘é€data, æœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰.\n\n8. cookie å’Œ session\n    - æ— çŠ¶æ€åè®®çš„æ— å¥ˆä¹‹ä¸¾\n        - é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ·\n    - å¼‚åŒ\n        1. session åœ¨æœåŠ¡å™¨ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰\n        2. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰\n        3. session çš„è¿è¡Œä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie , åŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰\n        4. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥.\n        5. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session\n    - äº§ç”Ÿè¿‡ç¨‹\n        1. å®¢æˆ·ç«¯è¯·æ±‚\n        2. æœåŠ¡å™¨äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆå™¨\n        3. æµè§ˆå™¨å°† session_id å†™å…¥ cookie\n        4. åç»­è¯·æ±‚ä¼šå†™å…¥ Header\n    - ä½¿ç”¨\n\n9. RESTful\n    - ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡†\n    - ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº\n    - ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ\n    - å››ä¸ªåŠ¨è¯\n        - GET: ç”¨æ¥è·å–èµ„æº\n        - POST: ç”¨æ¥æ–°å»ºèµ„æº\n        - PUT: ç”¨æ¥æ›´æ–°èµ„æº\n        - DELETE: ç”¨æ¥åˆ é™¤èµ„æº\n    - è¯¯åŒº\n        - URL ä¸­ä½¿ç”¨åŠ¨è¯\n        - URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header\n\n10. HTTPS\n    - ä¼˜ç‚¹\n        - é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨\n        - é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹\n        - æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§\n    - ç¼ºç‚¹\n        - åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU\n        - æ¡æ‰‹è¿‡ç¨‹ç¹ç\n    - SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)\n    - åŠ å¯†ç®—æ³•\n        - å¯¹ç§°åŠ å¯†: TEA, AES, 3DES\n\n                text: abcdefg\n                        |  ^\n                        v  |\n                key:    1234\n                        |  ^\n                        v  |\n                new:  hasjdkfhasdf\n\n        - éå¯¹ç§°åŠ å¯†: RSA, ED25519\n\n                text:   abcdefghijklmn\n                          |       ^\n                          v       |\n                pub_key: 123      |\n                pri_key:  |   1234567890123456789546789\n                          |       ^\n                          v       |\n                new: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd\n\n    - Let's Encrypt: <https://letsencrypt.org/>\n    - ä¼ è¾“è¿‡ç¨‹ ![HTTPS](/image/https.png)\n","slug":"WebåŸºç¡€","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fo5000b3kzj6vdfcbb2","content":"<h1 id=\"Web-åŸºç¡€\"><a href=\"#Web-åŸºç¡€\" class=\"headerlink\" title=\"Web åŸºç¡€\"></a>Web åŸºç¡€</h1><ol>\n<li><p>HyperText Transfer Protocol</p>\n<ol>\n<li>HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)</li>\n<li>æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®</li>\n<li>åº”ç”¨é¢†åŸŸ</li>\n<li>è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦)<ul>\n<li><code>http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1</code></li>\n<li>ç»„æˆ<ul>\n<li>scheme: http</li>\n<li>hostname: example.com</li>\n<li>port: 80</li>\n<li>path: /foo/bar/readme</li>\n<li>query: ?x=0&amp;y=abc</li>\n<li>fragment: #part1</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>Python ç³»å¸¸è§ Web æ¡†æ¶</p>\n<ul>\n<li>Django<ul>\n<li>å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§</li>\n</ul>\n</li>\n<li>Flask<ul>\n<li>å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ä¾¿äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ</li>\n</ul>\n</li>\n<li>Tornado<ul>\n<li>å¼‚æ­¥å¤„ç†, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚</li>\n</ul>\n</li>\n<li>web.py<ul>\n<li>ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç </li>\n</ul>\n</li>\n<li>bottle<ul>\n<li>å•æ–‡ä»¶æ¡†æ¶</li>\n</ul>\n</li>\n<li>å…¶ä»–<ul>\n<li>Falcon</li>\n<li>web2py</li>\n<li>Quixote</li>\n<li>Sanic</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ</p>\n<ol>\n<li>DNSè§£æ<ul>\n<li>example.com -&gt; 93.184.216.34</li>\n<li><code>dig example.com</code></li>\n<li><code>nslookup example.com</code></li>\n<li><code>/etc/hosts</code></li>\n</ul>\n</li>\n<li>å»ºç«‹TCP<ol>\n<li>SYN</li>\n<li>ACK + SYN</li>\n<li>ACK</li>\n</ol>\n</li>\n<li>ç”Ÿæˆ Request æŠ¥æ–‡</li>\n<li>Client å‘é€ Request æŠ¥æ–‡</li>\n<li>Server æ¥æ”¶æŠ¥æ–‡</li>\n<li>é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡</li>\n<li>Djangoã€Flask ç­‰åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘å¤„ç†<ol start=\"0\">\n<li>ç”Ÿæˆ Request å¯¹è±¡</li>\n<li>process_request (Middleware)</li>\n<li>URL match</li>\n<li>process_views (Middleware)</li>\n<li>Views  â€“&gt;  process_exception</li>\n<li>Redner Template</li>\n<li>Response</li>\n<li>process_response (Middleware)</li>\n</ol>\n</li>\n<li>ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡</li>\n<li>Server è¿”å›æŠ¥æ–‡ç»™ Client</li>\n<li>å…³é—­è¿æ¥</li>\n<li>è§£æã€æ¸²æŸ“ HTML é¡µé¢</li>\n</ol>\n</li>\n<li><p>æœ€ç®€å•çš„ Server</p>\n<ul>\n<li>HTTP Server<ul>\n<li>åˆ›å»ºã€å…³é—­è¿æ¥</li>\n<li>å‘é€ã€æ¥æ”¶æ•°æ®</li>\n</ul>\n</li>\n<li>WSGI: æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£</li>\n<li>Web Application<ul>\n<li>ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘</li>\n<li>è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¸¸è§ Header å­—æ®µ</p>\n<ul>\n<li>Accept            text/plain</li>\n<li>Accept-Charset    utf-8</li>\n<li>Accept-Encoding   gzip (Content-Encoding)</li>\n<li>Accept-Language   zh-CN en-US</li>\n<li>Cache-Control     true,max-age</li>\n<li>Connection        keep-alive</li>\n<li>Content-Length    è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦</li>\n<li>Content-Type      ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html</li>\n<li>User-Agent        æµè§ˆå™¨æ ‡è¯†</li>\n</ul>\n</li>\n<li><p>HTTP çŠ¶æ€ç </p>\n<ul>\n<li>200 <strong>OK</strong>                      æˆåŠŸ</li>\n<li>301 <strong>Moved Permanently</strong>       é‡å®šå‘ (æ°¸ä¹…è¿ç§»)</li>\n<li>302 <strong>Moved Temporarily</strong>       é‡å®šå‘ (ä¸´æ—¶è¿ç§»)</li>\n<li>303 <strong>See Other</strong>               é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘)</li>\n<li>400 <strong>Bad Request</strong>             å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯</li>\n<li>403 <strong>Forbidden</strong>               æ‹’ç»è®¿é—®</li>\n<li>404 <strong>Not Found</strong>               æ‰¾ä¸åˆ°é¡µé¢</li>\n<li>500 <strong>Internal Server Error</strong>   æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>\n<li>502 <strong>Bad Gateway</strong>             ç½‘å…³é”™è¯¯</li>\n<li>503 <strong>Service Unavailable</strong>     æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½</li>\n<li>504 <strong>Gateway Timeout</strong>         è¯·æ±‚è¶…æ—¶</li>\n</ul>\n</li>\n<li><p>GET å’Œ POST</p>\n<ul>\n<li>è¡¨è±¡<ul>\n<li>GET åœ¨æµè§ˆå™¨å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚</li>\n<li>GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ä¸å¯ä»¥.</li>\n<li>GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜, è€Œ POST ä¸ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®.</li>\n<li>GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œ, è€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™.</li>\n<li>GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›è¡Œ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼.</li>\n<li>GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), è€Œ POST æ²¡æœ‰.</li>\n<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶.</li>\n<li>GET æ¯” POST æ›´ä¸å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Š, æ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯.</li>\n<li>GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­.</li>\n</ul>\n</li>\n<li>æ·±å±‚<ul>\n<li>GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ….</li>\n<li>GET: æµè§ˆå™¨ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›</li>\n<li>POST: æµè§ˆå™¨å…ˆå‘é€ header, æœåŠ¡å™¨å“åº” 100 continue, æµè§ˆå™¨å†å‘é€data, æœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>cookie å’Œ session</p>\n<ul>\n<li>æ— çŠ¶æ€åè®®çš„æ— å¥ˆä¹‹ä¸¾<ul>\n<li>é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ·</li>\n</ul>\n</li>\n<li>å¼‚åŒ<ol>\n<li>session åœ¨æœåŠ¡å™¨ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</li>\n<li>session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰</li>\n<li>session çš„è¿è¡Œä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie , åŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰</li>\n<li>session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥.</li>\n<li>ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session</li>\n</ol>\n</li>\n<li>äº§ç”Ÿè¿‡ç¨‹<ol>\n<li>å®¢æˆ·ç«¯è¯·æ±‚</li>\n<li>æœåŠ¡å™¨äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆå™¨</li>\n<li>æµè§ˆå™¨å°† session_id å†™å…¥ cookie</li>\n<li>åç»­è¯·æ±‚ä¼šå†™å…¥ Header</li>\n</ol>\n</li>\n<li>ä½¿ç”¨</li>\n</ul>\n</li>\n<li><p>RESTful</p>\n<ul>\n<li>ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡†</li>\n<li>ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº</li>\n<li>ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ</li>\n<li>å››ä¸ªåŠ¨è¯<ul>\n<li>GET: ç”¨æ¥è·å–èµ„æº</li>\n<li>POST: ç”¨æ¥æ–°å»ºèµ„æº</li>\n<li>PUT: ç”¨æ¥æ›´æ–°èµ„æº</li>\n<li>DELETE: ç”¨æ¥åˆ é™¤èµ„æº</li>\n</ul>\n</li>\n<li>è¯¯åŒº<ul>\n<li>URL ä¸­ä½¿ç”¨åŠ¨è¯</li>\n<li>URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>HTTPS</p>\n<ul>\n<li><p>ä¼˜ç‚¹</p>\n<ul>\n<li>é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨</li>\n<li>é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹</li>\n<li>æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§</li>\n</ul>\n</li>\n<li><p>ç¼ºç‚¹</p>\n<ul>\n<li>åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU</li>\n<li>æ¡æ‰‹è¿‡ç¨‹ç¹ç</li>\n</ul>\n</li>\n<li><p>SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)</p>\n</li>\n<li><p>åŠ å¯†ç®—æ³•</p>\n<ul>\n<li><p>å¯¹ç§°åŠ å¯†: TEA, AES, 3DES</p>\n<pre><code>text: abcdefg\n        |  ^\n        v  |\nkey:    1234\n        |  ^\n        v  |\nnew:  hasjdkfhasdf</code></pre></li>\n<li><p>éå¯¹ç§°åŠ å¯†: RSA, ED25519</p>\n<pre><code>text:   abcdefghijklmn\n          |       ^\n          v       |\npub_key: 123      |\npri_key:  |   1234567890123456789546789\n          |       ^\n          v       |\nnew: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd</code></pre></li>\n</ul>\n</li>\n<li><p>Letâ€™s Encrypt: <a href=\"https://letsencrypt.org/\" target=\"_blank\" rel=\"noopener\">https://letsencrypt.org/</a></p>\n</li>\n<li><p>ä¼ è¾“è¿‡ç¨‹ <img src=\"/image/https.png\" alt=\"HTTPS\"></p>\n</li>\n</ul>\n</li>\n</ol>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"Web-åŸºç¡€\"><a href=\"#Web-åŸºç¡€\" class=\"headerlink\" title=\"Web åŸºç¡€\"></a>Web åŸºç¡€</h1><ol>\n<li><p>HyperText Transfer Protocol</p>\n<ol>\n<li>HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)</li>\n<li>æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®</li>\n<li>åº”ç”¨é¢†åŸŸ</li>\n<li>è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦)<ul>\n<li><code>http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1</code></li>\n<li>ç»„æˆ<ul>\n<li>scheme: http</li>\n<li>hostname: example.com</li>\n<li>port: 80</li>\n<li>path: /foo/bar/readme</li>\n<li>query: ?x=0&amp;y=abc</li>\n<li>fragment: #part1</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>Python ç³»å¸¸è§ Web æ¡†æ¶</p>\n<ul>\n<li>Django<ul>\n<li>å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§</li>\n</ul>\n</li>\n<li>Flask<ul>\n<li>å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ä¾¿äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ</li>\n</ul>\n</li>\n<li>Tornado<ul>\n<li>å¼‚æ­¥å¤„ç†, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚</li>\n</ul>\n</li>\n<li>web.py<ul>\n<li>ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç </li>\n</ul>\n</li>\n<li>bottle<ul>\n<li>å•æ–‡ä»¶æ¡†æ¶</li>\n</ul>\n</li>\n<li>å…¶ä»–<ul>\n<li>Falcon</li>\n<li>web2py</li>\n<li>Quixote</li>\n<li>Sanic</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ</p>\n<ol>\n<li>DNSè§£æ<ul>\n<li>example.com -&gt; 93.184.216.34</li>\n<li><code>dig example.com</code></li>\n<li><code>nslookup example.com</code></li>\n<li><code>/etc/hosts</code></li>\n</ul>\n</li>\n<li>å»ºç«‹TCP<ol>\n<li>SYN</li>\n<li>ACK + SYN</li>\n<li>ACK</li>\n</ol>\n</li>\n<li>ç”Ÿæˆ Request æŠ¥æ–‡</li>\n<li>Client å‘é€ Request æŠ¥æ–‡</li>\n<li>Server æ¥æ”¶æŠ¥æ–‡</li>\n<li>é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡</li>\n<li>Djangoã€Flask ç­‰åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘å¤„ç†<ol start=\"0\">\n<li>ç”Ÿæˆ Request å¯¹è±¡</li>\n<li>process_request (Middleware)</li>\n<li>URL match</li>\n<li>process_views (Middleware)</li>\n<li>Views  â€“&gt;  process_exception</li>\n<li>Redner Template</li>\n<li>Response</li>\n<li>process_response (Middleware)</li>\n</ol>\n</li>\n<li>ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡</li>\n<li>Server è¿”å›æŠ¥æ–‡ç»™ Client</li>\n<li>å…³é—­è¿æ¥</li>\n<li>è§£æã€æ¸²æŸ“ HTML é¡µé¢</li>\n</ol>\n</li>\n<li><p>æœ€ç®€å•çš„ Server</p>\n<ul>\n<li>HTTP Server<ul>\n<li>åˆ›å»ºã€å…³é—­è¿æ¥</li>\n<li>å‘é€ã€æ¥æ”¶æ•°æ®</li>\n</ul>\n</li>\n<li>WSGI: æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£</li>\n<li>Web Application<ul>\n<li>ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘</li>\n<li>è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¸¸è§ Header å­—æ®µ</p>\n<ul>\n<li>Accept            text/plain</li>\n<li>Accept-Charset    utf-8</li>\n<li>Accept-Encoding   gzip (Content-Encoding)</li>\n<li>Accept-Language   zh-CN en-US</li>\n<li>Cache-Control     true,max-age</li>\n<li>Connection        keep-alive</li>\n<li>Content-Length    è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦</li>\n<li>Content-Type      ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html</li>\n<li>User-Agent        æµè§ˆå™¨æ ‡è¯†</li>\n</ul>\n</li>\n<li><p>HTTP çŠ¶æ€ç </p>\n<ul>\n<li>200 <strong>OK</strong>                      æˆåŠŸ</li>\n<li>301 <strong>Moved Permanently</strong>       é‡å®šå‘ (æ°¸ä¹…è¿ç§»)</li>\n<li>302 <strong>Moved Temporarily</strong>       é‡å®šå‘ (ä¸´æ—¶è¿ç§»)</li>\n<li>303 <strong>See Other</strong>               é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘)</li>\n<li>400 <strong>Bad Request</strong>             å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯</li>\n<li>403 <strong>Forbidden</strong>               æ‹’ç»è®¿é—®</li>\n<li>404 <strong>Not Found</strong>               æ‰¾ä¸åˆ°é¡µé¢</li>\n<li>500 <strong>Internal Server Error</strong>   æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>\n<li>502 <strong>Bad Gateway</strong>             ç½‘å…³é”™è¯¯</li>\n<li>503 <strong>Service Unavailable</strong>     æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½</li>\n<li>504 <strong>Gateway Timeout</strong>         è¯·æ±‚è¶…æ—¶</li>\n</ul>\n</li>\n<li><p>GET å’Œ POST</p>\n<ul>\n<li>è¡¨è±¡<ul>\n<li>GET åœ¨æµè§ˆå™¨å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚</li>\n<li>GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ä¸å¯ä»¥.</li>\n<li>GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜, è€Œ POST ä¸ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®.</li>\n<li>GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œ, è€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™.</li>\n<li>GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›è¡Œ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼.</li>\n<li>GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), è€Œ POST æ²¡æœ‰.</li>\n<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶.</li>\n<li>GET æ¯” POST æ›´ä¸å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Š, æ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯.</li>\n<li>GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­.</li>\n</ul>\n</li>\n<li>æ·±å±‚<ul>\n<li>GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ….</li>\n<li>GET: æµè§ˆå™¨ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›</li>\n<li>POST: æµè§ˆå™¨å…ˆå‘é€ header, æœåŠ¡å™¨å“åº” 100 continue, æµè§ˆå™¨å†å‘é€data, æœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>cookie å’Œ session</p>\n<ul>\n<li>æ— çŠ¶æ€åè®®çš„æ— å¥ˆä¹‹ä¸¾<ul>\n<li>é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ·</li>\n</ul>\n</li>\n<li>å¼‚åŒ<ol>\n<li>session åœ¨æœåŠ¡å™¨ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</li>\n<li>session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰</li>\n<li>session çš„è¿è¡Œä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie , åŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰</li>\n<li>session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥.</li>\n<li>ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session</li>\n</ol>\n</li>\n<li>äº§ç”Ÿè¿‡ç¨‹<ol>\n<li>å®¢æˆ·ç«¯è¯·æ±‚</li>\n<li>æœåŠ¡å™¨äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆå™¨</li>\n<li>æµè§ˆå™¨å°† session_id å†™å…¥ cookie</li>\n<li>åç»­è¯·æ±‚ä¼šå†™å…¥ Header</li>\n</ol>\n</li>\n<li>ä½¿ç”¨</li>\n</ul>\n</li>\n<li><p>RESTful</p>\n<ul>\n<li>ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡†</li>\n<li>ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº</li>\n<li>ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ</li>\n<li>å››ä¸ªåŠ¨è¯<ul>\n<li>GET: ç”¨æ¥è·å–èµ„æº</li>\n<li>POST: ç”¨æ¥æ–°å»ºèµ„æº</li>\n<li>PUT: ç”¨æ¥æ›´æ–°èµ„æº</li>\n<li>DELETE: ç”¨æ¥åˆ é™¤èµ„æº</li>\n</ul>\n</li>\n<li>è¯¯åŒº<ul>\n<li>URL ä¸­ä½¿ç”¨åŠ¨è¯</li>\n<li>URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>HTTPS</p>\n<ul>\n<li><p>ä¼˜ç‚¹</p>\n<ul>\n<li>é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨</li>\n<li>é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹</li>\n<li>æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§</li>\n</ul>\n</li>\n<li><p>ç¼ºç‚¹</p>\n<ul>\n<li>åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU</li>\n<li>æ¡æ‰‹è¿‡ç¨‹ç¹ç</li>\n</ul>\n</li>\n<li><p>SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)</p>\n</li>\n<li><p>åŠ å¯†ç®—æ³•</p>\n<ul>\n<li><p>å¯¹ç§°åŠ å¯†: TEA, AES, 3DES</p>\n<pre><code>text: abcdefg\n        |  ^\n        v  |\nkey:    1234\n        |  ^\n        v  |\nnew:  hasjdkfhasdf</code></pre></li>\n<li><p>éå¯¹ç§°åŠ å¯†: RSA, ED25519</p>\n<pre><code>text:   abcdefghijklmn\n          |       ^\n          v       |\npub_key: 123      |\npri_key:  |   1234567890123456789546789\n          |       ^\n          v       |\nnew: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd</code></pre></li>\n</ul>\n</li>\n<li><p>Letâ€™s Encrypt: <a href=\"https://letsencrypt.org/\" target=\"_blank\" rel=\"noopener\">https://letsencrypt.org/</a></p>\n</li>\n<li><p>ä¼ è¾“è¿‡ç¨‹ <img src=\"/image/https.png\" alt=\"HTTPS\"></p>\n</li>\n</ul>\n</li>\n</ol>\n"},{"title":"webåŸºç¡€","date":"2017-05-03T10:16:33.000Z","_content":"\n# webåŸºç¡€\n\n##æœ€ç®€å•çš„webæ¡†æ¶:\n\n```python\n# coding: utf-8\nimport socket\n\n(HOST, PORT) = '0.0.0.0', 8888\n\nRESPONSE = b'''\nHTTP/1.1 200 OK\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Hello</title>\n</head>\n<body>\n<img src=\"https://www.baidu.com/img/bd_logo1.png\">\n</body>\n</html>\n'''\n\nserver_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)   # å»ºç«‹ SOCK è¿æ¥\nserver_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) # è®¾ç½®å‚æ•°\nserver_socket.bind((HOST, PORT))                                    # ç»‘å®š IP:ç«¯å£\nserver_socket.listen(100)                                           # å¼€å§‹ç›‘å¬\n\nprint('Serving HTTP on port %s ...' % PORT)\n\nwhile True:\n    client_socket, client_address = server_socket.accept()  # æ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚\n    request = client_socket.recv(1024)                      # æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®, ä¸€æ¬¡æœ€å¤š 1024 å­—èŠ‚\n\n    # WSGI\n\n    print('Request >>>')\n    print(request.decode('utf-8'))\n    http_response = RESPONSE\n\n    # WSGI\n\n    client_socket.sendall(http_response)\n    client_socket.close()\n\n```\n\nä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹\n\n`client`â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”`server`\n\n1                 syn   ->\n\n2 <-         ack + syn   ackæ˜¯å¯¹synçš„åº”ç­”\n\n3                    ->ack\n\n---\n\n`python:æ¨¡å—,åŒ…,è£…é¥°å™¨,è¿­ä»£å™¨,ç”Ÿæˆå™¨,with,__new__,__dict__,é­”æœ¯æ–¹æ³•`\n\n`æ¡†æ¶:django,falsk,scrapy,gevent,tornado`\n\n`Nginx,Redis,MySQL`\n\n---\n\n### webåŸºç¡€æ€»ç»“\n\n1. **HyperText Transfer Protocol**\n\n    i. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)\n\n   ii. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®® \n\n   iii. åº”ç”¨é¢†åŸŸ\n\n   iv. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦) \n\n   http://example.com:80/foo/bar/readme?x=0&y=abc#part1 \n\n   ç»„æˆ \n\n   scheme: http\n\n    hostname: example.com \n\n   port: 80 \n\n   path: /foo/bar/readme \n\n   query: ?x=0&y=abc \n\n   fragment: #part1\n\n2. **Python ç³»å¸¸è§ Web æ¡†æ¶**\n\n    **Django** \n\n   å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§ \n\n   **Flask** \n\n   å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ï¥¥äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ **Tornado** \n\n   å¼‚æ­¥å¤„ï§¤, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚ \n\n   **web.py** \n\n   ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç  \n\n   **bottle**\n\n    å•æ–‡ä»¶æ¡†æ¶ \n\n   **å…¶ä»–** \n\n   Falcon web2py Quixote Sanic\n\n3. **ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿï¦ºï§½ä¹ˆ** \n\n   i. **DNSè§£æ** \n\n   â€‹\texample.com -> 93.184.216.34 \n\n   â€‹\tdig example.com \n\n   â€‹\tnslookup example.com \n\n   â€‹\t/etc/hosts \n\n   ii. **å»ºç«‹TCP** \n\n   â€‹\ta. SYN \n\n   â€‹\tb. ACK + SYN \n\n   â€‹\tc. ACK \n\n   iii. **æµè§ˆå™¨ç”Ÿæˆ Request æŠ¥æ–‡**\n\n   iv. **Client å‘é€ Request æŠ¥æ–‡** \n\n   v. **Server æ¥æ”¶æŠ¥æ–‡** \n\n   vi. **é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡** \n\n   vii. **Django**ã€**Flask ç­‰åº”ç”¨ç¨‹åºè¿›ï¨ˆé€»è¾‘å¤„ï§¤** \n\n   â€‹\ta. ç”Ÿæˆ Request å¯¹è±¡ \n\n   â€‹\tb. process_request (Middleware) \n\n   â€‹\tc. URL match \n\n   â€‹\td. process_views (Middleware) \n\n   â€‹\te. Views --> process_exception \n\n   â€‹\tf. Redner Template \n\n   â€‹\tg. Response \n\n   â€‹\th. process_response (Middleware) \n\n   **viii. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡ **\n\n   **ix. Server è¿”å›æŠ¥æ–‡ç»™ Client **\n\n   **x. å…³é—­è¿æ¥ **\n\n   **xi. è§£æã€æ¸²æŸ“ HTML é¡µé¢**\n\n4. **æœ€ç®€å•çš„ Server **\n\n   **HTTP Server**\n\n    \tåˆ›å»ºã€å…³é—­è¿æ¥\n\n    \tå‘é€ã€æ¥æ”¶æ•°æ®\n\n    **WSGI:** \n\n   â€‹\tæ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£ \n\n   **Web Application** \n\n   â€‹\tç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘ è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢\n\n5. **å¸¸è§ Header å­—æ®µ**\n\n    Accept text/plain \n\n   Accept-Charset utf-8 \n\n   Accept-Encoding gzip (Content-Encoding) \n\n   Accept-Language zh-CN en-US \n\n   Cache-Control true,max-age \n\n   Connection keep-alive \n\n   Content-Length è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦ \n\n   Content-Type ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html User-Agent æµè§ˆï¨¸æ ‡è¯†\n\n6. **HTTP çŠ¶æ€ç ** \n\n   200 **OK** æˆåŠŸ \n\n   301 **Moved Permanently** é‡å®šå‘ (æ°¸ä¹…è¿ç§») \n\n   302 **Moved Temporarily** é‡å®šå‘ (ä¸´æ—¶è¿ç§») \n\n   303 **See Other** é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘) \n\n   400 **Bad Request** å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ \n\n   403 **Forbidden** æ‹’ç»è®¿é—® \n\n   404 **Not Found** æ‰¾ï¥§åˆ°é¡µé¢ \n\n   500 **Internal Server Error** æœåŠ¡ï¨¸å†…éƒ¨é”™è¯¯ \n\n   502 **Bad Gateway** ç½‘å…³é”™è¯¯ \n\n   503 **Service Unavailable** æœåŠ¡ï¨¸ç»´æŠ¤æˆ–è€…è¿‡è½½ \n\n   504 **Gateway Timeout** è¯·æ±‚è¶…æ—¶\n\n7. **GET å’Œ POST** \n\n   **è¡¨è±¡** \n\n   â€‹\tGET åœ¨æµè§ˆï¨¸å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚ \n\n   â€‹\tGET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ï¥§å¯ä»¥. \n\n   â€‹\tGET è¯·æ±‚ä¼šè¢«æµè§ˆï¨¸ä¸»åŠ¨ç¼“å­˜, è€Œ POST ï¥§ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®. \n\n   â€‹\tGET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ï§åœ¨æµè§ˆï¨¸å†å²è®°å½•ï§©, è€Œ POST ä¸­çš„å‚æ•°ï¥§ä¼šè¢«ä¿ï§. \n\n   â€‹\tGET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›ï¨ˆ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼. \n\n   â€‹\tGET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶. \n\n   â€‹\tGET æ¯” POST ï¤ï¥§å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥ï¨†ï¤¸åœ¨URLä¸Š, æ‰€ä»¥ï¥§èƒ½ç”¨æ¥ä¼ é€’ï©æ„Ÿä¿¡æ¯. \n\n   â€‹\tGET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­. \n\n   **æ·±å±‚** \n\n   â€‹\tGET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…. \n\n   â€‹\tGET: æµè§ˆï¨¸ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡ï¨¸å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ \n\n   â€‹\tPOST: æµè§ˆï¨¸å…ˆå‘é€ header, æœåŠ¡ï¨¸å“åº” 100 continue, æµè§ˆï¨¸å†å‘é€data, æœåŠ¡ï¨¸\n\n8. **cookie å’Œ session** \n\n   **æ— çŠ¶æ€åè®®çš„æ— ï¤Œä¹‹ä¸¾**\n\n   â€‹\té€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ· \n\n   **å¼‚åŒ** \n\n   â€‹\ta. session åœ¨æœåŠ¡ï¨¸ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆï¨¸ï¼‰ \n\n   â€‹\tb. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡ï¨¸çš„ä¸€ä¸ªæ–‡ä»¶ï§©ï¼ˆï¥§æ˜¯å†…å­˜ï¼‰ \n\n   â€‹\tc. session çš„è¿ï¨ˆä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰ \n\n   â€‹\td. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥. \n\n   â€‹\te. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session \n\n   **äº§ç”Ÿè¿‡ç¨‹** \n\n   â€‹\ta. å®¢æˆ·ç«¯è¯·æ±‚ \n\n   â€‹\tb. æœåŠ¡ï¨¸äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆï¨¸ \n\n   â€‹\tc. æµè§ˆï¨¸å°† session_id å†™å…¥ cookie \n\n   â€‹\td. åç»­è¯·æ±‚ä¼šå†™å…¥ Header ä½¿ç”¨\n\n9. **RESTful** \n\n   ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡† \n\n   ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº \n\n   ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ \n\n   **å››ä¸ªåŠ¨è¯** \n\n   â€‹\tGET: ç”¨æ¥è·å–èµ„æº \n\n   â€‹\tPOST: ç”¨æ¥æ–°å»ºèµ„æº \n\n   â€‹\tPUT: ç”¨æ¥ï¤æ–°èµ„æº \n\n   â€‹\tDELETE: ç”¨æ¥åˆ é™¤èµ„æº \n\n   **è¯¯åŒº** \n\n   â€‹\tURL ä¸­ä½¿ç”¨åŠ¨è¯ \n\n   â€‹\tURL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header\n\n10. **HTTPS** \n\n    **ä¼˜ç‚¹** \n\n    â€‹\té˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ \n\n    â€‹\té˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹ \n\n    â€‹\tæ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ \n\n    **ç¼ºç‚¹** \n\n    â€‹\tåŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU \n\n    â€‹\tæ¡æ‰‹è¿‡ç¨‹ç¹ç \n\n    **SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)** \n\n    **åŠ å¯†ç®—æ³•** \n\n    â€‹\t**å¯¹ç§°åŠ å¯†: TEA, AES, 3DES** \n\n    â€‹\t\ttext: abcdefg \n\n    â€‹\t\t\t|   ^\n\n    â€‹\t\t\tv   |\n\n    â€‹\t\tkey: 1234 \n\n    â€‹\t\t\t|  ^ \n\n    â€‹\t\t\tv  | \n\n    â€‹\t\tnew: hasjdkfhasdf \n\n    â€‹\t**éå¯¹ç§°åŠ å¯†: RSA, ED25519** \n\n    â€‹\t\ttext: abcdefghijklmn \n\n    â€‹\t\t\t\t|      ^   \n\n    â€‹\t\t\t\tv      |\n\n    â€‹\t\tpub_key: 123 | \n\n    â€‹\t\tpri_key:  | \t1234567890123456789546789 \n\n    â€‹\t\t\t\t|       ^ \n\n    â€‹\t\t\t\tv\t | \n\n    â€‹\t\tnew: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd \n\n    **Let's Encrypt: https://letsencrypt.org/** \n\n    **ä¼ è¾“è¿‡ç¨‹**","source":"_posts/djangoè¿›é˜¶-webåŸºç¡€.md","raw":"---\ntitle: webåŸºç¡€\ndate: 2017-05-03 18:16:33\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\n# webåŸºç¡€\n\n##æœ€ç®€å•çš„webæ¡†æ¶:\n\n```python\n# coding: utf-8\nimport socket\n\n(HOST, PORT) = '0.0.0.0', 8888\n\nRESPONSE = b'''\nHTTP/1.1 200 OK\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Hello</title>\n</head>\n<body>\n<img src=\"https://www.baidu.com/img/bd_logo1.png\">\n</body>\n</html>\n'''\n\nserver_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)   # å»ºç«‹ SOCK è¿æ¥\nserver_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) # è®¾ç½®å‚æ•°\nserver_socket.bind((HOST, PORT))                                    # ç»‘å®š IP:ç«¯å£\nserver_socket.listen(100)                                           # å¼€å§‹ç›‘å¬\n\nprint('Serving HTTP on port %s ...' % PORT)\n\nwhile True:\n    client_socket, client_address = server_socket.accept()  # æ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚\n    request = client_socket.recv(1024)                      # æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®, ä¸€æ¬¡æœ€å¤š 1024 å­—èŠ‚\n\n    # WSGI\n\n    print('Request >>>')\n    print(request.decode('utf-8'))\n    http_response = RESPONSE\n\n    # WSGI\n\n    client_socket.sendall(http_response)\n    client_socket.close()\n\n```\n\nä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹\n\n`client`â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”`server`\n\n1                 syn   ->\n\n2 <-         ack + syn   ackæ˜¯å¯¹synçš„åº”ç­”\n\n3                    ->ack\n\n---\n\n`python:æ¨¡å—,åŒ…,è£…é¥°å™¨,è¿­ä»£å™¨,ç”Ÿæˆå™¨,with,__new__,__dict__,é­”æœ¯æ–¹æ³•`\n\n`æ¡†æ¶:django,falsk,scrapy,gevent,tornado`\n\n`Nginx,Redis,MySQL`\n\n---\n\n### webåŸºç¡€æ€»ç»“\n\n1. **HyperText Transfer Protocol**\n\n    i. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)\n\n   ii. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®® \n\n   iii. åº”ç”¨é¢†åŸŸ\n\n   iv. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦) \n\n   http://example.com:80/foo/bar/readme?x=0&y=abc#part1 \n\n   ç»„æˆ \n\n   scheme: http\n\n    hostname: example.com \n\n   port: 80 \n\n   path: /foo/bar/readme \n\n   query: ?x=0&y=abc \n\n   fragment: #part1\n\n2. **Python ç³»å¸¸è§ Web æ¡†æ¶**\n\n    **Django** \n\n   å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§ \n\n   **Flask** \n\n   å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ï¥¥äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ **Tornado** \n\n   å¼‚æ­¥å¤„ï§¤, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚ \n\n   **web.py** \n\n   ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç  \n\n   **bottle**\n\n    å•æ–‡ä»¶æ¡†æ¶ \n\n   **å…¶ä»–** \n\n   Falcon web2py Quixote Sanic\n\n3. **ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿï¦ºï§½ä¹ˆ** \n\n   i. **DNSè§£æ** \n\n   â€‹\texample.com -> 93.184.216.34 \n\n   â€‹\tdig example.com \n\n   â€‹\tnslookup example.com \n\n   â€‹\t/etc/hosts \n\n   ii. **å»ºç«‹TCP** \n\n   â€‹\ta. SYN \n\n   â€‹\tb. ACK + SYN \n\n   â€‹\tc. ACK \n\n   iii. **æµè§ˆå™¨ç”Ÿæˆ Request æŠ¥æ–‡**\n\n   iv. **Client å‘é€ Request æŠ¥æ–‡** \n\n   v. **Server æ¥æ”¶æŠ¥æ–‡** \n\n   vi. **é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡** \n\n   vii. **Django**ã€**Flask ç­‰åº”ç”¨ç¨‹åºè¿›ï¨ˆé€»è¾‘å¤„ï§¤** \n\n   â€‹\ta. ç”Ÿæˆ Request å¯¹è±¡ \n\n   â€‹\tb. process_request (Middleware) \n\n   â€‹\tc. URL match \n\n   â€‹\td. process_views (Middleware) \n\n   â€‹\te. Views --> process_exception \n\n   â€‹\tf. Redner Template \n\n   â€‹\tg. Response \n\n   â€‹\th. process_response (Middleware) \n\n   **viii. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡ **\n\n   **ix. Server è¿”å›æŠ¥æ–‡ç»™ Client **\n\n   **x. å…³é—­è¿æ¥ **\n\n   **xi. è§£æã€æ¸²æŸ“ HTML é¡µé¢**\n\n4. **æœ€ç®€å•çš„ Server **\n\n   **HTTP Server**\n\n    \tåˆ›å»ºã€å…³é—­è¿æ¥\n\n    \tå‘é€ã€æ¥æ”¶æ•°æ®\n\n    **WSGI:** \n\n   â€‹\tæ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£ \n\n   **Web Application** \n\n   â€‹\tç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘ è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢\n\n5. **å¸¸è§ Header å­—æ®µ**\n\n    Accept text/plain \n\n   Accept-Charset utf-8 \n\n   Accept-Encoding gzip (Content-Encoding) \n\n   Accept-Language zh-CN en-US \n\n   Cache-Control true,max-age \n\n   Connection keep-alive \n\n   Content-Length è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦ \n\n   Content-Type ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html User-Agent æµè§ˆï¨¸æ ‡è¯†\n\n6. **HTTP çŠ¶æ€ç ** \n\n   200 **OK** æˆåŠŸ \n\n   301 **Moved Permanently** é‡å®šå‘ (æ°¸ä¹…è¿ç§») \n\n   302 **Moved Temporarily** é‡å®šå‘ (ä¸´æ—¶è¿ç§») \n\n   303 **See Other** é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘) \n\n   400 **Bad Request** å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ \n\n   403 **Forbidden** æ‹’ç»è®¿é—® \n\n   404 **Not Found** æ‰¾ï¥§åˆ°é¡µé¢ \n\n   500 **Internal Server Error** æœåŠ¡ï¨¸å†…éƒ¨é”™è¯¯ \n\n   502 **Bad Gateway** ç½‘å…³é”™è¯¯ \n\n   503 **Service Unavailable** æœåŠ¡ï¨¸ç»´æŠ¤æˆ–è€…è¿‡è½½ \n\n   504 **Gateway Timeout** è¯·æ±‚è¶…æ—¶\n\n7. **GET å’Œ POST** \n\n   **è¡¨è±¡** \n\n   â€‹\tGET åœ¨æµè§ˆï¨¸å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚ \n\n   â€‹\tGET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ï¥§å¯ä»¥. \n\n   â€‹\tGET è¯·æ±‚ä¼šè¢«æµè§ˆï¨¸ä¸»åŠ¨ç¼“å­˜, è€Œ POST ï¥§ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®. \n\n   â€‹\tGET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ï§åœ¨æµè§ˆï¨¸å†å²è®°å½•ï§©, è€Œ POST ä¸­çš„å‚æ•°ï¥§ä¼šè¢«ä¿ï§. \n\n   â€‹\tGET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›ï¨ˆ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼. \n\n   â€‹\tGET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶. \n\n   â€‹\tGET æ¯” POST ï¤ï¥§å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥ï¨†ï¤¸åœ¨URLä¸Š, æ‰€ä»¥ï¥§èƒ½ç”¨æ¥ä¼ é€’ï©æ„Ÿä¿¡æ¯. \n\n   â€‹\tGET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­. \n\n   **æ·±å±‚** \n\n   â€‹\tGET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…. \n\n   â€‹\tGET: æµè§ˆï¨¸ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡ï¨¸å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ \n\n   â€‹\tPOST: æµè§ˆï¨¸å…ˆå‘é€ header, æœåŠ¡ï¨¸å“åº” 100 continue, æµè§ˆï¨¸å†å‘é€data, æœåŠ¡ï¨¸\n\n8. **cookie å’Œ session** \n\n   **æ— çŠ¶æ€åè®®çš„æ— ï¤Œä¹‹ä¸¾**\n\n   â€‹\té€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ· \n\n   **å¼‚åŒ** \n\n   â€‹\ta. session åœ¨æœåŠ¡ï¨¸ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆï¨¸ï¼‰ \n\n   â€‹\tb. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡ï¨¸çš„ä¸€ä¸ªæ–‡ä»¶ï§©ï¼ˆï¥§æ˜¯å†…å­˜ï¼‰ \n\n   â€‹\tc. session çš„è¿ï¨ˆä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰ \n\n   â€‹\td. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥. \n\n   â€‹\te. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session \n\n   **äº§ç”Ÿè¿‡ç¨‹** \n\n   â€‹\ta. å®¢æˆ·ç«¯è¯·æ±‚ \n\n   â€‹\tb. æœåŠ¡ï¨¸äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆï¨¸ \n\n   â€‹\tc. æµè§ˆï¨¸å°† session_id å†™å…¥ cookie \n\n   â€‹\td. åç»­è¯·æ±‚ä¼šå†™å…¥ Header ä½¿ç”¨\n\n9. **RESTful** \n\n   ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡† \n\n   ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº \n\n   ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ \n\n   **å››ä¸ªåŠ¨è¯** \n\n   â€‹\tGET: ç”¨æ¥è·å–èµ„æº \n\n   â€‹\tPOST: ç”¨æ¥æ–°å»ºèµ„æº \n\n   â€‹\tPUT: ç”¨æ¥ï¤æ–°èµ„æº \n\n   â€‹\tDELETE: ç”¨æ¥åˆ é™¤èµ„æº \n\n   **è¯¯åŒº** \n\n   â€‹\tURL ä¸­ä½¿ç”¨åŠ¨è¯ \n\n   â€‹\tURL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header\n\n10. **HTTPS** \n\n    **ä¼˜ç‚¹** \n\n    â€‹\té˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ \n\n    â€‹\té˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹ \n\n    â€‹\tæ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ \n\n    **ç¼ºç‚¹** \n\n    â€‹\tåŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU \n\n    â€‹\tæ¡æ‰‹è¿‡ç¨‹ç¹ç \n\n    **SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)** \n\n    **åŠ å¯†ç®—æ³•** \n\n    â€‹\t**å¯¹ç§°åŠ å¯†: TEA, AES, 3DES** \n\n    â€‹\t\ttext: abcdefg \n\n    â€‹\t\t\t|   ^\n\n    â€‹\t\t\tv   |\n\n    â€‹\t\tkey: 1234 \n\n    â€‹\t\t\t|  ^ \n\n    â€‹\t\t\tv  | \n\n    â€‹\t\tnew: hasjdkfhasdf \n\n    â€‹\t**éå¯¹ç§°åŠ å¯†: RSA, ED25519** \n\n    â€‹\t\ttext: abcdefghijklmn \n\n    â€‹\t\t\t\t|      ^   \n\n    â€‹\t\t\t\tv      |\n\n    â€‹\t\tpub_key: 123 | \n\n    â€‹\t\tpri_key:  | \t1234567890123456789546789 \n\n    â€‹\t\t\t\t|       ^ \n\n    â€‹\t\t\t\tv\t | \n\n    â€‹\t\tnew: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd \n\n    **Let's Encrypt: https://letsencrypt.org/** \n\n    **ä¼ è¾“è¿‡ç¨‹**","slug":"djangoè¿›é˜¶-webåŸºç¡€","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fo7000c3kzj6tldesuu","content":"<h1 id=\"webåŸºç¡€\"><a href=\"#webåŸºç¡€\" class=\"headerlink\" title=\"webåŸºç¡€\"></a>webåŸºç¡€</h1><p>##æœ€ç®€å•çš„webæ¡†æ¶:</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># coding: utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"></span><br><span class=\"line\">(HOST, PORT) = <span class=\"string\">'0.0.0.0'</span>, <span class=\"number\">8888</span></span><br><span class=\"line\"></span><br><span class=\"line\">RESPONSE = <span class=\"string\">b'''</span></span><br><span class=\"line\"><span class=\"string\">HTTP/1.1 200 OK</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;title&gt;Hello&lt;/title&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;img src=\"https://www.baidu.com/img/bd_logo1.png\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/html&gt;</span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"></span><br><span class=\"line\">server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)   <span class=\"comment\"># å»ºç«‹ SOCK è¿æ¥</span></span><br><span class=\"line\">server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class=\"number\">1</span>) <span class=\"comment\"># è®¾ç½®å‚æ•°</span></span><br><span class=\"line\">server_socket.bind((HOST, PORT))                                    <span class=\"comment\"># ç»‘å®š IP:ç«¯å£</span></span><br><span class=\"line\">server_socket.listen(<span class=\"number\">100</span>)                                           <span class=\"comment\"># å¼€å§‹ç›‘å¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">'Serving HTTP on port %s ...'</span> % PORT)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">    client_socket, client_address = server_socket.accept()  <span class=\"comment\"># æ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚</span></span><br><span class=\"line\">    request = client_socket.recv(<span class=\"number\">1024</span>)                      <span class=\"comment\"># æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®, ä¸€æ¬¡æœ€å¤š 1024 å­—èŠ‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># WSGI</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">'Request &gt;&gt;&gt;'</span>)</span><br><span class=\"line\">    print(request.decode(<span class=\"string\">'utf-8'</span>))</span><br><span class=\"line\">    http_response = RESPONSE</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># WSGI</span></span><br><span class=\"line\"></span><br><span class=\"line\">    client_socket.sendall(http_response)</span><br><span class=\"line\">    client_socket.close()</span><br></pre></td></tr></tbody></table></figure>\n\n<p>ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹</p>\n<p><code>client</code>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<code>server</code></p>\n<p>1                 syn   -&gt;</p>\n<p>2 &lt;-         ack + syn   ackæ˜¯å¯¹synçš„åº”ç­”</p>\n<p>3                    -&gt;ack</p>\n<hr>\n<p><code>python:æ¨¡å—,åŒ…,è£…é¥°å™¨,è¿­ä»£å™¨,ç”Ÿæˆå™¨,with,__new__,__dict__,é­”æœ¯æ–¹æ³•</code></p>\n<p><code>æ¡†æ¶:django,falsk,scrapy,gevent,tornado</code></p>\n<p><code>Nginx,Redis,MySQL</code></p>\n<hr>\n<h3 id=\"webåŸºç¡€æ€»ç»“\"><a href=\"#webåŸºç¡€æ€»ç»“\" class=\"headerlink\" title=\"webåŸºç¡€æ€»ç»“\"></a>webåŸºç¡€æ€»ç»“</h3><ol>\n<li><p><strong>HyperText Transfer Protocol</strong></p>\n<p> i. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)</p>\n<p>ii. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®® </p>\n<p>iii. åº”ç”¨é¢†åŸŸ</p>\n<p>iv. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦) </p>\n<p><a href=\"http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1\" target=\"_blank\" rel=\"noopener\">http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1</a> </p>\n<p>ç»„æˆ </p>\n<p>scheme: http</p>\n<p> hostname: example.com </p>\n<p>port: 80 </p>\n<p>path: /foo/bar/readme </p>\n<p>query: ?x=0&amp;y=abc </p>\n<p>fragment: #part1</p>\n</li>\n<li><p><strong>Python ç³»å¸¸è§ Web æ¡†æ¶</strong></p>\n<p> <strong>Django</strong> </p>\n<p>å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§ </p>\n<p><strong>Flask</strong> </p>\n<p>å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ï¥¥äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ <strong>Tornado</strong> </p>\n<p>å¼‚æ­¥å¤„ï§¤, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚ </p>\n<p><strong>web.py</strong> </p>\n<p>ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç  </p>\n<p><strong>bottle</strong></p>\n<p> å•æ–‡ä»¶æ¡†æ¶ </p>\n<p><strong>å…¶ä»–</strong> </p>\n<p>Falcon web2py Quixote Sanic</p>\n</li>\n<li><p><strong>ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿï¦ºï§½ä¹ˆ</strong> </p>\n<p>i. <strong>DNSè§£æ</strong> </p>\n<p>â€‹    example.com -&gt; 93.184.216.34 </p>\n<p>â€‹    dig example.com </p>\n<p>â€‹    nslookup example.com </p>\n<p>â€‹    /etc/hosts </p>\n<p>ii. <strong>å»ºç«‹TCP</strong> </p>\n<p>â€‹    a. SYN </p>\n<p>â€‹    b. ACK + SYN </p>\n<p>â€‹    c. ACK </p>\n<p>iii. <strong>æµè§ˆå™¨ç”Ÿæˆ Request æŠ¥æ–‡</strong></p>\n<p>iv. <strong>Client å‘é€ Request æŠ¥æ–‡</strong> </p>\n<p>v. <strong>Server æ¥æ”¶æŠ¥æ–‡</strong> </p>\n<p>vi. <strong>é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡</strong> </p>\n<p>vii. <strong>Django</strong>ã€<strong>Flask ç­‰åº”ç”¨ç¨‹åºè¿›ï¨ˆé€»è¾‘å¤„ï§¤</strong> </p>\n<p>â€‹    a. ç”Ÿæˆ Request å¯¹è±¡ </p>\n<p>â€‹    b. process_request (Middleware) </p>\n<p>â€‹    c. URL match </p>\n<p>â€‹    d. process_views (Middleware) </p>\n<p>â€‹    e. Views â€“&gt; process_exception </p>\n<p>â€‹    f. Redner Template </p>\n<p>â€‹    g. Response </p>\n<p>â€‹    h. process_response (Middleware) </p>\n<p>*<em>viii. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡ *</em></p>\n<p>*<em>ix. Server è¿”å›æŠ¥æ–‡ç»™ Client *</em></p>\n<p>*<em>x. å…³é—­è¿æ¥ *</em></p>\n<p><strong>xi. è§£æã€æ¸²æŸ“ HTML é¡µé¢</strong></p>\n</li>\n<li><p>*<em>æœ€ç®€å•çš„ Server *</em></p>\n<p><strong>HTTP Server</strong></p>\n<pre><code>åˆ›å»ºã€å…³é—­è¿æ¥\n\nå‘é€ã€æ¥æ”¶æ•°æ®</code></pre><p> <strong>WSGI:</strong> </p>\n<p>â€‹    æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£ </p>\n<p><strong>Web Application</strong> </p>\n<p>â€‹    ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘ è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢</p>\n</li>\n<li><p><strong>å¸¸è§ Header å­—æ®µ</strong></p>\n<p> Accept text/plain </p>\n<p>Accept-Charset utf-8 </p>\n<p>Accept-Encoding gzip (Content-Encoding) </p>\n<p>Accept-Language zh-CN en-US </p>\n<p>Cache-Control true,max-age </p>\n<p>Connection keep-alive </p>\n<p>Content-Length è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦ </p>\n<p>Content-Type ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html User-Agent æµè§ˆï¨¸æ ‡è¯†</p>\n</li>\n<li><p><strong>HTTP çŠ¶æ€ç </strong> </p>\n<p>200 <strong>OK</strong> æˆåŠŸ </p>\n<p>301 <strong>Moved Permanently</strong> é‡å®šå‘ (æ°¸ä¹…è¿ç§») </p>\n<p>302 <strong>Moved Temporarily</strong> é‡å®šå‘ (ä¸´æ—¶è¿ç§») </p>\n<p>303 <strong>See Other</strong> é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘) </p>\n<p>400 <strong>Bad Request</strong> å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ </p>\n<p>403 <strong>Forbidden</strong> æ‹’ç»è®¿é—® </p>\n<p>404 <strong>Not Found</strong> æ‰¾ï¥§åˆ°é¡µé¢ </p>\n<p>500 <strong>Internal Server Error</strong> æœåŠ¡ï¨¸å†…éƒ¨é”™è¯¯ </p>\n<p>502 <strong>Bad Gateway</strong> ç½‘å…³é”™è¯¯ </p>\n<p>503 <strong>Service Unavailable</strong> æœåŠ¡ï¨¸ç»´æŠ¤æˆ–è€…è¿‡è½½ </p>\n<p>504 <strong>Gateway Timeout</strong> è¯·æ±‚è¶…æ—¶</p>\n</li>\n<li><p><strong>GET å’Œ POST</strong> </p>\n<p><strong>è¡¨è±¡</strong> </p>\n<p>â€‹    GET åœ¨æµè§ˆï¨¸å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚ </p>\n<p>â€‹    GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ï¥§å¯ä»¥. </p>\n<p>â€‹    GET è¯·æ±‚ä¼šè¢«æµè§ˆï¨¸ä¸»åŠ¨ç¼“å­˜, è€Œ POST ï¥§ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®. </p>\n<p>â€‹    GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ï§åœ¨æµè§ˆï¨¸å†å²è®°å½•ï§©, è€Œ POST ä¸­çš„å‚æ•°ï¥§ä¼šè¢«ä¿ï§. </p>\n<p>â€‹    GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›ï¨ˆ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼. </p>\n<p>â€‹    GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶. </p>\n<p>â€‹    GET æ¯” POST ï¤ï¥§å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥ï¨†ï¤¸åœ¨URLä¸Š, æ‰€ä»¥ï¥§èƒ½ç”¨æ¥ä¼ é€’ï©æ„Ÿä¿¡æ¯. </p>\n<p>â€‹    GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­. </p>\n<p><strong>æ·±å±‚</strong> </p>\n<p>â€‹    GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…. </p>\n<p>â€‹    GET: æµè§ˆï¨¸ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡ï¨¸å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ </p>\n<p>â€‹    POST: æµè§ˆï¨¸å…ˆå‘é€ header, æœåŠ¡ï¨¸å“åº” 100 continue, æµè§ˆï¨¸å†å‘é€data, æœåŠ¡ï¨¸</p>\n</li>\n<li><p><strong>cookie å’Œ session</strong> </p>\n<p><strong>æ— çŠ¶æ€åè®®çš„æ— ï¤Œä¹‹ä¸¾</strong></p>\n<p>â€‹    é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ· </p>\n<p><strong>å¼‚åŒ</strong> </p>\n<p>â€‹    a. session åœ¨æœåŠ¡ï¨¸ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆï¨¸ï¼‰ </p>\n<p>â€‹    b. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡ï¨¸çš„ä¸€ä¸ªæ–‡ä»¶ï§©ï¼ˆï¥§æ˜¯å†…å­˜ï¼‰ </p>\n<p>â€‹    c. session çš„è¿ï¨ˆä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰ </p>\n<p>â€‹    d. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥. </p>\n<p>â€‹    e. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session </p>\n<p><strong>äº§ç”Ÿè¿‡ç¨‹</strong> </p>\n<p>â€‹    a. å®¢æˆ·ç«¯è¯·æ±‚ </p>\n<p>â€‹    b. æœåŠ¡ï¨¸äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆï¨¸ </p>\n<p>â€‹    c. æµè§ˆï¨¸å°† session_id å†™å…¥ cookie </p>\n<p>â€‹    d. åç»­è¯·æ±‚ä¼šå†™å…¥ Header ä½¿ç”¨</p>\n</li>\n<li><p><strong>RESTful</strong> </p>\n<p>ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡† </p>\n<p>ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº </p>\n<p>ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ </p>\n<p><strong>å››ä¸ªåŠ¨è¯</strong> </p>\n<p>â€‹    GET: ç”¨æ¥è·å–èµ„æº </p>\n<p>â€‹    POST: ç”¨æ¥æ–°å»ºèµ„æº </p>\n<p>â€‹    PUT: ç”¨æ¥ï¤æ–°èµ„æº </p>\n<p>â€‹    DELETE: ç”¨æ¥åˆ é™¤èµ„æº </p>\n<p><strong>è¯¯åŒº</strong> </p>\n<p>â€‹    URL ä¸­ä½¿ç”¨åŠ¨è¯ </p>\n<p>â€‹    URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header</p>\n</li>\n<li><p><strong>HTTPS</strong> </p>\n<p><strong>ä¼˜ç‚¹</strong> </p>\n<p>â€‹    é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ </p>\n<p>â€‹    é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹ </p>\n<p>â€‹    æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ </p>\n<p><strong>ç¼ºç‚¹</strong> </p>\n<p>â€‹    åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU </p>\n<p>â€‹    æ¡æ‰‹è¿‡ç¨‹ç¹ç </p>\n<p><strong>SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)</strong> </p>\n<p><strong>åŠ å¯†ç®—æ³•</strong> </p>\n<p>â€‹    <strong>å¯¹ç§°åŠ å¯†: TEA, AES, 3DES</strong> </p>\n<p>â€‹        text: abcdefg </p>\n<p>â€‹            |   ^</p>\n<p>â€‹            v   |</p>\n<p>â€‹        key: 1234 </p>\n<p>â€‹            |  ^ </p>\n<p>â€‹            v  | </p>\n<p>â€‹        new: hasjdkfhasdf </p>\n<p>â€‹    <strong>éå¯¹ç§°åŠ å¯†: RSA, ED25519</strong> </p>\n<p>â€‹        text: abcdefghijklmn </p>\n<p>â€‹                |      ^   </p>\n<p>â€‹                v      |</p>\n<p>â€‹        pub_key: 123 | </p>\n<p>â€‹        pri_key:  |     1234567890123456789546789 </p>\n<p>â€‹                |       ^ </p>\n<p>â€‹                v     | </p>\n<p>â€‹        new: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd </p>\n<p><strong>Letâ€™s Encrypt: <a href=\"https://letsencrypt.org/\" target=\"_blank\" rel=\"noopener\">https://letsencrypt.org/</a></strong> </p>\n<p><strong>ä¼ è¾“è¿‡ç¨‹</strong></p>\n</li>\n</ol>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"webåŸºç¡€\"><a href=\"#webåŸºç¡€\" class=\"headerlink\" title=\"webåŸºç¡€\"></a>webåŸºç¡€</h1><p>##æœ€ç®€å•çš„webæ¡†æ¶:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># coding: utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"></span><br><span class=\"line\">(HOST, PORT) = <span class=\"string\">'0.0.0.0'</span>, <span class=\"number\">8888</span></span><br><span class=\"line\"></span><br><span class=\"line\">RESPONSE = <span class=\"string\">b'''</span></span><br><span class=\"line\"><span class=\"string\">HTTP/1.1 200 OK</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;title&gt;Hello&lt;/title&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;img src=\"https://www.baidu.com/img/bd_logo1.png\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/html&gt;</span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"></span><br><span class=\"line\">server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)   <span class=\"comment\"># å»ºç«‹ SOCK è¿æ¥</span></span><br><span class=\"line\">server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class=\"number\">1</span>) <span class=\"comment\"># è®¾ç½®å‚æ•°</span></span><br><span class=\"line\">server_socket.bind((HOST, PORT))                                    <span class=\"comment\"># ç»‘å®š IP:ç«¯å£</span></span><br><span class=\"line\">server_socket.listen(<span class=\"number\">100</span>)                                           <span class=\"comment\"># å¼€å§‹ç›‘å¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">'Serving HTTP on port %s ...'</span> % PORT)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">    client_socket, client_address = server_socket.accept()  <span class=\"comment\"># æ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚</span></span><br><span class=\"line\">    request = client_socket.recv(<span class=\"number\">1024</span>)                      <span class=\"comment\"># æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®, ä¸€æ¬¡æœ€å¤š 1024 å­—èŠ‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># WSGI</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">'Request &gt;&gt;&gt;'</span>)</span><br><span class=\"line\">    print(request.decode(<span class=\"string\">'utf-8'</span>))</span><br><span class=\"line\">    http_response = RESPONSE</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># WSGI</span></span><br><span class=\"line\"></span><br><span class=\"line\">    client_socket.sendall(http_response)</span><br><span class=\"line\">    client_socket.close()</span><br></pre></td></tr></table></figure>\n\n<p>ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹</p>\n<p><code>client</code>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<code>server</code></p>\n<p>1                 syn   -&gt;</p>\n<p>2 &lt;-         ack + syn   ackæ˜¯å¯¹synçš„åº”ç­”</p>\n<p>3                    -&gt;ack</p>\n<hr>\n<p><code>python:æ¨¡å—,åŒ…,è£…é¥°å™¨,è¿­ä»£å™¨,ç”Ÿæˆå™¨,with,__new__,__dict__,é­”æœ¯æ–¹æ³•</code></p>\n<p><code>æ¡†æ¶:django,falsk,scrapy,gevent,tornado</code></p>\n<p><code>Nginx,Redis,MySQL</code></p>\n<hr>\n<h3 id=\"webåŸºç¡€æ€»ç»“\"><a href=\"#webåŸºç¡€æ€»ç»“\" class=\"headerlink\" title=\"webåŸºç¡€æ€»ç»“\"></a>webåŸºç¡€æ€»ç»“</h3><ol>\n<li><p><strong>HyperText Transfer Protocol</strong></p>\n<p> i. HTTP 1.0 (1996) / 1.1 (1997) / 2.0 (2015)</p>\n<p>ii. æ„å»ºåœ¨ TCP åº”ç”¨å±‚ä¹‹ä¸Šçš„åè®® </p>\n<p>iii. åº”ç”¨é¢†åŸŸ</p>\n<p>iv. è®¤è¯† URL (ç»Ÿä¸€èµ„æºå®šä½ç¬¦) </p>\n<p><a href=\"http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1\" target=\"_blank\" rel=\"noopener\">http://example.com:80/foo/bar/readme?x=0&amp;y=abc#part1</a> </p>\n<p>ç»„æˆ </p>\n<p>scheme: http</p>\n<p> hostname: example.com </p>\n<p>port: 80 </p>\n<p>path: /foo/bar/readme </p>\n<p>query: ?x=0&amp;y=abc </p>\n<p>fragment: #part1</p>\n</li>\n<li><p><strong>Python ç³»å¸¸è§ Web æ¡†æ¶</strong></p>\n<p> <strong>Django</strong> </p>\n<p>å…¨èƒ½å‹æ¡†æ¶, å¤§è€Œå…¨, æ’ä»¶ä¸°å¯Œ, æ–‡æ¡£ä¸°å¯Œ, ç¤¾åŒºæ´»è·ƒ, é€‚åˆå¿«é€Ÿå¼€å‘, å†…éƒ¨è€¦åˆæ¯”è¾ƒç´§ </p>\n<p><strong>Flask</strong> </p>\n<p>å¾®å‹æ¡†æ¶, é€‚åˆæ–°æ‰‹å­¦ä¹ , æå…¶çµæ´», ï¥¥äºäºŒæ¬¡å¼€å‘å’Œæ‰©å±•, ç”Ÿæ€ç¯å¢ƒå¥½, æ’ä»¶ä¸°å¯Œ <strong>Tornado</strong> </p>\n<p>å¼‚æ­¥å¤„ï§¤, äº‹ä»¶é©±åŠ¨ (epoll), æ€§èƒ½ä¼˜å¼‚ </p>\n<p><strong>web.py</strong> </p>\n<p>ä»£ç ä¼˜ç§€, é€‚åˆå­¦ä¹ æºç  </p>\n<p><strong>bottle</strong></p>\n<p> å•æ–‡ä»¶æ¡†æ¶ </p>\n<p><strong>å…¶ä»–</strong> </p>\n<p>Falcon web2py Quixote Sanic</p>\n</li>\n<li><p><strong>ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å, éƒ½å‘ç”Ÿï¦ºï§½ä¹ˆ</strong> </p>\n<p>i. <strong>DNSè§£æ</strong> </p>\n<p>â€‹    example.com -&gt; 93.184.216.34 </p>\n<p>â€‹    dig example.com </p>\n<p>â€‹    nslookup example.com </p>\n<p>â€‹    /etc/hosts </p>\n<p>ii. <strong>å»ºç«‹TCP</strong> </p>\n<p>â€‹    a. SYN </p>\n<p>â€‹    b. ACK + SYN </p>\n<p>â€‹    c. ACK </p>\n<p>iii. <strong>æµè§ˆå™¨ç”Ÿæˆ Request æŠ¥æ–‡</strong></p>\n<p>iv. <strong>Client å‘é€ Request æŠ¥æ–‡</strong> </p>\n<p>v. <strong>Server æ¥æ”¶æŠ¥æ–‡</strong> </p>\n<p>vi. <strong>é€šè¿‡ WSGI è§£ææŠ¥æ–‡, è·å¾— Request å¯¹è±¡</strong> </p>\n<p>vii. <strong>Django</strong>ã€<strong>Flask ç­‰åº”ç”¨ç¨‹åºè¿›ï¨ˆé€»è¾‘å¤„ï§¤</strong> </p>\n<p>â€‹    a. ç”Ÿæˆ Request å¯¹è±¡ </p>\n<p>â€‹    b. process_request (Middleware) </p>\n<p>â€‹    c. URL match </p>\n<p>â€‹    d. process_views (Middleware) </p>\n<p>â€‹    e. Views â€“&gt; process_exception </p>\n<p>â€‹    f. Redner Template </p>\n<p>â€‹    g. Response </p>\n<p>â€‹    h. process_response (Middleware) </p>\n<p>*<em>viii. ä» Response å¯¹è±¡ç”ŸæˆæŠ¥æ–‡ *</em></p>\n<p>*<em>ix. Server è¿”å›æŠ¥æ–‡ç»™ Client *</em></p>\n<p>*<em>x. å…³é—­è¿æ¥ *</em></p>\n<p><strong>xi. è§£æã€æ¸²æŸ“ HTML é¡µé¢</strong></p>\n</li>\n<li><p>*<em>æœ€ç®€å•çš„ Server *</em></p>\n<p><strong>HTTP Server</strong></p>\n<pre><code>åˆ›å»ºã€å…³é—­è¿æ¥\n\nå‘é€ã€æ¥æ”¶æ•°æ®</code></pre><p> <strong>WSGI:</strong> </p>\n<p>â€‹    æ²Ÿé€š HTTPServer å’Œ Web åº”ç”¨ç¨‹åº ä¹‹é—´çš„æ¥å£ </p>\n<p><strong>Web Application</strong> </p>\n<p>â€‹    ç½‘ç»œç¨‹åºçš„åŠŸèƒ½å’Œé€»è¾‘ è§£æç”¨æˆ·è¯·æ±‚, ç”Ÿæˆ HTML é¡µé¢</p>\n</li>\n<li><p><strong>å¸¸è§ Header å­—æ®µ</strong></p>\n<p> Accept text/plain </p>\n<p>Accept-Charset utf-8 </p>\n<p>Accept-Encoding gzip (Content-Encoding) </p>\n<p>Accept-Language zh-CN en-US </p>\n<p>Cache-Control true,max-age </p>\n<p>Connection keep-alive </p>\n<p>Content-Length è¯·æ±‚ä½“/å“åº”ä½“çš„é•¿åº¦ </p>\n<p>Content-Type ç”¨äºæŒ‡å®šå“åº”çš„HTTPå†…å®¹ç±»å‹. å¦‚æœæœªæŒ‡å®š é»˜è®¤ä¸º text/html User-Agent æµè§ˆï¨¸æ ‡è¯†</p>\n</li>\n<li><p><strong>HTTP çŠ¶æ€ç </strong> </p>\n<p>200 <strong>OK</strong> æˆåŠŸ </p>\n<p>301 <strong>Moved Permanently</strong> é‡å®šå‘ (æ°¸ä¹…è¿ç§») </p>\n<p>302 <strong>Moved Temporarily</strong> é‡å®šå‘ (ä¸´æ—¶è¿ç§») </p>\n<p>303 <strong>See Other</strong> é‡å®šå‘ (é GET è¯·æ±‚çš„é‡å®šå‘) </p>\n<p>400 <strong>Bad Request</strong> å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ </p>\n<p>403 <strong>Forbidden</strong> æ‹’ç»è®¿é—® </p>\n<p>404 <strong>Not Found</strong> æ‰¾ï¥§åˆ°é¡µé¢ </p>\n<p>500 <strong>Internal Server Error</strong> æœåŠ¡ï¨¸å†…éƒ¨é”™è¯¯ </p>\n<p>502 <strong>Bad Gateway</strong> ç½‘å…³é”™è¯¯ </p>\n<p>503 <strong>Service Unavailable</strong> æœåŠ¡ï¨¸ç»´æŠ¤æˆ–è€…è¿‡è½½ </p>\n<p>504 <strong>Gateway Timeout</strong> è¯·æ±‚è¶…æ—¶</p>\n</li>\n<li><p><strong>GET å’Œ POST</strong> </p>\n<p><strong>è¡¨è±¡</strong> </p>\n<p>â€‹    GET åœ¨æµè§ˆï¨¸å¯ä»¥å›é€€, è€Œ POST åˆ™ä¼šå†æ¬¡æäº¤è¯·æ±‚ </p>\n<p>â€‹    GET çš„ URL å¯ä»¥è¢« Bookmark, è€Œ POST ï¥§å¯ä»¥. </p>\n<p>â€‹    GET è¯·æ±‚ä¼šè¢«æµè§ˆï¨¸ä¸»åŠ¨ç¼“å­˜, è€Œ POST ï¥§ä¼š, é™¤éæ‰‹åŠ¨è®¾ç½®. </p>\n<p>â€‹    GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ï§åœ¨æµè§ˆï¨¸å†å²è®°å½•ï§©, è€Œ POST ä¸­çš„å‚æ•°ï¥§ä¼šè¢«ä¿ï§. </p>\n<p>â€‹    GET è¯·æ±‚çš„æ•°æ®åªèƒ½è¿›ï¨ˆ URL ç¼–ç , è€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼. </p>\n<p>â€‹    GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ (URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦), å¯¹å‚æ•°çš„æ•°æ®ç±»å‹, GET åªæ¥å— ASCII å­—ç¬¦, è€Œ POST æ²¡æœ‰é™åˆ¶. </p>\n<p>â€‹    GET æ¯” POST ï¤ï¥§å®‰å…¨, å› ä¸ºå‚æ•°ç›´æ¥ï¨†ï¤¸åœ¨URLä¸Š, æ‰€ä»¥ï¥§èƒ½ç”¨æ¥ä¼ é€’ï©æ„Ÿä¿¡æ¯. </p>\n<p>â€‹    GET å‚æ•°é€šè¿‡ URL ä¼ é€’, POST æ”¾åœ¨ Request body ä¸­. </p>\n<p><strong>æ·±å±‚</strong> </p>\n<p>â€‹    GET äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…. </p>\n<p>â€‹    GET: æµè§ˆï¨¸ä¼šæŠŠ http çš„ headerå’Œdataä¸€å¹¶å‘é€å‡ºå», æœåŠ¡ï¨¸å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ </p>\n<p>â€‹    POST: æµè§ˆï¨¸å…ˆå‘é€ header, æœåŠ¡ï¨¸å“åº” 100 continue, æµè§ˆï¨¸å†å‘é€data, æœåŠ¡ï¨¸</p>\n</li>\n<li><p><strong>cookie å’Œ session</strong> </p>\n<p><strong>æ— çŠ¶æ€åè®®çš„æ— ï¤Œä¹‹ä¸¾</strong></p>\n<p>â€‹    é€šä¿¡å¦‚åŒä¸€æ¬¡æ— æ³•çœ‹åˆ°è„¸çš„æ¡æ‰‹, å¦‚ä½•è¯†åˆ«ç”¨æˆ· </p>\n<p><strong>å¼‚åŒ</strong> </p>\n<p>â€‹    a. session åœ¨æœåŠ¡ï¨¸ç«¯, cookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆï¨¸ï¼‰ </p>\n<p>â€‹    b. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡ï¨¸çš„ä¸€ä¸ªæ–‡ä»¶ï§©ï¼ˆï¥§æ˜¯å†…å­˜ï¼‰ </p>\n<p>â€‹    c. session çš„è¿ï¨ˆä¾èµ– session id, è€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´, å¦‚æœæµ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°, æ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰ </p>\n<p>â€‹    d. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥. </p>\n<p>â€‹    e. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session </p>\n<p><strong>äº§ç”Ÿè¿‡ç¨‹</strong> </p>\n<p>â€‹    a. å®¢æˆ·ç«¯è¯·æ±‚ </p>\n<p>â€‹    b. æœåŠ¡ï¨¸äº§ç”Ÿ session_id, å¹¶ä¼ å›æµè§ˆï¨¸ </p>\n<p>â€‹    c. æµè§ˆï¨¸å°† session_id å†™å…¥ cookie </p>\n<p>â€‹    d. åç»­è¯·æ±‚ä¼šå†™å…¥ Header ä½¿ç”¨</p>\n</li>\n<li><p><strong>RESTful</strong> </p>\n<p>ä¸€ç§ç½‘ç»œè½¯ä»¶æ¶æ„é£æ ¼, è€Œéæ ‡å‡† </p>\n<p>ç”¨ URL å®šä½ä¸€ä¸ªç½‘ç»œèµ„æº </p>\n<p>ç”¨ HTTP æè¿°å¯¹èµ„æºçš„æ“ä½œ </p>\n<p><strong>å››ä¸ªåŠ¨è¯</strong> </p>\n<p>â€‹    GET: ç”¨æ¥è·å–èµ„æº </p>\n<p>â€‹    POST: ç”¨æ¥æ–°å»ºèµ„æº </p>\n<p>â€‹    PUT: ç”¨æ¥ï¤æ–°èµ„æº </p>\n<p>â€‹    DELETE: ç”¨æ¥åˆ é™¤èµ„æº </p>\n<p><strong>è¯¯åŒº</strong> </p>\n<p>â€‹    URL ä¸­ä½¿ç”¨åŠ¨è¯ </p>\n<p>â€‹    URL ä¸­å‡ºç°ç‰ˆæœ¬å·, ç‰ˆæœ¬å·æ”¾åœ¨ Header</p>\n</li>\n<li><p><strong>HTTPS</strong> </p>\n<p><strong>ä¼˜ç‚¹</strong> </p>\n<p>â€‹    é˜²çªƒå¬: å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ </p>\n<p>â€‹    é˜²ç¯¡æ”¹: é˜²æ­¢å†…å®¹è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹ </p>\n<p>â€‹    æ”¾å†’å……: ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ </p>\n<p><strong>ç¼ºç‚¹</strong> </p>\n<p>â€‹    åŠ å¯†ã€è§£å¯†æ¶ˆè€— CPU </p>\n<p>â€‹    æ¡æ‰‹è¿‡ç¨‹ç¹ç </p>\n<p><strong>SSL / TLS (å®‰å…¨å¥—æ¥å­—å±‚)</strong> </p>\n<p><strong>åŠ å¯†ç®—æ³•</strong> </p>\n<p>â€‹    <strong>å¯¹ç§°åŠ å¯†: TEA, AES, 3DES</strong> </p>\n<p>â€‹        text: abcdefg </p>\n<p>â€‹            |   ^</p>\n<p>â€‹            v   |</p>\n<p>â€‹        key: 1234 </p>\n<p>â€‹            |  ^ </p>\n<p>â€‹            v  | </p>\n<p>â€‹        new: hasjdkfhasdf </p>\n<p>â€‹    <strong>éå¯¹ç§°åŠ å¯†: RSA, ED25519</strong> </p>\n<p>â€‹        text: abcdefghijklmn </p>\n<p>â€‹                |      ^   </p>\n<p>â€‹                v      |</p>\n<p>â€‹        pub_key: 123 | </p>\n<p>â€‹        pri_key:  |     1234567890123456789546789 </p>\n<p>â€‹                |       ^ </p>\n<p>â€‹                v     | </p>\n<p>â€‹        new: ajsgdpfqibwfmbsdlkfjbq;ejkwbf;qkbfd </p>\n<p><strong>Letâ€™s Encrypt: <a href=\"https://letsencrypt.org/\" target=\"_blank\" rel=\"noopener\">https://letsencrypt.org/</a></strong> </p>\n<p><strong>ä¼ è¾“è¿‡ç¨‹</strong></p>\n</li>\n</ol>\n"},{"title":"git è§£å†³pushæŠ¥é”™","date":"2017-04-22T10:04:30.000Z","_content":"\n# git -è§£å†³pushæŠ¥é”™é—®é¢˜\n\n### é—®é¢˜å‡ºç°åœºæ™¯\n\ngithubæ–°å»ºä»“åº“,æƒ³æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°github\n\n---\n\næ“ä½œæ­¥éª¤\n\n1. è¿›å…¥æœ¬åœ°ä»“åº“,å‡è®¾é¡¹ç›®ä¸ºtest\n\n   `cd test`\n\n   `git init`\n\n2. æŸ¥çœ‹çŠ¶æ€\n\n   `git status`\n\n3. æŠŠæ›´æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æœ¬åœ°gitä»“åº“\n\n   `git add .`\n\n4. è®¾ç½®ç”¨æˆ·åé‚®ç®±\n\n   `git config --global user.name 'jimi'`\n\n   `git config --global user.email 'jimi@163.com`\n\n5. æäº¤\n\n   `git commit -m \"first commit\"`\n\n6. æŠŠæœ¬åœ°testé¡¹ç›®å’Œgithhubçš„testé¡¹ç›®è¿›è¡Œå…³è”\n\n   `git remote add origin xxxxx@xxxx`\n\n7. å‘è¿œç¨‹ä»“åº“æäº¤ä»£ç (é…ç½®å¥½sshæˆ–è€…å¯†ç )\n\n   `git push origin master`\n\n   å¯èƒ½ä¼šå‡ºç°é—®é¢˜:\n\n   ```shell\n   $ git push origin master  \n   To github.com:JasonLi-cn/test.git  \n    ! [rejected]        master -> master (fetch first)  \n   error: failed to push some refs to 'git@github.com:JasonLi-cn/test.git'  \n   hint: Updates were rejected because the remote contains work that you do  \n   hint: not have locally. This is usually caused by another repository pushing  \n   hint: to the same ref. You may want to first integrate the remote changes  \n   hint: (e.g., 'git pull ...') before pushing again.  \n   hint: See the 'Note about fast-forwards' in 'git push --help' for details. \n   ```\n\n   è¯´æ˜è¿œç¨‹ä»“åº“æœ‰æœ¬åœ°ä»“åº“æ²¡æœ‰çš„æ–‡ä»¶,éœ€è¦å…ˆpull\n\n   `git pull origin master`\n\n   è¿™æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜:\n\n   ```\n   $ git pull origin master  \n   From github.com:JasonLi-cn/test  \n    * branch            master     -> FETCH_HEAD  \n   fatal: refusing to merge unrelated histories  \n   ```\n\n   è§£å†³åŠæ³•:\n\n   `git pull origin master --allow-unrelated-histories`\n\n   è¿™æ—¶å°±å¯ä»¥pushäº†.\n\n   å¦‚æœè¿œç¨‹ä»“åº“æœ‰å’Œæœ¬åœ°ä»“åº“ä¸€æ ·çš„æ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥push,git statuså‘ç°:\n\n   ```\n   On branch master\n   You have unmerged paths.\n     (fix conflicts and run \"git commit\")\n     (use \"git merge --abort\" to abort the merge)\n\n   Unmerged paths:\n     (use \"git add <file>...\" to mark resolution)\n\n   \tboth added:      LICENSE\n\n   ```\n\n   åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹æ“ä½œç„¶åé‡æ–°æäº¤å°±è¡Œäº†\n\n   ```Shell\n   git rm LICENSE\n   git add .\n   git commit -m \"merge\"\n   git push origin master\n   ```\n\n---\n\næœ€å¥½æ¨èå‡ ç¯‡å†™çš„éå¸¸ä¸é”™çš„gitå…¥é—¨æ–‡ç« :\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œåˆè¯† GitHubã€](http://stormzhang.com/github/2016/05/25/learn-github-from-zero1/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒåŠ å…¥ GitHubã€](http://stormzhang.com/github/2016/05/26/learn-github-from-zero2/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit é€Ÿæˆã€](http://stormzhang.com/github/2016/05/30/learn-github-from-zero3/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå‘GitHub æäº¤ä»£ç ã€](http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit è¿›é˜¶ã€](http://stormzhang.com/github/2016/06/16/learn-github-from-zero5/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå›¢é˜Ÿåˆä½œåˆ©å™¨ BRANCHã€](http://stormzhang.com/github/2016/07/09/learn-from-github-from-zero6/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå¦‚ä½•å‘ç°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Ÿã€](http://stormzhang.com/github/2016/07/28/learn-github-from-zero7/)","source":"_posts/git-è§£å†³pushæŠ¥é”™.md","raw":"---\ntitle: git è§£å†³pushæŠ¥é”™\ndate: 2017-04-22 18:04:30\ntags: \n\t- git\ncategories: Git\n---\n\n# git -è§£å†³pushæŠ¥é”™é—®é¢˜\n\n### é—®é¢˜å‡ºç°åœºæ™¯\n\ngithubæ–°å»ºä»“åº“,æƒ³æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°github\n\n---\n\næ“ä½œæ­¥éª¤\n\n1. è¿›å…¥æœ¬åœ°ä»“åº“,å‡è®¾é¡¹ç›®ä¸ºtest\n\n   `cd test`\n\n   `git init`\n\n2. æŸ¥çœ‹çŠ¶æ€\n\n   `git status`\n\n3. æŠŠæ›´æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æœ¬åœ°gitä»“åº“\n\n   `git add .`\n\n4. è®¾ç½®ç”¨æˆ·åé‚®ç®±\n\n   `git config --global user.name 'jimi'`\n\n   `git config --global user.email 'jimi@163.com`\n\n5. æäº¤\n\n   `git commit -m \"first commit\"`\n\n6. æŠŠæœ¬åœ°testé¡¹ç›®å’Œgithhubçš„testé¡¹ç›®è¿›è¡Œå…³è”\n\n   `git remote add origin xxxxx@xxxx`\n\n7. å‘è¿œç¨‹ä»“åº“æäº¤ä»£ç (é…ç½®å¥½sshæˆ–è€…å¯†ç )\n\n   `git push origin master`\n\n   å¯èƒ½ä¼šå‡ºç°é—®é¢˜:\n\n   ```shell\n   $ git push origin master  \n   To github.com:JasonLi-cn/test.git  \n    ! [rejected]        master -> master (fetch first)  \n   error: failed to push some refs to 'git@github.com:JasonLi-cn/test.git'  \n   hint: Updates were rejected because the remote contains work that you do  \n   hint: not have locally. This is usually caused by another repository pushing  \n   hint: to the same ref. You may want to first integrate the remote changes  \n   hint: (e.g., 'git pull ...') before pushing again.  \n   hint: See the 'Note about fast-forwards' in 'git push --help' for details. \n   ```\n\n   è¯´æ˜è¿œç¨‹ä»“åº“æœ‰æœ¬åœ°ä»“åº“æ²¡æœ‰çš„æ–‡ä»¶,éœ€è¦å…ˆpull\n\n   `git pull origin master`\n\n   è¿™æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜:\n\n   ```\n   $ git pull origin master  \n   From github.com:JasonLi-cn/test  \n    * branch            master     -> FETCH_HEAD  \n   fatal: refusing to merge unrelated histories  \n   ```\n\n   è§£å†³åŠæ³•:\n\n   `git pull origin master --allow-unrelated-histories`\n\n   è¿™æ—¶å°±å¯ä»¥pushäº†.\n\n   å¦‚æœè¿œç¨‹ä»“åº“æœ‰å’Œæœ¬åœ°ä»“åº“ä¸€æ ·çš„æ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥push,git statuså‘ç°:\n\n   ```\n   On branch master\n   You have unmerged paths.\n     (fix conflicts and run \"git commit\")\n     (use \"git merge --abort\" to abort the merge)\n\n   Unmerged paths:\n     (use \"git add <file>...\" to mark resolution)\n\n   \tboth added:      LICENSE\n\n   ```\n\n   åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹æ“ä½œç„¶åé‡æ–°æäº¤å°±è¡Œäº†\n\n   ```Shell\n   git rm LICENSE\n   git add .\n   git commit -m \"merge\"\n   git push origin master\n   ```\n\n---\n\næœ€å¥½æ¨èå‡ ç¯‡å†™çš„éå¸¸ä¸é”™çš„gitå…¥é—¨æ–‡ç« :\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œåˆè¯† GitHubã€](http://stormzhang.com/github/2016/05/25/learn-github-from-zero1/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒåŠ å…¥ GitHubã€](http://stormzhang.com/github/2016/05/26/learn-github-from-zero2/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit é€Ÿæˆã€](http://stormzhang.com/github/2016/05/30/learn-github-from-zero3/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå‘GitHub æäº¤ä»£ç ã€](http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit è¿›é˜¶ã€](http://stormzhang.com/github/2016/06/16/learn-github-from-zero5/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå›¢é˜Ÿåˆä½œåˆ©å™¨ BRANCHã€](http://stormzhang.com/github/2016/07/09/learn-from-github-from-zero6/)\n\n[ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå¦‚ä½•å‘ç°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Ÿã€](http://stormzhang.com/github/2016/07/28/learn-github-from-zero7/)","slug":"git-è§£å†³pushæŠ¥é”™","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fo8000d3kzja6bi17us","content":"<h1 id=\"git-è§£å†³pushæŠ¥é”™é—®é¢˜\"><a href=\"#git-è§£å†³pushæŠ¥é”™é—®é¢˜\" class=\"headerlink\" title=\"git -è§£å†³pushæŠ¥é”™é—®é¢˜\"></a>git -è§£å†³pushæŠ¥é”™é—®é¢˜</h1><h3 id=\"é—®é¢˜å‡ºç°åœºæ™¯\"><a href=\"#é—®é¢˜å‡ºç°åœºæ™¯\" class=\"headerlink\" title=\"é—®é¢˜å‡ºç°åœºæ™¯\"></a>é—®é¢˜å‡ºç°åœºæ™¯</h3><p>githubæ–°å»ºä»“åº“,æƒ³æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°github</p>\n<hr>\n<p>æ“ä½œæ­¥éª¤</p>\n<ol>\n<li><p>è¿›å…¥æœ¬åœ°ä»“åº“,å‡è®¾é¡¹ç›®ä¸ºtest</p>\n<p><code>cd test</code></p>\n<p><code>git init</code></p>\n</li>\n<li><p>æŸ¥çœ‹çŠ¶æ€</p>\n<p><code>git status</code></p>\n</li>\n<li><p>æŠŠæ›´æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æœ¬åœ°gitä»“åº“</p>\n<p><code>git add .</code></p>\n</li>\n<li><p>è®¾ç½®ç”¨æˆ·åé‚®ç®±</p>\n<p><code>git config --global user.name 'jimi'</code></p>\n<p><code>git config --global user.email 'jimi@163.com</code></p>\n</li>\n<li><p>æäº¤</p>\n<p><code>git commit -m \"first commit\"</code></p>\n</li>\n<li><p>æŠŠæœ¬åœ°testé¡¹ç›®å’Œgithhubçš„testé¡¹ç›®è¿›è¡Œå…³è”</p>\n<p><code>git remote add origin xxxxx@xxxx</code></p>\n</li>\n<li><p>å‘è¿œç¨‹ä»“åº“æäº¤ä»£ç (é…ç½®å¥½sshæˆ–è€…å¯†ç )</p>\n<p><code>git push origin master</code></p>\n<p>å¯èƒ½ä¼šå‡ºç°é—®é¢˜:</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git push origin master  </span></span><br><span class=\"line\">To github.com:JasonLi-cn/test.git  </span><br><span class=\"line\"> ! [rejected]        master -&gt; master (fetch first)  </span><br><span class=\"line\">error: failed to push some refs to 'git@github.com:JasonLi-cn/test.git'  </span><br><span class=\"line\">hint: Updates were rejected because the remote contains work that you do  </span><br><span class=\"line\">hint: not have locally. This is usually caused by another repository pushing  </span><br><span class=\"line\">hint: to the same ref. You may want to first integrate the remote changes  </span><br><span class=\"line\">hint: (e.g., 'git pull ...') before pushing again.  </span><br><span class=\"line\">hint: See the 'Note about fast-forwards' in 'git push --help' for details.</span><br></pre></td></tr></tbody></table></figure>\n\n<p>è¯´æ˜è¿œç¨‹ä»“åº“æœ‰æœ¬åœ°ä»“åº“æ²¡æœ‰çš„æ–‡ä»¶,éœ€è¦å…ˆpull</p>\n<p><code>git pull origin master</code></p>\n<p>è¿™æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜:</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git pull origin master  </span><br><span class=\"line\">From github.com:JasonLi-cn/test  </span><br><span class=\"line\"> * branch            master     -&gt; FETCH_HEAD  </span><br><span class=\"line\">fatal: refusing to merge unrelated histories</span><br></pre></td></tr></tbody></table></figure>\n\n<p>è§£å†³åŠæ³•:</p>\n<p><code>git pull origin master --allow-unrelated-histories</code></p>\n<p>è¿™æ—¶å°±å¯ä»¥pushäº†.</p>\n<p>å¦‚æœè¿œç¨‹ä»“åº“æœ‰å’Œæœ¬åœ°ä»“åº“ä¸€æ ·çš„æ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥push,git statuså‘ç°:</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">On branch master</span><br><span class=\"line\">You have unmerged paths.</span><br><span class=\"line\">  (fix conflicts and run \"git commit\")</span><br><span class=\"line\">  (use \"git merge --abort\" to abort the merge)</span><br><span class=\"line\"></span><br><span class=\"line\">Unmerged paths:</span><br><span class=\"line\">  (use \"git add &lt;file&gt;...\" to mark resolution)</span><br><span class=\"line\"></span><br><span class=\"line\">\tboth added:      LICENSE</span><br></pre></td></tr></tbody></table></figure>\n\n<p>åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹æ“ä½œç„¶åé‡æ–°æäº¤å°±è¡Œäº†</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rm LICENSE</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m \"merge\"</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></tbody></table></figure>\n\n</li>\n</ol>\n<hr>\n<p>æœ€å¥½æ¨èå‡ ç¯‡å†™çš„éå¸¸ä¸é”™çš„gitå…¥é—¨æ–‡ç« :</p>\n<p><a href=\"http://stormzhang.com/github/2016/05/25/learn-github-from-zero1/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œåˆè¯† GitHubã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/05/26/learn-github-from-zero2/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒåŠ å…¥ GitHubã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/05/30/learn-github-from-zero3/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit é€Ÿæˆã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå‘GitHub æäº¤ä»£ç ã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/06/16/learn-github-from-zero5/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit è¿›é˜¶ã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/07/09/learn-from-github-from-zero6/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå›¢é˜Ÿåˆä½œåˆ©å™¨ BRANCHã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/07/28/learn-github-from-zero7/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå¦‚ä½•å‘ç°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Ÿã€</a></p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"git-è§£å†³pushæŠ¥é”™é—®é¢˜\"><a href=\"#git-è§£å†³pushæŠ¥é”™é—®é¢˜\" class=\"headerlink\" title=\"git -è§£å†³pushæŠ¥é”™é—®é¢˜\"></a>git -è§£å†³pushæŠ¥é”™é—®é¢˜</h1><h3 id=\"é—®é¢˜å‡ºç°åœºæ™¯\"><a href=\"#é—®é¢˜å‡ºç°åœºæ™¯\" class=\"headerlink\" title=\"é—®é¢˜å‡ºç°åœºæ™¯\"></a>é—®é¢˜å‡ºç°åœºæ™¯</h3><p>githubæ–°å»ºä»“åº“,æƒ³æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°github</p>\n<hr>\n<p>æ“ä½œæ­¥éª¤</p>\n<ol>\n<li><p>è¿›å…¥æœ¬åœ°ä»“åº“,å‡è®¾é¡¹ç›®ä¸ºtest</p>\n<p><code>cd test</code></p>\n<p><code>git init</code></p>\n</li>\n<li><p>æŸ¥çœ‹çŠ¶æ€</p>\n<p><code>git status</code></p>\n</li>\n<li><p>æŠŠæ›´æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æœ¬åœ°gitä»“åº“</p>\n<p><code>git add .</code></p>\n</li>\n<li><p>è®¾ç½®ç”¨æˆ·åé‚®ç®±</p>\n<p><code>git config --global user.name &#39;jimi&#39;</code></p>\n<p><code>git config --global user.email &#39;jimi@163.com</code></p>\n</li>\n<li><p>æäº¤</p>\n<p><code>git commit -m &quot;first commit&quot;</code></p>\n</li>\n<li><p>æŠŠæœ¬åœ°testé¡¹ç›®å’Œgithhubçš„testé¡¹ç›®è¿›è¡Œå…³è”</p>\n<p><code>git remote add origin xxxxx@xxxx</code></p>\n</li>\n<li><p>å‘è¿œç¨‹ä»“åº“æäº¤ä»£ç (é…ç½®å¥½sshæˆ–è€…å¯†ç )</p>\n<p><code>git push origin master</code></p>\n<p>å¯èƒ½ä¼šå‡ºç°é—®é¢˜:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git push origin master  </span></span><br><span class=\"line\">To github.com:JasonLi-cn/test.git  </span><br><span class=\"line\"> ! [rejected]        master -&gt; master (fetch first)  </span><br><span class=\"line\">error: failed to push some refs to 'git@github.com:JasonLi-cn/test.git'  </span><br><span class=\"line\">hint: Updates were rejected because the remote contains work that you do  </span><br><span class=\"line\">hint: not have locally. This is usually caused by another repository pushing  </span><br><span class=\"line\">hint: to the same ref. You may want to first integrate the remote changes  </span><br><span class=\"line\">hint: (e.g., 'git pull ...') before pushing again.  </span><br><span class=\"line\">hint: See the 'Note about fast-forwards' in 'git push --help' for details.</span><br></pre></td></tr></table></figure>\n\n<p>è¯´æ˜è¿œç¨‹ä»“åº“æœ‰æœ¬åœ°ä»“åº“æ²¡æœ‰çš„æ–‡ä»¶,éœ€è¦å…ˆpull</p>\n<p><code>git pull origin master</code></p>\n<p>è¿™æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git pull origin master  </span><br><span class=\"line\">From github.com:JasonLi-cn&#x2F;test  </span><br><span class=\"line\"> * branch            master     -&gt; FETCH_HEAD  </span><br><span class=\"line\">fatal: refusing to merge unrelated histories</span><br></pre></td></tr></table></figure>\n\n<p>è§£å†³åŠæ³•:</p>\n<p><code>git pull origin master --allow-unrelated-histories</code></p>\n<p>è¿™æ—¶å°±å¯ä»¥pushäº†.</p>\n<p>å¦‚æœè¿œç¨‹ä»“åº“æœ‰å’Œæœ¬åœ°ä»“åº“ä¸€æ ·çš„æ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥push,git statuså‘ç°:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">On branch master</span><br><span class=\"line\">You have unmerged paths.</span><br><span class=\"line\">  (fix conflicts and run &quot;git commit&quot;)</span><br><span class=\"line\">  (use &quot;git merge --abort&quot; to abort the merge)</span><br><span class=\"line\"></span><br><span class=\"line\">Unmerged paths:</span><br><span class=\"line\">  (use &quot;git add &lt;file&gt;...&quot; to mark resolution)</span><br><span class=\"line\"></span><br><span class=\"line\">\tboth added:      LICENSE</span><br></pre></td></tr></table></figure>\n\n<p>åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹æ“ä½œç„¶åé‡æ–°æäº¤å°±è¡Œäº†</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rm LICENSE</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m \"merge\"</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<hr>\n<p>æœ€å¥½æ¨èå‡ ç¯‡å†™çš„éå¸¸ä¸é”™çš„gitå…¥é—¨æ–‡ç« :</p>\n<p><a href=\"http://stormzhang.com/github/2016/05/25/learn-github-from-zero1/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œåˆè¯† GitHubã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/05/26/learn-github-from-zero2/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒåŠ å…¥ GitHubã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/05/30/learn-github-from-zero3/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit é€Ÿæˆã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå‘GitHub æäº¤ä»£ç ã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/06/16/learn-github-from-zero5/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€ŒGit è¿›é˜¶ã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/07/09/learn-from-github-from-zero6/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå›¢é˜Ÿåˆä½œåˆ©å™¨ BRANCHã€</a></p>\n<p><a href=\"http://stormzhang.com/github/2016/07/28/learn-github-from-zero7/\" target=\"_blank\" rel=\"noopener\">ä»0å¼€å§‹å­¦ä¹  GitHub ç³»åˆ—ä¹‹ã€Œå¦‚ä½•å‘ç°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Ÿã€</a></p>\n"},{"title":"pycharmæ“ä½œæŠ€å·§","date":"2017-04-19T16:42:43.000Z","_content":"\n# pycharmä½¿ç”¨æŠ€å·§\n\n- å¸¸ç”¨å¿«æ·é”®\n\n  ![pycharm for mac](/image/pycharm for mac.jpg)\n\n  ![pycharm for win](/image/pycharm for win.jpg)\n\n- æŸ¥çœ‹ä½¿ç”¨åº“æºç \n\n  `Command+B`  æˆ– `command+click`\n\n- è®©ä»£ç PEP8\n\n  `Command+OPtion+L`\n\n- æŸ¥æ‰¾æ–‡ä»¶,ç±»,æ–¹æ³•\n\n  `Command+Shift+O`\n\n- å¿«é€Ÿé€‰æ‹©ä»£ç \n\n  é€‰æ‹©æŸä¸ªå‡½æ•°æ—¶,æŠŠå…‰æ ‡æ”¾åœ¨æœ€å‰é¢ç„¶åç‚¹å‡»\n\n  `Command+Option+Shift+[`\n\n- å¿«é€Ÿæ³¨é‡Š\n\n  `Command+/`\n\n- å¿«é€Ÿæ’å…¥å¸¸ç”¨ä»£ç å¦‚if_name_=='\\_\\_main\\_\\_':\n\n  `command+J`\n\n- è¿è¡Œ/è°ƒè¯•ä»£ç \n\n  `command+R`\n\n- ç¼©è¿›ä»£ç å—\n\n  `shift+ä¸Šä¸‹é”®` ç„¶åç”¨Tabé”®\n\n- å±•å¼€/æ”¶ç¼©ä»£ç \n\n  `command+shift+åŠ å‡å·`\n\n- è®¾ç½®ä»£ç æ¨¡æ¿\n\n  ```python\n  #-*- coding:utf-8 _*-  \n  \"\"\" \n  @author:${USER} \n  @file: ${NAME}.py \n  @time: ${YEAR}/${MONTH}/{DAY} \n  \"\"\"  \n  ```\n\n- å‡½æ•°è°ƒç”¨å±‚çº§å¯è§†åŒ–\n\n  `å¯¼èˆª(Navigate)è°ƒç”¨å±‚æ¬¡ç»“æ„(call H*)`\n\n- æ˜¾ç¤ºæ–‡æ¡£å’Œå‡½æ•°å‚æ•°\n\n  `command+P`\n\n- è¶…å®ç”¨æœç´¢Search Everywhere\n\n  `double shift`\n\n- å¿«é€Ÿåˆ›å»ºæµ‹è¯•\n\n  `å¯¼èˆª  test`\n\n- å¯ä»¥åˆ©ç”¨sshè¿œç¨‹éƒ¨ç½²\n\n  tools ->ç¬¬ä¸€è¡Œé‡Œé¢çš„configserver\n\n\n\n","source":"_posts/pycharmæ“ä½œæŠ€å·§.md","raw":"---\ntitle: pycharmæ“ä½œæŠ€å·§\ndate: 2017-04-20 00:42:43\ntags: \n\t- python\n\t- ç¼–è¾‘å™¨\ncategories: Python\n\n---\n\n# pycharmä½¿ç”¨æŠ€å·§\n\n- å¸¸ç”¨å¿«æ·é”®\n\n  ![pycharm for mac](/image/pycharm for mac.jpg)\n\n  ![pycharm for win](/image/pycharm for win.jpg)\n\n- æŸ¥çœ‹ä½¿ç”¨åº“æºç \n\n  `Command+B`  æˆ– `command+click`\n\n- è®©ä»£ç PEP8\n\n  `Command+OPtion+L`\n\n- æŸ¥æ‰¾æ–‡ä»¶,ç±»,æ–¹æ³•\n\n  `Command+Shift+O`\n\n- å¿«é€Ÿé€‰æ‹©ä»£ç \n\n  é€‰æ‹©æŸä¸ªå‡½æ•°æ—¶,æŠŠå…‰æ ‡æ”¾åœ¨æœ€å‰é¢ç„¶åç‚¹å‡»\n\n  `Command+Option+Shift+[`\n\n- å¿«é€Ÿæ³¨é‡Š\n\n  `Command+/`\n\n- å¿«é€Ÿæ’å…¥å¸¸ç”¨ä»£ç å¦‚if_name_=='\\_\\_main\\_\\_':\n\n  `command+J`\n\n- è¿è¡Œ/è°ƒè¯•ä»£ç \n\n  `command+R`\n\n- ç¼©è¿›ä»£ç å—\n\n  `shift+ä¸Šä¸‹é”®` ç„¶åç”¨Tabé”®\n\n- å±•å¼€/æ”¶ç¼©ä»£ç \n\n  `command+shift+åŠ å‡å·`\n\n- è®¾ç½®ä»£ç æ¨¡æ¿\n\n  ```python\n  #-*- coding:utf-8 _*-  \n  \"\"\" \n  @author:${USER} \n  @file: ${NAME}.py \n  @time: ${YEAR}/${MONTH}/{DAY} \n  \"\"\"  \n  ```\n\n- å‡½æ•°è°ƒç”¨å±‚çº§å¯è§†åŒ–\n\n  `å¯¼èˆª(Navigate)è°ƒç”¨å±‚æ¬¡ç»“æ„(call H*)`\n\n- æ˜¾ç¤ºæ–‡æ¡£å’Œå‡½æ•°å‚æ•°\n\n  `command+P`\n\n- è¶…å®ç”¨æœç´¢Search Everywhere\n\n  `double shift`\n\n- å¿«é€Ÿåˆ›å»ºæµ‹è¯•\n\n  `å¯¼èˆª  test`\n\n- å¯ä»¥åˆ©ç”¨sshè¿œç¨‹éƒ¨ç½²\n\n  tools ->ç¬¬ä¸€è¡Œé‡Œé¢çš„configserver\n\n\n\n","slug":"pycharmæ“ä½œæŠ€å·§","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fo9000h3kzj8iivb2j3","content":"<h1 id=\"pycharmä½¿ç”¨æŠ€å·§\"><a href=\"#pycharmä½¿ç”¨æŠ€å·§\" class=\"headerlink\" title=\"pycharmä½¿ç”¨æŠ€å·§\"></a>pycharmä½¿ç”¨æŠ€å·§</h1><ul>\n<li><p>å¸¸ç”¨å¿«æ·é”®</p>\n<p>![pycharm for mac](/image/pycharm for mac.jpg)</p>\n<p>![pycharm for win](/image/pycharm for win.jpg)</p>\n</li>\n<li><p>æŸ¥çœ‹ä½¿ç”¨åº“æºç </p>\n<p><code>Command+B</code>  æˆ– <code>command+click</code></p>\n</li>\n<li><p>è®©ä»£ç PEP8</p>\n<p><code>Command+OPtion+L</code></p>\n</li>\n<li><p>æŸ¥æ‰¾æ–‡ä»¶,ç±»,æ–¹æ³•</p>\n<p><code>Command+Shift+O</code></p>\n</li>\n<li><p>å¿«é€Ÿé€‰æ‹©ä»£ç </p>\n<p>é€‰æ‹©æŸä¸ªå‡½æ•°æ—¶,æŠŠå…‰æ ‡æ”¾åœ¨æœ€å‰é¢ç„¶åç‚¹å‡»</p>\n<p><code>Command+Option+Shift+[</code></p>\n</li>\n<li><p>å¿«é€Ÿæ³¨é‡Š</p>\n<p><code>Command+/</code></p>\n</li>\n<li><p>å¿«é€Ÿæ’å…¥å¸¸ç”¨ä»£ç å¦‚if_name_==â€™__main__â€˜:</p>\n<p><code>command+J</code></p>\n</li>\n<li><p>è¿è¡Œ/è°ƒè¯•ä»£ç </p>\n<p><code>command+R</code></p>\n</li>\n<li><p>ç¼©è¿›ä»£ç å—</p>\n<p><code>shift+ä¸Šä¸‹é”®</code> ç„¶åç”¨Tabé”®</p>\n</li>\n<li><p>å±•å¼€/æ”¶ç¼©ä»£ç </p>\n<p><code>command+shift+åŠ å‡å·</code></p>\n</li>\n<li><p>è®¾ç½®ä»£ç æ¨¡æ¿</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#-*- coding:utf-8 _*-  </span></span><br><span class=\"line\"><span class=\"string\">\"\"\" </span></span><br><span class=\"line\"><span class=\"string\">@author:${USER} </span></span><br><span class=\"line\"><span class=\"string\">@file: ${NAME}.py </span></span><br><span class=\"line\"><span class=\"string\">@time: ${YEAR}/${MONTH}/{DAY} </span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>å‡½æ•°è°ƒç”¨å±‚çº§å¯è§†åŒ–</p>\n<p><code>å¯¼èˆª(Navigate)è°ƒç”¨å±‚æ¬¡ç»“æ„(call H*)</code></p>\n</li>\n<li><p>æ˜¾ç¤ºæ–‡æ¡£å’Œå‡½æ•°å‚æ•°</p>\n<p><code>command+P</code></p>\n</li>\n<li><p>è¶…å®ç”¨æœç´¢Search Everywhere</p>\n<p><code>double shift</code></p>\n</li>\n<li><p>å¿«é€Ÿåˆ›å»ºæµ‹è¯•</p>\n<p><code>å¯¼èˆª  test</code></p>\n</li>\n<li><p>å¯ä»¥åˆ©ç”¨sshè¿œç¨‹éƒ¨ç½²</p>\n<p>tools -&gt;ç¬¬ä¸€è¡Œé‡Œé¢çš„configserver</p>\n</li>\n</ul>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"pycharmä½¿ç”¨æŠ€å·§\"><a href=\"#pycharmä½¿ç”¨æŠ€å·§\" class=\"headerlink\" title=\"pycharmä½¿ç”¨æŠ€å·§\"></a>pycharmä½¿ç”¨æŠ€å·§</h1><ul>\n<li><p>å¸¸ç”¨å¿«æ·é”®</p>\n<p>![pycharm for mac](/image/pycharm for mac.jpg)</p>\n<p>![pycharm for win](/image/pycharm for win.jpg)</p>\n</li>\n<li><p>æŸ¥çœ‹ä½¿ç”¨åº“æºç </p>\n<p><code>Command+B</code>  æˆ– <code>command+click</code></p>\n</li>\n<li><p>è®©ä»£ç PEP8</p>\n<p><code>Command+OPtion+L</code></p>\n</li>\n<li><p>æŸ¥æ‰¾æ–‡ä»¶,ç±»,æ–¹æ³•</p>\n<p><code>Command+Shift+O</code></p>\n</li>\n<li><p>å¿«é€Ÿé€‰æ‹©ä»£ç </p>\n<p>é€‰æ‹©æŸä¸ªå‡½æ•°æ—¶,æŠŠå…‰æ ‡æ”¾åœ¨æœ€å‰é¢ç„¶åç‚¹å‡»</p>\n<p><code>Command+Option+Shift+[</code></p>\n</li>\n<li><p>å¿«é€Ÿæ³¨é‡Š</p>\n<p><code>Command+/</code></p>\n</li>\n<li><p>å¿«é€Ÿæ’å…¥å¸¸ç”¨ä»£ç å¦‚if_name_==â€™__main__â€˜:</p>\n<p><code>command+J</code></p>\n</li>\n<li><p>è¿è¡Œ/è°ƒè¯•ä»£ç </p>\n<p><code>command+R</code></p>\n</li>\n<li><p>ç¼©è¿›ä»£ç å—</p>\n<p><code>shift+ä¸Šä¸‹é”®</code> ç„¶åç”¨Tabé”®</p>\n</li>\n<li><p>å±•å¼€/æ”¶ç¼©ä»£ç </p>\n<p><code>command+shift+åŠ å‡å·</code></p>\n</li>\n<li><p>è®¾ç½®ä»£ç æ¨¡æ¿</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#-*- coding:utf-8 _*-  </span></span><br><span class=\"line\"><span class=\"string\">\"\"\" </span></span><br><span class=\"line\"><span class=\"string\">@author:$&#123;USER&#125; </span></span><br><span class=\"line\"><span class=\"string\">@file: $&#123;NAME&#125;.py </span></span><br><span class=\"line\"><span class=\"string\">@time: $&#123;YEAR&#125;/$&#123;MONTH&#125;/&#123;DAY&#125; </span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å‡½æ•°è°ƒç”¨å±‚çº§å¯è§†åŒ–</p>\n<p><code>å¯¼èˆª(Navigate)è°ƒç”¨å±‚æ¬¡ç»“æ„(call H*)</code></p>\n</li>\n<li><p>æ˜¾ç¤ºæ–‡æ¡£å’Œå‡½æ•°å‚æ•°</p>\n<p><code>command+P</code></p>\n</li>\n<li><p>è¶…å®ç”¨æœç´¢Search Everywhere</p>\n<p><code>double shift</code></p>\n</li>\n<li><p>å¿«é€Ÿåˆ›å»ºæµ‹è¯•</p>\n<p><code>å¯¼èˆª  test</code></p>\n</li>\n<li><p>å¯ä»¥åˆ©ç”¨sshè¿œç¨‹éƒ¨ç½²</p>\n<p>tools -&gt;ç¬¬ä¸€è¡Œé‡Œé¢çš„configserver</p>\n</li>\n</ul>\n"},{"title":"sqlalchemyä¹‹eventä½¿ç”¨","urlname":"mifw46","date":"2020-04-24T02:50:10.000Z","_content":"\n---\n\ntitle: sqlalchemyä¹‹eventä½¿ç”¨\n\n\ndate: 2020-04-24 16:10:15\n\n\ntags:Â  Python\n\n\ncategories:Â  Python\n\n---\n\n- å‚è€ƒæ–‡æ¡£\n  > [https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events](https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events)\n\n```python\nfrom sqlalchemy.event import listents_for\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy import create_engine\n\nengine = create_engine(SQLALCHEMY_DATABASE_URL, pool_pre_ping=True)\nSession = sessionmaker(autocommit=False,autoflush=False,bind=engine)\nsession = Session()\n\n# ç¤ºä¾‹ä¸ºå½“åˆ é™¤æŸæ¡æ•°æ®çš„æ—¶å€™,è§¦å‘eventåˆ é™¤å’Œè¿™æ¡æ•°æ®ç›¸å…³çš„æ•°æ®,é€‚åˆç”¨äºæ²¡å¤–é”®çº¦æŸçš„å…³ç³»è¡¨ç»“æ„\n\n@listens_for(User,'after_delete')\ndef after_del_user(mapper,connection,target):\n    print(mapped)  # class User->user ,æ˜ å°„\n    print(connection) # <sqlalchemy.engine.base.Connection object at xxxxx>\n    print(target.id)  # targetå°±æ˜¯userå¯¹è±¡\n    # ....,å†™é€»è¾‘ä»£ç \n```\n","source":"_posts/sqlalchemyä¹‹eventä½¿ç”¨.md","raw":"---\ntitle: sqlalchemyä¹‹eventä½¿ç”¨\nurlname: mifw46\ndate: 2020-04-24 10:50:10 +0800\ntags: []\ncategories: []\n---\n\n---\n\ntitle: sqlalchemyä¹‹eventä½¿ç”¨\n\n\ndate: 2020-04-24 16:10:15\n\n\ntags:Â  Python\n\n\ncategories:Â  Python\n\n---\n\n- å‚è€ƒæ–‡æ¡£\n  > [https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events](https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events)\n\n```python\nfrom sqlalchemy.event import listents_for\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy import create_engine\n\nengine = create_engine(SQLALCHEMY_DATABASE_URL, pool_pre_ping=True)\nSession = sessionmaker(autocommit=False,autoflush=False,bind=engine)\nsession = Session()\n\n# ç¤ºä¾‹ä¸ºå½“åˆ é™¤æŸæ¡æ•°æ®çš„æ—¶å€™,è§¦å‘eventåˆ é™¤å’Œè¿™æ¡æ•°æ®ç›¸å…³çš„æ•°æ®,é€‚åˆç”¨äºæ²¡å¤–é”®çº¦æŸçš„å…³ç³»è¡¨ç»“æ„\n\n@listens_for(User,'after_delete')\ndef after_del_user(mapper,connection,target):\n    print(mapped)  # class User->user ,æ˜ å°„\n    print(connection) # <sqlalchemy.engine.base.Connection object at xxxxx>\n    print(target.id)  # targetå°±æ˜¯userå¯¹è±¡\n    # ....,å†™é€»è¾‘ä»£ç \n```\n","slug":"sqlalchemyä¹‹eventä½¿ç”¨","published":1,"updated":"2020-05-10T12:00:07.032Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109foa000i3kzjgkhc2r8l","content":"<hr>\n<p>title: sqlalchemyä¹‹eventä½¿ç”¨</p>\n<p>date: 2020-04-24 16:10:15</p>\n<p>tags:  Python</p>\n<p>categories:  Python</p>\n<hr>\n<ul>\n<li>å‚è€ƒæ–‡æ¡£<blockquote>\n<p><a href=\"https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events\" target=\"_blank\" rel=\"noopener\">https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events</a></p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sqlalchemy.event <span class=\"keyword\">import</span> listents_for</span><br><span class=\"line\"><span class=\"keyword\">from</span> sqlalchemy.orm <span class=\"keyword\">import</span> sessionmaker</span><br><span class=\"line\"><span class=\"keyword\">from</span> sqlalchemy <span class=\"keyword\">import</span> create_engine</span><br><span class=\"line\"></span><br><span class=\"line\">engine = create_engine(SQLALCHEMY_DATABASE_URL, pool_pre_ping=<span class=\"literal\">True</span>)</span><br><span class=\"line\">Session = sessionmaker(autocommit=<span class=\"literal\">False</span>,autoflush=<span class=\"literal\">False</span>,bind=engine)</span><br><span class=\"line\">session = Session()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç¤ºä¾‹ä¸ºå½“åˆ é™¤æŸæ¡æ•°æ®çš„æ—¶å€™,è§¦å‘eventåˆ é™¤å’Œè¿™æ¡æ•°æ®ç›¸å…³çš„æ•°æ®,é€‚åˆç”¨äºæ²¡å¤–é”®çº¦æŸçš„å…³ç³»è¡¨ç»“æ„</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@listens_for(User,'after_delete')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">after_del_user</span><span class=\"params\">(mapper,connection,target)</span>:</span></span><br><span class=\"line\">    print(mapped)  <span class=\"comment\"># class User-&gt;user ,æ˜ å°„</span></span><br><span class=\"line\">    print(connection) <span class=\"comment\"># &lt;sqlalchemy.engine.base.Connection object at xxxxx&gt;</span></span><br><span class=\"line\">    print(target.id)  <span class=\"comment\"># targetå°±æ˜¯userå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"comment\"># ....,å†™é€»è¾‘ä»£ç </span></span><br></pre></td></tr></tbody></table></figure>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<hr>\n<p>title: sqlalchemyä¹‹eventä½¿ç”¨</p>\n<p>date: 2020-04-24 16:10:15</p>\n<p>tags:  Python</p>\n<p>categories:  Python</p>\n<hr>\n<ul>\n<li>å‚è€ƒæ–‡æ¡£<blockquote>\n<p><a href=\"https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events\" target=\"_blank\" rel=\"noopener\">https://docs.sqlalchemy.org/en/13/orm/events.html?highlight=events#mapper-events</a></p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sqlalchemy.event <span class=\"keyword\">import</span> listents_for</span><br><span class=\"line\"><span class=\"keyword\">from</span> sqlalchemy.orm <span class=\"keyword\">import</span> sessionmaker</span><br><span class=\"line\"><span class=\"keyword\">from</span> sqlalchemy <span class=\"keyword\">import</span> create_engine</span><br><span class=\"line\"></span><br><span class=\"line\">engine = create_engine(SQLALCHEMY_DATABASE_URL, pool_pre_ping=<span class=\"literal\">True</span>)</span><br><span class=\"line\">Session = sessionmaker(autocommit=<span class=\"literal\">False</span>,autoflush=<span class=\"literal\">False</span>,bind=engine)</span><br><span class=\"line\">session = Session()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç¤ºä¾‹ä¸ºå½“åˆ é™¤æŸæ¡æ•°æ®çš„æ—¶å€™,è§¦å‘eventåˆ é™¤å’Œè¿™æ¡æ•°æ®ç›¸å…³çš„æ•°æ®,é€‚åˆç”¨äºæ²¡å¤–é”®çº¦æŸçš„å…³ç³»è¡¨ç»“æ„</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@listens_for(User,'after_delete')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">after_del_user</span><span class=\"params\">(mapper,connection,target)</span>:</span></span><br><span class=\"line\">    print(mapped)  <span class=\"comment\"># class User-&gt;user ,æ˜ å°„</span></span><br><span class=\"line\">    print(connection) <span class=\"comment\"># &lt;sqlalchemy.engine.base.Connection object at xxxxx&gt;</span></span><br><span class=\"line\">    print(target.id)  <span class=\"comment\"># targetå°±æ˜¯userå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"comment\"># ....,å†™é€»è¾‘ä»£ç </span></span><br></pre></td></tr></table></figure>\n"},{"title":"å­¦ä¹ ç¬”è®°","date":"2017-05-03T10:16:33.000Z","_content":"\nå­¦ä¹ ç¬”è®°\n========\n\nå¼€å‘å·¥å…·æ ˆ\n----------\n    1. sublime\n    2. zsh + oh-my-zsh\n    3. tmux\n    4. vim\n    5. å¸¸ç”¨é…ç½®: <https://github.com/seamile/Weeds/tree/master/rc.d>\n\n\né™åˆ¶è®¿é—®é¢‘ç‡\n------------\n\né¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡\n\n        requests     time.time()\n        --------     -----------\n        request 1 -> 1000.000\n        request 2 -> 1000.230\n        request 3 -> 1001.930\n        request 4 -> 1002.900\n        request 5 -> (1003.130 - 1001.930) < 1\n        request 6 -> 1003.140\n        request 7 -> 1003.140\n        request 8 -> 1003.140\n        request 9 -> 1003.140\n        request 10 -> 1003.140\n        request 11 -> 1003.140\n\n\nTags\n----\n\n1. å¤šå¯¹å¤šå…³ç³»ï¼Œä¸€èˆ¬å»ºç«‹ä¸€ä¸ªå…³ç³»è¡¨\n\nArticle è¡¨\n    id\n\nTag è¡¨\n    id\n    name\n\nå…³ç³»è¡¨\n    article_id\n    tag_id\n\n\nåˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\n------------\n\næ–‡ç«  Article(33)\n\n       1        2         3\nåŸæ¥çš„ 'python', 'django', 'linux'\nä¼ å…¥   'python', 'django',          'mongodb'\n                                    4\n\nArticleTags\n\n33 1\n33 2\n\n33 4\n\n\n\næƒé™ç®¡ç†åŠŸèƒ½\n------------\n\nåšè®¾è®¡æ—¶è¦æœ‰ â€œå‰ç»æ€§â€\n\nç»™ç”¨æˆ·æ·»åŠ æƒé™\n\n\n\nuser\n    id\n\npermission\n    id\n\ngroup\n    id\n    pid\n\nå‚è€ƒé“¾æ¥\n<https://www.zhihu.com/question/20313385>\n<http://blog.csdn.net/painsonline/article/details/7183613/>\n\n\nGunicorn\n--------\n\nå¤šè¿›ç¨‹ + åç¨‹ (greenlet)\n\nGunicorn\nuWSGI\n\n\nå‹åŠ›æµ‹è¯•\nab (Apache Bench)\nwebbench\nautobench\n\nRPS æ¯ç§’è¯·æ±‚é‡\nQPS æ¯ç§’æŸ¥è¯¢é‡\n\n\n10 Concurrency  1000 Request\ngunicorn 614 r/s\ndjango   510 r/s\n\nUnix ä¸€åˆ‡çš†æ–‡ä»¶\n\næ–‡ä»¶æè¿°ç¬¦\n\n\nNginx\n-----\n\næ­£å‘ä»£ç†\n\nå†…ç½‘ç¯å¢ƒ -> ä»£ç† -> å…¬ç½‘æœºå™¨\n\n\nåå‘ä»£ç†\n\nç”¨æˆ· -> Nginx -> æœåŠ¡å™¨å†…ç½‘ç¯å¢ƒ\n\n\n\nDB é›†ç¾¤\n--------\n\nè¯»å†™åˆ†ç¦»\n\nä¸»ä»ç»“æ„\n-------\n     å†™     è¯»\n     |      ^\n     V      |\n    ä¸»æœº -> ä»æœº\n\nä¸€ä¸»ä¸¤ä»ç”šè‡³ä¸€ä¸»å¤šä»\n\nåŒä¸»äº’å¤‡\n-------\n    ä¸»æœº <-> ä¸»æœº\n    \n         ä»\n\n\n\nCDN\n----\nåŒ—äº¬    æºç«™\nä¸Šæµ·    é•œåƒç«™\næ·±åœ³    é•œåƒç«™\nä¹Œé²æœ¨é½ é•œåƒç«™\n .\n .\n .\nç¾å›½    é•œåƒç«™\n","source":"_posts/å­¦ä¹ ç¬”è®°.md","raw":"---\ntitle: å­¦ä¹ ç¬”è®°\ndate: 2017-05-03 18:16:33\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\nå­¦ä¹ ç¬”è®°\n========\n\nå¼€å‘å·¥å…·æ ˆ\n----------\n    1. sublime\n    2. zsh + oh-my-zsh\n    3. tmux\n    4. vim\n    5. å¸¸ç”¨é…ç½®: <https://github.com/seamile/Weeds/tree/master/rc.d>\n\n\né™åˆ¶è®¿é—®é¢‘ç‡\n------------\n\né¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡\n\n        requests     time.time()\n        --------     -----------\n        request 1 -> 1000.000\n        request 2 -> 1000.230\n        request 3 -> 1001.930\n        request 4 -> 1002.900\n        request 5 -> (1003.130 - 1001.930) < 1\n        request 6 -> 1003.140\n        request 7 -> 1003.140\n        request 8 -> 1003.140\n        request 9 -> 1003.140\n        request 10 -> 1003.140\n        request 11 -> 1003.140\n\n\nTags\n----\n\n1. å¤šå¯¹å¤šå…³ç³»ï¼Œä¸€èˆ¬å»ºç«‹ä¸€ä¸ªå…³ç³»è¡¨\n\nArticle è¡¨\n    id\n\nTag è¡¨\n    id\n    name\n\nå…³ç³»è¡¨\n    article_id\n    tag_id\n\n\nåˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\n------------\n\næ–‡ç«  Article(33)\n\n       1        2         3\nåŸæ¥çš„ 'python', 'django', 'linux'\nä¼ å…¥   'python', 'django',          'mongodb'\n                                    4\n\nArticleTags\n\n33 1\n33 2\n\n33 4\n\n\n\næƒé™ç®¡ç†åŠŸèƒ½\n------------\n\nåšè®¾è®¡æ—¶è¦æœ‰ â€œå‰ç»æ€§â€\n\nç»™ç”¨æˆ·æ·»åŠ æƒé™\n\n\n\nuser\n    id\n\npermission\n    id\n\ngroup\n    id\n    pid\n\nå‚è€ƒé“¾æ¥\n<https://www.zhihu.com/question/20313385>\n<http://blog.csdn.net/painsonline/article/details/7183613/>\n\n\nGunicorn\n--------\n\nå¤šè¿›ç¨‹ + åç¨‹ (greenlet)\n\nGunicorn\nuWSGI\n\n\nå‹åŠ›æµ‹è¯•\nab (Apache Bench)\nwebbench\nautobench\n\nRPS æ¯ç§’è¯·æ±‚é‡\nQPS æ¯ç§’æŸ¥è¯¢é‡\n\n\n10 Concurrency  1000 Request\ngunicorn 614 r/s\ndjango   510 r/s\n\nUnix ä¸€åˆ‡çš†æ–‡ä»¶\n\næ–‡ä»¶æè¿°ç¬¦\n\n\nNginx\n-----\n\næ­£å‘ä»£ç†\n\nå†…ç½‘ç¯å¢ƒ -> ä»£ç† -> å…¬ç½‘æœºå™¨\n\n\nåå‘ä»£ç†\n\nç”¨æˆ· -> Nginx -> æœåŠ¡å™¨å†…ç½‘ç¯å¢ƒ\n\n\n\nDB é›†ç¾¤\n--------\n\nè¯»å†™åˆ†ç¦»\n\nä¸»ä»ç»“æ„\n-------\n     å†™     è¯»\n     |      ^\n     V      |\n    ä¸»æœº -> ä»æœº\n\nä¸€ä¸»ä¸¤ä»ç”šè‡³ä¸€ä¸»å¤šä»\n\nåŒä¸»äº’å¤‡\n-------\n    ä¸»æœº <-> ä¸»æœº\n    \n         ä»\n\n\n\nCDN\n----\nåŒ—äº¬    æºç«™\nä¸Šæµ·    é•œåƒç«™\næ·±åœ³    é•œåƒç«™\nä¹Œé²æœ¨é½ é•œåƒç«™\n .\n .\n .\nç¾å›½    é•œåƒç«™\n","slug":"å­¦ä¹ ç¬”è®°","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109foc000m3kzjfhb1fvpp","content":"<h1 id=\"å­¦ä¹ ç¬”è®°\"><a href=\"#å­¦ä¹ ç¬”è®°\" class=\"headerlink\" title=\"å­¦ä¹ ç¬”è®°\"></a>å­¦ä¹ ç¬”è®°</h1><h2 id=\"å¼€å‘å·¥å…·æ ˆ\"><a href=\"#å¼€å‘å·¥å…·æ ˆ\" class=\"headerlink\" title=\"å¼€å‘å·¥å…·æ ˆ\"></a>å¼€å‘å·¥å…·æ ˆ</h2><pre><code>1. sublime\n2. zsh + oh-my-zsh\n3. tmux\n4. vim\n5. å¸¸ç”¨é…ç½®: &lt;https://github.com/seamile/Weeds/tree/master/rc.d&gt;</code></pre><h2 id=\"é™åˆ¶è®¿é—®é¢‘ç‡\"><a href=\"#é™åˆ¶è®¿é—®é¢‘ç‡\" class=\"headerlink\" title=\"é™åˆ¶è®¿é—®é¢‘ç‡\"></a>é™åˆ¶è®¿é—®é¢‘ç‡</h2><p>é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡</p>\n<pre><code>requests     time.time()\n--------     -----------\nrequest 1 -&gt; 1000.000\nrequest 2 -&gt; 1000.230\nrequest 3 -&gt; 1001.930\nrequest 4 -&gt; 1002.900\nrequest 5 -&gt; (1003.130 - 1001.930) &lt; 1\nrequest 6 -&gt; 1003.140\nrequest 7 -&gt; 1003.140\nrequest 8 -&gt; 1003.140\nrequest 9 -&gt; 1003.140\nrequest 10 -&gt; 1003.140\nrequest 11 -&gt; 1003.140</code></pre><h2 id=\"Tags\"><a href=\"#Tags\" class=\"headerlink\" title=\"Tags\"></a>Tags</h2><ol>\n<li>å¤šå¯¹å¤šå…³ç³»ï¼Œä¸€èˆ¬å»ºç«‹ä¸€ä¸ªå…³ç³»è¡¨</li>\n</ol>\n<p>Article è¡¨<br>    id</p>\n<p>Tag è¡¨<br>    id<br>    name</p>\n<p>å…³ç³»è¡¨<br>    article_id<br>    tag_id</p>\n<h2 id=\"åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\"><a href=\"#åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\" class=\"headerlink\" title=\"åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\"></a>åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹</h2><p>æ–‡ç«  Article(33)</p>\n<pre><code>1        2         3</code></pre><p>åŸæ¥çš„ â€˜pythonâ€™, â€˜djangoâ€™, â€˜linuxâ€™<br>ä¼ å…¥   â€˜pythonâ€™, â€˜djangoâ€™,          â€˜mongodbâ€™<br>                                    4</p>\n<p>ArticleTags</p>\n<p>33 1<br>33 2</p>\n<p>33 4</p>\n<h2 id=\"æƒé™ç®¡ç†åŠŸèƒ½\"><a href=\"#æƒé™ç®¡ç†åŠŸèƒ½\" class=\"headerlink\" title=\"æƒé™ç®¡ç†åŠŸèƒ½\"></a>æƒé™ç®¡ç†åŠŸèƒ½</h2><p>åšè®¾è®¡æ—¶è¦æœ‰ â€œå‰ç»æ€§â€</p>\n<p>ç»™ç”¨æˆ·æ·»åŠ æƒé™</p>\n<p>user<br>    id</p>\n<p>permission<br>    id</p>\n<p>group<br>    id<br>    pid</p>\n<p>å‚è€ƒé“¾æ¥<br><a href=\"https://www.zhihu.com/question/20313385\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/20313385</a><br><a href=\"http://blog.csdn.net/painsonline/article/details/7183613/\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/painsonline/article/details/7183613/</a></p>\n<h2 id=\"Gunicorn\"><a href=\"#Gunicorn\" class=\"headerlink\" title=\"Gunicorn\"></a>Gunicorn</h2><p>å¤šè¿›ç¨‹ + åç¨‹ (greenlet)</p>\n<p>Gunicorn<br>uWSGI</p>\n<p>å‹åŠ›æµ‹è¯•<br>ab (Apache Bench)<br>webbench<br>autobench</p>\n<p>RPS æ¯ç§’è¯·æ±‚é‡<br>QPS æ¯ç§’æŸ¥è¯¢é‡</p>\n<p>10 Concurrency  1000 Request<br>gunicorn 614 r/s<br>django   510 r/s</p>\n<p>Unix ä¸€åˆ‡çš†æ–‡ä»¶</p>\n<p>æ–‡ä»¶æè¿°ç¬¦</p>\n<h2 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h2><p>æ­£å‘ä»£ç†</p>\n<p>å†…ç½‘ç¯å¢ƒ -&gt; ä»£ç† -&gt; å…¬ç½‘æœºå™¨</p>\n<p>åå‘ä»£ç†</p>\n<p>ç”¨æˆ· -&gt; Nginx -&gt; æœåŠ¡å™¨å†…ç½‘ç¯å¢ƒ</p>\n<h2 id=\"DB-é›†ç¾¤\"><a href=\"#DB-é›†ç¾¤\" class=\"headerlink\" title=\"DB é›†ç¾¤\"></a>DB é›†ç¾¤</h2><p>è¯»å†™åˆ†ç¦»</p>\n<h2 id=\"ä¸»ä»ç»“æ„\"><a href=\"#ä¸»ä»ç»“æ„\" class=\"headerlink\" title=\"ä¸»ä»ç»“æ„\"></a>ä¸»ä»ç»“æ„</h2><pre><code> å†™     è¯»\n |      ^\n V      |\nä¸»æœº -&gt; ä»æœº</code></pre><p>ä¸€ä¸»ä¸¤ä»ç”šè‡³ä¸€ä¸»å¤šä»</p>\n<h2 id=\"åŒä¸»äº’å¤‡\"><a href=\"#åŒä¸»äº’å¤‡\" class=\"headerlink\" title=\"åŒä¸»äº’å¤‡\"></a>åŒä¸»äº’å¤‡</h2><pre><code>ä¸»æœº &lt;-&gt; ä¸»æœº\n\n     ä»</code></pre><h2 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h2><p>åŒ—äº¬    æºç«™<br>ä¸Šæµ·    é•œåƒç«™<br>æ·±åœ³    é•œåƒç«™<br>ä¹Œé²æœ¨é½ é•œåƒç«™<br> .<br> .<br> .<br>ç¾å›½    é•œåƒç«™</p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"å­¦ä¹ ç¬”è®°\"><a href=\"#å­¦ä¹ ç¬”è®°\" class=\"headerlink\" title=\"å­¦ä¹ ç¬”è®°\"></a>å­¦ä¹ ç¬”è®°</h1><h2 id=\"å¼€å‘å·¥å…·æ ˆ\"><a href=\"#å¼€å‘å·¥å…·æ ˆ\" class=\"headerlink\" title=\"å¼€å‘å·¥å…·æ ˆ\"></a>å¼€å‘å·¥å…·æ ˆ</h2><pre><code>1. sublime\n2. zsh + oh-my-zsh\n3. tmux\n4. vim\n5. å¸¸ç”¨é…ç½®: &lt;https://github.com/seamile/Weeds/tree/master/rc.d&gt;</code></pre><h2 id=\"é™åˆ¶è®¿é—®é¢‘ç‡\"><a href=\"#é™åˆ¶è®¿é—®é¢‘ç‡\" class=\"headerlink\" title=\"é™åˆ¶è®¿é—®é¢‘ç‡\"></a>é™åˆ¶è®¿é—®é¢‘ç‡</h2><p>é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡</p>\n<pre><code>requests     time.time()\n--------     -----------\nrequest 1 -&gt; 1000.000\nrequest 2 -&gt; 1000.230\nrequest 3 -&gt; 1001.930\nrequest 4 -&gt; 1002.900\nrequest 5 -&gt; (1003.130 - 1001.930) &lt; 1\nrequest 6 -&gt; 1003.140\nrequest 7 -&gt; 1003.140\nrequest 8 -&gt; 1003.140\nrequest 9 -&gt; 1003.140\nrequest 10 -&gt; 1003.140\nrequest 11 -&gt; 1003.140</code></pre><h2 id=\"Tags\"><a href=\"#Tags\" class=\"headerlink\" title=\"Tags\"></a>Tags</h2><ol>\n<li>å¤šå¯¹å¤šå…³ç³»ï¼Œä¸€èˆ¬å»ºç«‹ä¸€ä¸ªå…³ç³»è¡¨</li>\n</ol>\n<p>Article è¡¨<br>    id</p>\n<p>Tag è¡¨<br>    id<br>    name</p>\n<p>å…³ç³»è¡¨<br>    article_id<br>    tag_id</p>\n<h2 id=\"åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\"><a href=\"#åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\" class=\"headerlink\" title=\"åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹\"></a>åˆ›å»ºæˆ–æ›´æ–°è¿‡ç¨‹</h2><p>æ–‡ç«  Article(33)</p>\n<pre><code>1        2         3</code></pre><p>åŸæ¥çš„ â€˜pythonâ€™, â€˜djangoâ€™, â€˜linuxâ€™<br>ä¼ å…¥   â€˜pythonâ€™, â€˜djangoâ€™,          â€˜mongodbâ€™<br>                                    4</p>\n<p>ArticleTags</p>\n<p>33 1<br>33 2</p>\n<p>33 4</p>\n<h2 id=\"æƒé™ç®¡ç†åŠŸèƒ½\"><a href=\"#æƒé™ç®¡ç†åŠŸèƒ½\" class=\"headerlink\" title=\"æƒé™ç®¡ç†åŠŸèƒ½\"></a>æƒé™ç®¡ç†åŠŸèƒ½</h2><p>åšè®¾è®¡æ—¶è¦æœ‰ â€œå‰ç»æ€§â€</p>\n<p>ç»™ç”¨æˆ·æ·»åŠ æƒé™</p>\n<p>user<br>    id</p>\n<p>permission<br>    id</p>\n<p>group<br>    id<br>    pid</p>\n<p>å‚è€ƒé“¾æ¥<br><a href=\"https://www.zhihu.com/question/20313385\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/20313385</a><br><a href=\"http://blog.csdn.net/painsonline/article/details/7183613/\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/painsonline/article/details/7183613/</a></p>\n<h2 id=\"Gunicorn\"><a href=\"#Gunicorn\" class=\"headerlink\" title=\"Gunicorn\"></a>Gunicorn</h2><p>å¤šè¿›ç¨‹ + åç¨‹ (greenlet)</p>\n<p>Gunicorn<br>uWSGI</p>\n<p>å‹åŠ›æµ‹è¯•<br>ab (Apache Bench)<br>webbench<br>autobench</p>\n<p>RPS æ¯ç§’è¯·æ±‚é‡<br>QPS æ¯ç§’æŸ¥è¯¢é‡</p>\n<p>10 Concurrency  1000 Request<br>gunicorn 614 r/s<br>django   510 r/s</p>\n<p>Unix ä¸€åˆ‡çš†æ–‡ä»¶</p>\n<p>æ–‡ä»¶æè¿°ç¬¦</p>\n<h2 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h2><p>æ­£å‘ä»£ç†</p>\n<p>å†…ç½‘ç¯å¢ƒ -&gt; ä»£ç† -&gt; å…¬ç½‘æœºå™¨</p>\n<p>åå‘ä»£ç†</p>\n<p>ç”¨æˆ· -&gt; Nginx -&gt; æœåŠ¡å™¨å†…ç½‘ç¯å¢ƒ</p>\n<h2 id=\"DB-é›†ç¾¤\"><a href=\"#DB-é›†ç¾¤\" class=\"headerlink\" title=\"DB é›†ç¾¤\"></a>DB é›†ç¾¤</h2><p>è¯»å†™åˆ†ç¦»</p>\n<h2 id=\"ä¸»ä»ç»“æ„\"><a href=\"#ä¸»ä»ç»“æ„\" class=\"headerlink\" title=\"ä¸»ä»ç»“æ„\"></a>ä¸»ä»ç»“æ„</h2><pre><code> å†™     è¯»\n |      ^\n V      |\nä¸»æœº -&gt; ä»æœº</code></pre><p>ä¸€ä¸»ä¸¤ä»ç”šè‡³ä¸€ä¸»å¤šä»</p>\n<h2 id=\"åŒä¸»äº’å¤‡\"><a href=\"#åŒä¸»äº’å¤‡\" class=\"headerlink\" title=\"åŒä¸»äº’å¤‡\"></a>åŒä¸»äº’å¤‡</h2><pre><code>ä¸»æœº &lt;-&gt; ä¸»æœº\n\n     ä»</code></pre><h2 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h2><p>åŒ—äº¬    æºç«™<br>ä¸Šæµ·    é•œåƒç«™<br>æ·±åœ³    é•œåƒç«™<br>ä¹Œé²æœ¨é½ é•œåƒç«™<br> .<br> .<br> .<br>ç¾å›½    é•œåƒç«™</p>\n"},{"title":"å­¦ä¹ ç¬”è®°2","date":"2017-05-03T10:16:35.000Z","_content":"\nå­¦ä¹ ç¬”è®°\n========\n\nåŠ æ³•\nint float str list tuple\n__add__\n\nå‡æ³•\nint float set\n__sub__\n\nä¹˜æ³•\nint float str list tuple\n__mul__\n\né™¤æ³•\nint float\n__truediv__\n\n\nå‘ä¸‹æ•´é™¤\n__floordiv__\n\n\nbin(3) -> '0b11'\nhex(3) -> '0x3'\noct(111) -> '0o157'\n\n\nclass User(Model):\n    name = CharField()\n\n\næ§½\n\n","source":"_posts/å­¦ä¹ ç¬”è®°2.md","raw":"---\ntitle: å­¦ä¹ ç¬”è®°2\ndate: 2017-05-03 18:16:35\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\nå­¦ä¹ ç¬”è®°\n========\n\nåŠ æ³•\nint float str list tuple\n__add__\n\nå‡æ³•\nint float set\n__sub__\n\nä¹˜æ³•\nint float str list tuple\n__mul__\n\né™¤æ³•\nint float\n__truediv__\n\n\nå‘ä¸‹æ•´é™¤\n__floordiv__\n\n\nbin(3) -> '0b11'\nhex(3) -> '0x3'\noct(111) -> '0o157'\n\n\nclass User(Model):\n    name = CharField()\n\n\næ§½\n\n","slug":"å­¦ä¹ ç¬”è®°2","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fod000o3kzj4l5w04sl","content":"<h1 id=\"å­¦ä¹ ç¬”è®°\"><a href=\"#å­¦ä¹ ç¬”è®°\" class=\"headerlink\" title=\"å­¦ä¹ ç¬”è®°\"></a>å­¦ä¹ ç¬”è®°</h1><p>åŠ æ³•<br>int float str list tuple<br><strong>add</strong></p>\n<p>å‡æ³•<br>int float set<br><strong>sub</strong></p>\n<p>ä¹˜æ³•<br>int float str list tuple<br><strong>mul</strong></p>\n<p>é™¤æ³•<br>int float<br><strong>truediv</strong></p>\n<p>å‘ä¸‹æ•´é™¤<br><strong>floordiv</strong></p>\n<p>bin(3) -&gt; â€˜0b11â€™<br>hex(3) -&gt; â€˜0x3â€™<br>oct(111) -&gt; â€˜0o157â€™</p>\n<p>class User(Model):<br>    name = CharField()</p>\n<p>æ§½</p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"å­¦ä¹ ç¬”è®°\"><a href=\"#å­¦ä¹ ç¬”è®°\" class=\"headerlink\" title=\"å­¦ä¹ ç¬”è®°\"></a>å­¦ä¹ ç¬”è®°</h1><p>åŠ æ³•<br>int float str list tuple<br><strong>add</strong></p>\n<p>å‡æ³•<br>int float set<br><strong>sub</strong></p>\n<p>ä¹˜æ³•<br>int float str list tuple<br><strong>mul</strong></p>\n<p>é™¤æ³•<br>int float<br><strong>truediv</strong></p>\n<p>å‘ä¸‹æ•´é™¤<br><strong>floordiv</strong></p>\n<p>bin(3) -&gt; â€˜0b11â€™<br>hex(3) -&gt; â€˜0x3â€™<br>oct(111) -&gt; â€˜0o157â€™</p>\n<p>class User(Model):<br>    name = CharField()</p>\n<p>æ§½</p>\n"},{"title":"ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹","urlname":"gv6lvi","date":"2020-05-10T11:31:04.000Z","_content":"\n---\n\n\ntitle: ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\n\ndate: 2019-04-24 16:10:15\n\ntags:\n\n- go\n\ncategories:\n- Golang\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\n# ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\n\n## 1.1 å¤šä»»åŠ¡\n\næ€ä¹ˆæ¥ç†è§£å¤šä»»åŠ¡å‘¢ï¼Ÿå…¶å®å°±æ˜¯æŒ‡æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ ä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹åˆ·å¾®åšï¼Œä¸€è¾¹èŠ QQï¼Œä¸€è¾¹ç”¨ Markdown å†™ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰ 4 ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯ç•Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚\n\n## 1.2 ä»€ä¹ˆæ˜¯å¹¶å‘\n\nGo æ˜¯å¹¶å‘è¯­è¨€ï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¯­è¨€ã€‚åœ¨è®¨è®ºå¦‚ä½•åœ¨ Go ä¸­è¿›è¡Œå¹¶å‘å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Œä»¥åŠå®ƒä¸å¹¶è¡Œæ€§æœ‰ä»€ä¹ˆä¸åŒã€‚(Go is a concurrent language and not a parallel one. )\n\n**å¹¶å‘æ€§ Concurrency æ˜¯åŒæ—¶å¤„ç†è®¸å¤šäº‹æƒ…çš„èƒ½åŠ›ã€‚**\n\nä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººåœ¨æ™¨è·‘ã€‚åœ¨æ™¨è·‘æ—¶ï¼Œä»–çš„é‹å¸¦æ¾äº†ã€‚ç°åœ¨è¿™ä¸ªäººåœæ­¢è·‘æ­¥ï¼Œç³»é‹å¸¦ï¼Œç„¶ååˆå¼€å§‹è·‘æ­¥ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¹¶å‘æ€§ç¤ºä¾‹ã€‚è¿™ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†è·‘æ­¥å’Œç³»é‹å¸¦ï¼Œè¿™æ˜¯ä¸€ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚\n\nä»€ä¹ˆæ˜¯å¹¶è¡Œæ€§ parallelismï¼Œå®ƒä¸å¹¶å‘ concurrency æœ‰ä»€ä¹ˆä¸åŒ?\n\nå¹¶è¡Œå°±æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å¬èµ·æ¥å¯èƒ½ä¸å¹¶å‘ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„ã€‚\n\nè®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ…¢è·‘ä¾‹å­æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªäººæ­£åœ¨æ…¢è·‘ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„æ‰‹æœºå¬éŸ³ä¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäººä¸€è¾¹æ…¢è·‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œé‚£å°±æ˜¯ä»–åŒæ—¶åœ¨åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§(parallelism)ã€‚\n\nå¹¶å‘æ€§å’Œå¹¶è¡Œæ€§â€”â€”ä¸€ç§æŠ€æœ¯ä¸Šçš„è§‚ç‚¹ã€‚\n\nå‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ª web æµè§ˆå™¨ã€‚web æµè§ˆå™¨æœ‰å„ç§ç»„ä»¶ã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯ web é¡µé¢å‘ˆç°åŒºåŸŸå’Œä¸‹è½½æ–‡ä»¶ä» internet ä¸‹è½½çš„ä¸‹è½½å™¨ã€‚å‡è®¾æˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼æ„å»ºäº†æµè§ˆå™¨çš„ä»£ç ï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰§è¡Œã€‚å½“è¿™ä¸ªæµè§ˆå™¨è¿è¡Œåœ¨å•ä¸ªæ ¸å¤„ç†å™¨ä¸­æ—¶ï¼Œå¤„ç†å™¨å°†åœ¨æµè§ˆå™¨çš„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å®ƒå¯èƒ½ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç„¶åå®ƒå¯èƒ½ä¼šåˆ‡æ¢åˆ°å‘ˆç°ç”¨æˆ·è¯·æ±‚çš„ç½‘é¡µçš„ htmlã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘æ€§ã€‚å¹¶å‘è¿›ç¨‹ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œå‘¨æœŸé‡å ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹è½½å’Œå‘ˆç°ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œé‡å ã€‚\n\nå‡è®¾åŒä¸€æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½ç»„ä»¶å’Œ HTML å‘ˆç°ç»„ä»¶å¯èƒ½åŒæ—¶åœ¨ä¸åŒçš„å†…æ ¸ä¸­è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§ã€‚\n\n![](https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=)\n\n![](https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=)\n\nå¹¶è¡Œæ€§ Parallelism ä¸ä¼šæ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºå¹¶è¡Œè¿è¡Œçš„ç»„ä»¶å¯èƒ½éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­ï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆæ—¶ï¼Œåº”è¯¥å°†å…¶ä¼ é€’ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚ä½¿ç”¨å¼¹å‡ºçª—å£ã€‚è¿™ç§é€šä¿¡å‘ç”Ÿåœ¨è´Ÿè´£ä¸‹è½½çš„ç»„ä»¶å’Œè´Ÿè´£å‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ä¹‹é—´ã€‚è¿™ç§é€šä¿¡å¼€é”€åœ¨å¹¶å‘ concurrent ç³»ç»Ÿä¸­å¾ˆä½ã€‚å½“ç»„ä»¶åœ¨å¤šä¸ªå†…æ ¸ä¸­å¹¶è¡Œ concurrent è¿è¡Œæ—¶ï¼Œè¿™ç§é€šä¿¡å¼€é”€å¾ˆé«˜ã€‚å› æ­¤ï¼Œå¹¶è¡Œç¨‹åºå¹¶ä¸æ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´!\n\n![](https://www.qfgolang.com/wp-content/uploads/2019/08/t.png#align=left&display=inline&height=664&margin=%5Bobject%20Object%5D&originHeight=664&originWidth=787&status=done&style=none&width=787#alt=)\n\n## 1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\n\n**è¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ï¼Œåç¨‹(Coroutineï¼Œä¹Ÿå«è½»é‡çº§çº¿ç¨‹)**\n\nè¿›ç¨‹\n\nè¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯ CPU èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚\n\nè¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ **è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚**\n\nçº¿ç¨‹\n\nçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ CPU æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹ IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚\n\nåç¨‹\n\nåç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡å Coroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œ.\n\n**ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶\"è½»é‡çº§\"ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡ 1 ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚**\n\n> åç¨‹ä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚\n\n**Go è¯­è¨€å¯¹äºå¹¶å‘çš„å®ç°æ˜¯é åç¨‹ï¼ŒGoroutine**\n","source":"_posts/ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹.md","raw":"---\ntitle: ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\nurlname: gv6lvi\ndate: 2020-05-10 19:31:04 +0800\ntags: []\ncategories: []\n---\n\n---\n\n\ntitle: ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\n\ndate: 2019-04-24 16:10:15\n\ntags:\n\n- go\n\ncategories:\n- Golang\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\n# ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\n\n## 1.1 å¤šä»»åŠ¡\n\næ€ä¹ˆæ¥ç†è§£å¤šä»»åŠ¡å‘¢ï¼Ÿå…¶å®å°±æ˜¯æŒ‡æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ ä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹åˆ·å¾®åšï¼Œä¸€è¾¹èŠ QQï¼Œä¸€è¾¹ç”¨ Markdown å†™ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰ 4 ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯ç•Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚\n\n## 1.2 ä»€ä¹ˆæ˜¯å¹¶å‘\n\nGo æ˜¯å¹¶å‘è¯­è¨€ï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¯­è¨€ã€‚åœ¨è®¨è®ºå¦‚ä½•åœ¨ Go ä¸­è¿›è¡Œå¹¶å‘å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Œä»¥åŠå®ƒä¸å¹¶è¡Œæ€§æœ‰ä»€ä¹ˆä¸åŒã€‚(Go is a concurrent language and not a parallel one. )\n\n**å¹¶å‘æ€§ Concurrency æ˜¯åŒæ—¶å¤„ç†è®¸å¤šäº‹æƒ…çš„èƒ½åŠ›ã€‚**\n\nä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººåœ¨æ™¨è·‘ã€‚åœ¨æ™¨è·‘æ—¶ï¼Œä»–çš„é‹å¸¦æ¾äº†ã€‚ç°åœ¨è¿™ä¸ªäººåœæ­¢è·‘æ­¥ï¼Œç³»é‹å¸¦ï¼Œç„¶ååˆå¼€å§‹è·‘æ­¥ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¹¶å‘æ€§ç¤ºä¾‹ã€‚è¿™ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†è·‘æ­¥å’Œç³»é‹å¸¦ï¼Œè¿™æ˜¯ä¸€ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚\n\nä»€ä¹ˆæ˜¯å¹¶è¡Œæ€§ parallelismï¼Œå®ƒä¸å¹¶å‘ concurrency æœ‰ä»€ä¹ˆä¸åŒ?\n\nå¹¶è¡Œå°±æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å¬èµ·æ¥å¯èƒ½ä¸å¹¶å‘ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„ã€‚\n\nè®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ…¢è·‘ä¾‹å­æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªäººæ­£åœ¨æ…¢è·‘ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„æ‰‹æœºå¬éŸ³ä¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäººä¸€è¾¹æ…¢è·‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œé‚£å°±æ˜¯ä»–åŒæ—¶åœ¨åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§(parallelism)ã€‚\n\nå¹¶å‘æ€§å’Œå¹¶è¡Œæ€§â€”â€”ä¸€ç§æŠ€æœ¯ä¸Šçš„è§‚ç‚¹ã€‚\n\nå‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ª web æµè§ˆå™¨ã€‚web æµè§ˆå™¨æœ‰å„ç§ç»„ä»¶ã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯ web é¡µé¢å‘ˆç°åŒºåŸŸå’Œä¸‹è½½æ–‡ä»¶ä» internet ä¸‹è½½çš„ä¸‹è½½å™¨ã€‚å‡è®¾æˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼æ„å»ºäº†æµè§ˆå™¨çš„ä»£ç ï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰§è¡Œã€‚å½“è¿™ä¸ªæµè§ˆå™¨è¿è¡Œåœ¨å•ä¸ªæ ¸å¤„ç†å™¨ä¸­æ—¶ï¼Œå¤„ç†å™¨å°†åœ¨æµè§ˆå™¨çš„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å®ƒå¯èƒ½ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç„¶åå®ƒå¯èƒ½ä¼šåˆ‡æ¢åˆ°å‘ˆç°ç”¨æˆ·è¯·æ±‚çš„ç½‘é¡µçš„ htmlã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘æ€§ã€‚å¹¶å‘è¿›ç¨‹ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œå‘¨æœŸé‡å ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹è½½å’Œå‘ˆç°ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œé‡å ã€‚\n\nå‡è®¾åŒä¸€æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½ç»„ä»¶å’Œ HTML å‘ˆç°ç»„ä»¶å¯èƒ½åŒæ—¶åœ¨ä¸åŒçš„å†…æ ¸ä¸­è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§ã€‚\n\n![](https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=)\n\n![](https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=)\n\nå¹¶è¡Œæ€§ Parallelism ä¸ä¼šæ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºå¹¶è¡Œè¿è¡Œçš„ç»„ä»¶å¯èƒ½éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­ï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆæ—¶ï¼Œåº”è¯¥å°†å…¶ä¼ é€’ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚ä½¿ç”¨å¼¹å‡ºçª—å£ã€‚è¿™ç§é€šä¿¡å‘ç”Ÿåœ¨è´Ÿè´£ä¸‹è½½çš„ç»„ä»¶å’Œè´Ÿè´£å‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ä¹‹é—´ã€‚è¿™ç§é€šä¿¡å¼€é”€åœ¨å¹¶å‘ concurrent ç³»ç»Ÿä¸­å¾ˆä½ã€‚å½“ç»„ä»¶åœ¨å¤šä¸ªå†…æ ¸ä¸­å¹¶è¡Œ concurrent è¿è¡Œæ—¶ï¼Œè¿™ç§é€šä¿¡å¼€é”€å¾ˆé«˜ã€‚å› æ­¤ï¼Œå¹¶è¡Œç¨‹åºå¹¶ä¸æ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´!\n\n![](https://www.qfgolang.com/wp-content/uploads/2019/08/t.png#align=left&display=inline&height=664&margin=%5Bobject%20Object%5D&originHeight=664&originWidth=787&status=done&style=none&width=787#alt=)\n\n## 1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\n\n**è¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ï¼Œåç¨‹(Coroutineï¼Œä¹Ÿå«è½»é‡çº§çº¿ç¨‹)**\n\nè¿›ç¨‹\n\nè¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯ CPU èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚\n\nè¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ **è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚**\n\nçº¿ç¨‹\n\nçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ CPU æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹ IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚\n\nåç¨‹\n\nåç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡å Coroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œ.\n\n**ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶\"è½»é‡çº§\"ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡ 1 ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚**\n\n> åç¨‹ä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚\n\n**Go è¯­è¨€å¯¹äºå¹¶å‘çš„å®ç°æ˜¯é åç¨‹ï¼ŒGoroutine**\n","slug":"ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹","published":1,"updated":"2020-05-10T12:00:06.952Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109fof000s3kzjdp8aay78","content":"<hr>\n<p>title: ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹</p>\n<p>date: 2019-04-24 16:10:15</p>\n<p>tags:</p>\n<ul>\n<li>go</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>Golang</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<h1 id=\"ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\"><a href=\"#ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\" class=\"headerlink\" title=\"ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\"></a>ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹</h1><h2 id=\"1-1-å¤šä»»åŠ¡\"><a href=\"#1-1-å¤šä»»åŠ¡\" class=\"headerlink\" title=\"1.1 å¤šä»»åŠ¡\"></a>1.1 å¤šä»»åŠ¡</h2><p>æ€ä¹ˆæ¥ç†è§£å¤šä»»åŠ¡å‘¢ï¼Ÿå…¶å®å°±æ˜¯æŒ‡æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ ä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹åˆ·å¾®åšï¼Œä¸€è¾¹èŠ QQï¼Œä¸€è¾¹ç”¨ Markdown å†™ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰ 4 ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯ç•Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚</p>\n<h2 id=\"1-2-ä»€ä¹ˆæ˜¯å¹¶å‘\"><a href=\"#1-2-ä»€ä¹ˆæ˜¯å¹¶å‘\" class=\"headerlink\" title=\"1.2 ä»€ä¹ˆæ˜¯å¹¶å‘\"></a>1.2 ä»€ä¹ˆæ˜¯å¹¶å‘</h2><p>Go æ˜¯å¹¶å‘è¯­è¨€ï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¯­è¨€ã€‚åœ¨è®¨è®ºå¦‚ä½•åœ¨ Go ä¸­è¿›è¡Œå¹¶å‘å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Œä»¥åŠå®ƒä¸å¹¶è¡Œæ€§æœ‰ä»€ä¹ˆä¸åŒã€‚(Go is a concurrent language and not a parallel one. )</p>\n<p><strong>å¹¶å‘æ€§ Concurrency æ˜¯åŒæ—¶å¤„ç†è®¸å¤šäº‹æƒ…çš„èƒ½åŠ›ã€‚</strong></p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººåœ¨æ™¨è·‘ã€‚åœ¨æ™¨è·‘æ—¶ï¼Œä»–çš„é‹å¸¦æ¾äº†ã€‚ç°åœ¨è¿™ä¸ªäººåœæ­¢è·‘æ­¥ï¼Œç³»é‹å¸¦ï¼Œç„¶ååˆå¼€å§‹è·‘æ­¥ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¹¶å‘æ€§ç¤ºä¾‹ã€‚è¿™ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†è·‘æ­¥å’Œç³»é‹å¸¦ï¼Œè¿™æ˜¯ä¸€ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚</p>\n<p>ä»€ä¹ˆæ˜¯å¹¶è¡Œæ€§ parallelismï¼Œå®ƒä¸å¹¶å‘ concurrency æœ‰ä»€ä¹ˆä¸åŒ?</p>\n<p>å¹¶è¡Œå°±æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å¬èµ·æ¥å¯èƒ½ä¸å¹¶å‘ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„ã€‚</p>\n<p>è®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ…¢è·‘ä¾‹å­æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªäººæ­£åœ¨æ…¢è·‘ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„æ‰‹æœºå¬éŸ³ä¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäººä¸€è¾¹æ…¢è·‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œé‚£å°±æ˜¯ä»–åŒæ—¶åœ¨åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§(parallelism)ã€‚</p>\n<p>å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§â€”â€”ä¸€ç§æŠ€æœ¯ä¸Šçš„è§‚ç‚¹ã€‚</p>\n<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ª web æµè§ˆå™¨ã€‚web æµè§ˆå™¨æœ‰å„ç§ç»„ä»¶ã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯ web é¡µé¢å‘ˆç°åŒºåŸŸå’Œä¸‹è½½æ–‡ä»¶ä» internet ä¸‹è½½çš„ä¸‹è½½å™¨ã€‚å‡è®¾æˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼æ„å»ºäº†æµè§ˆå™¨çš„ä»£ç ï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰§è¡Œã€‚å½“è¿™ä¸ªæµè§ˆå™¨è¿è¡Œåœ¨å•ä¸ªæ ¸å¤„ç†å™¨ä¸­æ—¶ï¼Œå¤„ç†å™¨å°†åœ¨æµè§ˆå™¨çš„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å®ƒå¯èƒ½ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç„¶åå®ƒå¯èƒ½ä¼šåˆ‡æ¢åˆ°å‘ˆç°ç”¨æˆ·è¯·æ±‚çš„ç½‘é¡µçš„ htmlã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘æ€§ã€‚å¹¶å‘è¿›ç¨‹ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œå‘¨æœŸé‡å ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹è½½å’Œå‘ˆç°ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œé‡å ã€‚</p>\n<p>å‡è®¾åŒä¸€æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½ç»„ä»¶å’Œ HTML å‘ˆç°ç»„ä»¶å¯èƒ½åŒæ—¶åœ¨ä¸åŒçš„å†…æ ¸ä¸­è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§ã€‚</p>\n<p><img src=\"https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&amp;display=inline&amp;height=515&amp;margin=%5Bobject%20Object%5D&amp;originHeight=515&amp;originWidth=777&amp;status=done&amp;style=none&amp;width=777#alt=\" alt=\"\"></p>\n<p><img src=\"https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&amp;display=inline&amp;height=515&amp;margin=%5Bobject%20Object%5D&amp;originHeight=515&amp;originWidth=777&amp;status=done&amp;style=none&amp;width=777#alt=\" alt=\"\"></p>\n<p>å¹¶è¡Œæ€§ Parallelism ä¸ä¼šæ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºå¹¶è¡Œè¿è¡Œçš„ç»„ä»¶å¯èƒ½éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­ï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆæ—¶ï¼Œåº”è¯¥å°†å…¶ä¼ é€’ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚ä½¿ç”¨å¼¹å‡ºçª—å£ã€‚è¿™ç§é€šä¿¡å‘ç”Ÿåœ¨è´Ÿè´£ä¸‹è½½çš„ç»„ä»¶å’Œè´Ÿè´£å‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ä¹‹é—´ã€‚è¿™ç§é€šä¿¡å¼€é”€åœ¨å¹¶å‘ concurrent ç³»ç»Ÿä¸­å¾ˆä½ã€‚å½“ç»„ä»¶åœ¨å¤šä¸ªå†…æ ¸ä¸­å¹¶è¡Œ concurrent è¿è¡Œæ—¶ï¼Œè¿™ç§é€šä¿¡å¼€é”€å¾ˆé«˜ã€‚å› æ­¤ï¼Œå¹¶è¡Œç¨‹åºå¹¶ä¸æ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´!</p>\n<p><img src=\"https://www.qfgolang.com/wp-content/uploads/2019/08/t.png#align=left&amp;display=inline&amp;height=664&amp;margin=%5Bobject%20Object%5D&amp;originHeight=664&amp;originWidth=787&amp;status=done&amp;style=none&amp;width=787#alt=\" alt=\"\"></p>\n<h2 id=\"1-3-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\"><a href=\"#1-3-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\" class=\"headerlink\" title=\"1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\"></a>1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</h2><p><strong>è¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ï¼Œåç¨‹(Coroutineï¼Œä¹Ÿå«è½»é‡çº§çº¿ç¨‹)</strong></p>\n<p>è¿›ç¨‹</p>\n<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯ CPU èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚</p>\n<p>è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ <strong>è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚</strong></p>\n<p>çº¿ç¨‹</p>\n<p>çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ CPU æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹ IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚</p>\n<p>åç¨‹</p>\n<p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡å Coroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œ.</p>\n<p><strong>ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶â€è½»é‡çº§â€ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡ 1 ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚</strong></p>\n<blockquote>\n<p>åç¨‹ä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚</p>\n</blockquote>\n<p><strong>Go è¯­è¨€å¯¹äºå¹¶å‘çš„å®ç°æ˜¯é åç¨‹ï¼ŒGoroutine</strong></p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<hr>\n<p>title: ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹</p>\n<p>date: 2019-04-24 16:10:15</p>\n<p>tags:</p>\n<ul>\n<li>go</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>Golang</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<h1 id=\"ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\"><a href=\"#ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\" class=\"headerlink\" title=\"ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹\"></a>ç†è§£è¿›ç¨‹çº¿ç¨‹åç¨‹</h1><h2 id=\"1-1-å¤šä»»åŠ¡\"><a href=\"#1-1-å¤šä»»åŠ¡\" class=\"headerlink\" title=\"1.1 å¤šä»»åŠ¡\"></a>1.1 å¤šä»»åŠ¡</h2><p>æ€ä¹ˆæ¥ç†è§£å¤šä»»åŠ¡å‘¢ï¼Ÿå…¶å®å°±æ˜¯æŒ‡æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ ä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹åˆ·å¾®åšï¼Œä¸€è¾¹èŠ QQï¼Œä¸€è¾¹ç”¨ Markdown å†™ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰ 4 ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯ç•Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚</p>\n<h2 id=\"1-2-ä»€ä¹ˆæ˜¯å¹¶å‘\"><a href=\"#1-2-ä»€ä¹ˆæ˜¯å¹¶å‘\" class=\"headerlink\" title=\"1.2 ä»€ä¹ˆæ˜¯å¹¶å‘\"></a>1.2 ä»€ä¹ˆæ˜¯å¹¶å‘</h2><p>Go æ˜¯å¹¶å‘è¯­è¨€ï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¯­è¨€ã€‚åœ¨è®¨è®ºå¦‚ä½•åœ¨ Go ä¸­è¿›è¡Œå¹¶å‘å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Œä»¥åŠå®ƒä¸å¹¶è¡Œæ€§æœ‰ä»€ä¹ˆä¸åŒã€‚(Go is a concurrent language and not a parallel one. )</p>\n<p><strong>å¹¶å‘æ€§ Concurrency æ˜¯åŒæ—¶å¤„ç†è®¸å¤šäº‹æƒ…çš„èƒ½åŠ›ã€‚</strong></p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººåœ¨æ™¨è·‘ã€‚åœ¨æ™¨è·‘æ—¶ï¼Œä»–çš„é‹å¸¦æ¾äº†ã€‚ç°åœ¨è¿™ä¸ªäººåœæ­¢è·‘æ­¥ï¼Œç³»é‹å¸¦ï¼Œç„¶ååˆå¼€å§‹è·‘æ­¥ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¹¶å‘æ€§ç¤ºä¾‹ã€‚è¿™ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†è·‘æ­¥å’Œç³»é‹å¸¦ï¼Œè¿™æ˜¯ä¸€ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚</p>\n<p>ä»€ä¹ˆæ˜¯å¹¶è¡Œæ€§ parallelismï¼Œå®ƒä¸å¹¶å‘ concurrency æœ‰ä»€ä¹ˆä¸åŒ?</p>\n<p>å¹¶è¡Œå°±æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å¬èµ·æ¥å¯èƒ½ä¸å¹¶å‘ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„ã€‚</p>\n<p>è®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ…¢è·‘ä¾‹å­æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªäººæ­£åœ¨æ…¢è·‘ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„æ‰‹æœºå¬éŸ³ä¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäººä¸€è¾¹æ…¢è·‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œé‚£å°±æ˜¯ä»–åŒæ—¶åœ¨åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§(parallelism)ã€‚</p>\n<p>å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§â€”â€”ä¸€ç§æŠ€æœ¯ä¸Šçš„è§‚ç‚¹ã€‚</p>\n<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ª web æµè§ˆå™¨ã€‚web æµè§ˆå™¨æœ‰å„ç§ç»„ä»¶ã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯ web é¡µé¢å‘ˆç°åŒºåŸŸå’Œä¸‹è½½æ–‡ä»¶ä» internet ä¸‹è½½çš„ä¸‹è½½å™¨ã€‚å‡è®¾æˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼æ„å»ºäº†æµè§ˆå™¨çš„ä»£ç ï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰§è¡Œã€‚å½“è¿™ä¸ªæµè§ˆå™¨è¿è¡Œåœ¨å•ä¸ªæ ¸å¤„ç†å™¨ä¸­æ—¶ï¼Œå¤„ç†å™¨å°†åœ¨æµè§ˆå™¨çš„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å®ƒå¯èƒ½ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç„¶åå®ƒå¯èƒ½ä¼šåˆ‡æ¢åˆ°å‘ˆç°ç”¨æˆ·è¯·æ±‚çš„ç½‘é¡µçš„ htmlã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘æ€§ã€‚å¹¶å‘è¿›ç¨‹ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œå‘¨æœŸé‡å ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹è½½å’Œå‘ˆç°ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œé‡å ã€‚</p>\n<p>å‡è®¾åŒä¸€æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½ç»„ä»¶å’Œ HTML å‘ˆç°ç»„ä»¶å¯èƒ½åŒæ—¶åœ¨ä¸åŒçš„å†…æ ¸ä¸­è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§ã€‚</p>\n<p><img src=\"https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=\" alt=\"\"></p>\n<p><img src=\"https://www.qfgolang.com/wp-content/uploads/2019/08/WX20190730-100944.png#align=left&display=inline&height=515&margin=%5Bobject%20Object%5D&originHeight=515&originWidth=777&status=done&style=none&width=777#alt=\" alt=\"\"></p>\n<p>å¹¶è¡Œæ€§ Parallelism ä¸ä¼šæ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºå¹¶è¡Œè¿è¡Œçš„ç»„ä»¶å¯èƒ½éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­ï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆæ—¶ï¼Œåº”è¯¥å°†å…¶ä¼ é€’ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚ä½¿ç”¨å¼¹å‡ºçª—å£ã€‚è¿™ç§é€šä¿¡å‘ç”Ÿåœ¨è´Ÿè´£ä¸‹è½½çš„ç»„ä»¶å’Œè´Ÿè´£å‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ä¹‹é—´ã€‚è¿™ç§é€šä¿¡å¼€é”€åœ¨å¹¶å‘ concurrent ç³»ç»Ÿä¸­å¾ˆä½ã€‚å½“ç»„ä»¶åœ¨å¤šä¸ªå†…æ ¸ä¸­å¹¶è¡Œ concurrent è¿è¡Œæ—¶ï¼Œè¿™ç§é€šä¿¡å¼€é”€å¾ˆé«˜ã€‚å› æ­¤ï¼Œå¹¶è¡Œç¨‹åºå¹¶ä¸æ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´!</p>\n<p><img src=\"https://www.qfgolang.com/wp-content/uploads/2019/08/t.png#align=left&display=inline&height=664&margin=%5Bobject%20Object%5D&originHeight=664&originWidth=787&status=done&style=none&width=787#alt=\" alt=\"\"></p>\n<h2 id=\"1-3-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\"><a href=\"#1-3-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\" class=\"headerlink\" title=\"1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\"></a>1.3 è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</h2><p><strong>è¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ï¼Œåç¨‹(Coroutineï¼Œä¹Ÿå«è½»é‡çº§çº¿ç¨‹)</strong></p>\n<p>è¿›ç¨‹</p>\n<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯ CPU èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚</p>\n<p>è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ <strong>è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚</strong></p>\n<p>çº¿ç¨‹</p>\n<p>çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ CPU æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹ IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚</p>\n<p>åç¨‹</p>\n<p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡å Coroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œ.</p>\n<p><strong>ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶â€è½»é‡çº§â€ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡ 1 ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚</strong></p>\n<blockquote>\n<p>åç¨‹ä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚</p>\n</blockquote>\n<p><strong>Go è¯­è¨€å¯¹äºå¹¶å‘çš„å®ç°æ˜¯é åç¨‹ï¼ŒGoroutine</strong></p>\n"},{"title":"djangoè¿›é˜¶","date":"2017-05-03T11:19:39.000Z","_content":"\n# djangoè¿›é˜¶\n\n1. **HTTP Objects**\n\n    **HttpRequest** \n\n   â€‹\t**è‡ªèº«å±æ€§** \n\n   â€‹\t\t`request.path -> /foo/bar/ `\n\n   â€‹\t\t`request.method `\n\n   â€‹\t\t`request.GET `\n\n   â€‹\t\t`request.POST `\n\n   â€‹\t\t`request.COOKIES `\n\n   â€‹\t\t`request.FILES -> {name1: file1, name2: file2, ...} `\n\n   â€‹\t\t`request.META['REMOTE_ADDR'] `\n\n   â€‹\t\t`request.META['HTTP_USER_AGENT'] \t`\n\n   â€‹\t**ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§** \n\n   â€‹\t\trequest.session \n\n   â€‹\t\trequest.user \n\n   â€‹\t**æ–¹æ³•** \n\n   â€‹\t\trequest.get_full_path() -> /foo/bar/?a=123 \n\n   â€‹\t\trequest.get_signed_cookie(key) \n\n   **HttpResponse** \n\n   â€‹\t**å±æ€§** \n\n   â€‹\t\tresponse.status_code \n\n   â€‹\t\tresponse.content \n\n   â€‹\t**æ–¹æ³•** \n\n   â€‹\t\tresponse.set_cookie(key, value, max_age=None) \n\n   **JsonHttpResponse** \n\n   \t`response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`\n\n2. django ä¸­é—´ä»¶\n\n   æœ€ç®€å•çš„ä¸­é—´ä»¶:aopé¢å‘åˆ‡ç‰‡ç¼–ç¨‹\n\n   è‡ªå·±å†™ä¸€ä¸ªè·å–æ¥å£æ•°æ®çš„ä¸­é—´ä»¶\n\n   ```python\n   class Result(MiddlewareMixin):\n       def process_view(self,request,view_func,*args,**kwargs):\n           #æ‰§è¡Œviewå‡½æ•°.è·å–rc\n           try:\n               print(args,kwargs)\n               view_result =view_func(request)\n               rc = 0\n           except Exception as e:\n               view_result = None\n               rc = str(e)\n               \n           #è·å– msg\n           uid = request.GET.get('uid')\n           msg = cache.get(f'msg-{uid}') #python3æ‰æœ‰fæ‹¼æ¥\n           \n           data ={\n               'result': view_result,\n               'rc': rc,\n               'msg':msg\n           }\n           return JsonResponse(data)\n   ```\n\n   æœ€ç®€å•çš„è£…é¥°å™¨â€”è£…é¥°å™¨å½¢å¼\n\n```python\ndef simple_middeware(get_response):\n    #do_something  for __init__()\n    \n    def middleware(request):\n        # do something before_views()\n\t\tt=time.time()\n        \n        response = get_response(request) #view å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ\n        \n        print(time.time()-t)\n        # do something after_views()\n        return response\n    return middleware\n```\n\nè£…é¥°å™¨çš„è¿è¡Œæ–¹å¼\n\n```python\ndef timer(func):\n    def wrap(*args,**kwargs):\n        t= time.time()\n        res= func(*args,**kwargs)\n        print(time.time()-t)\n        return res\n    return wrap\n\n@timer\ndef foo(n)\n\ttime.sleep(n)\n#è¢«è£…é¥°å,è¿™æ—¶å€™ foo.__name__ å·²ç»å˜æˆäº†wrapè€Œä¸æ˜¯fooäº†\n# ç›¸å½“äºtimer(foo)(0.5)->wrap(0.5)\n```\n\nä¸­é—´ä»¶ç±»\n\n```python\nclass MyMiddleware:\n    def __init__(self,view_func):\n        self.view_func = view_func  #åŠ¨æ€æ·»åŠ å±æ€§\n    def __call__(self,request):\n        response = self.view_func(request)\n        return response\n    def process_view(self,request,view_func,view_args,view_kwargs):\n        pass\n-----------------\ndef foo():\n    pass\n# æ‰§è¡Œfoo()å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯foo.__call__()\n------------------\nclass A:\n    pass\na = A()\n#a()æ²¡æœ‰callæ–¹æ³•,ä½†æ˜¯Aæ˜¯æœ‰çš„A.__call__()->Açš„å®ä¾‹\n-------------------\nclass A:\n    def __call__(self,n):\n        print(n)\na = A()\na(1)\n1\n#ç°åœ¨a()æ˜¯å¯ä»¥è°ƒç”¨çš„,å¯ä»¥ç”¨callable(a)æŸ¥çœ‹\n```\n\n### django1.10ä¹‹å‰çš„ä¸­é—´ä»¶\n\nç»§æ‰¿è‡ªMiddlewareMixin\n\n```python\nfrom django.utils.deprecation import MiddlewareMixin\nclass MyMiddleware(MiddlewareMixin): \n    def process_request(self, request):\n\t\tpass\n\tdef process_view(self, request, view_func, view_args, view_kwargs):\n        pass\n\tdef process_response(self, request, response):\n        return response\n```\n\næ‰§ï¨ˆé¡ºåº process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§ï¨ˆ \n\nprocess_response ä»ä¸‹å¾€ä¸Šæ‰§ï¨ˆ \n\n[å†…ç½®ä¸­é—´ä»¶çš„æ’åº](https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering)\n\n6. Cache\n\n    é»˜è®¤ç¼“å­˜: from django.core.cache import cache \n\n   BACKEND: DatabaseCache / MemcachedCache / LocMemCache \n\n   LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ï¤…é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºï¦œè¡¨ \n\n   ä½¿ç”¨ Redis åšç¼“å­˜ \n\n   ```Python\n   CACHES = { \n   \t\"default\": { \n   \t\"BACKEND\": \"django_redis.cache.RedisCache\", \n   \t\"LOCATION\": \"redis://127.0.0.1:6379/1\", \n   \t\"OPTIONS\": { \n   \t\t\"CLIENT_CLASS\": \"django_redis.client.DefaultClient\", \n   \t\t\"PICKLE_VERSION\": â€‘1, \n   \t\t} \n   \t} \n   }\n   ```\n\n   **åŸºæœ¬æ–¹æ³•** \n\n   `cache.set(key, value, timeout=None)` \n\n   `cache.get(key, default=None)` \n\n```\n   cache.delete(key) \n\n   cache.incr('num') \n\n   cache.decr('num') \n\n   cache.get_or_set(key, default, timeout=None) \n```\n\n   `cache.set_many({'a': 1, 'b': 2, 'c': 3})` \n\n   `cache.get_many(['a', 'b', 'c'])` \n\n   **å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶**: `django.middleware.cache.UpdateCacheMiddleware `\n\n   â€‹\tå‰ç½®ä¸­é—´ä»¶ \n\n   \tç¼“å­˜æœŸé™: `CACHE_MIDDLEWARE_SECONDS `\n\n   **é¡µé¢ç¼“å­˜è£…é¥°ï¨¸**: `from django.views.decorators.cache import cache_page `\n\n   **å±æ€§ç¼“å­˜è£…é¥°ï¨¸**: `from django.utils.functional import cached_property `\n\n   **pickle** \n\n   â€‹\tdumps \n\n   â€‹\tloads\n\n7. **Cookie å’Œ Session**\n\n    **Cookie:** response.set_cookie(key, value, max_age=None) \n\n   **Session é…ç½®** \n\n   â€‹\ta. å¼€å¯ Session ä¸­é—´ä»¶: django.contrib.sessions.middleware.SessionMiddleware \n\n   â€‹\tb. é…ç½®ç¼“å­˜ \n\n   â€‹\tc. é…ç½® Session å¼•æ“: SESSION_ENGINE = \"django.contrib.sessions.backends.cache\" \n\n   **å¯é€‰é¡¹** \n\n   â€‹\tSESSION_COOKIE_AGE ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨ \n\n   â€‹\tSESSION_COOKIE_NAME Session å, é»˜è®¤ 'sessionid' \n\n   \tSESSION_EXPIRE_AT_BROWSER_CLOSE æµè§ˆï¨¸å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ \t\t\t\t\t\t\t\t\t\t\t\t\t`SESSION_SAVE_EVERY_REQUEST æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session `\n\n   \n\n   **ç”¨æ³•** \n\n   request.session.session_key æŸ¥çœ‹ session_id \n\n   request.session.modified session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹ \n\n   request.session['uid'] = 1234 å½“ session å‘ç”Ÿï¤æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜ \n\n   request.session.get('uid') å–å€¼ \n\n   request.session.save() æ‰‹åŠ¨ä¿å­˜\n\n---\n\n### æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\n\n```python\ndef login_require(view_func):\n    def check_login(request):\n        if request.session.get('name'):\n            return view_func(request)\n        else:\n            return redirect('/login/')\n    return check_login\n\n```\n\n```Python\n#loginçš„viewå‡½æ•°\ndef login(request):\n    username = request.POST.get('username')\n    password = request.POST.get('password')\n    if username==USER and password ==PASSWORD:\n        user = User(username = USER)\n        request.session['uid']=user.id\n        return render()\n    else:\n        return redirect('/login/')\n```\n\n```Python\n#æ‰‹å†™ä¸€ä¸ªä¸­é—´ä»¶éªŒè¯ç”¨æˆ·å·²ç»ç™»å½•,æ¯”å¦‚ç”¨æˆ·ç™»å½•åæ‰èƒ½ç¼–è¾‘è¯„è®ºç­‰(å…¨å±€çš„)\nclass Auth(MiddlewareMixin):\n    def process_request(self,request):\n        uid = request.session.get('uid')\n        if uid is not None:\n            user = User.objects.get(id = uid)\n            request.user = user   #åŠ¨æ€æ·»åŠ ä¸€ä¸ªuserå±æ€§ setattr(request,'user',user)\n        else:\n            if request.path not in ['/user/login/','/user/register/']\n            return redirect('/login/')\n            \n```\n\n8. **Logging** \n\n   **æ—¥å¿—çº§åˆ«** \n\n   â€‹\tDEBUG \n\n   â€‹\tINFO \n\n   â€‹\tWARN \n\n   â€‹\tERROR \n\n   â€‹\tFATAL \n\n   **ä½¿ç”¨** \n\n   logger.debug('xxxxxxxx') \n\n   logger.info('xxxxxxxx') \n\n   logger.warning('xxxxxxxx') \n\n   logger.error('xxxxxxxx') \n\n   logger.fatal('xxxxxxxx') \n\n   **æŸ¥æ‰¾ã€åˆ†æ** \n\n   tail \n\n   head \n\n   less \n\n   awk \n\n   grep \n\n   **é…ç½®** \n\n   ```Python\n   LOGGING = { \n   \t'version': 1, \n   \t'disable_existing_loggers': True, \n   \t'formatters': { \n   \t\t'simple': { 'format': '%(asctime)s %(module)s.%(funcName)s: %(message)s', \n   \t\t'datefmt': '%Yâ€‘%mâ€‘%d %H:%M:%S', }, \n   \t\t'verbose': { \n   \t\t\t'format': '%(asctime)s %(levelname)s [%(process)dâ€‘%(threadName)s] '\n   \t\t\t\t\t  '%(module)s.%(funcName)s line %(lineno)d: %(message)s', \n   \t\t\t'datefmt': '%Yâ€‘%mâ€‘%d %H:%M:%S', \n   \t\t\t} \n   \t\t\t}, \n   \t'handlers': { \n   \t\t'inf': { \n   \t\t\t'class': 'logging.handlers.TimedRotatingFileHandler', \n   \t\t\t'filename': '/data/web/gnt.out', \n   \t\t\t'when': 'W0', # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿— \n   \t\t\t'backupCount': 5, \n   \t\t\t'formatter': 'simple', \n   \t\t\t'level': 'DEBUG' if DEBUG else 'INFO', \n   \t\t\t}, \n   \t\t\t'err': { \n   \t\t\t\t'class': 'logging.handlers.TimedRotatingFileHandler', \n   \t\t\t\t'filename': '/data/web/gnt.err', \n   \t\t\t\t'when': 'D', # æ¯å¤©åˆ‡å‰²æ—¥å¿— 'backupCount': 5, \n   \t\t\t\t'formatter': 'verbose', \n   \t\t\t\t'level': 'WARNING', \n   \t\t\t\t} \n   \t\t\t}, \n   \t\t'loggers': { \n   \t\t\t'inf': { \n   \t\t\t\t'handlers': ['inf'], \n   \t\t\t\t'level': 'DEBUG', \n   \t\t\t\t'propagate': True, \n   \t\t\t\t}, \n   \t\t\t'err': { \n   \t\t\t\t'handlers': ['err'], \n   \t\t\t\t'level': 'DEBUG', \n   \t\t\t\t'propagate': True, \n   \t\t\t\t} \n   \t\t\t} \n   \t\t}\n   ```\n\n   ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„è£…é¥°å™¨\n\n   ---\n\n   ```python\n   def statistic(view_func):\n       def wrap(request.*args,**kwargs):\n           ip = request.META['REMOTE_ADDR']\n           aid = int(request.GET.get('aid',0))\n           logger.info(f'{ip}  {aid}')\n           return view_func(request,*args,**kwargs)\n       return wrap\n   ```\n\n   \n\n9. **Django çš„æ€§èƒ½**\n\n    **Django è‡ªèº«ä¼˜åŒ–** \n\n   â€‹\t`å……åˆ†ä¹‹ç”¨ç¼“å­˜ `\n\n   â€‹\t`æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£ï¨¸ `\n\n   â€‹\t`å°½ï¥¾ä½¿ç”¨ defer() å’Œ only() æŸ¥æ‰¾ `\n\n   â€‹\t`å°½ï¥¾ä½¿ç”¨ count() å’Œ exists() `\n\n   â€‹\tæ¨¡æ¿ä¸­`{`% block %`}`æ€§èƒ½ä¼˜äº` {`% include %`}`\n\n   â€‹\t`å¼€å¯æ¨¡æ¿ç¼“å­˜ `\n\n   â€‹\t`ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ `\n\n   **å…¶ä»–ä¼˜åŒ–** \n\n   â€‹\t**I/O å¯†é›†å‹: å¼‚æ­¥åŒ–** \n\n   â€‹\t\tè¯·æ±‚å¼‚æ­¥åŒ– \n\n   â€‹\t\tæ•°æ®æ“ä½œå¼‚æ­¥åŒ– \n\n   â€‹\t\tgevent, asyncio, aiopg, aiohttp, tornado \n\n   â€‹\t**è®¡ç®—å¯†é›†å‹** \n\n   â€‹\t\tè€—æ—¶æ“ä½œç”¨ Celery ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ \n\n   â€‹\t**åˆ†åº“åˆ†è¡¨** \n\n   â€‹\t\tå–ä½™ã€å“ˆå¸Œ \n\n   â€‹\t\tèŒƒå›´ \n\n   â€‹\t\tä¸€è‡´æ€§å“ˆå¸Œ \n\n   â€‹\t**ç´¢å¼•ä¼˜åŒ–** \n\n   â€‹\tæ…¢æŸ¥è¯¢ä¼˜åŒ– (ç›¸å…³å·¥å…·: DjangoDebugToolbar) \n\n   â€‹\tGunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼ï§ç”¨å¤šæ ¸ \n\n   â€‹\tPyPy \n\n   â€‹\tCython\n\n---\n\n### å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\n\n```Python\nfrom functools import update_wrapper\ndef async_call(func):\n    '''å¼‚æ­¥è°ƒç”¨ä»»åŠ¡'''\n    func.trace_err =trace_err\n    func.trace_info = '%s.%s'%(trace_code(2),func.func_name)\n    def wrapper(*args,**kwargs)\n    \tglobal main_thread\n        try:\n            main_thread.MMQ.submit(func,*args,**kwargs)\n        except AttributeError:\n            return func(*args,**kwargs)\n    return update_wrapper(wrapper,func)\n```\n\n\n\n### ç”Ÿæˆå™¨\n\n```python\n#ç”Ÿæˆå™¨  ä½¿ç”¨nextè°ƒç”¨\ndef foo():\n    for i in range(10):\n        yield i \nx = foo()\nnext(x)\n#æƒ°æ€§æ±‚å€¼,å å†…å­˜å°  ----python2ä¸­çš„xrangeç±»ä¼¼\n```\n\n### è¿­ä»£å™¨\n\n```python\nclass Iter:\n    def __iter__(self):\n        return self\n    def __next__(self):\n        return 1\no =Iter()\n\nclass Iter:\n    def __init__(self):\n        self.v = 0\n    def __iter__(self):\n        return self\n    def __next__(self):\n        self.v +=1\n        return self.v   #è¿­ä»£çš„è§„åˆ™å†™åœ¨nextæ–¹æ³•\n```\n\n","source":"_posts/djangoè¿›é˜¶-ä¸­é—´ä»¶.md","raw":"---\ntitle: djangoè¿›é˜¶\ndate: 2017-05-03 19:19:39\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\n# djangoè¿›é˜¶\n\n1. **HTTP Objects**\n\n    **HttpRequest** \n\n   â€‹\t**è‡ªèº«å±æ€§** \n\n   â€‹\t\t`request.path -> /foo/bar/ `\n\n   â€‹\t\t`request.method `\n\n   â€‹\t\t`request.GET `\n\n   â€‹\t\t`request.POST `\n\n   â€‹\t\t`request.COOKIES `\n\n   â€‹\t\t`request.FILES -> {name1: file1, name2: file2, ...} `\n\n   â€‹\t\t`request.META['REMOTE_ADDR'] `\n\n   â€‹\t\t`request.META['HTTP_USER_AGENT'] \t`\n\n   â€‹\t**ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§** \n\n   â€‹\t\trequest.session \n\n   â€‹\t\trequest.user \n\n   â€‹\t**æ–¹æ³•** \n\n   â€‹\t\trequest.get_full_path() -> /foo/bar/?a=123 \n\n   â€‹\t\trequest.get_signed_cookie(key) \n\n   **HttpResponse** \n\n   â€‹\t**å±æ€§** \n\n   â€‹\t\tresponse.status_code \n\n   â€‹\t\tresponse.content \n\n   â€‹\t**æ–¹æ³•** \n\n   â€‹\t\tresponse.set_cookie(key, value, max_age=None) \n\n   **JsonHttpResponse** \n\n   \t`response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`\n\n2. django ä¸­é—´ä»¶\n\n   æœ€ç®€å•çš„ä¸­é—´ä»¶:aopé¢å‘åˆ‡ç‰‡ç¼–ç¨‹\n\n   è‡ªå·±å†™ä¸€ä¸ªè·å–æ¥å£æ•°æ®çš„ä¸­é—´ä»¶\n\n   ```python\n   class Result(MiddlewareMixin):\n       def process_view(self,request,view_func,*args,**kwargs):\n           #æ‰§è¡Œviewå‡½æ•°.è·å–rc\n           try:\n               print(args,kwargs)\n               view_result =view_func(request)\n               rc = 0\n           except Exception as e:\n               view_result = None\n               rc = str(e)\n               \n           #è·å– msg\n           uid = request.GET.get('uid')\n           msg = cache.get(f'msg-{uid}') #python3æ‰æœ‰fæ‹¼æ¥\n           \n           data ={\n               'result': view_result,\n               'rc': rc,\n               'msg':msg\n           }\n           return JsonResponse(data)\n   ```\n\n   æœ€ç®€å•çš„è£…é¥°å™¨â€”è£…é¥°å™¨å½¢å¼\n\n```python\ndef simple_middeware(get_response):\n    #do_something  for __init__()\n    \n    def middleware(request):\n        # do something before_views()\n\t\tt=time.time()\n        \n        response = get_response(request) #view å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ\n        \n        print(time.time()-t)\n        # do something after_views()\n        return response\n    return middleware\n```\n\nè£…é¥°å™¨çš„è¿è¡Œæ–¹å¼\n\n```python\ndef timer(func):\n    def wrap(*args,**kwargs):\n        t= time.time()\n        res= func(*args,**kwargs)\n        print(time.time()-t)\n        return res\n    return wrap\n\n@timer\ndef foo(n)\n\ttime.sleep(n)\n#è¢«è£…é¥°å,è¿™æ—¶å€™ foo.__name__ å·²ç»å˜æˆäº†wrapè€Œä¸æ˜¯fooäº†\n# ç›¸å½“äºtimer(foo)(0.5)->wrap(0.5)\n```\n\nä¸­é—´ä»¶ç±»\n\n```python\nclass MyMiddleware:\n    def __init__(self,view_func):\n        self.view_func = view_func  #åŠ¨æ€æ·»åŠ å±æ€§\n    def __call__(self,request):\n        response = self.view_func(request)\n        return response\n    def process_view(self,request,view_func,view_args,view_kwargs):\n        pass\n-----------------\ndef foo():\n    pass\n# æ‰§è¡Œfoo()å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯foo.__call__()\n------------------\nclass A:\n    pass\na = A()\n#a()æ²¡æœ‰callæ–¹æ³•,ä½†æ˜¯Aæ˜¯æœ‰çš„A.__call__()->Açš„å®ä¾‹\n-------------------\nclass A:\n    def __call__(self,n):\n        print(n)\na = A()\na(1)\n1\n#ç°åœ¨a()æ˜¯å¯ä»¥è°ƒç”¨çš„,å¯ä»¥ç”¨callable(a)æŸ¥çœ‹\n```\n\n### django1.10ä¹‹å‰çš„ä¸­é—´ä»¶\n\nç»§æ‰¿è‡ªMiddlewareMixin\n\n```python\nfrom django.utils.deprecation import MiddlewareMixin\nclass MyMiddleware(MiddlewareMixin): \n    def process_request(self, request):\n\t\tpass\n\tdef process_view(self, request, view_func, view_args, view_kwargs):\n        pass\n\tdef process_response(self, request, response):\n        return response\n```\n\næ‰§ï¨ˆé¡ºåº process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§ï¨ˆ \n\nprocess_response ä»ä¸‹å¾€ä¸Šæ‰§ï¨ˆ \n\n[å†…ç½®ä¸­é—´ä»¶çš„æ’åº](https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering)\n\n6. Cache\n\n    é»˜è®¤ç¼“å­˜: from django.core.cache import cache \n\n   BACKEND: DatabaseCache / MemcachedCache / LocMemCache \n\n   LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ï¤…é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºï¦œè¡¨ \n\n   ä½¿ç”¨ Redis åšç¼“å­˜ \n\n   ```Python\n   CACHES = { \n   \t\"default\": { \n   \t\"BACKEND\": \"django_redis.cache.RedisCache\", \n   \t\"LOCATION\": \"redis://127.0.0.1:6379/1\", \n   \t\"OPTIONS\": { \n   \t\t\"CLIENT_CLASS\": \"django_redis.client.DefaultClient\", \n   \t\t\"PICKLE_VERSION\": â€‘1, \n   \t\t} \n   \t} \n   }\n   ```\n\n   **åŸºæœ¬æ–¹æ³•** \n\n   `cache.set(key, value, timeout=None)` \n\n   `cache.get(key, default=None)` \n\n```\n   cache.delete(key) \n\n   cache.incr('num') \n\n   cache.decr('num') \n\n   cache.get_or_set(key, default, timeout=None) \n```\n\n   `cache.set_many({'a': 1, 'b': 2, 'c': 3})` \n\n   `cache.get_many(['a', 'b', 'c'])` \n\n   **å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶**: `django.middleware.cache.UpdateCacheMiddleware `\n\n   â€‹\tå‰ç½®ä¸­é—´ä»¶ \n\n   \tç¼“å­˜æœŸé™: `CACHE_MIDDLEWARE_SECONDS `\n\n   **é¡µé¢ç¼“å­˜è£…é¥°ï¨¸**: `from django.views.decorators.cache import cache_page `\n\n   **å±æ€§ç¼“å­˜è£…é¥°ï¨¸**: `from django.utils.functional import cached_property `\n\n   **pickle** \n\n   â€‹\tdumps \n\n   â€‹\tloads\n\n7. **Cookie å’Œ Session**\n\n    **Cookie:** response.set_cookie(key, value, max_age=None) \n\n   **Session é…ç½®** \n\n   â€‹\ta. å¼€å¯ Session ä¸­é—´ä»¶: django.contrib.sessions.middleware.SessionMiddleware \n\n   â€‹\tb. é…ç½®ç¼“å­˜ \n\n   â€‹\tc. é…ç½® Session å¼•æ“: SESSION_ENGINE = \"django.contrib.sessions.backends.cache\" \n\n   **å¯é€‰é¡¹** \n\n   â€‹\tSESSION_COOKIE_AGE ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨ \n\n   â€‹\tSESSION_COOKIE_NAME Session å, é»˜è®¤ 'sessionid' \n\n   \tSESSION_EXPIRE_AT_BROWSER_CLOSE æµè§ˆï¨¸å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ \t\t\t\t\t\t\t\t\t\t\t\t\t`SESSION_SAVE_EVERY_REQUEST æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session `\n\n   \n\n   **ç”¨æ³•** \n\n   request.session.session_key æŸ¥çœ‹ session_id \n\n   request.session.modified session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹ \n\n   request.session['uid'] = 1234 å½“ session å‘ç”Ÿï¤æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜ \n\n   request.session.get('uid') å–å€¼ \n\n   request.session.save() æ‰‹åŠ¨ä¿å­˜\n\n---\n\n### æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\n\n```python\ndef login_require(view_func):\n    def check_login(request):\n        if request.session.get('name'):\n            return view_func(request)\n        else:\n            return redirect('/login/')\n    return check_login\n\n```\n\n```Python\n#loginçš„viewå‡½æ•°\ndef login(request):\n    username = request.POST.get('username')\n    password = request.POST.get('password')\n    if username==USER and password ==PASSWORD:\n        user = User(username = USER)\n        request.session['uid']=user.id\n        return render()\n    else:\n        return redirect('/login/')\n```\n\n```Python\n#æ‰‹å†™ä¸€ä¸ªä¸­é—´ä»¶éªŒè¯ç”¨æˆ·å·²ç»ç™»å½•,æ¯”å¦‚ç”¨æˆ·ç™»å½•åæ‰èƒ½ç¼–è¾‘è¯„è®ºç­‰(å…¨å±€çš„)\nclass Auth(MiddlewareMixin):\n    def process_request(self,request):\n        uid = request.session.get('uid')\n        if uid is not None:\n            user = User.objects.get(id = uid)\n            request.user = user   #åŠ¨æ€æ·»åŠ ä¸€ä¸ªuserå±æ€§ setattr(request,'user',user)\n        else:\n            if request.path not in ['/user/login/','/user/register/']\n            return redirect('/login/')\n            \n```\n\n8. **Logging** \n\n   **æ—¥å¿—çº§åˆ«** \n\n   â€‹\tDEBUG \n\n   â€‹\tINFO \n\n   â€‹\tWARN \n\n   â€‹\tERROR \n\n   â€‹\tFATAL \n\n   **ä½¿ç”¨** \n\n   logger.debug('xxxxxxxx') \n\n   logger.info('xxxxxxxx') \n\n   logger.warning('xxxxxxxx') \n\n   logger.error('xxxxxxxx') \n\n   logger.fatal('xxxxxxxx') \n\n   **æŸ¥æ‰¾ã€åˆ†æ** \n\n   tail \n\n   head \n\n   less \n\n   awk \n\n   grep \n\n   **é…ç½®** \n\n   ```Python\n   LOGGING = { \n   \t'version': 1, \n   \t'disable_existing_loggers': True, \n   \t'formatters': { \n   \t\t'simple': { 'format': '%(asctime)s %(module)s.%(funcName)s: %(message)s', \n   \t\t'datefmt': '%Yâ€‘%mâ€‘%d %H:%M:%S', }, \n   \t\t'verbose': { \n   \t\t\t'format': '%(asctime)s %(levelname)s [%(process)dâ€‘%(threadName)s] '\n   \t\t\t\t\t  '%(module)s.%(funcName)s line %(lineno)d: %(message)s', \n   \t\t\t'datefmt': '%Yâ€‘%mâ€‘%d %H:%M:%S', \n   \t\t\t} \n   \t\t\t}, \n   \t'handlers': { \n   \t\t'inf': { \n   \t\t\t'class': 'logging.handlers.TimedRotatingFileHandler', \n   \t\t\t'filename': '/data/web/gnt.out', \n   \t\t\t'when': 'W0', # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿— \n   \t\t\t'backupCount': 5, \n   \t\t\t'formatter': 'simple', \n   \t\t\t'level': 'DEBUG' if DEBUG else 'INFO', \n   \t\t\t}, \n   \t\t\t'err': { \n   \t\t\t\t'class': 'logging.handlers.TimedRotatingFileHandler', \n   \t\t\t\t'filename': '/data/web/gnt.err', \n   \t\t\t\t'when': 'D', # æ¯å¤©åˆ‡å‰²æ—¥å¿— 'backupCount': 5, \n   \t\t\t\t'formatter': 'verbose', \n   \t\t\t\t'level': 'WARNING', \n   \t\t\t\t} \n   \t\t\t}, \n   \t\t'loggers': { \n   \t\t\t'inf': { \n   \t\t\t\t'handlers': ['inf'], \n   \t\t\t\t'level': 'DEBUG', \n   \t\t\t\t'propagate': True, \n   \t\t\t\t}, \n   \t\t\t'err': { \n   \t\t\t\t'handlers': ['err'], \n   \t\t\t\t'level': 'DEBUG', \n   \t\t\t\t'propagate': True, \n   \t\t\t\t} \n   \t\t\t} \n   \t\t}\n   ```\n\n   ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„è£…é¥°å™¨\n\n   ---\n\n   ```python\n   def statistic(view_func):\n       def wrap(request.*args,**kwargs):\n           ip = request.META['REMOTE_ADDR']\n           aid = int(request.GET.get('aid',0))\n           logger.info(f'{ip}  {aid}')\n           return view_func(request,*args,**kwargs)\n       return wrap\n   ```\n\n   \n\n9. **Django çš„æ€§èƒ½**\n\n    **Django è‡ªèº«ä¼˜åŒ–** \n\n   â€‹\t`å……åˆ†ä¹‹ç”¨ç¼“å­˜ `\n\n   â€‹\t`æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£ï¨¸ `\n\n   â€‹\t`å°½ï¥¾ä½¿ç”¨ defer() å’Œ only() æŸ¥æ‰¾ `\n\n   â€‹\t`å°½ï¥¾ä½¿ç”¨ count() å’Œ exists() `\n\n   â€‹\tæ¨¡æ¿ä¸­`{`% block %`}`æ€§èƒ½ä¼˜äº` {`% include %`}`\n\n   â€‹\t`å¼€å¯æ¨¡æ¿ç¼“å­˜ `\n\n   â€‹\t`ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ `\n\n   **å…¶ä»–ä¼˜åŒ–** \n\n   â€‹\t**I/O å¯†é›†å‹: å¼‚æ­¥åŒ–** \n\n   â€‹\t\tè¯·æ±‚å¼‚æ­¥åŒ– \n\n   â€‹\t\tæ•°æ®æ“ä½œå¼‚æ­¥åŒ– \n\n   â€‹\t\tgevent, asyncio, aiopg, aiohttp, tornado \n\n   â€‹\t**è®¡ç®—å¯†é›†å‹** \n\n   â€‹\t\tè€—æ—¶æ“ä½œç”¨ Celery ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ \n\n   â€‹\t**åˆ†åº“åˆ†è¡¨** \n\n   â€‹\t\tå–ä½™ã€å“ˆå¸Œ \n\n   â€‹\t\tèŒƒå›´ \n\n   â€‹\t\tä¸€è‡´æ€§å“ˆå¸Œ \n\n   â€‹\t**ç´¢å¼•ä¼˜åŒ–** \n\n   â€‹\tæ…¢æŸ¥è¯¢ä¼˜åŒ– (ç›¸å…³å·¥å…·: DjangoDebugToolbar) \n\n   â€‹\tGunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼ï§ç”¨å¤šæ ¸ \n\n   â€‹\tPyPy \n\n   â€‹\tCython\n\n---\n\n### å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\n\n```Python\nfrom functools import update_wrapper\ndef async_call(func):\n    '''å¼‚æ­¥è°ƒç”¨ä»»åŠ¡'''\n    func.trace_err =trace_err\n    func.trace_info = '%s.%s'%(trace_code(2),func.func_name)\n    def wrapper(*args,**kwargs)\n    \tglobal main_thread\n        try:\n            main_thread.MMQ.submit(func,*args,**kwargs)\n        except AttributeError:\n            return func(*args,**kwargs)\n    return update_wrapper(wrapper,func)\n```\n\n\n\n### ç”Ÿæˆå™¨\n\n```python\n#ç”Ÿæˆå™¨  ä½¿ç”¨nextè°ƒç”¨\ndef foo():\n    for i in range(10):\n        yield i \nx = foo()\nnext(x)\n#æƒ°æ€§æ±‚å€¼,å å†…å­˜å°  ----python2ä¸­çš„xrangeç±»ä¼¼\n```\n\n### è¿­ä»£å™¨\n\n```python\nclass Iter:\n    def __iter__(self):\n        return self\n    def __next__(self):\n        return 1\no =Iter()\n\nclass Iter:\n    def __init__(self):\n        self.v = 0\n    def __iter__(self):\n        return self\n    def __next__(self):\n        self.v +=1\n        return self.v   #è¿­ä»£çš„è§„åˆ™å†™åœ¨nextæ–¹æ³•\n```\n\n","slug":"djangoè¿›é˜¶-ä¸­é—´ä»¶","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109hn9001h3kzj22rq6y20","content":"<h1 id=\"djangoè¿›é˜¶\"><a href=\"#djangoè¿›é˜¶\" class=\"headerlink\" title=\"djangoè¿›é˜¶\"></a>djangoè¿›é˜¶</h1><ol>\n<li><p><strong>HTTP Objects</strong></p>\n<p> <strong>HttpRequest</strong> </p>\n<p>â€‹    <strong>è‡ªèº«å±æ€§</strong> </p>\n<p>â€‹        <code>request.path -&gt; /foo/bar/</code></p>\n<p>â€‹        <code>request.method</code></p>\n<p>â€‹        <code>request.GET</code></p>\n<p>â€‹        <code>request.POST</code></p>\n<p>â€‹        <code>request.COOKIES</code></p>\n<p>â€‹        <code>request.FILES -&gt; {name1: file1, name2: file2, ...}</code></p>\n<p>â€‹        <code>request.META['REMOTE_ADDR']</code></p>\n<p>â€‹        <code>request.META['HTTP_USER_AGENT']</code></p>\n<p>â€‹    <strong>ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§</strong> </p>\n<p>â€‹        request.session </p>\n<p>â€‹        request.user </p>\n<p>â€‹    <strong>æ–¹æ³•</strong> </p>\n<p>â€‹        request.get_full_path() -&gt; /foo/bar/?a=123 </p>\n<p>â€‹        request.get_signed_cookie(key) </p>\n<p><strong>HttpResponse</strong> </p>\n<p>â€‹    <strong>å±æ€§</strong> </p>\n<p>â€‹        response.status_code </p>\n<p>â€‹        response.content </p>\n<p>â€‹    <strong>æ–¹æ³•</strong> </p>\n<p>â€‹        response.set_cookie(key, value, max_age=None) </p>\n<p><strong>JsonHttpResponse</strong> </p>\n<pre><code>`response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`</code></pre></li>\n<li><p>django ä¸­é—´ä»¶</p>\n<p>æœ€ç®€å•çš„ä¸­é—´ä»¶:aopé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</p>\n<p>è‡ªå·±å†™ä¸€ä¸ªè·å–æ¥å£æ•°æ®çš„ä¸­é—´ä»¶</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Result</span><span class=\"params\">(MiddlewareMixin)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_view</span><span class=\"params\">(self,request,view_func,*args,**kwargs)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\">#æ‰§è¡Œviewå‡½æ•°.è·å–rc</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            print(args,kwargs)</span><br><span class=\"line\">            view_result =view_func(request)</span><br><span class=\"line\">            rc = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            view_result = <span class=\"literal\">None</span></span><br><span class=\"line\">            rc = str(e)</span><br><span class=\"line\">            </span><br><span class=\"line\">        <span class=\"comment\">#è·å– msg</span></span><br><span class=\"line\">        uid = request.GET.get(<span class=\"string\">'uid'</span>)</span><br><span class=\"line\">        msg = cache.get(<span class=\"string\">f'msg-<span class=\"subst\">{uid}</span>'</span>) <span class=\"comment\">#python3æ‰æœ‰fæ‹¼æ¥</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        data ={</span><br><span class=\"line\">            <span class=\"string\">'result'</span>: view_result,</span><br><span class=\"line\">            <span class=\"string\">'rc'</span>: rc,</span><br><span class=\"line\">            <span class=\"string\">'msg'</span>:msg</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> JsonResponse(data)</span><br></pre></td></tr></tbody></table></figure>\n\n<p>æœ€ç®€å•çš„è£…é¥°å™¨â€”è£…é¥°å™¨å½¢å¼</p>\n</li>\n</ol>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">simple_middeware</span><span class=\"params\">(get_response)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\">#do_something  for __init__()</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">middleware</span><span class=\"params\">(request)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># do something before_views()</span></span><br><span class=\"line\">\t\tt=time.time()</span><br><span class=\"line\">        </span><br><span class=\"line\">        response = get_response(request) <span class=\"comment\">#view å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        print(time.time()-t)</span><br><span class=\"line\">        <span class=\"comment\"># do something after_views()</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br><span class=\"line\">    <span class=\"keyword\">return</span> middleware</span><br></pre></td></tr></tbody></table></figure>\n\n<p>è£…é¥°å™¨çš„è¿è¡Œæ–¹å¼</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">timer</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrap</span><span class=\"params\">(*args,**kwargs)</span>:</span></span><br><span class=\"line\">        t= time.time()</span><br><span class=\"line\">        res= func(*args,**kwargs)</span><br><span class=\"line\">        print(time.time()-t)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res</span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrap</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@timer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">foo</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\"><span class=\"function\">\t<span class=\"title\">time</span>.<span class=\"title\">sleep</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\">#è¢«è£…é¥°å,è¿™æ—¶å€™ foo.__name__ å·²ç»å˜æˆäº†wrapè€Œä¸æ˜¯fooäº†</span><br><span class=\"line\"><span class=\"comment\"># ç›¸å½“äºtimer(foo)(0.5)-&gt;wrap(0.5)</span></span><br></pre></td></tr></tbody></table></figure>\n\n<p>ä¸­é—´ä»¶ç±»</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMiddleware</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self,view_func)</span>:</span></span><br><span class=\"line\">        self.view_func = view_func  <span class=\"comment\">#åŠ¨æ€æ·»åŠ å±æ€§</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self,request)</span>:</span></span><br><span class=\"line\">        response = self.view_func(request)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_view</span><span class=\"params\">(self,request,view_func,view_args,view_kwargs)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">-----------------</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">foo</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"><span class=\"comment\"># æ‰§è¡Œfoo()å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯foo.__call__()</span></span><br><span class=\"line\">------------------</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\">a = A()</span><br><span class=\"line\"><span class=\"comment\">#a()æ²¡æœ‰callæ–¹æ³•,ä½†æ˜¯Aæ˜¯æœ‰çš„A.__call__()-&gt;Açš„å®ä¾‹</span></span><br><span class=\"line\">-------------------</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self,n)</span>:</span></span><br><span class=\"line\">        print(n)</span><br><span class=\"line\">a = A()</span><br><span class=\"line\">a(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\">#ç°åœ¨a()æ˜¯å¯ä»¥è°ƒç”¨çš„,å¯ä»¥ç”¨callable(a)æŸ¥çœ‹</span></span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"django1-10ä¹‹å‰çš„ä¸­é—´ä»¶\"><a href=\"#django1-10ä¹‹å‰çš„ä¸­é—´ä»¶\" class=\"headerlink\" title=\"django1.10ä¹‹å‰çš„ä¸­é—´ä»¶\"></a>django1.10ä¹‹å‰çš„ä¸­é—´ä»¶</h3><p>ç»§æ‰¿è‡ªMiddlewareMixin</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.utils.deprecation <span class=\"keyword\">import</span> MiddlewareMixin</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMiddleware</span><span class=\"params\">(MiddlewareMixin)</span>:</span> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_request</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">pass</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_view</span><span class=\"params\">(self, request, view_func, view_args, view_kwargs)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_response</span><span class=\"params\">(self, request, response)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br></pre></td></tr></tbody></table></figure>\n\n<p>æ‰§ï¨ˆé¡ºåº process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§ï¨ˆ </p>\n<p>process_response ä»ä¸‹å¾€ä¸Šæ‰§ï¨ˆ </p>\n<p><a href=\"https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering\" target=\"_blank\" rel=\"noopener\">å†…ç½®ä¸­é—´ä»¶çš„æ’åº</a></p>\n<ol start=\"6\">\n<li><p>Cache</p>\n<p> é»˜è®¤ç¼“å­˜: from django.core.cache import cache </p>\n<p>BACKEND: DatabaseCache / MemcachedCache / LocMemCache </p>\n<p>LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ï¤…é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºï¦œè¡¨ </p>\n<p>ä½¿ç”¨ Redis åšç¼“å­˜ </p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CACHES = { </span><br><span class=\"line\">\t<span class=\"string\">\"default\"</span>: { </span><br><span class=\"line\">\t<span class=\"string\">\"BACKEND\"</span>: <span class=\"string\">\"django_redis.cache.RedisCache\"</span>, </span><br><span class=\"line\">\t<span class=\"string\">\"LOCATION\"</span>: <span class=\"string\">\"redis://127.0.0.1:6379/1\"</span>, </span><br><span class=\"line\">\t<span class=\"string\">\"OPTIONS\"</span>: { </span><br><span class=\"line\">\t\t<span class=\"string\">\"CLIENT_CLASS\"</span>: <span class=\"string\">\"django_redis.client.DefaultClient\"</span>, </span><br><span class=\"line\">\t\t<span class=\"string\">\"PICKLE_VERSION\"</span>: â€‘<span class=\"number\">1</span>, </span><br><span class=\"line\">\t\t} </span><br><span class=\"line\">\t} </span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n\n<p><strong>åŸºæœ¬æ–¹æ³•</strong> </p>\n<p><code>cache.set(key, value, timeout=None)</code> </p>\n<p><code>cache.get(key, default=None)</code> </p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cache.delete(key) </span><br><span class=\"line\"></span><br><span class=\"line\">cache.incr('num') </span><br><span class=\"line\"></span><br><span class=\"line\">cache.decr('num') </span><br><span class=\"line\"></span><br><span class=\"line\">cache.get_or_set(key, default, timeout=None)</span><br></pre></td></tr></tbody></table></figure>\n\n<p>   <code>cache.set_many({'a': 1, 'b': 2, 'c': 3})</code> </p>\n<p>   <code>cache.get_many(['a', 'b', 'c'])</code> </p>\n<p>   <strong>å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶</strong>: <code>django.middleware.cache.UpdateCacheMiddleware</code></p>\n<p>   â€‹    å‰ç½®ä¸­é—´ä»¶ </p>\n<pre><code>ç¼“å­˜æœŸé™: `CACHE_MIDDLEWARE_SECONDS `</code></pre><p>   <strong>é¡µé¢ç¼“å­˜è£…é¥°ï¨¸</strong>: <code>from django.views.decorators.cache import cache_page</code></p>\n<p>   <strong>å±æ€§ç¼“å­˜è£…é¥°ï¨¸</strong>: <code>from django.utils.functional import cached_property</code></p>\n<p>   <strong>pickle</strong> </p>\n<p>   â€‹    dumps </p>\n<p>   â€‹    loads</p>\n<ol start=\"7\">\n<li><p><strong>Cookie å’Œ Session</strong></p>\n<p> <strong>Cookie:</strong> response.set_cookie(key, value, max_age=None) </p>\n<p><strong>Session é…ç½®</strong> </p>\n<p>â€‹    a. å¼€å¯ Session ä¸­é—´ä»¶: django.contrib.sessions.middleware.SessionMiddleware </p>\n<p>â€‹    b. é…ç½®ç¼“å­˜ </p>\n<p>â€‹    c. é…ç½® Session å¼•æ“: SESSION_ENGINE = â€œdjango.contrib.sessions.backends.cacheâ€ </p>\n<p><strong>å¯é€‰é¡¹</strong> </p>\n<p>â€‹    SESSION_COOKIE_AGE ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨ </p>\n<p>â€‹    SESSION_COOKIE_NAME Session å, é»˜è®¤ â€˜sessionidâ€™ </p>\n<pre><code>SESSION_EXPIRE_AT_BROWSER_CLOSE æµè§ˆï¨¸å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ                                                     `SESSION_SAVE_EVERY_REQUEST æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session `</code></pre></li>\n</ol>\n<p>   <strong>ç”¨æ³•</strong> </p>\n<p>   request.session.session_key æŸ¥çœ‹ session_id </p>\n<p>   request.session.modified session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹ </p>\n<p>   request.session[â€˜uidâ€™] = 1234 å½“ session å‘ç”Ÿï¤æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜ </p>\n<p>   request.session.get(â€˜uidâ€™) å–å€¼ </p>\n<p>   request.session.save() æ‰‹åŠ¨ä¿å­˜</p>\n<hr>\n<h3 id=\"æ‰‹å†™ä¸€ä¸ªlogin-requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\"><a href=\"#æ‰‹å†™ä¸€ä¸ªlogin-requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\" class=\"headerlink\" title=\"æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\"></a>æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•</h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login_require</span><span class=\"params\">(view_func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_login</span><span class=\"params\">(request)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> request.session.get(<span class=\"string\">'name'</span>):</span><br><span class=\"line\">            <span class=\"keyword\">return</span> view_func(request)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(<span class=\"string\">'/login/'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> check_login</span><br></pre></td></tr></tbody></table></figure>\n\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#loginçš„viewå‡½æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span><span class=\"params\">(request)</span>:</span></span><br><span class=\"line\">    username = request.POST.get(<span class=\"string\">'username'</span>)</span><br><span class=\"line\">    password = request.POST.get(<span class=\"string\">'password'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> username==USER <span class=\"keyword\">and</span> password ==PASSWORD:</span><br><span class=\"line\">        user = User(username = USER)</span><br><span class=\"line\">        request.session[<span class=\"string\">'uid'</span>]=user.id</span><br><span class=\"line\">        <span class=\"keyword\">return</span> render()</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> redirect(<span class=\"string\">'/login/'</span>)</span><br></pre></td></tr></tbody></table></figure>\n\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#æ‰‹å†™ä¸€ä¸ªä¸­é—´ä»¶éªŒè¯ç”¨æˆ·å·²ç»ç™»å½•,æ¯”å¦‚ç”¨æˆ·ç™»å½•åæ‰èƒ½ç¼–è¾‘è¯„è®ºç­‰(å…¨å±€çš„)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Auth</span><span class=\"params\">(MiddlewareMixin)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_request</span><span class=\"params\">(self,request)</span>:</span></span><br><span class=\"line\">        uid = request.session.get(<span class=\"string\">'uid'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> uid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            user = User.objects.get(id = uid)</span><br><span class=\"line\">            request.user = user   <span class=\"comment\">#åŠ¨æ€æ·»åŠ ä¸€ä¸ªuserå±æ€§ setattr(request,'user',user)</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> request.path <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> [<span class=\"string\">'/user/login/'</span>,<span class=\"string\">'/user/register/'</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(<span class=\"string\">'/login/'</span>)</span><br></pre></td></tr></tbody></table></figure>\n\n<ol start=\"8\">\n<li><p><strong>Logging</strong> </p>\n<p><strong>æ—¥å¿—çº§åˆ«</strong> </p>\n<p>â€‹    DEBUG </p>\n<p>â€‹    INFO </p>\n<p>â€‹    WARN </p>\n<p>â€‹    ERROR </p>\n<p>â€‹    FATAL </p>\n<p><strong>ä½¿ç”¨</strong> </p>\n<p>logger.debug(â€˜xxxxxxxxâ€™) </p>\n<p>logger.info(â€˜xxxxxxxxâ€™) </p>\n<p>logger.warning(â€˜xxxxxxxxâ€™) </p>\n<p>logger.error(â€˜xxxxxxxxâ€™) </p>\n<p>logger.fatal(â€˜xxxxxxxxâ€™) </p>\n<p><strong>æŸ¥æ‰¾ã€åˆ†æ</strong> </p>\n<p>tail </p>\n<p>head </p>\n<p>less </p>\n<p>awk </p>\n<p>grep </p>\n<p><strong>é…ç½®</strong> </p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LOGGING = { </span><br><span class=\"line\">\t<span class=\"string\">'version'</span>: <span class=\"number\">1</span>, </span><br><span class=\"line\">\t<span class=\"string\">'disable_existing_loggers'</span>: <span class=\"literal\">True</span>, </span><br><span class=\"line\">\t<span class=\"string\">'formatters'</span>: { </span><br><span class=\"line\">\t\t<span class=\"string\">'simple'</span>: { <span class=\"string\">'format'</span>: <span class=\"string\">'%(asctime)s %(module)s.%(funcName)s: %(message)s'</span>, </span><br><span class=\"line\">\t\t<span class=\"string\">'datefmt'</span>: <span class=\"string\">'%Yâ€‘%mâ€‘%d %H:%M:%S'</span>, }, </span><br><span class=\"line\">\t\t<span class=\"string\">'verbose'</span>: { </span><br><span class=\"line\">\t\t\t<span class=\"string\">'format'</span>: <span class=\"string\">'%(asctime)s %(levelname)s [%(process)dâ€‘%(threadName)s] '</span></span><br><span class=\"line\">\t\t\t\t\t  <span class=\"string\">'%(module)s.%(funcName)s line %(lineno)d: %(message)s'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'datefmt'</span>: <span class=\"string\">'%Yâ€‘%mâ€‘%d %H:%M:%S'</span>, </span><br><span class=\"line\">\t\t\t} </span><br><span class=\"line\">\t\t\t}, </span><br><span class=\"line\">\t<span class=\"string\">'handlers'</span>: { </span><br><span class=\"line\">\t\t<span class=\"string\">'inf'</span>: { </span><br><span class=\"line\">\t\t\t<span class=\"string\">'class'</span>: <span class=\"string\">'logging.handlers.TimedRotatingFileHandler'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'filename'</span>: <span class=\"string\">'/data/web/gnt.out'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'when'</span>: <span class=\"string\">'W0'</span>, <span class=\"comment\"># æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿— </span></span><br><span class=\"line\">\t\t\t<span class=\"string\">'backupCount'</span>: <span class=\"number\">5</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'formatter'</span>: <span class=\"string\">'simple'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'DEBUG'</span> <span class=\"keyword\">if</span> DEBUG <span class=\"keyword\">else</span> <span class=\"string\">'INFO'</span>, </span><br><span class=\"line\">\t\t\t}, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'err'</span>: { </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'class'</span>: <span class=\"string\">'logging.handlers.TimedRotatingFileHandler'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'filename'</span>: <span class=\"string\">'/data/web/gnt.err'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'when'</span>: <span class=\"string\">'D'</span>, <span class=\"comment\"># æ¯å¤©åˆ‡å‰²æ—¥å¿— 'backupCount': 5, </span></span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'formatter'</span>: <span class=\"string\">'verbose'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'WARNING'</span>, </span><br><span class=\"line\">\t\t\t\t} </span><br><span class=\"line\">\t\t\t}, </span><br><span class=\"line\">\t\t<span class=\"string\">'loggers'</span>: { </span><br><span class=\"line\">\t\t\t<span class=\"string\">'inf'</span>: { </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'handlers'</span>: [<span class=\"string\">'inf'</span>], </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'DEBUG'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'propagate'</span>: <span class=\"literal\">True</span>, </span><br><span class=\"line\">\t\t\t\t}, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'err'</span>: { </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'handlers'</span>: [<span class=\"string\">'err'</span>], </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'DEBUG'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'propagate'</span>: <span class=\"literal\">True</span>, </span><br><span class=\"line\">\t\t\t\t} </span><br><span class=\"line\">\t\t\t} </span><br><span class=\"line\">\t\t}</span><br></pre></td></tr></tbody></table></figure>\n\n<p>ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„è£…é¥°å™¨</p>\n<hr>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">statistic</span><span class=\"params\">(view_func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrap</span><span class=\"params\">(request.*args,**kwargs)</span>:</span></span><br><span class=\"line\">        ip = request.META[<span class=\"string\">'REMOTE_ADDR'</span>]</span><br><span class=\"line\">        aid = int(request.GET.get(<span class=\"string\">'aid'</span>,<span class=\"number\">0</span>))</span><br><span class=\"line\">        logger.info(<span class=\"string\">f'<span class=\"subst\">{ip}</span>  <span class=\"subst\">{aid}</span>'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> view_func(request,*args,**kwargs)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrap</span><br></pre></td></tr></tbody></table></figure>\n\n\n\n</li>\n</ol>\n<ol start=\"9\">\n<li><p><strong>Django çš„æ€§èƒ½</strong></p>\n<p> <strong>Django è‡ªèº«ä¼˜åŒ–</strong> </p>\n<p>â€‹    <code>å……åˆ†ä¹‹ç”¨ç¼“å­˜</code></p>\n<p>â€‹    <code>æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£ï¨¸</code></p>\n<p>â€‹    <code>å°½ï¥¾ä½¿ç”¨ defer() å’Œ only() æŸ¥æ‰¾</code></p>\n<p>â€‹    <code>å°½ï¥¾ä½¿ç”¨ count() å’Œ exists()</code></p>\n<p>â€‹    æ¨¡æ¿ä¸­<code>{</code>% block %<code>}</code>æ€§èƒ½ä¼˜äº<code>{</code>% include %<code>}</code></p>\n<p>â€‹    <code>å¼€å¯æ¨¡æ¿ç¼“å­˜</code></p>\n<p>â€‹    <code>ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼</code></p>\n<p><strong>å…¶ä»–ä¼˜åŒ–</strong> </p>\n<p>â€‹    <strong>I/O å¯†é›†å‹: å¼‚æ­¥åŒ–</strong> </p>\n<p>â€‹        è¯·æ±‚å¼‚æ­¥åŒ– </p>\n<p>â€‹        æ•°æ®æ“ä½œå¼‚æ­¥åŒ– </p>\n<p>â€‹        gevent, asyncio, aiopg, aiohttp, tornado </p>\n<p>â€‹    <strong>è®¡ç®—å¯†é›†å‹</strong> </p>\n<p>â€‹        è€—æ—¶æ“ä½œç”¨ Celery ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ </p>\n<p>â€‹    <strong>åˆ†åº“åˆ†è¡¨</strong> </p>\n<p>â€‹        å–ä½™ã€å“ˆå¸Œ </p>\n<p>â€‹        èŒƒå›´ </p>\n<p>â€‹        ä¸€è‡´æ€§å“ˆå¸Œ </p>\n<p>â€‹    <strong>ç´¢å¼•ä¼˜åŒ–</strong> </p>\n<p>â€‹    æ…¢æŸ¥è¯¢ä¼˜åŒ– (ç›¸å…³å·¥å…·: DjangoDebugToolbar) </p>\n<p>â€‹    Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼ï§ç”¨å¤šæ ¸ </p>\n<p>â€‹    PyPy </p>\n<p>â€‹    Cython</p>\n</li>\n</ol>\n<hr>\n<h3 id=\"å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\"><a href=\"#å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\" class=\"headerlink\" title=\"å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\"></a>å¼‚æ­¥è°ƒç”¨ä»»åŠ¡</h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> update_wrapper</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">async_call</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''å¼‚æ­¥è°ƒç”¨ä»»åŠ¡'''</span></span><br><span class=\"line\">    func.trace_err =trace_err</span><br><span class=\"line\">    func.trace_info = <span class=\"string\">'%s.%s'</span>%(trace_code(<span class=\"number\">2</span>),func.func_name)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrapper</span><span class=\"params\">(*args,**kwargs)</span></span></span><br><span class=\"line\"><span class=\"function\">    \t<span class=\"title\">global</span> <span class=\"title\">main_thread</span></span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"title\">try</span>:</span></span><br><span class=\"line\">            main_thread.MMQ.submit(func,*args,**kwargs)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> AttributeError:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> func(*args,**kwargs)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> update_wrapper(wrapper,func)</span><br></pre></td></tr></tbody></table></figure>\n\n\n\n<h3 id=\"ç”Ÿæˆå™¨\"><a href=\"#ç”Ÿæˆå™¨\" class=\"headerlink\" title=\"ç”Ÿæˆå™¨\"></a>ç”Ÿæˆå™¨</h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#ç”Ÿæˆå™¨  ä½¿ç”¨nextè°ƒç”¨</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">foo</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>):</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> i </span><br><span class=\"line\">x = foo()</span><br><span class=\"line\">next(x)</span><br><span class=\"line\"><span class=\"comment\">#æƒ°æ€§æ±‚å€¼,å å†…å­˜å°  ----python2ä¸­çš„xrangeç±»ä¼¼</span></span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"è¿­ä»£å™¨\"><a href=\"#è¿­ä»£å™¨\" class=\"headerlink\" title=\"è¿­ä»£å™¨\"></a>è¿­ä»£å™¨</h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Iter</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__next__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">o =Iter()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Iter</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.v = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__next__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.v +=<span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.v   <span class=\"comment\">#è¿­ä»£çš„è§„åˆ™å†™åœ¨nextæ–¹æ³•</span></span><br></pre></td></tr></tbody></table></figure>\n\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"djangoè¿›é˜¶\"><a href=\"#djangoè¿›é˜¶\" class=\"headerlink\" title=\"djangoè¿›é˜¶\"></a>djangoè¿›é˜¶</h1><ol>\n<li><p><strong>HTTP Objects</strong></p>\n<p> <strong>HttpRequest</strong> </p>\n<p>â€‹    <strong>è‡ªèº«å±æ€§</strong> </p>\n<p>â€‹        <code>request.path -&gt; /foo/bar/</code></p>\n<p>â€‹        <code>request.method</code></p>\n<p>â€‹        <code>request.GET</code></p>\n<p>â€‹        <code>request.POST</code></p>\n<p>â€‹        <code>request.COOKIES</code></p>\n<p>â€‹        <code>request.FILES -&gt; {name1: file1, name2: file2, ...}</code></p>\n<p>â€‹        <code>request.META[&#39;REMOTE_ADDR&#39;]</code></p>\n<p>â€‹        <code>request.META[&#39;HTTP_USER_AGENT&#39;]</code></p>\n<p>â€‹    <strong>ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§</strong> </p>\n<p>â€‹        request.session </p>\n<p>â€‹        request.user </p>\n<p>â€‹    <strong>æ–¹æ³•</strong> </p>\n<p>â€‹        request.get_full_path() -&gt; /foo/bar/?a=123 </p>\n<p>â€‹        request.get_signed_cookie(key) </p>\n<p><strong>HttpResponse</strong> </p>\n<p>â€‹    <strong>å±æ€§</strong> </p>\n<p>â€‹        response.status_code </p>\n<p>â€‹        response.content </p>\n<p>â€‹    <strong>æ–¹æ³•</strong> </p>\n<p>â€‹        response.set_cookie(key, value, max_age=None) </p>\n<p><strong>JsonHttpResponse</strong> </p>\n<pre><code>`response = JsonHttpResponse({&apos;a&apos;: 12, &apos;b&apos;: &apos;xyz&apos;})`</code></pre></li>\n<li><p>django ä¸­é—´ä»¶</p>\n<p>æœ€ç®€å•çš„ä¸­é—´ä»¶:aopé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</p>\n<p>è‡ªå·±å†™ä¸€ä¸ªè·å–æ¥å£æ•°æ®çš„ä¸­é—´ä»¶</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Result</span><span class=\"params\">(MiddlewareMixin)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_view</span><span class=\"params\">(self,request,view_func,*args,**kwargs)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\">#æ‰§è¡Œviewå‡½æ•°.è·å–rc</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            print(args,kwargs)</span><br><span class=\"line\">            view_result =view_func(request)</span><br><span class=\"line\">            rc = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            view_result = <span class=\"literal\">None</span></span><br><span class=\"line\">            rc = str(e)</span><br><span class=\"line\">            </span><br><span class=\"line\">        <span class=\"comment\">#è·å– msg</span></span><br><span class=\"line\">        uid = request.GET.get(<span class=\"string\">'uid'</span>)</span><br><span class=\"line\">        msg = cache.get(<span class=\"string\">f'msg-<span class=\"subst\">&#123;uid&#125;</span>'</span>) <span class=\"comment\">#python3æ‰æœ‰fæ‹¼æ¥</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        data =&#123;</span><br><span class=\"line\">            <span class=\"string\">'result'</span>: view_result,</span><br><span class=\"line\">            <span class=\"string\">'rc'</span>: rc,</span><br><span class=\"line\">            <span class=\"string\">'msg'</span>:msg</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> JsonResponse(data)</span><br></pre></td></tr></table></figure>\n\n<p>æœ€ç®€å•çš„è£…é¥°å™¨â€”è£…é¥°å™¨å½¢å¼</p>\n</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">simple_middeware</span><span class=\"params\">(get_response)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\">#do_something  for __init__()</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">middleware</span><span class=\"params\">(request)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># do something before_views()</span></span><br><span class=\"line\">\t\tt=time.time()</span><br><span class=\"line\">        </span><br><span class=\"line\">        response = get_response(request) <span class=\"comment\">#view å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        print(time.time()-t)</span><br><span class=\"line\">        <span class=\"comment\"># do something after_views()</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br><span class=\"line\">    <span class=\"keyword\">return</span> middleware</span><br></pre></td></tr></table></figure>\n\n<p>è£…é¥°å™¨çš„è¿è¡Œæ–¹å¼</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">timer</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrap</span><span class=\"params\">(*args,**kwargs)</span>:</span></span><br><span class=\"line\">        t= time.time()</span><br><span class=\"line\">        res= func(*args,**kwargs)</span><br><span class=\"line\">        print(time.time()-t)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res</span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrap</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@timer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">foo</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\"><span class=\"function\">\t<span class=\"title\">time</span>.<span class=\"title\">sleep</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\">#è¢«è£…é¥°å,è¿™æ—¶å€™ foo.__name__ å·²ç»å˜æˆäº†wrapè€Œä¸æ˜¯fooäº†</span><br><span class=\"line\"><span class=\"comment\"># ç›¸å½“äºtimer(foo)(0.5)-&gt;wrap(0.5)</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸­é—´ä»¶ç±»</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMiddleware</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self,view_func)</span>:</span></span><br><span class=\"line\">        self.view_func = view_func  <span class=\"comment\">#åŠ¨æ€æ·»åŠ å±æ€§</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self,request)</span>:</span></span><br><span class=\"line\">        response = self.view_func(request)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_view</span><span class=\"params\">(self,request,view_func,view_args,view_kwargs)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">-----------------</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">foo</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"><span class=\"comment\"># æ‰§è¡Œfoo()å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯foo.__call__()</span></span><br><span class=\"line\">------------------</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\">a = A()</span><br><span class=\"line\"><span class=\"comment\">#a()æ²¡æœ‰callæ–¹æ³•,ä½†æ˜¯Aæ˜¯æœ‰çš„A.__call__()-&gt;Açš„å®ä¾‹</span></span><br><span class=\"line\">-------------------</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self,n)</span>:</span></span><br><span class=\"line\">        print(n)</span><br><span class=\"line\">a = A()</span><br><span class=\"line\">a(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\">#ç°åœ¨a()æ˜¯å¯ä»¥è°ƒç”¨çš„,å¯ä»¥ç”¨callable(a)æŸ¥çœ‹</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"django1-10ä¹‹å‰çš„ä¸­é—´ä»¶\"><a href=\"#django1-10ä¹‹å‰çš„ä¸­é—´ä»¶\" class=\"headerlink\" title=\"django1.10ä¹‹å‰çš„ä¸­é—´ä»¶\"></a>django1.10ä¹‹å‰çš„ä¸­é—´ä»¶</h3><p>ç»§æ‰¿è‡ªMiddlewareMixin</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.utils.deprecation <span class=\"keyword\">import</span> MiddlewareMixin</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMiddleware</span><span class=\"params\">(MiddlewareMixin)</span>:</span> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_request</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">pass</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_view</span><span class=\"params\">(self, request, view_func, view_args, view_kwargs)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_response</span><span class=\"params\">(self, request, response)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§ï¨ˆé¡ºåº process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§ï¨ˆ </p>\n<p>process_response ä»ä¸‹å¾€ä¸Šæ‰§ï¨ˆ </p>\n<p><a href=\"https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering\" target=\"_blank\" rel=\"noopener\">å†…ç½®ä¸­é—´ä»¶çš„æ’åº</a></p>\n<ol start=\"6\">\n<li><p>Cache</p>\n<p> é»˜è®¤ç¼“å­˜: from django.core.cache import cache </p>\n<p>BACKEND: DatabaseCache / MemcachedCache / LocMemCache </p>\n<p>LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ï¤…é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºï¦œè¡¨ </p>\n<p>ä½¿ç”¨ Redis åšç¼“å­˜ </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CACHES = &#123; </span><br><span class=\"line\">\t<span class=\"string\">\"default\"</span>: &#123; </span><br><span class=\"line\">\t<span class=\"string\">\"BACKEND\"</span>: <span class=\"string\">\"django_redis.cache.RedisCache\"</span>, </span><br><span class=\"line\">\t<span class=\"string\">\"LOCATION\"</span>: <span class=\"string\">\"redis://127.0.0.1:6379/1\"</span>, </span><br><span class=\"line\">\t<span class=\"string\">\"OPTIONS\"</span>: &#123; </span><br><span class=\"line\">\t\t<span class=\"string\">\"CLIENT_CLASS\"</span>: <span class=\"string\">\"django_redis.client.DefaultClient\"</span>, </span><br><span class=\"line\">\t\t<span class=\"string\">\"PICKLE_VERSION\"</span>: â€‘<span class=\"number\">1</span>, </span><br><span class=\"line\">\t\t&#125; </span><br><span class=\"line\">\t&#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>åŸºæœ¬æ–¹æ³•</strong> </p>\n<p><code>cache.set(key, value, timeout=None)</code> </p>\n<p><code>cache.get(key, default=None)</code> </p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cache.delete(key) </span><br><span class=\"line\"></span><br><span class=\"line\">cache.incr(&#39;num&#39;) </span><br><span class=\"line\"></span><br><span class=\"line\">cache.decr(&#39;num&#39;) </span><br><span class=\"line\"></span><br><span class=\"line\">cache.get_or_set(key, default, timeout&#x3D;None)</span><br></pre></td></tr></table></figure>\n\n<p>   <code>cache.set_many({&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3})</code> </p>\n<p>   <code>cache.get_many([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])</code> </p>\n<p>   <strong>å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶</strong>: <code>django.middleware.cache.UpdateCacheMiddleware</code></p>\n<p>   â€‹    å‰ç½®ä¸­é—´ä»¶ </p>\n<pre><code>ç¼“å­˜æœŸé™: `CACHE_MIDDLEWARE_SECONDS `</code></pre><p>   <strong>é¡µé¢ç¼“å­˜è£…é¥°ï¨¸</strong>: <code>from django.views.decorators.cache import cache_page</code></p>\n<p>   <strong>å±æ€§ç¼“å­˜è£…é¥°ï¨¸</strong>: <code>from django.utils.functional import cached_property</code></p>\n<p>   <strong>pickle</strong> </p>\n<p>   â€‹    dumps </p>\n<p>   â€‹    loads</p>\n<ol start=\"7\">\n<li><p><strong>Cookie å’Œ Session</strong></p>\n<p> <strong>Cookie:</strong> response.set_cookie(key, value, max_age=None) </p>\n<p><strong>Session é…ç½®</strong> </p>\n<p>â€‹    a. å¼€å¯ Session ä¸­é—´ä»¶: django.contrib.sessions.middleware.SessionMiddleware </p>\n<p>â€‹    b. é…ç½®ç¼“å­˜ </p>\n<p>â€‹    c. é…ç½® Session å¼•æ“: SESSION_ENGINE = â€œdjango.contrib.sessions.backends.cacheâ€ </p>\n<p><strong>å¯é€‰é¡¹</strong> </p>\n<p>â€‹    SESSION_COOKIE_AGE ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨ </p>\n<p>â€‹    SESSION_COOKIE_NAME Session å, é»˜è®¤ â€˜sessionidâ€™ </p>\n<pre><code>SESSION_EXPIRE_AT_BROWSER_CLOSE æµè§ˆï¨¸å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ                                                     `SESSION_SAVE_EVERY_REQUEST æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session `</code></pre></li>\n</ol>\n<p>   <strong>ç”¨æ³•</strong> </p>\n<p>   request.session.session_key æŸ¥çœ‹ session_id </p>\n<p>   request.session.modified session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹ </p>\n<p>   request.session[â€˜uidâ€™] = 1234 å½“ session å‘ç”Ÿï¤æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜ </p>\n<p>   request.session.get(â€˜uidâ€™) å–å€¼ </p>\n<p>   request.session.save() æ‰‹åŠ¨ä¿å­˜</p>\n<hr>\n<h3 id=\"æ‰‹å†™ä¸€ä¸ªlogin-requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\"><a href=\"#æ‰‹å†™ä¸€ä¸ªlogin-requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\" class=\"headerlink\" title=\"æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•\"></a>æ‰‹å†™ä¸€ä¸ªlogin_requireè£…é¥°å™¨éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login_require</span><span class=\"params\">(view_func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_login</span><span class=\"params\">(request)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> request.session.get(<span class=\"string\">'name'</span>):</span><br><span class=\"line\">            <span class=\"keyword\">return</span> view_func(request)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(<span class=\"string\">'/login/'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> check_login</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#loginçš„viewå‡½æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span><span class=\"params\">(request)</span>:</span></span><br><span class=\"line\">    username = request.POST.get(<span class=\"string\">'username'</span>)</span><br><span class=\"line\">    password = request.POST.get(<span class=\"string\">'password'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> username==USER <span class=\"keyword\">and</span> password ==PASSWORD:</span><br><span class=\"line\">        user = User(username = USER)</span><br><span class=\"line\">        request.session[<span class=\"string\">'uid'</span>]=user.id</span><br><span class=\"line\">        <span class=\"keyword\">return</span> render()</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> redirect(<span class=\"string\">'/login/'</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#æ‰‹å†™ä¸€ä¸ªä¸­é—´ä»¶éªŒè¯ç”¨æˆ·å·²ç»ç™»å½•,æ¯”å¦‚ç”¨æˆ·ç™»å½•åæ‰èƒ½ç¼–è¾‘è¯„è®ºç­‰(å…¨å±€çš„)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Auth</span><span class=\"params\">(MiddlewareMixin)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_request</span><span class=\"params\">(self,request)</span>:</span></span><br><span class=\"line\">        uid = request.session.get(<span class=\"string\">'uid'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> uid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            user = User.objects.get(id = uid)</span><br><span class=\"line\">            request.user = user   <span class=\"comment\">#åŠ¨æ€æ·»åŠ ä¸€ä¸ªuserå±æ€§ setattr(request,'user',user)</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> request.path <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> [<span class=\"string\">'/user/login/'</span>,<span class=\"string\">'/user/register/'</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(<span class=\"string\">'/login/'</span>)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li><p><strong>Logging</strong> </p>\n<p><strong>æ—¥å¿—çº§åˆ«</strong> </p>\n<p>â€‹    DEBUG </p>\n<p>â€‹    INFO </p>\n<p>â€‹    WARN </p>\n<p>â€‹    ERROR </p>\n<p>â€‹    FATAL </p>\n<p><strong>ä½¿ç”¨</strong> </p>\n<p>logger.debug(â€˜xxxxxxxxâ€™) </p>\n<p>logger.info(â€˜xxxxxxxxâ€™) </p>\n<p>logger.warning(â€˜xxxxxxxxâ€™) </p>\n<p>logger.error(â€˜xxxxxxxxâ€™) </p>\n<p>logger.fatal(â€˜xxxxxxxxâ€™) </p>\n<p><strong>æŸ¥æ‰¾ã€åˆ†æ</strong> </p>\n<p>tail </p>\n<p>head </p>\n<p>less </p>\n<p>awk </p>\n<p>grep </p>\n<p><strong>é…ç½®</strong> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LOGGING = &#123; </span><br><span class=\"line\">\t<span class=\"string\">'version'</span>: <span class=\"number\">1</span>, </span><br><span class=\"line\">\t<span class=\"string\">'disable_existing_loggers'</span>: <span class=\"literal\">True</span>, </span><br><span class=\"line\">\t<span class=\"string\">'formatters'</span>: &#123; </span><br><span class=\"line\">\t\t<span class=\"string\">'simple'</span>: &#123; <span class=\"string\">'format'</span>: <span class=\"string\">'%(asctime)s %(module)s.%(funcName)s: %(message)s'</span>, </span><br><span class=\"line\">\t\t<span class=\"string\">'datefmt'</span>: <span class=\"string\">'%Yâ€‘%mâ€‘%d %H:%M:%S'</span>, &#125;, </span><br><span class=\"line\">\t\t<span class=\"string\">'verbose'</span>: &#123; </span><br><span class=\"line\">\t\t\t<span class=\"string\">'format'</span>: <span class=\"string\">'%(asctime)s %(levelname)s [%(process)dâ€‘%(threadName)s] '</span></span><br><span class=\"line\">\t\t\t\t\t  <span class=\"string\">'%(module)s.%(funcName)s line %(lineno)d: %(message)s'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'datefmt'</span>: <span class=\"string\">'%Yâ€‘%mâ€‘%d %H:%M:%S'</span>, </span><br><span class=\"line\">\t\t\t&#125; </span><br><span class=\"line\">\t\t\t&#125;, </span><br><span class=\"line\">\t<span class=\"string\">'handlers'</span>: &#123; </span><br><span class=\"line\">\t\t<span class=\"string\">'inf'</span>: &#123; </span><br><span class=\"line\">\t\t\t<span class=\"string\">'class'</span>: <span class=\"string\">'logging.handlers.TimedRotatingFileHandler'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'filename'</span>: <span class=\"string\">'/data/web/gnt.out'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'when'</span>: <span class=\"string\">'W0'</span>, <span class=\"comment\"># æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿— </span></span><br><span class=\"line\">\t\t\t<span class=\"string\">'backupCount'</span>: <span class=\"number\">5</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'formatter'</span>: <span class=\"string\">'simple'</span>, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'DEBUG'</span> <span class=\"keyword\">if</span> DEBUG <span class=\"keyword\">else</span> <span class=\"string\">'INFO'</span>, </span><br><span class=\"line\">\t\t\t&#125;, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'err'</span>: &#123; </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'class'</span>: <span class=\"string\">'logging.handlers.TimedRotatingFileHandler'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'filename'</span>: <span class=\"string\">'/data/web/gnt.err'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'when'</span>: <span class=\"string\">'D'</span>, <span class=\"comment\"># æ¯å¤©åˆ‡å‰²æ—¥å¿— 'backupCount': 5, </span></span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'formatter'</span>: <span class=\"string\">'verbose'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'WARNING'</span>, </span><br><span class=\"line\">\t\t\t\t&#125; </span><br><span class=\"line\">\t\t\t&#125;, </span><br><span class=\"line\">\t\t<span class=\"string\">'loggers'</span>: &#123; </span><br><span class=\"line\">\t\t\t<span class=\"string\">'inf'</span>: &#123; </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'handlers'</span>: [<span class=\"string\">'inf'</span>], </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'DEBUG'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'propagate'</span>: <span class=\"literal\">True</span>, </span><br><span class=\"line\">\t\t\t\t&#125;, </span><br><span class=\"line\">\t\t\t<span class=\"string\">'err'</span>: &#123; </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'handlers'</span>: [<span class=\"string\">'err'</span>], </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'level'</span>: <span class=\"string\">'DEBUG'</span>, </span><br><span class=\"line\">\t\t\t\t<span class=\"string\">'propagate'</span>: <span class=\"literal\">True</span>, </span><br><span class=\"line\">\t\t\t\t&#125; </span><br><span class=\"line\">\t\t\t&#125; </span><br><span class=\"line\">\t\t&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„è£…é¥°å™¨</p>\n<hr>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">statistic</span><span class=\"params\">(view_func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrap</span><span class=\"params\">(request.*args,**kwargs)</span>:</span></span><br><span class=\"line\">        ip = request.META[<span class=\"string\">'REMOTE_ADDR'</span>]</span><br><span class=\"line\">        aid = int(request.GET.get(<span class=\"string\">'aid'</span>,<span class=\"number\">0</span>))</span><br><span class=\"line\">        logger.info(<span class=\"string\">f'<span class=\"subst\">&#123;ip&#125;</span>  <span class=\"subst\">&#123;aid&#125;</span>'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> view_func(request,*args,**kwargs)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrap</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n<ol start=\"9\">\n<li><p><strong>Django çš„æ€§èƒ½</strong></p>\n<p> <strong>Django è‡ªèº«ä¼˜åŒ–</strong> </p>\n<p>â€‹    <code>å……åˆ†ä¹‹ç”¨ç¼“å­˜</code></p>\n<p>â€‹    <code>æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£ï¨¸</code></p>\n<p>â€‹    <code>å°½ï¥¾ä½¿ç”¨ defer() å’Œ only() æŸ¥æ‰¾</code></p>\n<p>â€‹    <code>å°½ï¥¾ä½¿ç”¨ count() å’Œ exists()</code></p>\n<p>â€‹    æ¨¡æ¿ä¸­<code>{</code>% block %<code>}</code>æ€§èƒ½ä¼˜äº<code>{</code>% include %<code>}</code></p>\n<p>â€‹    <code>å¼€å¯æ¨¡æ¿ç¼“å­˜</code></p>\n<p>â€‹    <code>ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼ï¥§è¦ä½¿ç”¨å¤–é”®ï¼</code></p>\n<p><strong>å…¶ä»–ä¼˜åŒ–</strong> </p>\n<p>â€‹    <strong>I/O å¯†é›†å‹: å¼‚æ­¥åŒ–</strong> </p>\n<p>â€‹        è¯·æ±‚å¼‚æ­¥åŒ– </p>\n<p>â€‹        æ•°æ®æ“ä½œå¼‚æ­¥åŒ– </p>\n<p>â€‹        gevent, asyncio, aiopg, aiohttp, tornado </p>\n<p>â€‹    <strong>è®¡ç®—å¯†é›†å‹</strong> </p>\n<p>â€‹        è€—æ—¶æ“ä½œç”¨ Celery ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ </p>\n<p>â€‹    <strong>åˆ†åº“åˆ†è¡¨</strong> </p>\n<p>â€‹        å–ä½™ã€å“ˆå¸Œ </p>\n<p>â€‹        èŒƒå›´ </p>\n<p>â€‹        ä¸€è‡´æ€§å“ˆå¸Œ </p>\n<p>â€‹    <strong>ç´¢å¼•ä¼˜åŒ–</strong> </p>\n<p>â€‹    æ…¢æŸ¥è¯¢ä¼˜åŒ– (ç›¸å…³å·¥å…·: DjangoDebugToolbar) </p>\n<p>â€‹    Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼ï§ç”¨å¤šæ ¸ </p>\n<p>â€‹    PyPy </p>\n<p>â€‹    Cython</p>\n</li>\n</ol>\n<hr>\n<h3 id=\"å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\"><a href=\"#å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\" class=\"headerlink\" title=\"å¼‚æ­¥è°ƒç”¨ä»»åŠ¡\"></a>å¼‚æ­¥è°ƒç”¨ä»»åŠ¡</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> update_wrapper</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">async_call</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">'''å¼‚æ­¥è°ƒç”¨ä»»åŠ¡'''</span></span><br><span class=\"line\">    func.trace_err =trace_err</span><br><span class=\"line\">    func.trace_info = <span class=\"string\">'%s.%s'</span>%(trace_code(<span class=\"number\">2</span>),func.func_name)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrapper</span><span class=\"params\">(*args,**kwargs)</span></span></span><br><span class=\"line\"><span class=\"function\">    \t<span class=\"title\">global</span> <span class=\"title\">main_thread</span></span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"title\">try</span>:</span></span><br><span class=\"line\">            main_thread.MMQ.submit(func,*args,**kwargs)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> AttributeError:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> func(*args,**kwargs)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> update_wrapper(wrapper,func)</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ç”Ÿæˆå™¨\"><a href=\"#ç”Ÿæˆå™¨\" class=\"headerlink\" title=\"ç”Ÿæˆå™¨\"></a>ç”Ÿæˆå™¨</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#ç”Ÿæˆå™¨  ä½¿ç”¨nextè°ƒç”¨</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">foo</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>):</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> i </span><br><span class=\"line\">x = foo()</span><br><span class=\"line\">next(x)</span><br><span class=\"line\"><span class=\"comment\">#æƒ°æ€§æ±‚å€¼,å å†…å­˜å°  ----python2ä¸­çš„xrangeç±»ä¼¼</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¿­ä»£å™¨\"><a href=\"#è¿­ä»£å™¨\" class=\"headerlink\" title=\"è¿­ä»£å™¨\"></a>è¿­ä»£å™¨</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Iter</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__next__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">o =Iter()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Iter</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.v = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__next__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.v +=<span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.v   <span class=\"comment\">#è¿­ä»£çš„è§„åˆ™å†™åœ¨nextæ–¹æ³•</span></span><br></pre></td></tr></table></figure>\n\n"},{"title":"windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨","urlname":"xiyh9t","date":"2020-05-10T11:42:05.000Z","_content":"\n---\n\n\n\ntitle: tornadå¯åŠ¨django\n\ndate: 2019-04-24 16:10:15\n\ntags:\n\n\n- django\n\ncategories:\n- python\n- æœåŠ¡\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\nç”±äº windows ä¸æ”¯æŒ gunicorn,uwsgi ç­‰é«˜æ€§èƒ½çš„ server,ä½¿ç”¨ Apache + mod_uwsgi æˆ‘è§‰å¾—æœ‰ç‚¹éº»çƒ¦,å°±æƒ³ç”¨ tornado æ¥ä½œä¸º django çš„ http server..\n\n**tornado æ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒæ—¶ WSGI åº”ç”¨åˆæ˜¯åŒæ­¥çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Tornado å¯åŠ¨ WSGI åº”ç”¨ï¼Œç†è®ºä¸Šæ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚éƒ½æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªè¯·æ±‚æœ‰é˜»å¡ï¼Œéƒ½ä¼šå¯¼è‡´ tornado çš„æ•´ä¸ª IOLOOP é˜»å¡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åŒæ—¶å‘å‡ºä¸¤ä¸ª GET è¯·æ±‚å‘[http://127.0.0.1:5000/](http://127.0.0.1:5000/)**\n\n**ä¼šå‘ç°ç¬¬ä¸€ä¸ªå‘å‡ºçš„è¯·æ±‚ä¼šåœ¨å¤§çº¦ 5s ä¹‹åè¿”å›ï¼Œè€Œå¦ä¸€ä¸ªè¯·æ±‚ä¼šåœ¨ 10s å·¦å³è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚**\n\n```python\nfrom tornado.wsgi import WSGIContainer\nfrom tornado.httpserver import HTTPServer\nfrom tornado.ioloop import IOLoop\nfrom flask import Flask\nimport time\n\n\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    time.sleep(5)\n    return 'OK'\n\n\nif __name__ == '__main__':\n    http_server = HTTPServer(WSGIContainer(app))\n    http_server.listen(5000)\n    IOLoop.instance().start()\n```\n\n**æˆ‘ä»¬çŸ¥é“ï¼Œtornado å®ç°å¼‚æ­¥è¿è¡ŒåŒæ­¥å‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨çº¿ç¨‹æ¥è¿è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š**\n\n> å‡ ä¹åŒæ—¶è¿”å›ç»“æœ,å¹¶å‘æ‰§è¡Œäº†\n\n```python\nimport tornado.web\nimport tornado.ioloop\nimport time\nimport tornado\n\nclass IndexHandler(tornado.web.RequestHandler):\n    \"\"\"ä¸»è·¯ç”±å¤„ç†ç±»\"\"\"\n    @tornado.gen.coroutine\n    def get(self):\n        \"\"\"å¯¹åº”httpçš„getè¯·æ±‚æ–¹å¼\"\"\"\n        loop = tornado.ioloop.IOLoop.instance()\n        yield loop.run_in_executor(None,self.sleep)\n        self.write(\"Hello You!\")\n\n    def sleep(self):\n        time.sleep(5)\n        self.write('sleep OK')\n\n\nif __name__ == \"__main__\":\n    app = tornado.web.Application([\n        (r\"/\", IndexHandler),\n    ])\n    app.listen(8000)\n    tornado.ioloop.IOLoop.current().start()\n```\n\n**å¯¹äºè¿™ç§ï¼ˆä½¿ç”¨ tornado è¿è¡Œ Flask çš„æƒ…å†µï¼‰æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•åšå‘¢ï¼ŒæŸ¥çœ‹ Â WSGIContainer çš„ä»£ç æˆ‘ä»¬å‘ç°**\n\n```python\nclass WSGIContainer(object):\n\n    def __init__(self, wsgi_application):\n        self.wsgi_application = wsgi_application\n\n    def __call__(self, request):\n        data = {}\n        response = []\n\n        def start_response(status, response_headers, exc_info=None):\n            data[\"status\"] = status\n            data[\"headers\"] = response_headers\n            return response.append\n        # wsgiè¿”å›responseéƒ¨åˆ†\n        app_response = self.wsgi_application(\n            WSGIContainer.environ(request), start_response)\n        try:\n            response.extend(app_response)\n            body = b\"\".join(response)\n        finally:\n            if hasattr(app_response, \"close\"):\n                app_response.close()\n        if not data:\n            raise Exception(\"WSGI app did not call start_response\")\n\n        status_code, reason = data[\"status\"].split(' ', 1)\n        status_code = int(status_code)\n        headers = data[\"headers\"]\n        header_set = set(k.lower() for (k, v) in headers)\n        body = escape.utf8(body)\n        if status_code != 304:\n            if \"content-length\" not in header_set:\n                headers.append((\"Content-Length\", str(len(body))))\n            if \"content-type\" not in header_set:\n                headers.append((\"Content-Type\", \"text/html; charset=UTF-8\"))\n        if \"server\" not in header_set:\n            headers.append((\"Server\", \"TornadoServer/%s\" % tornado.version))\n\n        start_line = httputil.ResponseStartLine(\"HTTP/1.1\", status_code, reason)\n        header_obj = httputil.HTTPHeaders()\n        for key, value in headers:\n            header_obj.add(key, value)\n        request.connection.write_headers(start_line, header_obj, chunk=body)\n        request.connection.finish()\n        self._log(status_code, request)\n```\n\nåªéœ€é‡æ–°æ–¹æ³•å°†è¿™éƒ¨åˆ†ä»£ç å˜æˆå¼‚æ­¥å³å¯,ä»£ç å¦‚ä¸‹:\n\nloop.run_in_executor çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ºä¸€ä¸ª ThreadPoolExecutor å¯¹è±¡\n\n```python\nfrom flask import Flask\nimport time\nfrom tornado.wsgi import WSGIContainer\nfrom tornado.httpserver import HTTPServer\nfrom tornado.ioloop import IOLoop\n\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    time.sleep(5)\n    return 'OK'\n\n\nimport tornado\nfrom tornado import escape\nfrom tornado import httputil\nfrom typing import List, Tuple, Optional, Callable, Any, Dict\nfrom types import TracebackType\n\n\nclass WSGIContainer_With_Thread(WSGIContainer):\n    @tornado.gen.coroutine\n    def __call__(self, request):\n        data = {}  # type: Dict[str, Any]\n        response = []  # type: List[bytes]\n\n        def start_response(\n                status: str,\n                headers: List[Tuple[str, str]],\n                exc_info: Optional[\n                    Tuple[\n                        \"Optional[Type[BaseException]]\",\n                        Optional[BaseException],\n                        Optional[TracebackType],\n                    ]\n                ] = None,\n        ) -> Callable[[bytes], Any]:\n            data[\"status\"] = status\n            data[\"headers\"] = headers\n            return response.append\n\n        loop = tornado.ioloop.IOLoop.instance()\n        app_response = yield loop.run_in_executor(None, self.wsgi_application, WSGIContainer.environ(request),\n                                                  start_response)\n        # app_response = self.wsgi_application(\n        #     WSGIContainer.environ(request), start_response\n        # )\n        try:\n            response.extend(app_response)\n            body = b\"\".join(response)\n        finally:\n            if hasattr(app_response, \"close\"):\n                app_response.close()  # type: ignore\n        if not data:\n            raise Exception(\"WSGI app did not call start_response\")\n\n        status_code_str, reason = data[\"status\"].split(\" \", 1)\n        status_code = int(status_code_str)\n        headers = data[\"headers\"]  # type: List[Tuple[str, str]]\n        header_set = set(k.lower() for (k, v) in headers)\n        body = escape.utf8(body)\n        if status_code != 304:\n            if \"content-length\" not in header_set:\n                headers.append((\"Content-Length\", str(len(body))))\n            if \"content-type\" not in header_set:\n                headers.append((\"Content-Type\", \"text/html; charset=UTF-8\"))\n        if \"server\" not in header_set:\n            headers.append((\"Server\", \"TornadoServer/%s\" % tornado.version))\n\n        start_line = httputil.ResponseStartLine(\"HTTP/1.1\", status_code, reason)\n        header_obj = httputil.HTTPHeaders()\n        for key, value in headers:\n            header_obj.add(key, value)\n        assert request.connection is not None\n        request.connection.write_headers(start_line, header_obj, chunk=body)\n        request.connection.finish()\n        self._log(status_code, request)\n\n\nif __name__ == '__main__':\n    http_server = HTTPServer(WSGIContainer_With_Thread(app))\n    http_server.listen(5000)\n    IOLoop.instance().start()\n```\n\n> æµ‹è¯•æ‰§è¡Œç»“æœ,å‡ ä¹åŒæ—¶è¿”å›äº† OK,ä¸æ˜¯é¡ºåºæ‰§è¡Œäº†\n\n**æ³¨æ„ï¼š**\n\n1 ã€è¿™ç§æ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰æé«˜æ€§èƒ½ï¼Œè¯´åˆ°åº•è¿˜æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹æ¥è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¨èå¦‚æœä½¿ç”¨ tornado è¿˜æ˜¯å’Œ tornado çš„ web æ¡†æ¶è”åˆèµ·æ¥å†™å‡ºçœŸæ­£çš„å¼‚æ­¥ä»£ç ï¼Œè¿™æ ·æ‰ä¼šè¾¾åˆ° tornado å¼‚æ­¥ IO çš„é«˜æ€§èƒ½ç›®çš„ã€‚æˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯è®© tornado æ›¿ä»£ django å¼€å‘æœåŠ¡å™¨çš„ä½æ€§èƒ½è€Œå·².\\*\\*\n\n- è®© tornado å–ä»£ django çš„å¼€å‘æœåŠ¡\n\nåœ¨é¡¹ç›®çš„æ ¹è·¯å¾„æ–°å¢ä¸€ä¸ª `tornado_server.py`Â  çš„æ–‡ä»¶,ä»£ç å¦‚ä¸‹:\n\n```python\nimport os\nimport sys\n\nfrom django.core.wsgi import get_wsgi_application\nfrom tornado.options import options, define, parse_command_line\n\nimport tornado.httpserver\nimport tornado.ioloop\nimport tornado.web\nimport tornado.wsgi\n\nfrom tornado import escape, httputil\nfrom typing import List, Tuple, Optional, Callable, Any, Dict\nfrom types import TracebackType\nfrom tornado.wsgi import WSGIContainer\n\nsys.path.append(os.path.dirname(os.path.abspath(__file__)))\nos.environ['DJANGO_SETTINGS_MODULE'] = 'datapower.settings'\n\nsetting = {\n    'template_path': os.path.join(os.path.dirname(__file__), 'templates'),\n    'static_path': os.path.join(os.path.dirname(__file__), 'static'),\n    'debug': False\n}\n\n\ndefine('port', type=int, default=8000)\n\n\nclass WSGIContainer_With_Thread(WSGIContainer):\n    @tornado.gen.coroutine\n    def __call__(self, request):\n        data = {}  # type: Dict[str, Any]\n        response = []  # type: List[bytes]\n\n        def start_response(\n                status: str,\n                headers: List[Tuple[str, str]],\n                exc_info: Optional[\n                    Tuple[\n                        \"Optional[Type[BaseException]]\",\n                        Optional[BaseException],\n                        Optional[TracebackType],\n                    ]\n                ] = None,\n        ) -> Callable[[bytes], Any]:\n            data[\"status\"] = status\n            data[\"headers\"] = headers\n            return response.append\n\n        loop = tornado.ioloop.IOLoop.instance()\n        app_response = yield loop.run_in_executor(None, self.wsgi_application, WSGIContainer.environ(request),\n                                                  start_response)\n        # app_response = self.wsgi_application(\n        #     WSGIContainer.environ(request), start_response\n        # )\n        try:\n            response.extend(app_response)\n            body = b\"\".join(response)\n        finally:\n            if hasattr(app_response, \"close\"):\n                app_response.close()  # type: ignore\n        if not data:\n            raise Exception(\"WSGI app did not call start_response\")\n\n        status_code_str, reason = data[\"status\"].split(\" \", 1)\n        status_code = int(status_code_str)\n        headers = data[\"headers\"]  # type: List[Tuple[str, str]]\n        header_set = set(k.lower() for (k, v) in headers)\n        body = escape.utf8(body)\n        if status_code != 304:\n            if \"content-length\" not in header_set:\n                headers.append((\"Content-Length\", str(len(body))))\n            if \"content-type\" not in header_set:\n                headers.append((\"Content-Type\", \"text/html; charset=UTF-8\"))\n        if \"server\" not in header_set:\n            headers.append((\"Server\", \"TornadoServer/%s\" % tornado.version))\n\n        start_line = httputil.ResponseStartLine(\n            \"HTTP/1.1\", status_code, reason)\n        header_obj = httputil.HTTPHeaders()\n        for key, value in headers:\n            header_obj.add(key, value)\n        assert request.connection is not None\n        request.connection.write_headers(start_line, header_obj, chunk=body)\n        request.connection.finish()\n        self._log(status_code, request)\n\n\ndef main():\n    parse_command_line()\n    wsgi_app = WSGIContainer_With_Thread(get_wsgi_application())\n    tornado_app = tornado.web.Application(\n        [\n            ('.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),\n            # è™½ç„¶djangoè®¾ç½®äº†staticæ–‡ä»¶è®¿é—®æ¥å£, è¿™æ˜¯è²Œä¼¼å–ä¸åˆ°,é˜²æ­¢å‰ç«¯å‡ºç°æ ·å¼ä¸¢å¤±è¿™é‡Œå°±å¢åŠ ä¸€ä¸ªé™æ€æ–‡ä»¶è®¿é—®æ¥å£\n            ('/static/(.*)', tornado.web.StaticFileHandler,\n             dict(path=os.path.join(os.path.dirname(__file__), 'static')))\n\n        ], **setting\n    )\n    server = tornado.httpserver.HTTPServer(tornado_app)\n    server.listen(options.port)\n    tornado.ioloop.IOLoop.instance.start()\n\n\nif __name__ == '__main__':\n    main()\n```\n\næ–‡ç« å‚è€ƒ:\n\n[https://www.cnblogs.com/lycsdhr/p/11123545.html](https://www.cnblogs.com/lycsdhr/p/11123545.html)\n\n[https://www.cnblogs.com/ExMan/p/9506012.html](https://www.cnblogs.com/ExMan/p/9506012.html)\n\n[https://www.cnblogs.com/baolong/p/6769237.html](https://www.cnblogs.com/baolong/p/6769237.html)\n","source":"_posts/windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨.md","raw":"---\ntitle: windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨\nurlname: xiyh9t\ndate: 2020-05-10 19:42:05 +0800\ntags: []\ncategories: []\n---\n\n---\n\n\n\ntitle: tornadå¯åŠ¨django\n\ndate: 2019-04-24 16:10:15\n\ntags:\n\n\n- django\n\ncategories:\n- python\n- æœåŠ¡\n\nkeywords:\n\ndescription:\n\ntop_img:\n\ncommentsï¼š\n\ncover:\n\ntoc:\n\ntoc_number:\n\ncopyright:\n\nmathjax:\n\nkatex:\n\n---\n\nç”±äº windows ä¸æ”¯æŒ gunicorn,uwsgi ç­‰é«˜æ€§èƒ½çš„ server,ä½¿ç”¨ Apache + mod_uwsgi æˆ‘è§‰å¾—æœ‰ç‚¹éº»çƒ¦,å°±æƒ³ç”¨ tornado æ¥ä½œä¸º django çš„ http server..\n\n**tornado æ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒæ—¶ WSGI åº”ç”¨åˆæ˜¯åŒæ­¥çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Tornado å¯åŠ¨ WSGI åº”ç”¨ï¼Œç†è®ºä¸Šæ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚éƒ½æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªè¯·æ±‚æœ‰é˜»å¡ï¼Œéƒ½ä¼šå¯¼è‡´ tornado çš„æ•´ä¸ª IOLOOP é˜»å¡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åŒæ—¶å‘å‡ºä¸¤ä¸ª GET è¯·æ±‚å‘[http://127.0.0.1:5000/](http://127.0.0.1:5000/)**\n\n**ä¼šå‘ç°ç¬¬ä¸€ä¸ªå‘å‡ºçš„è¯·æ±‚ä¼šåœ¨å¤§çº¦ 5s ä¹‹åè¿”å›ï¼Œè€Œå¦ä¸€ä¸ªè¯·æ±‚ä¼šåœ¨ 10s å·¦å³è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚**\n\n```python\nfrom tornado.wsgi import WSGIContainer\nfrom tornado.httpserver import HTTPServer\nfrom tornado.ioloop import IOLoop\nfrom flask import Flask\nimport time\n\n\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    time.sleep(5)\n    return 'OK'\n\n\nif __name__ == '__main__':\n    http_server = HTTPServer(WSGIContainer(app))\n    http_server.listen(5000)\n    IOLoop.instance().start()\n```\n\n**æˆ‘ä»¬çŸ¥é“ï¼Œtornado å®ç°å¼‚æ­¥è¿è¡ŒåŒæ­¥å‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨çº¿ç¨‹æ¥è¿è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š**\n\n> å‡ ä¹åŒæ—¶è¿”å›ç»“æœ,å¹¶å‘æ‰§è¡Œäº†\n\n```python\nimport tornado.web\nimport tornado.ioloop\nimport time\nimport tornado\n\nclass IndexHandler(tornado.web.RequestHandler):\n    \"\"\"ä¸»è·¯ç”±å¤„ç†ç±»\"\"\"\n    @tornado.gen.coroutine\n    def get(self):\n        \"\"\"å¯¹åº”httpçš„getè¯·æ±‚æ–¹å¼\"\"\"\n        loop = tornado.ioloop.IOLoop.instance()\n        yield loop.run_in_executor(None,self.sleep)\n        self.write(\"Hello You!\")\n\n    def sleep(self):\n        time.sleep(5)\n        self.write('sleep OK')\n\n\nif __name__ == \"__main__\":\n    app = tornado.web.Application([\n        (r\"/\", IndexHandler),\n    ])\n    app.listen(8000)\n    tornado.ioloop.IOLoop.current().start()\n```\n\n**å¯¹äºè¿™ç§ï¼ˆä½¿ç”¨ tornado è¿è¡Œ Flask çš„æƒ…å†µï¼‰æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•åšå‘¢ï¼ŒæŸ¥çœ‹ Â WSGIContainer çš„ä»£ç æˆ‘ä»¬å‘ç°**\n\n```python\nclass WSGIContainer(object):\n\n    def __init__(self, wsgi_application):\n        self.wsgi_application = wsgi_application\n\n    def __call__(self, request):\n        data = {}\n        response = []\n\n        def start_response(status, response_headers, exc_info=None):\n            data[\"status\"] = status\n            data[\"headers\"] = response_headers\n            return response.append\n        # wsgiè¿”å›responseéƒ¨åˆ†\n        app_response = self.wsgi_application(\n            WSGIContainer.environ(request), start_response)\n        try:\n            response.extend(app_response)\n            body = b\"\".join(response)\n        finally:\n            if hasattr(app_response, \"close\"):\n                app_response.close()\n        if not data:\n            raise Exception(\"WSGI app did not call start_response\")\n\n        status_code, reason = data[\"status\"].split(' ', 1)\n        status_code = int(status_code)\n        headers = data[\"headers\"]\n        header_set = set(k.lower() for (k, v) in headers)\n        body = escape.utf8(body)\n        if status_code != 304:\n            if \"content-length\" not in header_set:\n                headers.append((\"Content-Length\", str(len(body))))\n            if \"content-type\" not in header_set:\n                headers.append((\"Content-Type\", \"text/html; charset=UTF-8\"))\n        if \"server\" not in header_set:\n            headers.append((\"Server\", \"TornadoServer/%s\" % tornado.version))\n\n        start_line = httputil.ResponseStartLine(\"HTTP/1.1\", status_code, reason)\n        header_obj = httputil.HTTPHeaders()\n        for key, value in headers:\n            header_obj.add(key, value)\n        request.connection.write_headers(start_line, header_obj, chunk=body)\n        request.connection.finish()\n        self._log(status_code, request)\n```\n\nåªéœ€é‡æ–°æ–¹æ³•å°†è¿™éƒ¨åˆ†ä»£ç å˜æˆå¼‚æ­¥å³å¯,ä»£ç å¦‚ä¸‹:\n\nloop.run_in_executor çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ºä¸€ä¸ª ThreadPoolExecutor å¯¹è±¡\n\n```python\nfrom flask import Flask\nimport time\nfrom tornado.wsgi import WSGIContainer\nfrom tornado.httpserver import HTTPServer\nfrom tornado.ioloop import IOLoop\n\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    time.sleep(5)\n    return 'OK'\n\n\nimport tornado\nfrom tornado import escape\nfrom tornado import httputil\nfrom typing import List, Tuple, Optional, Callable, Any, Dict\nfrom types import TracebackType\n\n\nclass WSGIContainer_With_Thread(WSGIContainer):\n    @tornado.gen.coroutine\n    def __call__(self, request):\n        data = {}  # type: Dict[str, Any]\n        response = []  # type: List[bytes]\n\n        def start_response(\n                status: str,\n                headers: List[Tuple[str, str]],\n                exc_info: Optional[\n                    Tuple[\n                        \"Optional[Type[BaseException]]\",\n                        Optional[BaseException],\n                        Optional[TracebackType],\n                    ]\n                ] = None,\n        ) -> Callable[[bytes], Any]:\n            data[\"status\"] = status\n            data[\"headers\"] = headers\n            return response.append\n\n        loop = tornado.ioloop.IOLoop.instance()\n        app_response = yield loop.run_in_executor(None, self.wsgi_application, WSGIContainer.environ(request),\n                                                  start_response)\n        # app_response = self.wsgi_application(\n        #     WSGIContainer.environ(request), start_response\n        # )\n        try:\n            response.extend(app_response)\n            body = b\"\".join(response)\n        finally:\n            if hasattr(app_response, \"close\"):\n                app_response.close()  # type: ignore\n        if not data:\n            raise Exception(\"WSGI app did not call start_response\")\n\n        status_code_str, reason = data[\"status\"].split(\" \", 1)\n        status_code = int(status_code_str)\n        headers = data[\"headers\"]  # type: List[Tuple[str, str]]\n        header_set = set(k.lower() for (k, v) in headers)\n        body = escape.utf8(body)\n        if status_code != 304:\n            if \"content-length\" not in header_set:\n                headers.append((\"Content-Length\", str(len(body))))\n            if \"content-type\" not in header_set:\n                headers.append((\"Content-Type\", \"text/html; charset=UTF-8\"))\n        if \"server\" not in header_set:\n            headers.append((\"Server\", \"TornadoServer/%s\" % tornado.version))\n\n        start_line = httputil.ResponseStartLine(\"HTTP/1.1\", status_code, reason)\n        header_obj = httputil.HTTPHeaders()\n        for key, value in headers:\n            header_obj.add(key, value)\n        assert request.connection is not None\n        request.connection.write_headers(start_line, header_obj, chunk=body)\n        request.connection.finish()\n        self._log(status_code, request)\n\n\nif __name__ == '__main__':\n    http_server = HTTPServer(WSGIContainer_With_Thread(app))\n    http_server.listen(5000)\n    IOLoop.instance().start()\n```\n\n> æµ‹è¯•æ‰§è¡Œç»“æœ,å‡ ä¹åŒæ—¶è¿”å›äº† OK,ä¸æ˜¯é¡ºåºæ‰§è¡Œäº†\n\n**æ³¨æ„ï¼š**\n\n1 ã€è¿™ç§æ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰æé«˜æ€§èƒ½ï¼Œè¯´åˆ°åº•è¿˜æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹æ¥è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¨èå¦‚æœä½¿ç”¨ tornado è¿˜æ˜¯å’Œ tornado çš„ web æ¡†æ¶è”åˆèµ·æ¥å†™å‡ºçœŸæ­£çš„å¼‚æ­¥ä»£ç ï¼Œè¿™æ ·æ‰ä¼šè¾¾åˆ° tornado å¼‚æ­¥ IO çš„é«˜æ€§èƒ½ç›®çš„ã€‚æˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯è®© tornado æ›¿ä»£ django å¼€å‘æœåŠ¡å™¨çš„ä½æ€§èƒ½è€Œå·².\\*\\*\n\n- è®© tornado å–ä»£ django çš„å¼€å‘æœåŠ¡\n\nåœ¨é¡¹ç›®çš„æ ¹è·¯å¾„æ–°å¢ä¸€ä¸ª `tornado_server.py`Â  çš„æ–‡ä»¶,ä»£ç å¦‚ä¸‹:\n\n```python\nimport os\nimport sys\n\nfrom django.core.wsgi import get_wsgi_application\nfrom tornado.options import options, define, parse_command_line\n\nimport tornado.httpserver\nimport tornado.ioloop\nimport tornado.web\nimport tornado.wsgi\n\nfrom tornado import escape, httputil\nfrom typing import List, Tuple, Optional, Callable, Any, Dict\nfrom types import TracebackType\nfrom tornado.wsgi import WSGIContainer\n\nsys.path.append(os.path.dirname(os.path.abspath(__file__)))\nos.environ['DJANGO_SETTINGS_MODULE'] = 'datapower.settings'\n\nsetting = {\n    'template_path': os.path.join(os.path.dirname(__file__), 'templates'),\n    'static_path': os.path.join(os.path.dirname(__file__), 'static'),\n    'debug': False\n}\n\n\ndefine('port', type=int, default=8000)\n\n\nclass WSGIContainer_With_Thread(WSGIContainer):\n    @tornado.gen.coroutine\n    def __call__(self, request):\n        data = {}  # type: Dict[str, Any]\n        response = []  # type: List[bytes]\n\n        def start_response(\n                status: str,\n                headers: List[Tuple[str, str]],\n                exc_info: Optional[\n                    Tuple[\n                        \"Optional[Type[BaseException]]\",\n                        Optional[BaseException],\n                        Optional[TracebackType],\n                    ]\n                ] = None,\n        ) -> Callable[[bytes], Any]:\n            data[\"status\"] = status\n            data[\"headers\"] = headers\n            return response.append\n\n        loop = tornado.ioloop.IOLoop.instance()\n        app_response = yield loop.run_in_executor(None, self.wsgi_application, WSGIContainer.environ(request),\n                                                  start_response)\n        # app_response = self.wsgi_application(\n        #     WSGIContainer.environ(request), start_response\n        # )\n        try:\n            response.extend(app_response)\n            body = b\"\".join(response)\n        finally:\n            if hasattr(app_response, \"close\"):\n                app_response.close()  # type: ignore\n        if not data:\n            raise Exception(\"WSGI app did not call start_response\")\n\n        status_code_str, reason = data[\"status\"].split(\" \", 1)\n        status_code = int(status_code_str)\n        headers = data[\"headers\"]  # type: List[Tuple[str, str]]\n        header_set = set(k.lower() for (k, v) in headers)\n        body = escape.utf8(body)\n        if status_code != 304:\n            if \"content-length\" not in header_set:\n                headers.append((\"Content-Length\", str(len(body))))\n            if \"content-type\" not in header_set:\n                headers.append((\"Content-Type\", \"text/html; charset=UTF-8\"))\n        if \"server\" not in header_set:\n            headers.append((\"Server\", \"TornadoServer/%s\" % tornado.version))\n\n        start_line = httputil.ResponseStartLine(\n            \"HTTP/1.1\", status_code, reason)\n        header_obj = httputil.HTTPHeaders()\n        for key, value in headers:\n            header_obj.add(key, value)\n        assert request.connection is not None\n        request.connection.write_headers(start_line, header_obj, chunk=body)\n        request.connection.finish()\n        self._log(status_code, request)\n\n\ndef main():\n    parse_command_line()\n    wsgi_app = WSGIContainer_With_Thread(get_wsgi_application())\n    tornado_app = tornado.web.Application(\n        [\n            ('.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),\n            # è™½ç„¶djangoè®¾ç½®äº†staticæ–‡ä»¶è®¿é—®æ¥å£, è¿™æ˜¯è²Œä¼¼å–ä¸åˆ°,é˜²æ­¢å‰ç«¯å‡ºç°æ ·å¼ä¸¢å¤±è¿™é‡Œå°±å¢åŠ ä¸€ä¸ªé™æ€æ–‡ä»¶è®¿é—®æ¥å£\n            ('/static/(.*)', tornado.web.StaticFileHandler,\n             dict(path=os.path.join(os.path.dirname(__file__), 'static')))\n\n        ], **setting\n    )\n    server = tornado.httpserver.HTTPServer(tornado_app)\n    server.listen(options.port)\n    tornado.ioloop.IOLoop.instance.start()\n\n\nif __name__ == '__main__':\n    main()\n```\n\næ–‡ç« å‚è€ƒ:\n\n[https://www.cnblogs.com/lycsdhr/p/11123545.html](https://www.cnblogs.com/lycsdhr/p/11123545.html)\n\n[https://www.cnblogs.com/ExMan/p/9506012.html](https://www.cnblogs.com/ExMan/p/9506012.html)\n\n[https://www.cnblogs.com/baolong/p/6769237.html](https://www.cnblogs.com/baolong/p/6769237.html)\n","slug":"windowsä½¿ç”¨tornadoå¯åŠ¨djangoåº”ç”¨","published":1,"updated":"2020-05-10T12:00:06.832Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109hnd001j3kzjhdvuewof","content":"<hr>\n<p>title: tornadå¯åŠ¨django</p>\n<p>date: 2019-04-24 16:10:15</p>\n<p>tags:</p>\n<ul>\n<li>django</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>python</li>\n<li>æœåŠ¡</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<p>ç”±äº windows ä¸æ”¯æŒ gunicorn,uwsgi ç­‰é«˜æ€§èƒ½çš„ server,ä½¿ç”¨ Apache + mod_uwsgi æˆ‘è§‰å¾—æœ‰ç‚¹éº»çƒ¦,å°±æƒ³ç”¨ tornado æ¥ä½œä¸º django çš„ http server..</p>\n<p><strong>tornado æ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒæ—¶ WSGI åº”ç”¨åˆæ˜¯åŒæ­¥çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Tornado å¯åŠ¨ WSGI åº”ç”¨ï¼Œç†è®ºä¸Šæ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚éƒ½æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªè¯·æ±‚æœ‰é˜»å¡ï¼Œéƒ½ä¼šå¯¼è‡´ tornado çš„æ•´ä¸ª IOLOOP é˜»å¡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åŒæ—¶å‘å‡ºä¸¤ä¸ª GET è¯·æ±‚å‘<a href=\"http://127.0.0.1:5000/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:5000/</a></strong></p>\n<p><strong>ä¼šå‘ç°ç¬¬ä¸€ä¸ªå‘å‡ºçš„è¯·æ±‚ä¼šåœ¨å¤§çº¦ 5s ä¹‹åè¿”å›ï¼Œè€Œå¦ä¸€ä¸ªè¯·æ±‚ä¼šåœ¨ 10s å·¦å³è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚</strong></p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> tornado.wsgi <span class=\"keyword\">import</span> WSGIContainer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.httpserver <span class=\"keyword\">import</span> HTTPServer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.ioloop <span class=\"keyword\">import</span> IOLoop</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route('/')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'OK'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    http_server = HTTPServer(WSGIContainer(app))</span><br><span class=\"line\">    http_server.listen(<span class=\"number\">5000</span>)</span><br><span class=\"line\">    IOLoop.instance().start()</span><br></pre></td></tr></tbody></table></figure>\n\n<p><strong>æˆ‘ä»¬çŸ¥é“ï¼Œtornado å®ç°å¼‚æ­¥è¿è¡ŒåŒæ­¥å‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨çº¿ç¨‹æ¥è¿è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>\n<blockquote>\n<p>å‡ ä¹åŒæ—¶è¿”å›ç»“æœ,å¹¶å‘æ‰§è¡Œäº†</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> tornado.web</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.ioloop</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IndexHandler</span><span class=\"params\">(tornado.web.RequestHandler)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"ä¸»è·¯ç”±å¤„ç†ç±»\"\"\"</span></span><br><span class=\"line\"><span class=\"meta\">    @tornado.gen.coroutine</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"å¯¹åº”httpçš„getè¯·æ±‚æ–¹å¼\"\"\"</span></span><br><span class=\"line\">        loop = tornado.ioloop.IOLoop.instance()</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> loop.run_in_executor(<span class=\"literal\">None</span>,self.sleep)</span><br><span class=\"line\">        self.write(<span class=\"string\">\"Hello You!\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sleep</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">        self.write(<span class=\"string\">'sleep OK'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    app = tornado.web.Application([</span><br><span class=\"line\">        (<span class=\"string\">r\"/\"</span>, IndexHandler),</span><br><span class=\"line\">    ])</span><br><span class=\"line\">    app.listen(<span class=\"number\">8000</span>)</span><br><span class=\"line\">    tornado.ioloop.IOLoop.current().start()</span><br></pre></td></tr></tbody></table></figure>\n\n<p><strong>å¯¹äºè¿™ç§ï¼ˆä½¿ç”¨ tornado è¿è¡Œ Flask çš„æƒ…å†µï¼‰æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•åšå‘¢ï¼ŒæŸ¥çœ‹  WSGIContainer çš„ä»£ç æˆ‘ä»¬å‘ç°</strong></p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WSGIContainer</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, wsgi_application)</span>:</span></span><br><span class=\"line\">        self.wsgi_application = wsgi_application</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">        data = {}</span><br><span class=\"line\">        response = []</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_response</span><span class=\"params\">(status, response_headers, exc_info=None)</span>:</span></span><br><span class=\"line\">            data[<span class=\"string\">\"status\"</span>] = status</span><br><span class=\"line\">            data[<span class=\"string\">\"headers\"</span>] = response_headers</span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.append</span><br><span class=\"line\">        <span class=\"comment\"># wsgiè¿”å›responseéƒ¨åˆ†</span></span><br><span class=\"line\">        app_response = self.wsgi_application(</span><br><span class=\"line\">            WSGIContainer.environ(request), start_response)</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            response.extend(app_response)</span><br><span class=\"line\">            body = <span class=\"string\">b\"\"</span>.join(response)</span><br><span class=\"line\">        <span class=\"keyword\">finally</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> hasattr(app_response, <span class=\"string\">\"close\"</span>):</span><br><span class=\"line\">                app_response.close()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">\"WSGI app did not call start_response\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        status_code, reason = data[<span class=\"string\">\"status\"</span>].split(<span class=\"string\">' '</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        status_code = int(status_code)</span><br><span class=\"line\">        headers = data[<span class=\"string\">\"headers\"</span>]</span><br><span class=\"line\">        header_set = set(k.lower() <span class=\"keyword\">for</span> (k, v) <span class=\"keyword\">in</span> headers)</span><br><span class=\"line\">        body = escape.utf8(body)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> status_code != <span class=\"number\">304</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-length\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Length\"</span>, str(len(body))))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-type\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"text/html; charset=UTF-8\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">\"server\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">            headers.append((<span class=\"string\">\"Server\"</span>, <span class=\"string\">\"TornadoServer/%s\"</span> % tornado.version))</span><br><span class=\"line\"></span><br><span class=\"line\">        start_line = httputil.ResponseStartLine(<span class=\"string\">\"HTTP/1.1\"</span>, status_code, reason)</span><br><span class=\"line\">        header_obj = httputil.HTTPHeaders()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> headers:</span><br><span class=\"line\">            header_obj.add(key, value)</span><br><span class=\"line\">        request.connection.write_headers(start_line, header_obj, chunk=body)</span><br><span class=\"line\">        request.connection.finish()</span><br><span class=\"line\">        self._log(status_code, request)</span><br></pre></td></tr></tbody></table></figure>\n\n<p>åªéœ€é‡æ–°æ–¹æ³•å°†è¿™éƒ¨åˆ†ä»£ç å˜æˆå¼‚æ­¥å³å¯,ä»£ç å¦‚ä¸‹:</p>\n<p>loop.run_in_executor çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ºä¸€ä¸ª ThreadPoolExecutor å¯¹è±¡</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.wsgi <span class=\"keyword\">import</span> WSGIContainer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.httpserver <span class=\"keyword\">import</span> HTTPServer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.ioloop <span class=\"keyword\">import</span> IOLoop</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route('/')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'OK'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado <span class=\"keyword\">import</span> escape</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado <span class=\"keyword\">import</span> httputil</span><br><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> List, Tuple, Optional, Callable, Any, Dict</span><br><span class=\"line\"><span class=\"keyword\">from</span> types <span class=\"keyword\">import</span> TracebackType</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WSGIContainer_With_Thread</span><span class=\"params\">(WSGIContainer)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @tornado.gen.coroutine</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">        data = {}  <span class=\"comment\"># type: Dict[str, Any]</span></span><br><span class=\"line\">        response = []  <span class=\"comment\"># type: List[bytes]</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_response</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                status: str,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                headers: List[Tuple[str, str]],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                exc_info: Optional[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    Tuple[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        <span class=\"string\">\"Optional[Type[BaseException]]\"</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[BaseException],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[TracebackType],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    ]</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                ] = None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        )</span> -&gt; Callable[[bytes], Any]:</span></span><br><span class=\"line\">            data[<span class=\"string\">\"status\"</span>] = status</span><br><span class=\"line\">            data[<span class=\"string\">\"headers\"</span>] = headers</span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.append</span><br><span class=\"line\"></span><br><span class=\"line\">        loop = tornado.ioloop.IOLoop.instance()</span><br><span class=\"line\">        app_response = <span class=\"keyword\">yield</span> loop.run_in_executor(<span class=\"literal\">None</span>, self.wsgi_application, WSGIContainer.environ(request),</span><br><span class=\"line\">                                                  start_response)</span><br><span class=\"line\">        <span class=\"comment\"># app_response = self.wsgi_application(</span></span><br><span class=\"line\">        <span class=\"comment\">#     WSGIContainer.environ(request), start_response</span></span><br><span class=\"line\">        <span class=\"comment\"># )</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            response.extend(app_response)</span><br><span class=\"line\">            body = <span class=\"string\">b\"\"</span>.join(response)</span><br><span class=\"line\">        <span class=\"keyword\">finally</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> hasattr(app_response, <span class=\"string\">\"close\"</span>):</span><br><span class=\"line\">                app_response.close()  <span class=\"comment\"># type: ignore</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">\"WSGI app did not call start_response\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        status_code_str, reason = data[<span class=\"string\">\"status\"</span>].split(<span class=\"string\">\" \"</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        status_code = int(status_code_str)</span><br><span class=\"line\">        headers = data[<span class=\"string\">\"headers\"</span>]  <span class=\"comment\"># type: List[Tuple[str, str]]</span></span><br><span class=\"line\">        header_set = set(k.lower() <span class=\"keyword\">for</span> (k, v) <span class=\"keyword\">in</span> headers)</span><br><span class=\"line\">        body = escape.utf8(body)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> status_code != <span class=\"number\">304</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-length\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Length\"</span>, str(len(body))))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-type\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"text/html; charset=UTF-8\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">\"server\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">            headers.append((<span class=\"string\">\"Server\"</span>, <span class=\"string\">\"TornadoServer/%s\"</span> % tornado.version))</span><br><span class=\"line\"></span><br><span class=\"line\">        start_line = httputil.ResponseStartLine(<span class=\"string\">\"HTTP/1.1\"</span>, status_code, reason)</span><br><span class=\"line\">        header_obj = httputil.HTTPHeaders()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> headers:</span><br><span class=\"line\">            header_obj.add(key, value)</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> request.connection <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span></span><br><span class=\"line\">        request.connection.write_headers(start_line, header_obj, chunk=body)</span><br><span class=\"line\">        request.connection.finish()</span><br><span class=\"line\">        self._log(status_code, request)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    http_server = HTTPServer(WSGIContainer_With_Thread(app))</span><br><span class=\"line\">    http_server.listen(<span class=\"number\">5000</span>)</span><br><span class=\"line\">    IOLoop.instance().start()</span><br></pre></td></tr></tbody></table></figure>\n\n<blockquote>\n<p>æµ‹è¯•æ‰§è¡Œç»“æœ,å‡ ä¹åŒæ—¶è¿”å›äº† OK,ä¸æ˜¯é¡ºåºæ‰§è¡Œäº†</p>\n</blockquote>\n<p><strong>æ³¨æ„ï¼š</strong></p>\n<p>1 ã€è¿™ç§æ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰æé«˜æ€§èƒ½ï¼Œè¯´åˆ°åº•è¿˜æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹æ¥è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¨èå¦‚æœä½¿ç”¨ tornado è¿˜æ˜¯å’Œ tornado çš„ web æ¡†æ¶è”åˆèµ·æ¥å†™å‡ºçœŸæ­£çš„å¼‚æ­¥ä»£ç ï¼Œè¿™æ ·æ‰ä¼šè¾¾åˆ° tornado å¼‚æ­¥ IO çš„é«˜æ€§èƒ½ç›®çš„ã€‚æˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯è®© tornado æ›¿ä»£ django å¼€å‘æœåŠ¡å™¨çš„ä½æ€§èƒ½è€Œå·².**</p>\n<ul>\n<li>è®© tornado å–ä»£ django çš„å¼€å‘æœåŠ¡</li>\n</ul>\n<p>åœ¨é¡¹ç›®çš„æ ¹è·¯å¾„æ–°å¢ä¸€ä¸ª <code>tornado_server.py</code>  çš„æ–‡ä»¶,ä»£ç å¦‚ä¸‹:</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> django.core.wsgi <span class=\"keyword\">import</span> get_wsgi_application</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.options <span class=\"keyword\">import</span> options, define, parse_command_line</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.httpserver</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.ioloop</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.web</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.wsgi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado <span class=\"keyword\">import</span> escape, httputil</span><br><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> List, Tuple, Optional, Callable, Any, Dict</span><br><span class=\"line\"><span class=\"keyword\">from</span> types <span class=\"keyword\">import</span> TracebackType</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.wsgi <span class=\"keyword\">import</span> WSGIContainer</span><br><span class=\"line\"></span><br><span class=\"line\">sys.path.append(os.path.dirname(os.path.abspath(__file__)))</span><br><span class=\"line\">os.environ[<span class=\"string\">'DJANGO_SETTINGS_MODULE'</span>] = <span class=\"string\">'datapower.settings'</span></span><br><span class=\"line\"></span><br><span class=\"line\">setting = {</span><br><span class=\"line\">    <span class=\"string\">'template_path'</span>: os.path.join(os.path.dirname(__file__), <span class=\"string\">'templates'</span>),</span><br><span class=\"line\">    <span class=\"string\">'static_path'</span>: os.path.join(os.path.dirname(__file__), <span class=\"string\">'static'</span>),</span><br><span class=\"line\">    <span class=\"string\">'debug'</span>: <span class=\"literal\">False</span></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">define(<span class=\"string\">'port'</span>, type=int, default=<span class=\"number\">8000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WSGIContainer_With_Thread</span><span class=\"params\">(WSGIContainer)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @tornado.gen.coroutine</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">        data = {}  <span class=\"comment\"># type: Dict[str, Any]</span></span><br><span class=\"line\">        response = []  <span class=\"comment\"># type: List[bytes]</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_response</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                status: str,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                headers: List[Tuple[str, str]],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                exc_info: Optional[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    Tuple[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        <span class=\"string\">\"Optional[Type[BaseException]]\"</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[BaseException],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[TracebackType],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    ]</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                ] = None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        )</span> -&gt; Callable[[bytes], Any]:</span></span><br><span class=\"line\">            data[<span class=\"string\">\"status\"</span>] = status</span><br><span class=\"line\">            data[<span class=\"string\">\"headers\"</span>] = headers</span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.append</span><br><span class=\"line\"></span><br><span class=\"line\">        loop = tornado.ioloop.IOLoop.instance()</span><br><span class=\"line\">        app_response = <span class=\"keyword\">yield</span> loop.run_in_executor(<span class=\"literal\">None</span>, self.wsgi_application, WSGIContainer.environ(request),</span><br><span class=\"line\">                                                  start_response)</span><br><span class=\"line\">        <span class=\"comment\"># app_response = self.wsgi_application(</span></span><br><span class=\"line\">        <span class=\"comment\">#     WSGIContainer.environ(request), start_response</span></span><br><span class=\"line\">        <span class=\"comment\"># )</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            response.extend(app_response)</span><br><span class=\"line\">            body = <span class=\"string\">b\"\"</span>.join(response)</span><br><span class=\"line\">        <span class=\"keyword\">finally</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> hasattr(app_response, <span class=\"string\">\"close\"</span>):</span><br><span class=\"line\">                app_response.close()  <span class=\"comment\"># type: ignore</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">\"WSGI app did not call start_response\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        status_code_str, reason = data[<span class=\"string\">\"status\"</span>].split(<span class=\"string\">\" \"</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        status_code = int(status_code_str)</span><br><span class=\"line\">        headers = data[<span class=\"string\">\"headers\"</span>]  <span class=\"comment\"># type: List[Tuple[str, str]]</span></span><br><span class=\"line\">        header_set = set(k.lower() <span class=\"keyword\">for</span> (k, v) <span class=\"keyword\">in</span> headers)</span><br><span class=\"line\">        body = escape.utf8(body)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> status_code != <span class=\"number\">304</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-length\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Length\"</span>, str(len(body))))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-type\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"text/html; charset=UTF-8\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">\"server\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">            headers.append((<span class=\"string\">\"Server\"</span>, <span class=\"string\">\"TornadoServer/%s\"</span> % tornado.version))</span><br><span class=\"line\"></span><br><span class=\"line\">        start_line = httputil.ResponseStartLine(</span><br><span class=\"line\">            <span class=\"string\">\"HTTP/1.1\"</span>, status_code, reason)</span><br><span class=\"line\">        header_obj = httputil.HTTPHeaders()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> headers:</span><br><span class=\"line\">            header_obj.add(key, value)</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> request.connection <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span></span><br><span class=\"line\">        request.connection.write_headers(start_line, header_obj, chunk=body)</span><br><span class=\"line\">        request.connection.finish()</span><br><span class=\"line\">        self._log(status_code, request)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    parse_command_line()</span><br><span class=\"line\">    wsgi_app = WSGIContainer_With_Thread(get_wsgi_application())</span><br><span class=\"line\">    tornado_app = tornado.web.Application(</span><br><span class=\"line\">        [</span><br><span class=\"line\">            (<span class=\"string\">'.*'</span>, tornado.web.FallbackHandler, dict(fallback=wsgi_app)),</span><br><span class=\"line\">            <span class=\"comment\"># è™½ç„¶djangoè®¾ç½®äº†staticæ–‡ä»¶è®¿é—®æ¥å£, è¿™æ˜¯è²Œä¼¼å–ä¸åˆ°,é˜²æ­¢å‰ç«¯å‡ºç°æ ·å¼ä¸¢å¤±è¿™é‡Œå°±å¢åŠ ä¸€ä¸ªé™æ€æ–‡ä»¶è®¿é—®æ¥å£</span></span><br><span class=\"line\">            (<span class=\"string\">'/static/(.*)'</span>, tornado.web.StaticFileHandler,</span><br><span class=\"line\">             dict(path=os.path.join(os.path.dirname(__file__), <span class=\"string\">'static'</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">        ], **setting</span><br><span class=\"line\">    )</span><br><span class=\"line\">    server = tornado.httpserver.HTTPServer(tornado_app)</span><br><span class=\"line\">    server.listen(options.port)</span><br><span class=\"line\">    tornado.ioloop.IOLoop.instance.start()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></tbody></table></figure>\n\n<p>æ–‡ç« å‚è€ƒ:</p>\n<p><a href=\"https://www.cnblogs.com/lycsdhr/p/11123545.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/lycsdhr/p/11123545.html</a></p>\n<p><a href=\"https://www.cnblogs.com/ExMan/p/9506012.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/ExMan/p/9506012.html</a></p>\n<p><a href=\"https://www.cnblogs.com/baolong/p/6769237.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/baolong/p/6769237.html</a></p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<hr>\n<p>title: tornadå¯åŠ¨django</p>\n<p>date: 2019-04-24 16:10:15</p>\n<p>tags:</p>\n<ul>\n<li>django</li>\n</ul>\n<p>categories:</p>\n<ul>\n<li>python</li>\n<li>æœåŠ¡</li>\n</ul>\n<p>keywords:</p>\n<p>description:</p>\n<p>top_img:</p>\n<p>commentsï¼š</p>\n<p>cover:</p>\n<p>toc:</p>\n<p>toc_number:</p>\n<p>copyright:</p>\n<p>mathjax:</p>\n<p>katex:</p>\n<hr>\n<p>ç”±äº windows ä¸æ”¯æŒ gunicorn,uwsgi ç­‰é«˜æ€§èƒ½çš„ server,ä½¿ç”¨ Apache + mod_uwsgi æˆ‘è§‰å¾—æœ‰ç‚¹éº»çƒ¦,å°±æƒ³ç”¨ tornado æ¥ä½œä¸º django çš„ http server..</p>\n<p><strong>tornado æ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒæ—¶ WSGI åº”ç”¨åˆæ˜¯åŒæ­¥çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Tornado å¯åŠ¨ WSGI åº”ç”¨ï¼Œç†è®ºä¸Šæ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚éƒ½æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªè¯·æ±‚æœ‰é˜»å¡ï¼Œéƒ½ä¼šå¯¼è‡´ tornado çš„æ•´ä¸ª IOLOOP é˜»å¡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åŒæ—¶å‘å‡ºä¸¤ä¸ª GET è¯·æ±‚å‘<a href=\"http://127.0.0.1:5000/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:5000/</a></strong></p>\n<p><strong>ä¼šå‘ç°ç¬¬ä¸€ä¸ªå‘å‡ºçš„è¯·æ±‚ä¼šåœ¨å¤§çº¦ 5s ä¹‹åè¿”å›ï¼Œè€Œå¦ä¸€ä¸ªè¯·æ±‚ä¼šåœ¨ 10s å·¦å³è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> tornado.wsgi <span class=\"keyword\">import</span> WSGIContainer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.httpserver <span class=\"keyword\">import</span> HTTPServer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.ioloop <span class=\"keyword\">import</span> IOLoop</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route('/')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'OK'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    http_server = HTTPServer(WSGIContainer(app))</span><br><span class=\"line\">    http_server.listen(<span class=\"number\">5000</span>)</span><br><span class=\"line\">    IOLoop.instance().start()</span><br></pre></td></tr></table></figure>\n\n<p><strong>æˆ‘ä»¬çŸ¥é“ï¼Œtornado å®ç°å¼‚æ­¥è¿è¡ŒåŒæ­¥å‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨çº¿ç¨‹æ¥è¿è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>\n<blockquote>\n<p>å‡ ä¹åŒæ—¶è¿”å›ç»“æœ,å¹¶å‘æ‰§è¡Œäº†</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> tornado.web</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.ioloop</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IndexHandler</span><span class=\"params\">(tornado.web.RequestHandler)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"ä¸»è·¯ç”±å¤„ç†ç±»\"\"\"</span></span><br><span class=\"line\"><span class=\"meta\">    @tornado.gen.coroutine</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"å¯¹åº”httpçš„getè¯·æ±‚æ–¹å¼\"\"\"</span></span><br><span class=\"line\">        loop = tornado.ioloop.IOLoop.instance()</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> loop.run_in_executor(<span class=\"literal\">None</span>,self.sleep)</span><br><span class=\"line\">        self.write(<span class=\"string\">\"Hello You!\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sleep</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">        self.write(<span class=\"string\">'sleep OK'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    app = tornado.web.Application([</span><br><span class=\"line\">        (<span class=\"string\">r\"/\"</span>, IndexHandler),</span><br><span class=\"line\">    ])</span><br><span class=\"line\">    app.listen(<span class=\"number\">8000</span>)</span><br><span class=\"line\">    tornado.ioloop.IOLoop.current().start()</span><br></pre></td></tr></table></figure>\n\n<p><strong>å¯¹äºè¿™ç§ï¼ˆä½¿ç”¨ tornado è¿è¡Œ Flask çš„æƒ…å†µï¼‰æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•åšå‘¢ï¼ŒæŸ¥çœ‹  WSGIContainer çš„ä»£ç æˆ‘ä»¬å‘ç°</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WSGIContainer</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, wsgi_application)</span>:</span></span><br><span class=\"line\">        self.wsgi_application = wsgi_application</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">        data = &#123;&#125;</span><br><span class=\"line\">        response = []</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_response</span><span class=\"params\">(status, response_headers, exc_info=None)</span>:</span></span><br><span class=\"line\">            data[<span class=\"string\">\"status\"</span>] = status</span><br><span class=\"line\">            data[<span class=\"string\">\"headers\"</span>] = response_headers</span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.append</span><br><span class=\"line\">        <span class=\"comment\"># wsgiè¿”å›responseéƒ¨åˆ†</span></span><br><span class=\"line\">        app_response = self.wsgi_application(</span><br><span class=\"line\">            WSGIContainer.environ(request), start_response)</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            response.extend(app_response)</span><br><span class=\"line\">            body = <span class=\"string\">b\"\"</span>.join(response)</span><br><span class=\"line\">        <span class=\"keyword\">finally</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> hasattr(app_response, <span class=\"string\">\"close\"</span>):</span><br><span class=\"line\">                app_response.close()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">\"WSGI app did not call start_response\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        status_code, reason = data[<span class=\"string\">\"status\"</span>].split(<span class=\"string\">' '</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        status_code = int(status_code)</span><br><span class=\"line\">        headers = data[<span class=\"string\">\"headers\"</span>]</span><br><span class=\"line\">        header_set = set(k.lower() <span class=\"keyword\">for</span> (k, v) <span class=\"keyword\">in</span> headers)</span><br><span class=\"line\">        body = escape.utf8(body)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> status_code != <span class=\"number\">304</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-length\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Length\"</span>, str(len(body))))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-type\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"text/html; charset=UTF-8\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">\"server\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">            headers.append((<span class=\"string\">\"Server\"</span>, <span class=\"string\">\"TornadoServer/%s\"</span> % tornado.version))</span><br><span class=\"line\"></span><br><span class=\"line\">        start_line = httputil.ResponseStartLine(<span class=\"string\">\"HTTP/1.1\"</span>, status_code, reason)</span><br><span class=\"line\">        header_obj = httputil.HTTPHeaders()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> headers:</span><br><span class=\"line\">            header_obj.add(key, value)</span><br><span class=\"line\">        request.connection.write_headers(start_line, header_obj, chunk=body)</span><br><span class=\"line\">        request.connection.finish()</span><br><span class=\"line\">        self._log(status_code, request)</span><br></pre></td></tr></table></figure>\n\n<p>åªéœ€é‡æ–°æ–¹æ³•å°†è¿™éƒ¨åˆ†ä»£ç å˜æˆå¼‚æ­¥å³å¯,ä»£ç å¦‚ä¸‹:</p>\n<p>loop.run_in_executor çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ºä¸€ä¸ª ThreadPoolExecutor å¯¹è±¡</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.wsgi <span class=\"keyword\">import</span> WSGIContainer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.httpserver <span class=\"keyword\">import</span> HTTPServer</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.ioloop <span class=\"keyword\">import</span> IOLoop</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route('/')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'OK'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado <span class=\"keyword\">import</span> escape</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado <span class=\"keyword\">import</span> httputil</span><br><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> List, Tuple, Optional, Callable, Any, Dict</span><br><span class=\"line\"><span class=\"keyword\">from</span> types <span class=\"keyword\">import</span> TracebackType</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WSGIContainer_With_Thread</span><span class=\"params\">(WSGIContainer)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @tornado.gen.coroutine</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">        data = &#123;&#125;  <span class=\"comment\"># type: Dict[str, Any]</span></span><br><span class=\"line\">        response = []  <span class=\"comment\"># type: List[bytes]</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_response</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                status: str,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                headers: List[Tuple[str, str]],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                exc_info: Optional[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    Tuple[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        <span class=\"string\">\"Optional[Type[BaseException]]\"</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[BaseException],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[TracebackType],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    ]</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                ] = None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        )</span> -&gt; Callable[[bytes], Any]:</span></span><br><span class=\"line\">            data[<span class=\"string\">\"status\"</span>] = status</span><br><span class=\"line\">            data[<span class=\"string\">\"headers\"</span>] = headers</span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.append</span><br><span class=\"line\"></span><br><span class=\"line\">        loop = tornado.ioloop.IOLoop.instance()</span><br><span class=\"line\">        app_response = <span class=\"keyword\">yield</span> loop.run_in_executor(<span class=\"literal\">None</span>, self.wsgi_application, WSGIContainer.environ(request),</span><br><span class=\"line\">                                                  start_response)</span><br><span class=\"line\">        <span class=\"comment\"># app_response = self.wsgi_application(</span></span><br><span class=\"line\">        <span class=\"comment\">#     WSGIContainer.environ(request), start_response</span></span><br><span class=\"line\">        <span class=\"comment\"># )</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            response.extend(app_response)</span><br><span class=\"line\">            body = <span class=\"string\">b\"\"</span>.join(response)</span><br><span class=\"line\">        <span class=\"keyword\">finally</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> hasattr(app_response, <span class=\"string\">\"close\"</span>):</span><br><span class=\"line\">                app_response.close()  <span class=\"comment\"># type: ignore</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">\"WSGI app did not call start_response\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        status_code_str, reason = data[<span class=\"string\">\"status\"</span>].split(<span class=\"string\">\" \"</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        status_code = int(status_code_str)</span><br><span class=\"line\">        headers = data[<span class=\"string\">\"headers\"</span>]  <span class=\"comment\"># type: List[Tuple[str, str]]</span></span><br><span class=\"line\">        header_set = set(k.lower() <span class=\"keyword\">for</span> (k, v) <span class=\"keyword\">in</span> headers)</span><br><span class=\"line\">        body = escape.utf8(body)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> status_code != <span class=\"number\">304</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-length\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Length\"</span>, str(len(body))))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-type\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"text/html; charset=UTF-8\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">\"server\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">            headers.append((<span class=\"string\">\"Server\"</span>, <span class=\"string\">\"TornadoServer/%s\"</span> % tornado.version))</span><br><span class=\"line\"></span><br><span class=\"line\">        start_line = httputil.ResponseStartLine(<span class=\"string\">\"HTTP/1.1\"</span>, status_code, reason)</span><br><span class=\"line\">        header_obj = httputil.HTTPHeaders()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> headers:</span><br><span class=\"line\">            header_obj.add(key, value)</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> request.connection <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span></span><br><span class=\"line\">        request.connection.write_headers(start_line, header_obj, chunk=body)</span><br><span class=\"line\">        request.connection.finish()</span><br><span class=\"line\">        self._log(status_code, request)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    http_server = HTTPServer(WSGIContainer_With_Thread(app))</span><br><span class=\"line\">    http_server.listen(<span class=\"number\">5000</span>)</span><br><span class=\"line\">    IOLoop.instance().start()</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æµ‹è¯•æ‰§è¡Œç»“æœ,å‡ ä¹åŒæ—¶è¿”å›äº† OK,ä¸æ˜¯é¡ºåºæ‰§è¡Œäº†</p>\n</blockquote>\n<p><strong>æ³¨æ„ï¼š</strong></p>\n<p>1 ã€è¿™ç§æ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰æé«˜æ€§èƒ½ï¼Œè¯´åˆ°åº•è¿˜æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹æ¥è¿è¡Œçš„ï¼Œæ‰€ä»¥æ¨èå¦‚æœä½¿ç”¨ tornado è¿˜æ˜¯å’Œ tornado çš„ web æ¡†æ¶è”åˆèµ·æ¥å†™å‡ºçœŸæ­£çš„å¼‚æ­¥ä»£ç ï¼Œè¿™æ ·æ‰ä¼šè¾¾åˆ° tornado å¼‚æ­¥ IO çš„é«˜æ€§èƒ½ç›®çš„ã€‚æˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯è®© tornado æ›¿ä»£ django å¼€å‘æœåŠ¡å™¨çš„ä½æ€§èƒ½è€Œå·².**</p>\n<ul>\n<li>è®© tornado å–ä»£ django çš„å¼€å‘æœåŠ¡</li>\n</ul>\n<p>åœ¨é¡¹ç›®çš„æ ¹è·¯å¾„æ–°å¢ä¸€ä¸ª <code>tornado_server.py</code>  çš„æ–‡ä»¶,ä»£ç å¦‚ä¸‹:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> django.core.wsgi <span class=\"keyword\">import</span> get_wsgi_application</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.options <span class=\"keyword\">import</span> options, define, parse_command_line</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.httpserver</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.ioloop</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.web</span><br><span class=\"line\"><span class=\"keyword\">import</span> tornado.wsgi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado <span class=\"keyword\">import</span> escape, httputil</span><br><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> List, Tuple, Optional, Callable, Any, Dict</span><br><span class=\"line\"><span class=\"keyword\">from</span> types <span class=\"keyword\">import</span> TracebackType</span><br><span class=\"line\"><span class=\"keyword\">from</span> tornado.wsgi <span class=\"keyword\">import</span> WSGIContainer</span><br><span class=\"line\"></span><br><span class=\"line\">sys.path.append(os.path.dirname(os.path.abspath(__file__)))</span><br><span class=\"line\">os.environ[<span class=\"string\">'DJANGO_SETTINGS_MODULE'</span>] = <span class=\"string\">'datapower.settings'</span></span><br><span class=\"line\"></span><br><span class=\"line\">setting = &#123;</span><br><span class=\"line\">    <span class=\"string\">'template_path'</span>: os.path.join(os.path.dirname(__file__), <span class=\"string\">'templates'</span>),</span><br><span class=\"line\">    <span class=\"string\">'static_path'</span>: os.path.join(os.path.dirname(__file__), <span class=\"string\">'static'</span>),</span><br><span class=\"line\">    <span class=\"string\">'debug'</span>: <span class=\"literal\">False</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">define(<span class=\"string\">'port'</span>, type=int, default=<span class=\"number\">8000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WSGIContainer_With_Thread</span><span class=\"params\">(WSGIContainer)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @tornado.gen.coroutine</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, request)</span>:</span></span><br><span class=\"line\">        data = &#123;&#125;  <span class=\"comment\"># type: Dict[str, Any]</span></span><br><span class=\"line\">        response = []  <span class=\"comment\"># type: List[bytes]</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_response</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                status: str,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                headers: List[Tuple[str, str]],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                exc_info: Optional[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    Tuple[</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        <span class=\"string\">\"Optional[Type[BaseException]]\"</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[BaseException],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                        Optional[TracebackType],</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                    ]</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                ] = None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        )</span> -&gt; Callable[[bytes], Any]:</span></span><br><span class=\"line\">            data[<span class=\"string\">\"status\"</span>] = status</span><br><span class=\"line\">            data[<span class=\"string\">\"headers\"</span>] = headers</span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.append</span><br><span class=\"line\"></span><br><span class=\"line\">        loop = tornado.ioloop.IOLoop.instance()</span><br><span class=\"line\">        app_response = <span class=\"keyword\">yield</span> loop.run_in_executor(<span class=\"literal\">None</span>, self.wsgi_application, WSGIContainer.environ(request),</span><br><span class=\"line\">                                                  start_response)</span><br><span class=\"line\">        <span class=\"comment\"># app_response = self.wsgi_application(</span></span><br><span class=\"line\">        <span class=\"comment\">#     WSGIContainer.environ(request), start_response</span></span><br><span class=\"line\">        <span class=\"comment\"># )</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            response.extend(app_response)</span><br><span class=\"line\">            body = <span class=\"string\">b\"\"</span>.join(response)</span><br><span class=\"line\">        <span class=\"keyword\">finally</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> hasattr(app_response, <span class=\"string\">\"close\"</span>):</span><br><span class=\"line\">                app_response.close()  <span class=\"comment\"># type: ignore</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">\"WSGI app did not call start_response\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        status_code_str, reason = data[<span class=\"string\">\"status\"</span>].split(<span class=\"string\">\" \"</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        status_code = int(status_code_str)</span><br><span class=\"line\">        headers = data[<span class=\"string\">\"headers\"</span>]  <span class=\"comment\"># type: List[Tuple[str, str]]</span></span><br><span class=\"line\">        header_set = set(k.lower() <span class=\"keyword\">for</span> (k, v) <span class=\"keyword\">in</span> headers)</span><br><span class=\"line\">        body = escape.utf8(body)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> status_code != <span class=\"number\">304</span>:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-length\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Length\"</span>, str(len(body))))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">\"content-type\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">                headers.append((<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"text/html; charset=UTF-8\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">\"server\"</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> header_set:</span><br><span class=\"line\">            headers.append((<span class=\"string\">\"Server\"</span>, <span class=\"string\">\"TornadoServer/%s\"</span> % tornado.version))</span><br><span class=\"line\"></span><br><span class=\"line\">        start_line = httputil.ResponseStartLine(</span><br><span class=\"line\">            <span class=\"string\">\"HTTP/1.1\"</span>, status_code, reason)</span><br><span class=\"line\">        header_obj = httputil.HTTPHeaders()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> headers:</span><br><span class=\"line\">            header_obj.add(key, value)</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> request.connection <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span></span><br><span class=\"line\">        request.connection.write_headers(start_line, header_obj, chunk=body)</span><br><span class=\"line\">        request.connection.finish()</span><br><span class=\"line\">        self._log(status_code, request)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    parse_command_line()</span><br><span class=\"line\">    wsgi_app = WSGIContainer_With_Thread(get_wsgi_application())</span><br><span class=\"line\">    tornado_app = tornado.web.Application(</span><br><span class=\"line\">        [</span><br><span class=\"line\">            (<span class=\"string\">'.*'</span>, tornado.web.FallbackHandler, dict(fallback=wsgi_app)),</span><br><span class=\"line\">            <span class=\"comment\"># è™½ç„¶djangoè®¾ç½®äº†staticæ–‡ä»¶è®¿é—®æ¥å£, è¿™æ˜¯è²Œä¼¼å–ä¸åˆ°,é˜²æ­¢å‰ç«¯å‡ºç°æ ·å¼ä¸¢å¤±è¿™é‡Œå°±å¢åŠ ä¸€ä¸ªé™æ€æ–‡ä»¶è®¿é—®æ¥å£</span></span><br><span class=\"line\">            (<span class=\"string\">'/static/(.*)'</span>, tornado.web.StaticFileHandler,</span><br><span class=\"line\">             dict(path=os.path.join(os.path.dirname(__file__), <span class=\"string\">'static'</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">        ], **setting</span><br><span class=\"line\">    )</span><br><span class=\"line\">    server = tornado.httpserver.HTTPServer(tornado_app)</span><br><span class=\"line\">    server.listen(options.port)</span><br><span class=\"line\">    tornado.ioloop.IOLoop.instance.start()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n\n<p>æ–‡ç« å‚è€ƒ:</p>\n<p><a href=\"https://www.cnblogs.com/lycsdhr/p/11123545.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/lycsdhr/p/11123545.html</a></p>\n<p><a href=\"https://www.cnblogs.com/ExMan/p/9506012.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/ExMan/p/9506012.html</a></p>\n<p><a href=\"https://www.cnblogs.com/baolong/p/6769237.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/baolong/p/6769237.html</a></p>\n"},{"title":"pythonå¸¸ç”¨ms","date":"2017-04-24T08:10:15.000Z","_content":"\n\n\n---\n\n---\n\n## æŠ€æœ¯é¢è¯•å‡†å¤‡\n\nhttps://github.com/taizilongxu/interview_python\n\n### pythonåŸºç¡€\n\n* é¢å‘å¯¹è±¡\n\n  ä¸‰å¤§ç‰¹æ€§:ç»§æ‰¿,å¤šæ€,å°è£…\n\n  é¢å‘è¿‡ç¨‹vsé¢å‘å¯¹è±¡: é¢å‘è¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ç¨‹åºå¤æ‚åº¦ä½,åªè¦é¡ºç€æ‰§è¡Œæ­¥éª¤å †å ä»£ç å³å¯,ç¼ºç‚¹æ˜¯ä¸€å¥—æµç¨‹è§£å†³ä¸€ä¸ªé—®é¢˜,ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«.\n\n  è‘—åçš„åº”ç”¨:Linuxå†…æ ¸,git,Apache serverç­‰\n\n  é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³ä¸‡ç‰©çš†å¯¹è±¡,è§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§,å¯¹æŸä¸ªå¯¹è±¡ä¿®æ”¹ä¼šç«‹åˆ»ååº”åˆ°ä½“ç³»ä¸­.ç¼ºç‚¹æ˜¯å¯æ§æ€§å·®,è§£å†³é—®é¢˜ä¸€å¼€å§‹å°±æ˜¯ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ¥è§£å†³.\n\n  - ç±»,å¯¹è±¡,å®ä¾‹,å®ä¾‹åŒ–\n\n    ç±»:å…·æœ‰ç›¸åŒç‰¹å¾çš„ä¸€ç±»äº‹ç‰©     å¯¹è±¡/å®ä¾‹:å…·ä½“çš„æŸä¸ªäº‹ç‰©\n\n    å®ä¾‹åŒ–,ç±»â€”>å¯¹è±¡çš„è¿‡ç¨‹\n\n    ```\n    >>> dict #ç±»å‹dictå°±æ˜¯ç±»dict\n    <class 'dict'>\n    >>> d=dict(name='eva') #å®ä¾‹åŒ–\n    >>> d.pop('name') #å‘då‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰§è¡Œdçš„æ–¹æ³•pop\n    'eva'\n    --------------------------\n    egg = Person('egon')  #ç±»å()å°±ç­‰äºåœ¨æ‰§è¡ŒPerson.__init__()\n    #æ‰§è¡Œå®Œ__init__()å°±ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ç±»ä¼¼ä¸€ä¸ªå­—å…¸ï¼Œå­˜ç€å±äºè¿™ä¸ªäººæœ¬èº«çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚\n    #ä½ å¯ä»¥å·å·çš„ç†è§£ï¼šegg = {'name':'egon','walk':walk}\n    ```\n\n* è®¾è®¡æ¨¡å¼ - å•ä¾‹ - è£…é¥°å™¨ - MVC\n\n  * å•ä¾‹æ¨¡å¼ - å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹ç±»çš„ç‰¹æ®Šç±»,é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ä¸”è¯¥å®ä¾‹æ˜“äºå¤–æ¥è®¿é—®,ä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹çš„ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æº.å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ª,å•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ.\\__new__()åœ¨\\__init__()ä¹‹å‰è¢«è°ƒç”¨,ç”¨äºç”Ÿäº§å®ä¾‹å¯¹è±¡,åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å’Œç±»å±æ€§å¯ä»¥å®ç°å•ä¾‹.\n\n    ä½¿ç”¨\\__new__()\n\n    ```python\n    class Func(object):\n        def __new__(cls,*args,**kw):\n            if not hasattr(cls,'_instance'):\n                a = super(Func,cls)\n                cls._instance = a.__new__(cls,*args,**kw) \n            return cls._instance\n    class Myclass(Func):\n        b = 1\n    ```\n\n    import æ–¹æ³•\n\n    è£…é¥°å™¨æ–¹æ³•\n\n    ```python\n    def func(cls,*args,**kw):\n        instances = {}\n        def get_instance():\n            if cls not in instances:\n                instances[cls] = cls(*args,**kw)\n            return instances[cls]\n        return get_instance\n    @func\n    class MyClass:\n        ...\n    ```\n\n* ç½‘ç»œç¼–ç¨‹-HTTP,TCP,UDP,ajax\n\n  * AJAX,Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰, æ˜¯ä¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯\n\n  * http:æ˜¯ç”¨äºwwwæµè§ˆçš„ä¸€ä¸ªåè®®ã€‚ä½†æ˜¯åŸºäºtcpçš„\n    tcpï¼šæ˜¯æœºå™¨ä¹‹é—´å»ºç«‹è¿æ¥ç”¨çš„åˆ°çš„ä¸€ä¸ªåè®®ã€‚\n\n    |            | TCP                                    | UDP                                  |\n    | ---------- | -------------------------------------- | ------------------------------------ |\n    | æ˜¯å¦è¿æ¥   | é¢å‘è¿æ¥                               | é¢å‘éè¿æ¥                           |\n    | ä¼ è¾“å¯é æ€§ | å¯é                                    | ä¸å¯é                                |\n    | åº”ç”¨åœºåˆ   | ä¼ è¾“å¤§é‡çš„æ•°æ®ï¼Œå¯¹å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆ | ä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ |\n    | é€Ÿåº¦       | æ…¢                                     | å¿«                                   |\n\n    1 ä¸‰æ¬¡æ¡æ‰‹\n    å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•° Aã€‚\n    æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACK çš„ç¡®è®¤ç åº”ä¸º A+1ï¼ŒSYN/ACK åŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºåºå· Bã€‚\n    æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚å½“æœåŠ¡ç«¯å—åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰è·¯æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚æ­¤æ—¶åŒ…åºå·è¢«è®¾å®šä¸ºæ”¶åˆ°çš„ç¡®è®¤å· A+1ï¼Œè€Œå“åº”åˆ™ä¸º B+1ã€‚\n    2 å››æ¬¡æŒ¥æ‰‹\n    æ³¨æ„: ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯. ä¸‹é¢ä»…ä»¥å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¸¾ä¾‹, åä¹‹äº¦ç„¶.\n\n    å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†æ®µ, å…¶ä¸­çš„ FIN æ ‡è®°è®¾ç½®ä¸º1. å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT çŠ¶æ€. è¯¥çŠ¶æ€ä¸‹å®¢æˆ·ç«¯åªæ¥æ”¶æ•°æ®, ä¸å†å‘é€æ•°æ®.\n    æœåŠ¡å™¨æ¥æ”¶åˆ°å¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å‘é€å¸¦æœ‰ ACK = 1 çš„å‰©ä½™æ•°æ®åˆ†æ®µ, ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ FIN ä¿¡æ¯.\n    æœåŠ¡å™¨ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¼ è¾“ç»“æŸ, å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å¹¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€, ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥å¸¦æœ‰ ACK = 1 çš„ç¡®è®¤æŠ¥æ–‡.\n    å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥å¸¦æœ‰ FIN = 1 çš„æŠ¥æ–‡, è¿”å› ACK = 1 çš„æŠ¥æ–‡ç¡®è®¤, ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç«¯æœªæ”¶åˆ°éœ€è¦é‡å‘, è¿›å…¥ TIME-WAIT çŠ¶æ€. æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡åå…³é—­è¿æ¥. å®¢æˆ·ç«¯ç­‰å¾… 2MSL åæœªæ”¶åˆ°å›å¤, åˆ™è®¤ä¸ºæœåŠ¡å™¨æˆåŠŸå…³é—­, å®¢æˆ·ç«¯å…³é—­è¿æ¥.\n\n* å¤šçº¿ç¨‹,å¤šè¿›ç¨‹,åç¨‹\n\n  * è®¡ç®—æœºç¡¬ä»¶è§’åº¦:\n\n    è®¡ç®—æœºæ ¸å¿ƒæ˜¯cpu,æ‰¿æ‹…äº†æ‰€æœ‰çš„è®¡ç®—ä»»åŠ¡,ä¸€ä¸ªcpu,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œåªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº.\n\n  * ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦:\n\n    è¿›ç¨‹å’Œçº¿ç¨‹,éƒ½æ˜¯ä¸€ç§cpuçš„æ‰§è¡Œå•å…ƒ,è¿›ç¨‹:è¡¨ç¤ºä¸€ä¸ªç¨‹åºçš„ä¸Šä¸‹æ–‡æ‰§è¡Œæ´»åŠ¨(æ‰“å¼€,æ‰§è¡Œ,ä¿å­˜)\n\n    çº¿ç¨‹:è¿›ç¨‹æ‰§è¡Œç¨‹åºæ—¶çš„æœ€å°è°ƒåº¦å•ä½,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹.\n\n  * å¹¶è¡Œ:\n\n    å¤šä¸ªcpuæ ¸å¿ƒ,ä¸åŒçš„ç¨‹åºåˆ†ç»™ä¸åŒçš„cpuè¿è¡Œ,å¯ä»¥è®©å¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œ.\n\n  * å¹¶å‘:å•ä¸ªcpuæ ¸å¿ƒ,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº,å¦‚æœéœ€è¦è¿è¡Œå¤šä¸ªç¨‹åº,åˆ™ä¸²è¡Œæ‰§è¡Œ.\n\n  * å¤šè¿›ç¨‹  - å¤šçº¿ç¨‹\n\n    åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡\n\n    è¿›ç¨‹:æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´,ä¸åŒè¿›ç¨‹ä¹‹é—´çš„å†…å­˜ç©ºé—´ä¸å…±äº«,è¿›åŸä¹‹é—´çš„é€šä¿¡ç”±æ“ä½œç³»ç»Ÿå¿è¿˜åœ°,å¯¼è‡´é€šè®¯æ•ˆç‡ä½,åˆ‡æ¢å¼€é”€å¤§.\n\n    çº¿ç¨‹:ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œé€šè®¯æ•ˆç‡é«˜ï¼Œåˆ‡æ¢å¼€é”€å°ã€‚å…±äº«æ„å‘³ç€ç«äº‰ï¼Œå¯¼è‡´æ•°æ®ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿æŠ¤å†…å­˜ç©ºé—´çš„æ•°æ®å®‰å…¨ï¼Œå¼•å…¥\"äº’æ–¥é”\"ã€‚\n\n    ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å†…å­˜ç©ºé—´æ—¶å…¶ä»–çº¿ç¨‹ä¸å…è®¸è®¿é—®,å¿…é¡»ç­‰å¾…ä¹‹å‰çš„çº¿ç¨‹è®¿é—®ç»“æŸ,æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå†…å­˜ç©ºé—´.\n\n    ---\n\n    Pythonçš„å¤šçº¿ç¨‹ï¼š\n\n    GIL å…¨å±€è§£é‡Šå™¨é”ï¼šçº¿ç¨‹çš„æ‰§è¡Œæƒé™ï¼Œåœ¨Pythonçš„è¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªGILã€‚\n\n    ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è·å–GILã€‚\n\n    å¥½å¤„ï¼šç›´æ¥æœç»äº†å¤šä¸ªçº¿ç¨‹è®¿é—®å†…å­˜ç©ºé—´çš„å®‰å…¨é—®é¢˜ã€‚\n    åå¤„ï¼šPythonçš„å¤šçº¿ç¨‹ä¸æ˜¯çœŸæ­£å¤šçº¿ç¨‹ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„èµ„æºã€‚\n\n    ä½†æ˜¯ï¼Œåœ¨I/Oé˜»å¡çš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šé‡Šæ”¾GILã€‚\n\n    å¤šè¿›ç¨‹ï¼šå¯†é›†CPUä»»åŠ¡ï¼Œéœ€è¦å……åˆ†ä½¿ç”¨å¤šæ ¸CPUèµ„æºï¼ˆæœåŠ¡å™¨ï¼Œå¤§é‡çš„å¹¶è¡Œè®¡ç®—ï¼‰çš„æ—¶å€™ï¼Œç”¨å¤šè¿›ç¨‹ã€‚ multiprocessing\n    ç¼ºé™·ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´é€šä¿¡æˆæœ¬é«˜ï¼Œåˆ‡æ¢å¼€é”€å¤§ã€‚\n\n    å¤šçº¿ç¨‹ï¼šå¯†é›†I/Oä»»åŠ¡ï¼ˆç½‘ç»œI/Oï¼Œç£ç›˜I/Oï¼Œæ•°æ®åº“I/Oï¼‰ä½¿ç”¨å¤šçº¿ç¨‹åˆé€‚ã€‚\n    threading.Threadã€multiprocessing.dummy\n    ç¼ºé™·ï¼šåŒä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½åšåˆ°é«˜å¹¶è¡Œï¼Œä½†æ˜¯å¯ä»¥åšåˆ°é«˜å¹¶å‘ã€‚\n\n    åç¨‹ï¼šåˆç§°å¾®çº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹ä¸Šæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œç”¨å‡½æ•°åˆ‡æ¢ï¼Œå¼€é”€æå°ã€‚ä¸é€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œæ²¡æœ‰è¿›ç¨‹ã€çº¿ç¨‹çš„åˆ‡æ¢å¼€é”€ã€‚genventï¼Œmonkey.patchall\n\n    å¤šçº¿ç¨‹è¯·æ±‚è¿”å›æ˜¯æ— åºçš„ï¼Œé‚£ä¸ªçº¿ç¨‹æœ‰æ•°æ®è¿”å›å°±å¤„ç†é‚£ä¸ªçº¿ç¨‹ï¼Œè€Œåç¨‹è¿”å›çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚\n\n    ç¼ºé™·ï¼šå•çº¿ç¨‹æ‰§è¡Œï¼Œå¤„ç†å¯†é›†CPUå’Œæœ¬åœ°ç£ç›˜IOçš„æ—¶å€™ï¼Œæ€§èƒ½è¾ƒä½ã€‚å¤„ç†ç½‘ç»œI/Oæ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒé«˜.\n\n    ---\n\n    å¤šè¿›ç¨‹multiprocessingæ¨¡å—\n\n    å¤šçº¿ç¨‹threading\n\n    åç¨‹ from gevent import monkey\n\n    ---\n\n    å¤„ç†é«˜å¹¶å‘:\n\n    twistedâ€”>tornad0â€”>gevent\n\n* æ•°æ®åº“\n\n  * äº‹åŠ¡\n\n    åŸå­æ€§,ä¸€è‡´æ€§,éš”ç¦»æ€§,æŒä¹…æ€§\n\n  * æ•°æ®åº“ç´¢å¼•\n\n    å»ºç«‹ç´¢å¼•çš„åŸåˆ™:\n\n    1,æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™,MySQLä¼šä¸€ç›´å‘å³åŒ¹é…åˆ°èŒƒå›´æŸ¥è¯¢å°±åœæ­¢åŒ¹é….\t\n\n    æ¯”å¦‚a = 1 and b = 2 and c > 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚\n\n    2,=å’Œinå¯ä»¥ä¹±åºæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼\n\n    3,å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•\n\n    4,ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è¿ç®—\n\n    5,å°½é‡çš„æ‰©å±•ç´¢å¼•,ä¸è¦æ–°å»ºç´¢å¼•\n\n    ---\n\n    https://tech.meituan.com/mysql-index.html\n\n    http://blog.codinglabs.org/articles/theory-of-mysql-index.html\n\n  * redis\n\n    k-væ•°æ®åº“,ä¸°å¯Œçš„æ•°æ®ç»“æ„string,map,list,sets,sorted sets\n\n    > â€‹\té€šå¸¸å±€é™ç‚¹æ¥è¯´ï¼ŒRedisä¹Ÿä»¥æ¶ˆæ¯é˜Ÿåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œä½œä¸ºå†…åµŒçš„Listå­˜åœ¨ï¼Œæ»¡è¶³å®æ—¶çš„é«˜å¹¶å‘éœ€æ±‚ã€‚åœ¨ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œredisæ¯”memcachedå…·æœ‰æ›´å¤šçš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”æ”¯æŒæ›´å¤šçš„æ•°æ®ç±»å‹ï¼ŒæŠŠrediså½“ä½œä¸€ä¸ªä¸­é—´å­˜å‚¨ç³»ç»Ÿï¼Œç”¨æ¥å¤„ç†é«˜å¹¶å‘çš„æ•°æ®åº“æ“ä½œ\n\n    - é€Ÿåº¦å¿«ï¼šä½¿ç”¨æ ‡å‡†Cå†™ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œè¯»å†™é€Ÿåº¦åˆ†åˆ«è¾¾åˆ°10ä¸‡/20ä¸‡\n    - æŒä¹…åŒ–ï¼šå¯¹æ•°æ®çš„æ›´æ–°é‡‡ç”¨Copy-on-writeæŠ€æœ¯ï¼Œå¯ä»¥å¼‚æ­¥åœ°ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥ï¼Œä¸€æ˜¯æ ¹æ®æ—¶é—´ï¼Œæ›´æ–°æ¬¡æ•°çš„å¿«ç…§ï¼ˆsave 300 10 ï¼‰äºŒæ˜¯åŸºäºè¯­å¥è¿½åŠ æ–¹å¼(Append-only fileï¼Œaof)\n    - è‡ªåŠ¨æ“ä½œï¼šå¯¹ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œéƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå¾ˆå®‰å…¨\n    - å¿«é€Ÿçš„ä¸»--ä»å¤åˆ¶ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ•°æ®ï¼ŒSlaveåœ¨21ç§’å³å®Œæˆäº†å¯¹Amazonç½‘ç«™10G key setçš„å¤åˆ¶ã€‚\n    - ShardingæŠ€æœ¯ï¼š å¾ˆå®¹æ˜“å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªRediså®ä¾‹ä¸­ï¼Œæ•°æ®åº“çš„æ‰©å±•æ˜¯ä¸ªæ°¸æ’çš„è¯é¢˜ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œä¸»è¦æ˜¯ä»¥æ·»åŠ ç¡¬ä»¶ã€ä»¥åˆ†åŒºä¸ºä¸»è¦æŠ€æœ¯å½¢å¼çš„çºµå‘æ‰©å±•è§£å†³äº†å¾ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä½†éšç€web2.0ã€ç§»åŠ¨äº’è”ç½‘ã€äº‘è®¡ç®—ç­‰åº”ç”¨çš„å…´èµ·ï¼Œè¿™ç§æ‰©å±•æ¨¡å¼å·²ç»ä¸å¤ªé€‚åˆäº†ï¼Œæ‰€ä»¥è¿‘å¹´æ¥ï¼Œåƒé‡‡ç”¨ä¸»ä»é…ç½®ã€æ•°æ®åº“å¤åˆ¶å½¢å¼çš„ï¼ŒShardingè¿™ç§æŠ€æœ¯æŠŠè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªç‰¹ç†èŠ‚ç‚¹ä¸Šå»çš„æ¨ªå‘æ‰©å±•æ–¹å¼ç”¨å¤„è¶Šæ¥è¶Šå¤šã€‚\n\n  * redisçš„ç¼ºç‚¹\n\n    - æ˜¯æ•°æ®åº“å®¹é‡å—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶,ä¸èƒ½ç”¨ä½œæµ·é‡æ•°æ®çš„é«˜æ€§èƒ½è¯»å†™,å› æ­¤Redisé€‚åˆçš„åœºæ™¯ä¸»è¦å±€é™åœ¨è¾ƒå°æ•°æ®é‡çš„é«˜æ€§èƒ½æ“ä½œå’Œè¿ç®—ä¸Šã€‚\n    - Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ä¸ºé¿å…è¿™ä¸€é—®é¢˜ï¼Œè¿ç»´äººå‘˜åœ¨ç³»ç»Ÿä¸Šçº¿æ—¶å¿…é¡»ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¿™å¯¹èµ„æºé€ æˆäº†å¾ˆå¤§çš„æµªè´¹ã€‚\n\n  * ä¹è§‚é”å’Œæ‚²è§‚é”\n\n    æ‚²è§‚é”ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œ\n\n    ä¹è§‚é”ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚\n\n  * 6 MyISAMå’ŒInnoDB\n    MyISAM é€‚åˆäºä¸€äº›éœ€è¦å¤§é‡æŸ¥è¯¢çš„åº”ç”¨ï¼Œä½†å…¶å¯¹äºæœ‰å¤§é‡å†™æ“ä½œå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ç”šè‡³ä½ åªæ˜¯éœ€è¦updateä¸€ä¸ªå­—æ®µï¼Œæ•´ä¸ªè¡¨éƒ½ä¼šè¢«é”èµ·æ¥ï¼Œè€Œåˆ«çš„è¿›ç¨‹ï¼Œå°±ç®—æ˜¯è¯»è¿›ç¨‹éƒ½æ— æ³•æ“ä½œç›´åˆ°è¯»æ“ä½œå®Œæˆã€‚å¦å¤–ï¼ŒMyISAM å¯¹äº SELECT COUNT(*) è¿™ç±»çš„è®¡ç®—æ˜¯è¶…å¿«æ— æ¯”çš„ã€‚\n\n    InnoDB çš„è¶‹åŠ¿ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å­˜å‚¨å¼•æ“ï¼Œå¯¹äºä¸€äº›å°çš„åº”ç”¨ï¼Œå®ƒä¼šæ¯” MyISAM è¿˜æ…¢ã€‚ä»–æ˜¯å®ƒæ”¯æŒâ€œè¡Œé”â€ ï¼Œäºæ˜¯åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šæ›´ä¼˜ç§€ã€‚å¹¶ä¸”ï¼Œä»–è¿˜æ”¯æŒæ›´å¤šçš„é«˜çº§åº”ç”¨ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡ã€‚\n\n    mysql æ•°æ®åº“å¼•æ“: http://www.cnblogs.com/0201zcr/p/5296843.html MySQLå­˜å‚¨å¼•æ“ï¼ï¼MyISAMä¸InnoDBåŒºåˆ«: https://segmentfault.com/a/1190000008227211\n\n    â€‹","source":"_posts/é¢è¯•æ€»ç»“.md","raw":"---\ntitle: pythonå¸¸ç”¨ms\ndate: 2017-04-24 16:10:15\ntags: python\ncategories: Python\n---\n\n\n\n---\n\n---\n\n## æŠ€æœ¯é¢è¯•å‡†å¤‡\n\nhttps://github.com/taizilongxu/interview_python\n\n### pythonåŸºç¡€\n\n* é¢å‘å¯¹è±¡\n\n  ä¸‰å¤§ç‰¹æ€§:ç»§æ‰¿,å¤šæ€,å°è£…\n\n  é¢å‘è¿‡ç¨‹vsé¢å‘å¯¹è±¡: é¢å‘è¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ç¨‹åºå¤æ‚åº¦ä½,åªè¦é¡ºç€æ‰§è¡Œæ­¥éª¤å †å ä»£ç å³å¯,ç¼ºç‚¹æ˜¯ä¸€å¥—æµç¨‹è§£å†³ä¸€ä¸ªé—®é¢˜,ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«.\n\n  è‘—åçš„åº”ç”¨:Linuxå†…æ ¸,git,Apache serverç­‰\n\n  é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³ä¸‡ç‰©çš†å¯¹è±¡,è§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§,å¯¹æŸä¸ªå¯¹è±¡ä¿®æ”¹ä¼šç«‹åˆ»ååº”åˆ°ä½“ç³»ä¸­.ç¼ºç‚¹æ˜¯å¯æ§æ€§å·®,è§£å†³é—®é¢˜ä¸€å¼€å§‹å°±æ˜¯ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ¥è§£å†³.\n\n  - ç±»,å¯¹è±¡,å®ä¾‹,å®ä¾‹åŒ–\n\n    ç±»:å…·æœ‰ç›¸åŒç‰¹å¾çš„ä¸€ç±»äº‹ç‰©     å¯¹è±¡/å®ä¾‹:å…·ä½“çš„æŸä¸ªäº‹ç‰©\n\n    å®ä¾‹åŒ–,ç±»â€”>å¯¹è±¡çš„è¿‡ç¨‹\n\n    ```\n    >>> dict #ç±»å‹dictå°±æ˜¯ç±»dict\n    <class 'dict'>\n    >>> d=dict(name='eva') #å®ä¾‹åŒ–\n    >>> d.pop('name') #å‘då‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰§è¡Œdçš„æ–¹æ³•pop\n    'eva'\n    --------------------------\n    egg = Person('egon')  #ç±»å()å°±ç­‰äºåœ¨æ‰§è¡ŒPerson.__init__()\n    #æ‰§è¡Œå®Œ__init__()å°±ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ç±»ä¼¼ä¸€ä¸ªå­—å…¸ï¼Œå­˜ç€å±äºè¿™ä¸ªäººæœ¬èº«çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚\n    #ä½ å¯ä»¥å·å·çš„ç†è§£ï¼šegg = {'name':'egon','walk':walk}\n    ```\n\n* è®¾è®¡æ¨¡å¼ - å•ä¾‹ - è£…é¥°å™¨ - MVC\n\n  * å•ä¾‹æ¨¡å¼ - å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹ç±»çš„ç‰¹æ®Šç±»,é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ä¸”è¯¥å®ä¾‹æ˜“äºå¤–æ¥è®¿é—®,ä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹çš„ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æº.å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ª,å•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ.\\__new__()åœ¨\\__init__()ä¹‹å‰è¢«è°ƒç”¨,ç”¨äºç”Ÿäº§å®ä¾‹å¯¹è±¡,åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å’Œç±»å±æ€§å¯ä»¥å®ç°å•ä¾‹.\n\n    ä½¿ç”¨\\__new__()\n\n    ```python\n    class Func(object):\n        def __new__(cls,*args,**kw):\n            if not hasattr(cls,'_instance'):\n                a = super(Func,cls)\n                cls._instance = a.__new__(cls,*args,**kw) \n            return cls._instance\n    class Myclass(Func):\n        b = 1\n    ```\n\n    import æ–¹æ³•\n\n    è£…é¥°å™¨æ–¹æ³•\n\n    ```python\n    def func(cls,*args,**kw):\n        instances = {}\n        def get_instance():\n            if cls not in instances:\n                instances[cls] = cls(*args,**kw)\n            return instances[cls]\n        return get_instance\n    @func\n    class MyClass:\n        ...\n    ```\n\n* ç½‘ç»œç¼–ç¨‹-HTTP,TCP,UDP,ajax\n\n  * AJAX,Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰, æ˜¯ä¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯\n\n  * http:æ˜¯ç”¨äºwwwæµè§ˆçš„ä¸€ä¸ªåè®®ã€‚ä½†æ˜¯åŸºäºtcpçš„\n    tcpï¼šæ˜¯æœºå™¨ä¹‹é—´å»ºç«‹è¿æ¥ç”¨çš„åˆ°çš„ä¸€ä¸ªåè®®ã€‚\n\n    |            | TCP                                    | UDP                                  |\n    | ---------- | -------------------------------------- | ------------------------------------ |\n    | æ˜¯å¦è¿æ¥   | é¢å‘è¿æ¥                               | é¢å‘éè¿æ¥                           |\n    | ä¼ è¾“å¯é æ€§ | å¯é                                    | ä¸å¯é                                |\n    | åº”ç”¨åœºåˆ   | ä¼ è¾“å¤§é‡çš„æ•°æ®ï¼Œå¯¹å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆ | ä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ |\n    | é€Ÿåº¦       | æ…¢                                     | å¿«                                   |\n\n    1 ä¸‰æ¬¡æ¡æ‰‹\n    å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•° Aã€‚\n    æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACK çš„ç¡®è®¤ç åº”ä¸º A+1ï¼ŒSYN/ACK åŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºåºå· Bã€‚\n    æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚å½“æœåŠ¡ç«¯å—åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰è·¯æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚æ­¤æ—¶åŒ…åºå·è¢«è®¾å®šä¸ºæ”¶åˆ°çš„ç¡®è®¤å· A+1ï¼Œè€Œå“åº”åˆ™ä¸º B+1ã€‚\n    2 å››æ¬¡æŒ¥æ‰‹\n    æ³¨æ„: ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯. ä¸‹é¢ä»…ä»¥å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¸¾ä¾‹, åä¹‹äº¦ç„¶.\n\n    å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†æ®µ, å…¶ä¸­çš„ FIN æ ‡è®°è®¾ç½®ä¸º1. å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT çŠ¶æ€. è¯¥çŠ¶æ€ä¸‹å®¢æˆ·ç«¯åªæ¥æ”¶æ•°æ®, ä¸å†å‘é€æ•°æ®.\n    æœåŠ¡å™¨æ¥æ”¶åˆ°å¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å‘é€å¸¦æœ‰ ACK = 1 çš„å‰©ä½™æ•°æ®åˆ†æ®µ, ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ FIN ä¿¡æ¯.\n    æœåŠ¡å™¨ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¼ è¾“ç»“æŸ, å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å¹¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€, ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥å¸¦æœ‰ ACK = 1 çš„ç¡®è®¤æŠ¥æ–‡.\n    å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥å¸¦æœ‰ FIN = 1 çš„æŠ¥æ–‡, è¿”å› ACK = 1 çš„æŠ¥æ–‡ç¡®è®¤, ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç«¯æœªæ”¶åˆ°éœ€è¦é‡å‘, è¿›å…¥ TIME-WAIT çŠ¶æ€. æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡åå…³é—­è¿æ¥. å®¢æˆ·ç«¯ç­‰å¾… 2MSL åæœªæ”¶åˆ°å›å¤, åˆ™è®¤ä¸ºæœåŠ¡å™¨æˆåŠŸå…³é—­, å®¢æˆ·ç«¯å…³é—­è¿æ¥.\n\n* å¤šçº¿ç¨‹,å¤šè¿›ç¨‹,åç¨‹\n\n  * è®¡ç®—æœºç¡¬ä»¶è§’åº¦:\n\n    è®¡ç®—æœºæ ¸å¿ƒæ˜¯cpu,æ‰¿æ‹…äº†æ‰€æœ‰çš„è®¡ç®—ä»»åŠ¡,ä¸€ä¸ªcpu,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œåªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº.\n\n  * ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦:\n\n    è¿›ç¨‹å’Œçº¿ç¨‹,éƒ½æ˜¯ä¸€ç§cpuçš„æ‰§è¡Œå•å…ƒ,è¿›ç¨‹:è¡¨ç¤ºä¸€ä¸ªç¨‹åºçš„ä¸Šä¸‹æ–‡æ‰§è¡Œæ´»åŠ¨(æ‰“å¼€,æ‰§è¡Œ,ä¿å­˜)\n\n    çº¿ç¨‹:è¿›ç¨‹æ‰§è¡Œç¨‹åºæ—¶çš„æœ€å°è°ƒåº¦å•ä½,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹.\n\n  * å¹¶è¡Œ:\n\n    å¤šä¸ªcpuæ ¸å¿ƒ,ä¸åŒçš„ç¨‹åºåˆ†ç»™ä¸åŒçš„cpuè¿è¡Œ,å¯ä»¥è®©å¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œ.\n\n  * å¹¶å‘:å•ä¸ªcpuæ ¸å¿ƒ,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº,å¦‚æœéœ€è¦è¿è¡Œå¤šä¸ªç¨‹åº,åˆ™ä¸²è¡Œæ‰§è¡Œ.\n\n  * å¤šè¿›ç¨‹  - å¤šçº¿ç¨‹\n\n    åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡\n\n    è¿›ç¨‹:æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´,ä¸åŒè¿›ç¨‹ä¹‹é—´çš„å†…å­˜ç©ºé—´ä¸å…±äº«,è¿›åŸä¹‹é—´çš„é€šä¿¡ç”±æ“ä½œç³»ç»Ÿå¿è¿˜åœ°,å¯¼è‡´é€šè®¯æ•ˆç‡ä½,åˆ‡æ¢å¼€é”€å¤§.\n\n    çº¿ç¨‹:ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œé€šè®¯æ•ˆç‡é«˜ï¼Œåˆ‡æ¢å¼€é”€å°ã€‚å…±äº«æ„å‘³ç€ç«äº‰ï¼Œå¯¼è‡´æ•°æ®ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿æŠ¤å†…å­˜ç©ºé—´çš„æ•°æ®å®‰å…¨ï¼Œå¼•å…¥\"äº’æ–¥é”\"ã€‚\n\n    ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å†…å­˜ç©ºé—´æ—¶å…¶ä»–çº¿ç¨‹ä¸å…è®¸è®¿é—®,å¿…é¡»ç­‰å¾…ä¹‹å‰çš„çº¿ç¨‹è®¿é—®ç»“æŸ,æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå†…å­˜ç©ºé—´.\n\n    ---\n\n    Pythonçš„å¤šçº¿ç¨‹ï¼š\n\n    GIL å…¨å±€è§£é‡Šå™¨é”ï¼šçº¿ç¨‹çš„æ‰§è¡Œæƒé™ï¼Œåœ¨Pythonçš„è¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªGILã€‚\n\n    ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è·å–GILã€‚\n\n    å¥½å¤„ï¼šç›´æ¥æœç»äº†å¤šä¸ªçº¿ç¨‹è®¿é—®å†…å­˜ç©ºé—´çš„å®‰å…¨é—®é¢˜ã€‚\n    åå¤„ï¼šPythonçš„å¤šçº¿ç¨‹ä¸æ˜¯çœŸæ­£å¤šçº¿ç¨‹ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„èµ„æºã€‚\n\n    ä½†æ˜¯ï¼Œåœ¨I/Oé˜»å¡çš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šé‡Šæ”¾GILã€‚\n\n    å¤šè¿›ç¨‹ï¼šå¯†é›†CPUä»»åŠ¡ï¼Œéœ€è¦å……åˆ†ä½¿ç”¨å¤šæ ¸CPUèµ„æºï¼ˆæœåŠ¡å™¨ï¼Œå¤§é‡çš„å¹¶è¡Œè®¡ç®—ï¼‰çš„æ—¶å€™ï¼Œç”¨å¤šè¿›ç¨‹ã€‚ multiprocessing\n    ç¼ºé™·ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´é€šä¿¡æˆæœ¬é«˜ï¼Œåˆ‡æ¢å¼€é”€å¤§ã€‚\n\n    å¤šçº¿ç¨‹ï¼šå¯†é›†I/Oä»»åŠ¡ï¼ˆç½‘ç»œI/Oï¼Œç£ç›˜I/Oï¼Œæ•°æ®åº“I/Oï¼‰ä½¿ç”¨å¤šçº¿ç¨‹åˆé€‚ã€‚\n    threading.Threadã€multiprocessing.dummy\n    ç¼ºé™·ï¼šåŒä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½åšåˆ°é«˜å¹¶è¡Œï¼Œä½†æ˜¯å¯ä»¥åšåˆ°é«˜å¹¶å‘ã€‚\n\n    åç¨‹ï¼šåˆç§°å¾®çº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹ä¸Šæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œç”¨å‡½æ•°åˆ‡æ¢ï¼Œå¼€é”€æå°ã€‚ä¸é€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œæ²¡æœ‰è¿›ç¨‹ã€çº¿ç¨‹çš„åˆ‡æ¢å¼€é”€ã€‚genventï¼Œmonkey.patchall\n\n    å¤šçº¿ç¨‹è¯·æ±‚è¿”å›æ˜¯æ— åºçš„ï¼Œé‚£ä¸ªçº¿ç¨‹æœ‰æ•°æ®è¿”å›å°±å¤„ç†é‚£ä¸ªçº¿ç¨‹ï¼Œè€Œåç¨‹è¿”å›çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚\n\n    ç¼ºé™·ï¼šå•çº¿ç¨‹æ‰§è¡Œï¼Œå¤„ç†å¯†é›†CPUå’Œæœ¬åœ°ç£ç›˜IOçš„æ—¶å€™ï¼Œæ€§èƒ½è¾ƒä½ã€‚å¤„ç†ç½‘ç»œI/Oæ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒé«˜.\n\n    ---\n\n    å¤šè¿›ç¨‹multiprocessingæ¨¡å—\n\n    å¤šçº¿ç¨‹threading\n\n    åç¨‹ from gevent import monkey\n\n    ---\n\n    å¤„ç†é«˜å¹¶å‘:\n\n    twistedâ€”>tornad0â€”>gevent\n\n* æ•°æ®åº“\n\n  * äº‹åŠ¡\n\n    åŸå­æ€§,ä¸€è‡´æ€§,éš”ç¦»æ€§,æŒä¹…æ€§\n\n  * æ•°æ®åº“ç´¢å¼•\n\n    å»ºç«‹ç´¢å¼•çš„åŸåˆ™:\n\n    1,æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™,MySQLä¼šä¸€ç›´å‘å³åŒ¹é…åˆ°èŒƒå›´æŸ¥è¯¢å°±åœæ­¢åŒ¹é….\t\n\n    æ¯”å¦‚a = 1 and b = 2 and c > 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚\n\n    2,=å’Œinå¯ä»¥ä¹±åºæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼\n\n    3,å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•\n\n    4,ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è¿ç®—\n\n    5,å°½é‡çš„æ‰©å±•ç´¢å¼•,ä¸è¦æ–°å»ºç´¢å¼•\n\n    ---\n\n    https://tech.meituan.com/mysql-index.html\n\n    http://blog.codinglabs.org/articles/theory-of-mysql-index.html\n\n  * redis\n\n    k-væ•°æ®åº“,ä¸°å¯Œçš„æ•°æ®ç»“æ„string,map,list,sets,sorted sets\n\n    > â€‹\té€šå¸¸å±€é™ç‚¹æ¥è¯´ï¼ŒRedisä¹Ÿä»¥æ¶ˆæ¯é˜Ÿåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œä½œä¸ºå†…åµŒçš„Listå­˜åœ¨ï¼Œæ»¡è¶³å®æ—¶çš„é«˜å¹¶å‘éœ€æ±‚ã€‚åœ¨ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œredisæ¯”memcachedå…·æœ‰æ›´å¤šçš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”æ”¯æŒæ›´å¤šçš„æ•°æ®ç±»å‹ï¼ŒæŠŠrediså½“ä½œä¸€ä¸ªä¸­é—´å­˜å‚¨ç³»ç»Ÿï¼Œç”¨æ¥å¤„ç†é«˜å¹¶å‘çš„æ•°æ®åº“æ“ä½œ\n\n    - é€Ÿåº¦å¿«ï¼šä½¿ç”¨æ ‡å‡†Cå†™ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œè¯»å†™é€Ÿåº¦åˆ†åˆ«è¾¾åˆ°10ä¸‡/20ä¸‡\n    - æŒä¹…åŒ–ï¼šå¯¹æ•°æ®çš„æ›´æ–°é‡‡ç”¨Copy-on-writeæŠ€æœ¯ï¼Œå¯ä»¥å¼‚æ­¥åœ°ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥ï¼Œä¸€æ˜¯æ ¹æ®æ—¶é—´ï¼Œæ›´æ–°æ¬¡æ•°çš„å¿«ç…§ï¼ˆsave 300 10 ï¼‰äºŒæ˜¯åŸºäºè¯­å¥è¿½åŠ æ–¹å¼(Append-only fileï¼Œaof)\n    - è‡ªåŠ¨æ“ä½œï¼šå¯¹ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œéƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå¾ˆå®‰å…¨\n    - å¿«é€Ÿçš„ä¸»--ä»å¤åˆ¶ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ•°æ®ï¼ŒSlaveåœ¨21ç§’å³å®Œæˆäº†å¯¹Amazonç½‘ç«™10G key setçš„å¤åˆ¶ã€‚\n    - ShardingæŠ€æœ¯ï¼š å¾ˆå®¹æ˜“å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªRediså®ä¾‹ä¸­ï¼Œæ•°æ®åº“çš„æ‰©å±•æ˜¯ä¸ªæ°¸æ’çš„è¯é¢˜ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œä¸»è¦æ˜¯ä»¥æ·»åŠ ç¡¬ä»¶ã€ä»¥åˆ†åŒºä¸ºä¸»è¦æŠ€æœ¯å½¢å¼çš„çºµå‘æ‰©å±•è§£å†³äº†å¾ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä½†éšç€web2.0ã€ç§»åŠ¨äº’è”ç½‘ã€äº‘è®¡ç®—ç­‰åº”ç”¨çš„å…´èµ·ï¼Œè¿™ç§æ‰©å±•æ¨¡å¼å·²ç»ä¸å¤ªé€‚åˆäº†ï¼Œæ‰€ä»¥è¿‘å¹´æ¥ï¼Œåƒé‡‡ç”¨ä¸»ä»é…ç½®ã€æ•°æ®åº“å¤åˆ¶å½¢å¼çš„ï¼ŒShardingè¿™ç§æŠ€æœ¯æŠŠè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªç‰¹ç†èŠ‚ç‚¹ä¸Šå»çš„æ¨ªå‘æ‰©å±•æ–¹å¼ç”¨å¤„è¶Šæ¥è¶Šå¤šã€‚\n\n  * redisçš„ç¼ºç‚¹\n\n    - æ˜¯æ•°æ®åº“å®¹é‡å—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶,ä¸èƒ½ç”¨ä½œæµ·é‡æ•°æ®çš„é«˜æ€§èƒ½è¯»å†™,å› æ­¤Redisé€‚åˆçš„åœºæ™¯ä¸»è¦å±€é™åœ¨è¾ƒå°æ•°æ®é‡çš„é«˜æ€§èƒ½æ“ä½œå’Œè¿ç®—ä¸Šã€‚\n    - Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ä¸ºé¿å…è¿™ä¸€é—®é¢˜ï¼Œè¿ç»´äººå‘˜åœ¨ç³»ç»Ÿä¸Šçº¿æ—¶å¿…é¡»ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¿™å¯¹èµ„æºé€ æˆäº†å¾ˆå¤§çš„æµªè´¹ã€‚\n\n  * ä¹è§‚é”å’Œæ‚²è§‚é”\n\n    æ‚²è§‚é”ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œ\n\n    ä¹è§‚é”ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚\n\n  * 6 MyISAMå’ŒInnoDB\n    MyISAM é€‚åˆäºä¸€äº›éœ€è¦å¤§é‡æŸ¥è¯¢çš„åº”ç”¨ï¼Œä½†å…¶å¯¹äºæœ‰å¤§é‡å†™æ“ä½œå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ç”šè‡³ä½ åªæ˜¯éœ€è¦updateä¸€ä¸ªå­—æ®µï¼Œæ•´ä¸ªè¡¨éƒ½ä¼šè¢«é”èµ·æ¥ï¼Œè€Œåˆ«çš„è¿›ç¨‹ï¼Œå°±ç®—æ˜¯è¯»è¿›ç¨‹éƒ½æ— æ³•æ“ä½œç›´åˆ°è¯»æ“ä½œå®Œæˆã€‚å¦å¤–ï¼ŒMyISAM å¯¹äº SELECT COUNT(*) è¿™ç±»çš„è®¡ç®—æ˜¯è¶…å¿«æ— æ¯”çš„ã€‚\n\n    InnoDB çš„è¶‹åŠ¿ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å­˜å‚¨å¼•æ“ï¼Œå¯¹äºä¸€äº›å°çš„åº”ç”¨ï¼Œå®ƒä¼šæ¯” MyISAM è¿˜æ…¢ã€‚ä»–æ˜¯å®ƒæ”¯æŒâ€œè¡Œé”â€ ï¼Œäºæ˜¯åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šæ›´ä¼˜ç§€ã€‚å¹¶ä¸”ï¼Œä»–è¿˜æ”¯æŒæ›´å¤šçš„é«˜çº§åº”ç”¨ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡ã€‚\n\n    mysql æ•°æ®åº“å¼•æ“: http://www.cnblogs.com/0201zcr/p/5296843.html MySQLå­˜å‚¨å¼•æ“ï¼ï¼MyISAMä¸InnoDBåŒºåˆ«: https://segmentfault.com/a/1190000008227211\n\n    â€‹","slug":"é¢è¯•æ€»ç»“","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109hnh001m3kzjbzo757ob","content":"<hr>\n<hr>\n<h2 id=\"æŠ€æœ¯é¢è¯•å‡†å¤‡\"><a href=\"#æŠ€æœ¯é¢è¯•å‡†å¤‡\" class=\"headerlink\" title=\"æŠ€æœ¯é¢è¯•å‡†å¤‡\"></a>æŠ€æœ¯é¢è¯•å‡†å¤‡</h2><p><a href=\"https://github.com/taizilongxu/interview_python\" target=\"_blank\" rel=\"noopener\">https://github.com/taizilongxu/interview_python</a></p>\n<h3 id=\"pythonåŸºç¡€\"><a href=\"#pythonåŸºç¡€\" class=\"headerlink\" title=\"pythonåŸºç¡€\"></a>pythonåŸºç¡€</h3><ul>\n<li><p>é¢å‘å¯¹è±¡</p>\n<p>ä¸‰å¤§ç‰¹æ€§:ç»§æ‰¿,å¤šæ€,å°è£…</p>\n<p>é¢å‘è¿‡ç¨‹vsé¢å‘å¯¹è±¡: é¢å‘è¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ç¨‹åºå¤æ‚åº¦ä½,åªè¦é¡ºç€æ‰§è¡Œæ­¥éª¤å †å ä»£ç å³å¯,ç¼ºç‚¹æ˜¯ä¸€å¥—æµç¨‹è§£å†³ä¸€ä¸ªé—®é¢˜,ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«.</p>\n<p>è‘—åçš„åº”ç”¨:Linuxå†…æ ¸,git,Apache serverç­‰</p>\n<p>é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³ä¸‡ç‰©çš†å¯¹è±¡,è§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§,å¯¹æŸä¸ªå¯¹è±¡ä¿®æ”¹ä¼šç«‹åˆ»ååº”åˆ°ä½“ç³»ä¸­.ç¼ºç‚¹æ˜¯å¯æ§æ€§å·®,è§£å†³é—®é¢˜ä¸€å¼€å§‹å°±æ˜¯ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ¥è§£å†³.</p>\n<ul>\n<li><p>ç±»,å¯¹è±¡,å®ä¾‹,å®ä¾‹åŒ–</p>\n<p>ç±»:å…·æœ‰ç›¸åŒç‰¹å¾çš„ä¸€ç±»äº‹ç‰©     å¯¹è±¡/å®ä¾‹:å…·ä½“çš„æŸä¸ªäº‹ç‰©</p>\n<p>å®ä¾‹åŒ–,ç±»â€”&gt;å¯¹è±¡çš„è¿‡ç¨‹</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt; dict #ç±»å‹dictå°±æ˜¯ç±»dict</span><br><span class=\"line\">&lt;class 'dict'&gt;</span><br><span class=\"line\">&gt;&gt;&gt; d=dict(name='eva') #å®ä¾‹åŒ–</span><br><span class=\"line\">&gt;&gt;&gt; d.pop('name') #å‘då‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰§è¡Œdçš„æ–¹æ³•pop</span><br><span class=\"line\">'eva'</span><br><span class=\"line\">--------------------------</span><br><span class=\"line\">egg = Person('egon')  #ç±»å()å°±ç­‰äºåœ¨æ‰§è¡ŒPerson.__init__()</span><br><span class=\"line\">#æ‰§è¡Œå®Œ__init__()å°±ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ç±»ä¼¼ä¸€ä¸ªå­—å…¸ï¼Œå­˜ç€å±äºè¿™ä¸ªäººæœ¬èº«çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚</span><br><span class=\"line\">#ä½ å¯ä»¥å·å·çš„ç†è§£ï¼šegg = {'name':'egon','walk':walk}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n</li>\n<li><p>è®¾è®¡æ¨¡å¼ - å•ä¾‹ - è£…é¥°å™¨ - MVC</p>\n<ul>\n<li><p>å•ä¾‹æ¨¡å¼ - å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹ç±»çš„ç‰¹æ®Šç±»,é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ä¸”è¯¥å®ä¾‹æ˜“äºå¤–æ¥è®¿é—®,ä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹çš„ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æº.å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ª,å•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ._<em>new_</em>()åœ¨_<em>init_</em>()ä¹‹å‰è¢«è°ƒç”¨,ç”¨äºç”Ÿäº§å®ä¾‹å¯¹è±¡,åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å’Œç±»å±æ€§å¯ä»¥å®ç°å•ä¾‹.</p>\n<p>ä½¿ç”¨_<em>new_</em>()</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Func</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__new__</span><span class=\"params\">(cls,*args,**kw)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> hasattr(cls,<span class=\"string\">'_instance'</span>):</span><br><span class=\"line\">            a = super(Func,cls)</span><br><span class=\"line\">            cls._instance = a.__new__(cls,*args,**kw) </span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls._instance</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Myclass</span><span class=\"params\">(Func)</span>:</span></span><br><span class=\"line\">    b = <span class=\"number\">1</span></span><br></pre></td></tr></tbody></table></figure>\n\n<p>import æ–¹æ³•</p>\n<p>è£…é¥°å™¨æ–¹æ³•</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">func</span><span class=\"params\">(cls,*args,**kw)</span>:</span></span><br><span class=\"line\">    instances = {}</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_instance</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> cls <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> instances:</span><br><span class=\"line\">            instances[cls] = cls(*args,**kw)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> instances[cls]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> get_instance</span><br><span class=\"line\"><span class=\"meta\">@func</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClass</span>:</span></span><br><span class=\"line\">    ...</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n</li>\n<li><p>ç½‘ç»œç¼–ç¨‹-HTTP,TCP,UDP,ajax</p>\n<ul>\n<li><p>AJAX,Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰, æ˜¯ä¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯</p>\n</li>\n<li><p>http:æ˜¯ç”¨äºwwwæµè§ˆçš„ä¸€ä¸ªåè®®ã€‚ä½†æ˜¯åŸºäºtcpçš„<br>tcpï¼šæ˜¯æœºå™¨ä¹‹é—´å»ºç«‹è¿æ¥ç”¨çš„åˆ°çš„ä¸€ä¸ªåè®®ã€‚</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>TCP</th>\n<th>UDP</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æ˜¯å¦è¿æ¥</td>\n<td>é¢å‘è¿æ¥</td>\n<td>é¢å‘éè¿æ¥</td>\n</tr>\n<tr>\n<td>ä¼ è¾“å¯é æ€§</td>\n<td>å¯é </td>\n<td>ä¸å¯é </td>\n</tr>\n<tr>\n<td>åº”ç”¨åœºåˆ</td>\n<td>ä¼ è¾“å¤§é‡çš„æ•°æ®ï¼Œå¯¹å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆ</td>\n<td>ä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯</td>\n</tr>\n<tr>\n<td>é€Ÿåº¦</td>\n<td>æ…¢</td>\n<td>å¿«</td>\n</tr>\n</tbody></table>\n<p>1 ä¸‰æ¬¡æ¡æ‰‹<br>å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•° Aã€‚<br>æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACK çš„ç¡®è®¤ç åº”ä¸º A+1ï¼ŒSYN/ACK åŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºåºå· Bã€‚<br>æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚å½“æœåŠ¡ç«¯å—åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰è·¯æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚æ­¤æ—¶åŒ…åºå·è¢«è®¾å®šä¸ºæ”¶åˆ°çš„ç¡®è®¤å· A+1ï¼Œè€Œå“åº”åˆ™ä¸º B+1ã€‚<br>2 å››æ¬¡æŒ¥æ‰‹<br>æ³¨æ„: ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯. ä¸‹é¢ä»…ä»¥å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¸¾ä¾‹, åä¹‹äº¦ç„¶.</p>\n<p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†æ®µ, å…¶ä¸­çš„ FIN æ ‡è®°è®¾ç½®ä¸º1. å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT çŠ¶æ€. è¯¥çŠ¶æ€ä¸‹å®¢æˆ·ç«¯åªæ¥æ”¶æ•°æ®, ä¸å†å‘é€æ•°æ®.<br>æœåŠ¡å™¨æ¥æ”¶åˆ°å¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å‘é€å¸¦æœ‰ ACK = 1 çš„å‰©ä½™æ•°æ®åˆ†æ®µ, ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ FIN ä¿¡æ¯.<br>æœåŠ¡å™¨ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¼ è¾“ç»“æŸ, å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å¹¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€, ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥å¸¦æœ‰ ACK = 1 çš„ç¡®è®¤æŠ¥æ–‡.<br>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥å¸¦æœ‰ FIN = 1 çš„æŠ¥æ–‡, è¿”å› ACK = 1 çš„æŠ¥æ–‡ç¡®è®¤, ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç«¯æœªæ”¶åˆ°éœ€è¦é‡å‘, è¿›å…¥ TIME-WAIT çŠ¶æ€. æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡åå…³é—­è¿æ¥. å®¢æˆ·ç«¯ç­‰å¾… 2MSL åæœªæ”¶åˆ°å›å¤, åˆ™è®¤ä¸ºæœåŠ¡å™¨æˆåŠŸå…³é—­, å®¢æˆ·ç«¯å…³é—­è¿æ¥.</p>\n</li>\n</ul>\n</li>\n<li><p>å¤šçº¿ç¨‹,å¤šè¿›ç¨‹,åç¨‹</p>\n<ul>\n<li><p>è®¡ç®—æœºç¡¬ä»¶è§’åº¦:</p>\n<p>è®¡ç®—æœºæ ¸å¿ƒæ˜¯cpu,æ‰¿æ‹…äº†æ‰€æœ‰çš„è®¡ç®—ä»»åŠ¡,ä¸€ä¸ªcpu,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œåªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº.</p>\n</li>\n<li><p>ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦:</p>\n<p>è¿›ç¨‹å’Œçº¿ç¨‹,éƒ½æ˜¯ä¸€ç§cpuçš„æ‰§è¡Œå•å…ƒ,è¿›ç¨‹:è¡¨ç¤ºä¸€ä¸ªç¨‹åºçš„ä¸Šä¸‹æ–‡æ‰§è¡Œæ´»åŠ¨(æ‰“å¼€,æ‰§è¡Œ,ä¿å­˜)</p>\n<p>çº¿ç¨‹:è¿›ç¨‹æ‰§è¡Œç¨‹åºæ—¶çš„æœ€å°è°ƒåº¦å•ä½,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹.</p>\n</li>\n<li><p>å¹¶è¡Œ:</p>\n<p>å¤šä¸ªcpuæ ¸å¿ƒ,ä¸åŒçš„ç¨‹åºåˆ†ç»™ä¸åŒçš„cpuè¿è¡Œ,å¯ä»¥è®©å¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œ.</p>\n</li>\n<li><p>å¹¶å‘:å•ä¸ªcpuæ ¸å¿ƒ,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº,å¦‚æœéœ€è¦è¿è¡Œå¤šä¸ªç¨‹åº,åˆ™ä¸²è¡Œæ‰§è¡Œ.</p>\n</li>\n<li><p>å¤šè¿›ç¨‹  - å¤šçº¿ç¨‹</p>\n<p>åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡</p>\n<p>è¿›ç¨‹:æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´,ä¸åŒè¿›ç¨‹ä¹‹é—´çš„å†…å­˜ç©ºé—´ä¸å…±äº«,è¿›åŸä¹‹é—´çš„é€šä¿¡ç”±æ“ä½œç³»ç»Ÿå¿è¿˜åœ°,å¯¼è‡´é€šè®¯æ•ˆç‡ä½,åˆ‡æ¢å¼€é”€å¤§.</p>\n<p>çº¿ç¨‹:ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œé€šè®¯æ•ˆç‡é«˜ï¼Œåˆ‡æ¢å¼€é”€å°ã€‚å…±äº«æ„å‘³ç€ç«äº‰ï¼Œå¯¼è‡´æ•°æ®ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿æŠ¤å†…å­˜ç©ºé—´çš„æ•°æ®å®‰å…¨ï¼Œå¼•å…¥â€äº’æ–¥é”â€ã€‚</p>\n<p>ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å†…å­˜ç©ºé—´æ—¶å…¶ä»–çº¿ç¨‹ä¸å…è®¸è®¿é—®,å¿…é¡»ç­‰å¾…ä¹‹å‰çš„çº¿ç¨‹è®¿é—®ç»“æŸ,æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå†…å­˜ç©ºé—´.</p>\n<hr>\n<p>Pythonçš„å¤šçº¿ç¨‹ï¼š</p>\n<p>GIL å…¨å±€è§£é‡Šå™¨é”ï¼šçº¿ç¨‹çš„æ‰§è¡Œæƒé™ï¼Œåœ¨Pythonçš„è¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªGILã€‚</p>\n<p>ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è·å–GILã€‚</p>\n<p>å¥½å¤„ï¼šç›´æ¥æœç»äº†å¤šä¸ªçº¿ç¨‹è®¿é—®å†…å­˜ç©ºé—´çš„å®‰å…¨é—®é¢˜ã€‚<br>åå¤„ï¼šPythonçš„å¤šçº¿ç¨‹ä¸æ˜¯çœŸæ­£å¤šçº¿ç¨‹ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„èµ„æºã€‚</p>\n<p>ä½†æ˜¯ï¼Œåœ¨I/Oé˜»å¡çš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šé‡Šæ”¾GILã€‚</p>\n<p>å¤šè¿›ç¨‹ï¼šå¯†é›†CPUä»»åŠ¡ï¼Œéœ€è¦å……åˆ†ä½¿ç”¨å¤šæ ¸CPUèµ„æºï¼ˆæœåŠ¡å™¨ï¼Œå¤§é‡çš„å¹¶è¡Œè®¡ç®—ï¼‰çš„æ—¶å€™ï¼Œç”¨å¤šè¿›ç¨‹ã€‚ multiprocessing<br>ç¼ºé™·ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´é€šä¿¡æˆæœ¬é«˜ï¼Œåˆ‡æ¢å¼€é”€å¤§ã€‚</p>\n<p>å¤šçº¿ç¨‹ï¼šå¯†é›†I/Oä»»åŠ¡ï¼ˆç½‘ç»œI/Oï¼Œç£ç›˜I/Oï¼Œæ•°æ®åº“I/Oï¼‰ä½¿ç”¨å¤šçº¿ç¨‹åˆé€‚ã€‚<br>threading.Threadã€multiprocessing.dummy<br>ç¼ºé™·ï¼šåŒä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½åšåˆ°é«˜å¹¶è¡Œï¼Œä½†æ˜¯å¯ä»¥åšåˆ°é«˜å¹¶å‘ã€‚</p>\n<p>åç¨‹ï¼šåˆç§°å¾®çº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹ä¸Šæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œç”¨å‡½æ•°åˆ‡æ¢ï¼Œå¼€é”€æå°ã€‚ä¸é€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œæ²¡æœ‰è¿›ç¨‹ã€çº¿ç¨‹çš„åˆ‡æ¢å¼€é”€ã€‚genventï¼Œmonkey.patchall</p>\n<p>å¤šçº¿ç¨‹è¯·æ±‚è¿”å›æ˜¯æ— åºçš„ï¼Œé‚£ä¸ªçº¿ç¨‹æœ‰æ•°æ®è¿”å›å°±å¤„ç†é‚£ä¸ªçº¿ç¨‹ï¼Œè€Œåç¨‹è¿”å›çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚</p>\n<p>ç¼ºé™·ï¼šå•çº¿ç¨‹æ‰§è¡Œï¼Œå¤„ç†å¯†é›†CPUå’Œæœ¬åœ°ç£ç›˜IOçš„æ—¶å€™ï¼Œæ€§èƒ½è¾ƒä½ã€‚å¤„ç†ç½‘ç»œI/Oæ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒé«˜.</p>\n<hr>\n<p>å¤šè¿›ç¨‹multiprocessingæ¨¡å—</p>\n<p>å¤šçº¿ç¨‹threading</p>\n<p>åç¨‹ from gevent import monkey</p>\n<hr>\n<p>å¤„ç†é«˜å¹¶å‘:</p>\n<p>twistedâ€”&gt;tornad0â€”&gt;gevent</p>\n</li>\n</ul>\n</li>\n<li><p>æ•°æ®åº“</p>\n<ul>\n<li><p>äº‹åŠ¡</p>\n<p>åŸå­æ€§,ä¸€è‡´æ€§,éš”ç¦»æ€§,æŒä¹…æ€§</p>\n</li>\n<li><p>æ•°æ®åº“ç´¢å¼•</p>\n<p>å»ºç«‹ç´¢å¼•çš„åŸåˆ™:</p>\n<p>1,æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™,MySQLä¼šä¸€ç›´å‘å³åŒ¹é…åˆ°èŒƒå›´æŸ¥è¯¢å°±åœæ­¢åŒ¹é….    </p>\n<p>æ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚</p>\n<p>2,=å’Œinå¯ä»¥ä¹±åºæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼</p>\n<p>3,å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•</p>\n<p>4,ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è¿ç®—</p>\n<p>5,å°½é‡çš„æ‰©å±•ç´¢å¼•,ä¸è¦æ–°å»ºç´¢å¼•</p>\n<hr>\n<p><a href=\"https://tech.meituan.com/mysql-index.html\" target=\"_blank\" rel=\"noopener\">https://tech.meituan.com/mysql-index.html</a></p>\n<p><a href=\"http://blog.codinglabs.org/articles/theory-of-mysql-index.html\" target=\"_blank\" rel=\"noopener\">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>\n</li>\n<li><p>redis</p>\n<p>k-væ•°æ®åº“,ä¸°å¯Œçš„æ•°æ®ç»“æ„string,map,list,sets,sorted sets</p>\n<blockquote>\n<p>â€‹    é€šå¸¸å±€é™ç‚¹æ¥è¯´ï¼ŒRedisä¹Ÿä»¥æ¶ˆæ¯é˜Ÿåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œä½œä¸ºå†…åµŒçš„Listå­˜åœ¨ï¼Œæ»¡è¶³å®æ—¶çš„é«˜å¹¶å‘éœ€æ±‚ã€‚åœ¨ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œredisæ¯”memcachedå…·æœ‰æ›´å¤šçš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”æ”¯æŒæ›´å¤šçš„æ•°æ®ç±»å‹ï¼ŒæŠŠrediså½“ä½œä¸€ä¸ªä¸­é—´å­˜å‚¨ç³»ç»Ÿï¼Œç”¨æ¥å¤„ç†é«˜å¹¶å‘çš„æ•°æ®åº“æ“ä½œ</p>\n</blockquote>\n<ul>\n<li>é€Ÿåº¦å¿«ï¼šä½¿ç”¨æ ‡å‡†Cå†™ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œè¯»å†™é€Ÿåº¦åˆ†åˆ«è¾¾åˆ°10ä¸‡/20ä¸‡</li>\n<li>æŒä¹…åŒ–ï¼šå¯¹æ•°æ®çš„æ›´æ–°é‡‡ç”¨Copy-on-writeæŠ€æœ¯ï¼Œå¯ä»¥å¼‚æ­¥åœ°ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥ï¼Œä¸€æ˜¯æ ¹æ®æ—¶é—´ï¼Œæ›´æ–°æ¬¡æ•°çš„å¿«ç…§ï¼ˆsave 300 10 ï¼‰äºŒæ˜¯åŸºäºè¯­å¥è¿½åŠ æ–¹å¼(Append-only fileï¼Œaof)</li>\n<li>è‡ªåŠ¨æ“ä½œï¼šå¯¹ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œéƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå¾ˆå®‰å…¨</li>\n<li>å¿«é€Ÿçš„ä¸»â€“ä»å¤åˆ¶ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ•°æ®ï¼ŒSlaveåœ¨21ç§’å³å®Œæˆäº†å¯¹Amazonç½‘ç«™10G key setçš„å¤åˆ¶ã€‚</li>\n<li>ShardingæŠ€æœ¯ï¼š å¾ˆå®¹æ˜“å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªRediså®ä¾‹ä¸­ï¼Œæ•°æ®åº“çš„æ‰©å±•æ˜¯ä¸ªæ°¸æ’çš„è¯é¢˜ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œä¸»è¦æ˜¯ä»¥æ·»åŠ ç¡¬ä»¶ã€ä»¥åˆ†åŒºä¸ºä¸»è¦æŠ€æœ¯å½¢å¼çš„çºµå‘æ‰©å±•è§£å†³äº†å¾ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä½†éšç€web2.0ã€ç§»åŠ¨äº’è”ç½‘ã€äº‘è®¡ç®—ç­‰åº”ç”¨çš„å…´èµ·ï¼Œè¿™ç§æ‰©å±•æ¨¡å¼å·²ç»ä¸å¤ªé€‚åˆäº†ï¼Œæ‰€ä»¥è¿‘å¹´æ¥ï¼Œåƒé‡‡ç”¨ä¸»ä»é…ç½®ã€æ•°æ®åº“å¤åˆ¶å½¢å¼çš„ï¼ŒShardingè¿™ç§æŠ€æœ¯æŠŠè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªç‰¹ç†èŠ‚ç‚¹ä¸Šå»çš„æ¨ªå‘æ‰©å±•æ–¹å¼ç”¨å¤„è¶Šæ¥è¶Šå¤šã€‚</li>\n</ul>\n</li>\n<li><p>redisçš„ç¼ºç‚¹</p>\n<ul>\n<li>æ˜¯æ•°æ®åº“å®¹é‡å—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶,ä¸èƒ½ç”¨ä½œæµ·é‡æ•°æ®çš„é«˜æ€§èƒ½è¯»å†™,å› æ­¤Redisé€‚åˆçš„åœºæ™¯ä¸»è¦å±€é™åœ¨è¾ƒå°æ•°æ®é‡çš„é«˜æ€§èƒ½æ“ä½œå’Œè¿ç®—ä¸Šã€‚</li>\n<li>Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ä¸ºé¿å…è¿™ä¸€é—®é¢˜ï¼Œè¿ç»´äººå‘˜åœ¨ç³»ç»Ÿä¸Šçº¿æ—¶å¿…é¡»ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¿™å¯¹èµ„æºé€ æˆäº†å¾ˆå¤§çš„æµªè´¹ã€‚</li>\n</ul>\n</li>\n<li><p>ä¹è§‚é”å’Œæ‚²è§‚é”</p>\n<p>æ‚²è§‚é”ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œ</p>\n<p>ä¹è§‚é”ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚</p>\n</li>\n<li><p>6 MyISAMå’ŒInnoDB<br>MyISAM é€‚åˆäºä¸€äº›éœ€è¦å¤§é‡æŸ¥è¯¢çš„åº”ç”¨ï¼Œä½†å…¶å¯¹äºæœ‰å¤§é‡å†™æ“ä½œå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ç”šè‡³ä½ åªæ˜¯éœ€è¦updateä¸€ä¸ªå­—æ®µï¼Œæ•´ä¸ªè¡¨éƒ½ä¼šè¢«é”èµ·æ¥ï¼Œè€Œåˆ«çš„è¿›ç¨‹ï¼Œå°±ç®—æ˜¯è¯»è¿›ç¨‹éƒ½æ— æ³•æ“ä½œç›´åˆ°è¯»æ“ä½œå®Œæˆã€‚å¦å¤–ï¼ŒMyISAM å¯¹äº SELECT COUNT(*) è¿™ç±»çš„è®¡ç®—æ˜¯è¶…å¿«æ— æ¯”çš„ã€‚</p>\n<p>InnoDB çš„è¶‹åŠ¿ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å­˜å‚¨å¼•æ“ï¼Œå¯¹äºä¸€äº›å°çš„åº”ç”¨ï¼Œå®ƒä¼šæ¯” MyISAM è¿˜æ…¢ã€‚ä»–æ˜¯å®ƒæ”¯æŒâ€œè¡Œé”â€ ï¼Œäºæ˜¯åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šæ›´ä¼˜ç§€ã€‚å¹¶ä¸”ï¼Œä»–è¿˜æ”¯æŒæ›´å¤šçš„é«˜çº§åº”ç”¨ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡ã€‚</p>\n<p>mysql æ•°æ®åº“å¼•æ“: <a href=\"http://www.cnblogs.com/0201zcr/p/5296843.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/0201zcr/p/5296843.html</a> MySQLå­˜å‚¨å¼•æ“ï¼ï¼MyISAMä¸InnoDBåŒºåˆ«: <a href=\"https://segmentfault.com/a/1190000008227211\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000008227211</a></p>\n<p>â€‹</p>\n</li>\n</ul>\n</li>\n</ul>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<hr>\n<hr>\n<h2 id=\"æŠ€æœ¯é¢è¯•å‡†å¤‡\"><a href=\"#æŠ€æœ¯é¢è¯•å‡†å¤‡\" class=\"headerlink\" title=\"æŠ€æœ¯é¢è¯•å‡†å¤‡\"></a>æŠ€æœ¯é¢è¯•å‡†å¤‡</h2><p><a href=\"https://github.com/taizilongxu/interview_python\" target=\"_blank\" rel=\"noopener\">https://github.com/taizilongxu/interview_python</a></p>\n<h3 id=\"pythonåŸºç¡€\"><a href=\"#pythonåŸºç¡€\" class=\"headerlink\" title=\"pythonåŸºç¡€\"></a>pythonåŸºç¡€</h3><ul>\n<li><p>é¢å‘å¯¹è±¡</p>\n<p>ä¸‰å¤§ç‰¹æ€§:ç»§æ‰¿,å¤šæ€,å°è£…</p>\n<p>é¢å‘è¿‡ç¨‹vsé¢å‘å¯¹è±¡: é¢å‘è¿‡ç¨‹çš„ä¼˜ç‚¹æ˜¯ç¨‹åºå¤æ‚åº¦ä½,åªè¦é¡ºç€æ‰§è¡Œæ­¥éª¤å †å ä»£ç å³å¯,ç¼ºç‚¹æ˜¯ä¸€å¥—æµç¨‹è§£å†³ä¸€ä¸ªé—®é¢˜,ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«.</p>\n<p>è‘—åçš„åº”ç”¨:Linuxå†…æ ¸,git,Apache serverç­‰</p>\n<p>é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³ä¸‡ç‰©çš†å¯¹è±¡,è§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§,å¯¹æŸä¸ªå¯¹è±¡ä¿®æ”¹ä¼šç«‹åˆ»ååº”åˆ°ä½“ç³»ä¸­.ç¼ºç‚¹æ˜¯å¯æ§æ€§å·®,è§£å†³é—®é¢˜ä¸€å¼€å§‹å°±æ˜¯ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ¥è§£å†³.</p>\n<ul>\n<li><p>ç±»,å¯¹è±¡,å®ä¾‹,å®ä¾‹åŒ–</p>\n<p>ç±»:å…·æœ‰ç›¸åŒç‰¹å¾çš„ä¸€ç±»äº‹ç‰©     å¯¹è±¡/å®ä¾‹:å…·ä½“çš„æŸä¸ªäº‹ç‰©</p>\n<p>å®ä¾‹åŒ–,ç±»â€”&gt;å¯¹è±¡çš„è¿‡ç¨‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt; dict #ç±»å‹dictå°±æ˜¯ç±»dict</span><br><span class=\"line\">&lt;class &#39;dict&#39;&gt;</span><br><span class=\"line\">&gt;&gt;&gt; d&#x3D;dict(name&#x3D;&#39;eva&#39;) #å®ä¾‹åŒ–</span><br><span class=\"line\">&gt;&gt;&gt; d.pop(&#39;name&#39;) #å‘då‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰§è¡Œdçš„æ–¹æ³•pop</span><br><span class=\"line\">&#39;eva&#39;</span><br><span class=\"line\">--------------------------</span><br><span class=\"line\">egg &#x3D; Person(&#39;egon&#39;)  #ç±»å()å°±ç­‰äºåœ¨æ‰§è¡ŒPerson.__init__()</span><br><span class=\"line\">#æ‰§è¡Œå®Œ__init__()å°±ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ç±»ä¼¼ä¸€ä¸ªå­—å…¸ï¼Œå­˜ç€å±äºè¿™ä¸ªäººæœ¬èº«çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚</span><br><span class=\"line\">#ä½ å¯ä»¥å·å·çš„ç†è§£ï¼šegg &#x3D; &#123;&#39;name&#39;:&#39;egon&#39;,&#39;walk&#39;:walk&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>è®¾è®¡æ¨¡å¼ - å•ä¾‹ - è£…é¥°å™¨ - MVC</p>\n<ul>\n<li><p>å•ä¾‹æ¨¡å¼ - å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹ç±»çš„ç‰¹æ®Šç±»,é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ä¸”è¯¥å®ä¾‹æ˜“äºå¤–æ¥è®¿é—®,ä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹çš„ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æº.å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ª,å•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ._<em>new_</em>()åœ¨_<em>init_</em>()ä¹‹å‰è¢«è°ƒç”¨,ç”¨äºç”Ÿäº§å®ä¾‹å¯¹è±¡,åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å’Œç±»å±æ€§å¯ä»¥å®ç°å•ä¾‹.</p>\n<p>ä½¿ç”¨_<em>new_</em>()</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Func</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__new__</span><span class=\"params\">(cls,*args,**kw)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> hasattr(cls,<span class=\"string\">'_instance'</span>):</span><br><span class=\"line\">            a = super(Func,cls)</span><br><span class=\"line\">            cls._instance = a.__new__(cls,*args,**kw) </span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls._instance</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Myclass</span><span class=\"params\">(Func)</span>:</span></span><br><span class=\"line\">    b = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<p>import æ–¹æ³•</p>\n<p>è£…é¥°å™¨æ–¹æ³•</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">func</span><span class=\"params\">(cls,*args,**kw)</span>:</span></span><br><span class=\"line\">    instances = &#123;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_instance</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> cls <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> instances:</span><br><span class=\"line\">            instances[cls] = cls(*args,**kw)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> instances[cls]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> get_instance</span><br><span class=\"line\"><span class=\"meta\">@func</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClass</span>:</span></span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>ç½‘ç»œç¼–ç¨‹-HTTP,TCP,UDP,ajax</p>\n<ul>\n<li><p>AJAX,Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰, æ˜¯ä¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯</p>\n</li>\n<li><p>http:æ˜¯ç”¨äºwwwæµè§ˆçš„ä¸€ä¸ªåè®®ã€‚ä½†æ˜¯åŸºäºtcpçš„<br>tcpï¼šæ˜¯æœºå™¨ä¹‹é—´å»ºç«‹è¿æ¥ç”¨çš„åˆ°çš„ä¸€ä¸ªåè®®ã€‚</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>TCP</th>\n<th>UDP</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æ˜¯å¦è¿æ¥</td>\n<td>é¢å‘è¿æ¥</td>\n<td>é¢å‘éè¿æ¥</td>\n</tr>\n<tr>\n<td>ä¼ è¾“å¯é æ€§</td>\n<td>å¯é </td>\n<td>ä¸å¯é </td>\n</tr>\n<tr>\n<td>åº”ç”¨åœºåˆ</td>\n<td>ä¼ è¾“å¤§é‡çš„æ•°æ®ï¼Œå¯¹å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆ</td>\n<td>ä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯</td>\n</tr>\n<tr>\n<td>é€Ÿåº¦</td>\n<td>æ…¢</td>\n<td>å¿«</td>\n</tr>\n</tbody></table>\n<p>1 ä¸‰æ¬¡æ¡æ‰‹<br>å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•° Aã€‚<br>æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACK çš„ç¡®è®¤ç åº”ä¸º A+1ï¼ŒSYN/ACK åŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºåºå· Bã€‚<br>æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚å½“æœåŠ¡ç«¯å—åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰è·¯æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚æ­¤æ—¶åŒ…åºå·è¢«è®¾å®šä¸ºæ”¶åˆ°çš„ç¡®è®¤å· A+1ï¼Œè€Œå“åº”åˆ™ä¸º B+1ã€‚<br>2 å››æ¬¡æŒ¥æ‰‹<br>æ³¨æ„: ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯. ä¸‹é¢ä»…ä»¥å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¸¾ä¾‹, åä¹‹äº¦ç„¶.</p>\n<p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†æ®µ, å…¶ä¸­çš„ FIN æ ‡è®°è®¾ç½®ä¸º1. å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT çŠ¶æ€. è¯¥çŠ¶æ€ä¸‹å®¢æˆ·ç«¯åªæ¥æ”¶æ•°æ®, ä¸å†å‘é€æ•°æ®.<br>æœåŠ¡å™¨æ¥æ”¶åˆ°å¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å‘é€å¸¦æœ‰ ACK = 1 çš„å‰©ä½™æ•°æ®åˆ†æ®µ, ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ FIN ä¿¡æ¯.<br>æœåŠ¡å™¨ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¼ è¾“ç»“æŸ, å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å¹¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€, ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥å¸¦æœ‰ ACK = 1 çš„ç¡®è®¤æŠ¥æ–‡.<br>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥å¸¦æœ‰ FIN = 1 çš„æŠ¥æ–‡, è¿”å› ACK = 1 çš„æŠ¥æ–‡ç¡®è®¤, ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç«¯æœªæ”¶åˆ°éœ€è¦é‡å‘, è¿›å…¥ TIME-WAIT çŠ¶æ€. æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡åå…³é—­è¿æ¥. å®¢æˆ·ç«¯ç­‰å¾… 2MSL åæœªæ”¶åˆ°å›å¤, åˆ™è®¤ä¸ºæœåŠ¡å™¨æˆåŠŸå…³é—­, å®¢æˆ·ç«¯å…³é—­è¿æ¥.</p>\n</li>\n</ul>\n</li>\n<li><p>å¤šçº¿ç¨‹,å¤šè¿›ç¨‹,åç¨‹</p>\n<ul>\n<li><p>è®¡ç®—æœºç¡¬ä»¶è§’åº¦:</p>\n<p>è®¡ç®—æœºæ ¸å¿ƒæ˜¯cpu,æ‰¿æ‹…äº†æ‰€æœ‰çš„è®¡ç®—ä»»åŠ¡,ä¸€ä¸ªcpu,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œåªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº.</p>\n</li>\n<li><p>ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦:</p>\n<p>è¿›ç¨‹å’Œçº¿ç¨‹,éƒ½æ˜¯ä¸€ç§cpuçš„æ‰§è¡Œå•å…ƒ,è¿›ç¨‹:è¡¨ç¤ºä¸€ä¸ªç¨‹åºçš„ä¸Šä¸‹æ–‡æ‰§è¡Œæ´»åŠ¨(æ‰“å¼€,æ‰§è¡Œ,ä¿å­˜)</p>\n<p>çº¿ç¨‹:è¿›ç¨‹æ‰§è¡Œç¨‹åºæ—¶çš„æœ€å°è°ƒåº¦å•ä½,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹.</p>\n</li>\n<li><p>å¹¶è¡Œ:</p>\n<p>å¤šä¸ªcpuæ ¸å¿ƒ,ä¸åŒçš„ç¨‹åºåˆ†ç»™ä¸åŒçš„cpuè¿è¡Œ,å¯ä»¥è®©å¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œ.</p>\n</li>\n<li><p>å¹¶å‘:å•ä¸ªcpuæ ¸å¿ƒ,åœ¨ä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡é‡Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åº,å¦‚æœéœ€è¦è¿è¡Œå¤šä¸ªç¨‹åº,åˆ™ä¸²è¡Œæ‰§è¡Œ.</p>\n</li>\n<li><p>å¤šè¿›ç¨‹  - å¤šçº¿ç¨‹</p>\n<p>åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡</p>\n<p>è¿›ç¨‹:æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´,ä¸åŒè¿›ç¨‹ä¹‹é—´çš„å†…å­˜ç©ºé—´ä¸å…±äº«,è¿›åŸä¹‹é—´çš„é€šä¿¡ç”±æ“ä½œç³»ç»Ÿå¿è¿˜åœ°,å¯¼è‡´é€šè®¯æ•ˆç‡ä½,åˆ‡æ¢å¼€é”€å¤§.</p>\n<p>çº¿ç¨‹:ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œé€šè®¯æ•ˆç‡é«˜ï¼Œåˆ‡æ¢å¼€é”€å°ã€‚å…±äº«æ„å‘³ç€ç«äº‰ï¼Œå¯¼è‡´æ•°æ®ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿æŠ¤å†…å­˜ç©ºé—´çš„æ•°æ®å®‰å…¨ï¼Œå¼•å…¥â€äº’æ–¥é”â€ã€‚</p>\n<p>ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å†…å­˜ç©ºé—´æ—¶å…¶ä»–çº¿ç¨‹ä¸å…è®¸è®¿é—®,å¿…é¡»ç­‰å¾…ä¹‹å‰çš„çº¿ç¨‹è®¿é—®ç»“æŸ,æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå†…å­˜ç©ºé—´.</p>\n<hr>\n<p>Pythonçš„å¤šçº¿ç¨‹ï¼š</p>\n<p>GIL å…¨å±€è§£é‡Šå™¨é”ï¼šçº¿ç¨‹çš„æ‰§è¡Œæƒé™ï¼Œåœ¨Pythonçš„è¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªGILã€‚</p>\n<p>ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è·å–GILã€‚</p>\n<p>å¥½å¤„ï¼šç›´æ¥æœç»äº†å¤šä¸ªçº¿ç¨‹è®¿é—®å†…å­˜ç©ºé—´çš„å®‰å…¨é—®é¢˜ã€‚<br>åå¤„ï¼šPythonçš„å¤šçº¿ç¨‹ä¸æ˜¯çœŸæ­£å¤šçº¿ç¨‹ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„èµ„æºã€‚</p>\n<p>ä½†æ˜¯ï¼Œåœ¨I/Oé˜»å¡çš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šé‡Šæ”¾GILã€‚</p>\n<p>å¤šè¿›ç¨‹ï¼šå¯†é›†CPUä»»åŠ¡ï¼Œéœ€è¦å……åˆ†ä½¿ç”¨å¤šæ ¸CPUèµ„æºï¼ˆæœåŠ¡å™¨ï¼Œå¤§é‡çš„å¹¶è¡Œè®¡ç®—ï¼‰çš„æ—¶å€™ï¼Œç”¨å¤šè¿›ç¨‹ã€‚ multiprocessing<br>ç¼ºé™·ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´é€šä¿¡æˆæœ¬é«˜ï¼Œåˆ‡æ¢å¼€é”€å¤§ã€‚</p>\n<p>å¤šçº¿ç¨‹ï¼šå¯†é›†I/Oä»»åŠ¡ï¼ˆç½‘ç»œI/Oï¼Œç£ç›˜I/Oï¼Œæ•°æ®åº“I/Oï¼‰ä½¿ç”¨å¤šçº¿ç¨‹åˆé€‚ã€‚<br>threading.Threadã€multiprocessing.dummy<br>ç¼ºé™·ï¼šåŒä¸€ä¸ªæ—¶é—´åˆ‡ç‰‡åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½åšåˆ°é«˜å¹¶è¡Œï¼Œä½†æ˜¯å¯ä»¥åšåˆ°é«˜å¹¶å‘ã€‚</p>\n<p>åç¨‹ï¼šåˆç§°å¾®çº¿ç¨‹ï¼Œåœ¨å•çº¿ç¨‹ä¸Šæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œç”¨å‡½æ•°åˆ‡æ¢ï¼Œå¼€é”€æå°ã€‚ä¸é€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œæ²¡æœ‰è¿›ç¨‹ã€çº¿ç¨‹çš„åˆ‡æ¢å¼€é”€ã€‚genventï¼Œmonkey.patchall</p>\n<p>å¤šçº¿ç¨‹è¯·æ±‚è¿”å›æ˜¯æ— åºçš„ï¼Œé‚£ä¸ªçº¿ç¨‹æœ‰æ•°æ®è¿”å›å°±å¤„ç†é‚£ä¸ªçº¿ç¨‹ï¼Œè€Œåç¨‹è¿”å›çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚</p>\n<p>ç¼ºé™·ï¼šå•çº¿ç¨‹æ‰§è¡Œï¼Œå¤„ç†å¯†é›†CPUå’Œæœ¬åœ°ç£ç›˜IOçš„æ—¶å€™ï¼Œæ€§èƒ½è¾ƒä½ã€‚å¤„ç†ç½‘ç»œI/Oæ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒé«˜.</p>\n<hr>\n<p>å¤šè¿›ç¨‹multiprocessingæ¨¡å—</p>\n<p>å¤šçº¿ç¨‹threading</p>\n<p>åç¨‹ from gevent import monkey</p>\n<hr>\n<p>å¤„ç†é«˜å¹¶å‘:</p>\n<p>twistedâ€”&gt;tornad0â€”&gt;gevent</p>\n</li>\n</ul>\n</li>\n<li><p>æ•°æ®åº“</p>\n<ul>\n<li><p>äº‹åŠ¡</p>\n<p>åŸå­æ€§,ä¸€è‡´æ€§,éš”ç¦»æ€§,æŒä¹…æ€§</p>\n</li>\n<li><p>æ•°æ®åº“ç´¢å¼•</p>\n<p>å»ºç«‹ç´¢å¼•çš„åŸåˆ™:</p>\n<p>1,æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™,MySQLä¼šä¸€ç›´å‘å³åŒ¹é…åˆ°èŒƒå›´æŸ¥è¯¢å°±åœæ­¢åŒ¹é….    </p>\n<p>æ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚</p>\n<p>2,=å’Œinå¯ä»¥ä¹±åºæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼</p>\n<p>3,å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•</p>\n<p>4,ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è¿ç®—</p>\n<p>5,å°½é‡çš„æ‰©å±•ç´¢å¼•,ä¸è¦æ–°å»ºç´¢å¼•</p>\n<hr>\n<p><a href=\"https://tech.meituan.com/mysql-index.html\" target=\"_blank\" rel=\"noopener\">https://tech.meituan.com/mysql-index.html</a></p>\n<p><a href=\"http://blog.codinglabs.org/articles/theory-of-mysql-index.html\" target=\"_blank\" rel=\"noopener\">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>\n</li>\n<li><p>redis</p>\n<p>k-væ•°æ®åº“,ä¸°å¯Œçš„æ•°æ®ç»“æ„string,map,list,sets,sorted sets</p>\n<blockquote>\n<p>â€‹    é€šå¸¸å±€é™ç‚¹æ¥è¯´ï¼ŒRedisä¹Ÿä»¥æ¶ˆæ¯é˜Ÿåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œä½œä¸ºå†…åµŒçš„Listå­˜åœ¨ï¼Œæ»¡è¶³å®æ—¶çš„é«˜å¹¶å‘éœ€æ±‚ã€‚åœ¨ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œredisæ¯”memcachedå…·æœ‰æ›´å¤šçš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”æ”¯æŒæ›´å¤šçš„æ•°æ®ç±»å‹ï¼ŒæŠŠrediså½“ä½œä¸€ä¸ªä¸­é—´å­˜å‚¨ç³»ç»Ÿï¼Œç”¨æ¥å¤„ç†é«˜å¹¶å‘çš„æ•°æ®åº“æ“ä½œ</p>\n</blockquote>\n<ul>\n<li>é€Ÿåº¦å¿«ï¼šä½¿ç”¨æ ‡å‡†Cå†™ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œè¯»å†™é€Ÿåº¦åˆ†åˆ«è¾¾åˆ°10ä¸‡/20ä¸‡</li>\n<li>æŒä¹…åŒ–ï¼šå¯¹æ•°æ®çš„æ›´æ–°é‡‡ç”¨Copy-on-writeæŠ€æœ¯ï¼Œå¯ä»¥å¼‚æ­¥åœ°ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥ï¼Œä¸€æ˜¯æ ¹æ®æ—¶é—´ï¼Œæ›´æ–°æ¬¡æ•°çš„å¿«ç…§ï¼ˆsave 300 10 ï¼‰äºŒæ˜¯åŸºäºè¯­å¥è¿½åŠ æ–¹å¼(Append-only fileï¼Œaof)</li>\n<li>è‡ªåŠ¨æ“ä½œï¼šå¯¹ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œéƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå¾ˆå®‰å…¨</li>\n<li>å¿«é€Ÿçš„ä¸»â€“ä»å¤åˆ¶ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ•°æ®ï¼ŒSlaveåœ¨21ç§’å³å®Œæˆäº†å¯¹Amazonç½‘ç«™10G key setçš„å¤åˆ¶ã€‚</li>\n<li>ShardingæŠ€æœ¯ï¼š å¾ˆå®¹æ˜“å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªRediså®ä¾‹ä¸­ï¼Œæ•°æ®åº“çš„æ‰©å±•æ˜¯ä¸ªæ°¸æ’çš„è¯é¢˜ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œä¸»è¦æ˜¯ä»¥æ·»åŠ ç¡¬ä»¶ã€ä»¥åˆ†åŒºä¸ºä¸»è¦æŠ€æœ¯å½¢å¼çš„çºµå‘æ‰©å±•è§£å†³äº†å¾ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä½†éšç€web2.0ã€ç§»åŠ¨äº’è”ç½‘ã€äº‘è®¡ç®—ç­‰åº”ç”¨çš„å…´èµ·ï¼Œè¿™ç§æ‰©å±•æ¨¡å¼å·²ç»ä¸å¤ªé€‚åˆäº†ï¼Œæ‰€ä»¥è¿‘å¹´æ¥ï¼Œåƒé‡‡ç”¨ä¸»ä»é…ç½®ã€æ•°æ®åº“å¤åˆ¶å½¢å¼çš„ï¼ŒShardingè¿™ç§æŠ€æœ¯æŠŠè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªç‰¹ç†èŠ‚ç‚¹ä¸Šå»çš„æ¨ªå‘æ‰©å±•æ–¹å¼ç”¨å¤„è¶Šæ¥è¶Šå¤šã€‚</li>\n</ul>\n</li>\n<li><p>redisçš„ç¼ºç‚¹</p>\n<ul>\n<li>æ˜¯æ•°æ®åº“å®¹é‡å—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶,ä¸èƒ½ç”¨ä½œæµ·é‡æ•°æ®çš„é«˜æ€§èƒ½è¯»å†™,å› æ­¤Redisé€‚åˆçš„åœºæ™¯ä¸»è¦å±€é™åœ¨è¾ƒå°æ•°æ®é‡çš„é«˜æ€§èƒ½æ“ä½œå’Œè¿ç®—ä¸Šã€‚</li>\n<li>Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ä¸ºé¿å…è¿™ä¸€é—®é¢˜ï¼Œè¿ç»´äººå‘˜åœ¨ç³»ç»Ÿä¸Šçº¿æ—¶å¿…é¡»ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¿™å¯¹èµ„æºé€ æˆäº†å¾ˆå¤§çš„æµªè´¹ã€‚</li>\n</ul>\n</li>\n<li><p>ä¹è§‚é”å’Œæ‚²è§‚é”</p>\n<p>æ‚²è§‚é”ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œ</p>\n<p>ä¹è§‚é”ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚</p>\n</li>\n<li><p>6 MyISAMå’ŒInnoDB<br>MyISAM é€‚åˆäºä¸€äº›éœ€è¦å¤§é‡æŸ¥è¯¢çš„åº”ç”¨ï¼Œä½†å…¶å¯¹äºæœ‰å¤§é‡å†™æ“ä½œå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ç”šè‡³ä½ åªæ˜¯éœ€è¦updateä¸€ä¸ªå­—æ®µï¼Œæ•´ä¸ªè¡¨éƒ½ä¼šè¢«é”èµ·æ¥ï¼Œè€Œåˆ«çš„è¿›ç¨‹ï¼Œå°±ç®—æ˜¯è¯»è¿›ç¨‹éƒ½æ— æ³•æ“ä½œç›´åˆ°è¯»æ“ä½œå®Œæˆã€‚å¦å¤–ï¼ŒMyISAM å¯¹äº SELECT COUNT(*) è¿™ç±»çš„è®¡ç®—æ˜¯è¶…å¿«æ— æ¯”çš„ã€‚</p>\n<p>InnoDB çš„è¶‹åŠ¿ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å­˜å‚¨å¼•æ“ï¼Œå¯¹äºä¸€äº›å°çš„åº”ç”¨ï¼Œå®ƒä¼šæ¯” MyISAM è¿˜æ…¢ã€‚ä»–æ˜¯å®ƒæ”¯æŒâ€œè¡Œé”â€ ï¼Œäºæ˜¯åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šæ›´ä¼˜ç§€ã€‚å¹¶ä¸”ï¼Œä»–è¿˜æ”¯æŒæ›´å¤šçš„é«˜çº§åº”ç”¨ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡ã€‚</p>\n<p>mysql æ•°æ®åº“å¼•æ“: <a href=\"http://www.cnblogs.com/0201zcr/p/5296843.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/0201zcr/p/5296843.html</a> MySQLå­˜å‚¨å¼•æ“ï¼ï¼MyISAMä¸InnoDBåŒºåˆ«: <a href=\"https://segmentfault.com/a/1190000008227211\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000008227211</a></p>\n<p>â€‹</p>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"djangoè¿›é˜¶-zxç‰ˆ","date":"2017-05-03T10:16:44.000Z","_content":"\n\n\nDjango è¿›é˜¶\n===========\n\n> ç”±äºhexoç¼–ç é—®é¢˜,æ‰€æœ‰çš„%éƒ½åŠ ä¸Šäº†\"%\"\n\n\n1. [HTTP Objects](https://docs.djangoproject.com/en/2.0/ref/request-response/)\n    - HttpRequest\n        - è‡ªèº«å±æ€§\n            * request.path -> `/foo/bar/`\n            * request.method\n            * request.GET\n            * request.POST\n            * request.COOKIES\n            * request.FILES -> `{name1: file1, name2: file2, ...}`\n            * request.META['REMOTE_ADDR']\n            * request.META['HTTP_USER_AGENT']\n        - ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§\n            * request.session\n            * request.user\n        - æ–¹æ³•\n            * request.get_full_path() -> `/foo/bar/?a=123`\n            * request.get_signed_cookie(key)\n    - HttpResponse\n        - å±æ€§\n            * response.status_code\n            * response.content\n        - æ–¹æ³•\n            * response.set_cookie(key, value, max_age=None)\n    - JsonHttpResponse\n        - `response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`\n\n2. Django ä¸­é—´ä»¶\n    - æœ€ç®€å•çš„ä¸­é—´ä»¶\n\n            def simple_middleware(get_response):\n                # do_something_for_init()\n    \n                def middleware(request):\n                    # do_something_before_views()\n    \n                    response = get_response(request)  # views å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ\n    \n                    # do_something_after_views()\n    \n                    return response\n    \n                return middleware\n\n    - ä¸­é—´ä»¶ç±»\n\n            class MyMiddleware:\n                def __init__(self, get_response):\n                    self.get_response = get_response\n    \n                def __call__(self, request):\n                    response = self.get_response(request)\n                    return response\n    \n                def process_view(self, request, view_func, view_args, view_kwargs):\n                    pass\n\n    - Django-1.10 ä»¥å‰çš„ä¸­é—´ä»¶\n\n            from django.utils.deprecation import MiddlewareMixin\n    \n            class MyMiddleware(MiddlewareMixin):\n                def process_request(self, request):\n                    pass\n    \n                def process_view(self, request, view_func, view_args, view_kwargs):\n                    pass\n    \n                def process_response(self, request, response):\n                    return response\n\n    - æ‰§è¡Œé¡ºåº\n        - process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ\n        - process_response ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ\n    - [å†…ç½®ä¸­é—´ä»¶çš„æ’åº](https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering)\n\n3. Form è¡¨å•\n    - form çš„ method åªèƒ½æ˜¯ POST æˆ– GET\n    - method=GET æ—¶, è¡¨å•æäº¤çš„å‚æ•°ä¼šå‡ºç°åœ¨ URL é‡Œ\n    - å±æ€§å’Œæ–¹æ³•\n        - form.is_valid()\n        - form.has_changed()\n        - form.cleaned_data['fieldname']\n    - Form çš„å®šä¹‰å’Œä½¿ç”¨\n\n            from django.forms import Form\n            from django.forms import IntegerField, CharField, DateField, ChoiceField\n    \n            class TestForm(Form):\n                TAGS = (\n                    ('py', 'python'),\n                    ('ln', 'linux'),\n                    ('dj', 'django'),\n                )\n                fid = IntegerField()\n                name = CharField(max_length=10)\n                tag = ChoiceField(choices=TAGS)\n                date = DateField()\n    \n            data = {'fid': 123, 'name': '1234567890', 'tag': 'dj', 'date': '2017-12-17'}\n            form = TestForm(data)\n            print(form.is_valid())\n            print(form.cleaned_data)  # cleaned_data å±æ€§æ˜¯ is_valid å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€æ·»åŠ çš„\n\n    - ModelForm\n\n            class UserForm(ModelForm):\n                class Meta:\n                    model = User\n                    fields = ['name', 'birth']\n\n4. æ¨¡æ¿\n    - base.html æ¨¡æ¿æ¨èå¸ƒå±€\n\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>{{title}}</title>\n                <link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/style.css\">\n                {\"%\" block \"ext_css\" \"%\"}{\"%\" endblock \"%\"}\n            </head>\n            <body>\n                <!-- {\"%\" block \"navbar\" \"%\"}{\"%\" endblock \"%\"} -->\n                {\"%\" block \"sidebar\" \"%\"}{\"%\" endblock \"%\"}\n                {\"%\" block \"content\" \"%\"}{\"%\" endblock \"%\"}\n                <!-- {\"%\" block \"foot\" \"%\"}{\"%\" endblock \"%\"} -->\n                {\"%\" block \"ext_js\" \"%\"}{\"%\" endblock \"%\"}\n            </body>\n            </html>\n\n    - [å†…å»º Tags](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#ref-templates-builtins-tags)\n        - `autoescape`\n\n                {\"%\" autoescape off \"%\"}\n                    {{ body }}\n                {\"%\" endautoescape \"%\"}\n\n        - `csrf_token`\n\n                <form>\n                {\"%\" csrf_token \"%\"}\n                </form>\n\n        - `for...endfor` ä¸­çš„å˜é‡\n            * `forloop.counter`     ä» 1 å¼€å§‹è®¡æ•°\n            * `forloop.counter0`    ä» 0 å¼€å§‹è®¡æ•°\n            * `forloop.revcounter`  é€†åºè®¡æ•°åˆ° 1\n            * `forloop.revcounter0` é€†åºè®¡æ•°åˆ° 0\n            * `forloop.first`       æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ª\n            * `forloop.last`        æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„æœ€åä¸€ä¸ª\n            * `forloop.parentloop`  ç”¨äºå¼•ç”¨ä¸Šçº§å¾ªç¯ä¸­çš„å˜é‡, å¦‚ `{{ forloop.parentloop.counter }}`\n        - empty å­å¥\n\n                {\"%\" for x in lst \"%\"}\n                    <div>...</div>\n                {\"%\" empty \"%\"}\n                    <div>Sorry</div>\n                {\"%\" endfor \"%\"}\n\n        - load: åŠ è½½è‡ªå®šä¹‰ Tag {`\"%\"`load foo.bar `\"%\"`}\n        - url: æ ¹æ® url name æ›¿æ¢ {`\"%\"` url 'your-url-name' v1 v2 `\"%\"`}\n        - static\n\n                {\"%\" load static \"%\"}\n                <img src=\"{\"%\" static \"img/smile.jpg\" \"%\"}\">\n\n            æˆ–\n\n                {\"%\" load static \"%\"}\n                <img src=\"{\"%\" get_static_prefix \"%\"}img/smile.jpg\">\n\n    - [å†…å»ºçš„ filter](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#built-in-filter-reference)\n        - safe å’Œ escape: `{{ var|safe|escape }}`\n\n    - [ä½¿ç”¨ Jinja2 æ›¿æ¢å†…ç½®æ¨¡æ¿å¼•æ“](https://docs.djangoproject.com/en/2.0/topics/templates/#django.template.backends.jinja2.Jinja2)\n\n5. ORM\n    - ä»€ä¹ˆæ˜¯ ORM\n    - CURD (Create/Update/Retrieve/Delete)\n    - [Field](https://docs.djangoproject.com/en/2.0/ref/models/fields/)\n    - Field é€‰é¡¹\n        * `null`    é’ˆå¯¹æ•°æ®åº“, å…è®¸æ•°æ®åº“è¯¥å­—æ®µä¸º Null\n        * `blank`   é’ˆå¯¹ Model æœ¬èº«, å…è®¸ä¼ å…¥å­—æ®µä¸ºç©º. blank ä¸º True æ—¶, å¯¹æ•°æ®åº“æ¥è¯´, è¯¥å­—æ®µä¾ç„¶ä¸ºå¿…å¡«é¡¹\n        * `default` å°½é‡ä½¿ç”¨ default, å°‘ç”¨ null å’Œ blank\n        * `choices`\n        * `primary_key` éå¿…è¦æ—¶ä¸è¦è®¾ç½®, ç”¨é»˜è®¤ id, ä¿æŒæ¡ç›®è‡ªå¢ã€æœ‰åº\n        * `unique`\n        * `db_index`    (True | False)\n        * `max_length`\n        * `auto_now`     æ¯æ¬¡ save æ—¶ï¼Œæ›´æ–°ä¸ºå½“å‰æ—¶é—´\n        * `auto_now_add` åªè®°å½•åˆ›å»ºæ—¶çš„æ—¶é—´, ä¿å­˜æ—¶ä¸æ›´æ–°\n    - [QuerySet](https://docs.djangoproject.com/en/2.0/ref/models/querysets/)\n        - æ–¹æ³•\n            * åˆ›å»º: `create() / get_or_create() / update_or_create() / bulk_create()`\n            * æ¡ä»¶è¿‡æ»¤å’Œæ’é™¤: `filter() / exclude()`\n            * åªåŠ è½½éœ€è¦çš„å­—æ®µ: `only() / defer()`\n            * `order_by() / count() / exists()`\n            * `latest() / earliest()`\n            * `first() / last()`\n        - æŸ¥æ‰¾æ¡ä»¶\n            * `filter(id__in=[123, 555, 231])`\n            * `filter(id__range=[123, 456])`\n            * `filter(name__contains='123')`\n            * `filter(name__regex='^\\w+\\d+')`\n            * `gt / gte / lt / lte`\n    - å…¶ä»– ORM\n        * sqlalchemy\n        * peewee\n    - ä¸»é”®å’Œå¤–é”®çº¦æŸ\n        - å†…éƒ¨ç³»ç»Ÿã€ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¯ä»¥ä½¿ç”¨ (éœ€è¦æ•°æ®é‡å¯æ§ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ•°é‡å¯æ§)\n        - äº’è”ç½‘è¡Œä¸šä¸å»ºè®®ä½¿ç”¨\n            - æ€§èƒ½ç¼ºé™·\n            - ä¸èƒ½ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒ\n            - ä¸å®¹æ˜“åšåˆ°æ•°æ®è§£è€¦\n\n6. Cache\n    - é»˜è®¤ç¼“å­˜: `from django.core.cache import cache`\n    - BACKEND: `DatabaseCache / MemcachedCache / LocMemCache`\n    - LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ä¸²é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºåˆ—è¡¨\n    - ä½¿ç”¨ Redis åšç¼“å­˜\n\n            CACHES = {\n                \"default\": {\n                    \"BACKEND\": \"django_redis.cache.RedisCache\",\n                    \"LOCATION\": \"redis://127.0.0.1:6379/1\",\n                    \"OPTIONS\": {\n                        \"CLIENT_CLASS\": \"django_redis.client.DefaultClient\",\n                        \"PICKLE_VERSION\": -1,\n                    }\n                }\n            }\n\n    - åŸºæœ¬æ–¹æ³•\n        * `cache.set(key, value, timeout=None)`\n        * `cache.get(key, default=None)`\n        * `cache.delete(key)`\n        * `cache.incr('num')`\n        * `cache.decr('num')`\n        * `cache.get_or_set(key, default, timeout=None)`\n        * `cache.set_many({'a': 1, 'b': 2, 'c': 3})`\n        * `cache.get_many(['a', 'b', 'c'])`\n    - å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶: `django.middleware.cache.UpdateCacheMiddleware`\n        - å‰ç½®ä¸­é—´ä»¶\n        - ç¼“å­˜æœŸé™: CACHE_MIDDLEWARE_SECONDS\n    - é¡µé¢ç¼“å­˜è£…é¥°å™¨: `from django.views.decorators.cache import cache_page`\n    - å±æ€§ç¼“å­˜è£…é¥°å™¨: `from django.utils.functional import cached_property`\n    - pickle\n        * dumps\n        * loads\n\n7. Cookie å’Œ Session\n    - Cookie: `response.set_cookie(key, value, max_age=None)`\n    - Session é…ç½®\n        1. å¼€å¯ Session ä¸­é—´ä»¶: `django.contrib.sessions.middleware.SessionMiddleware`\n        2. é…ç½®ç¼“å­˜\n        3. é…ç½® Session å¼•æ“: `SESSION_ENGINE = \"django.contrib.sessions.backends.cache\"`\n    - å¯é€‰é¡¹\n        * `SESSION_COOKIE_AGE`              ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨\n        * `SESSION_COOKIE_NAME`             Session å, é»˜è®¤ 'sessionid'\n        * `SESSION_EXPIRE_AT_BROWSER_CLOSE` æµè§ˆå™¨å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ\n        * `SESSION_SAVE_EVERY_REQUEST`      æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session\n    - ç”¨æ³•\n        * `request.session.session_key`     æŸ¥çœ‹ session_id\n        * `request.session.modified`        session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹\n        * `request.session['uid'] = 1234`   å½“ session å‘ç”Ÿæ›´æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜\n        * `request.session.get('uid')`      å–å€¼\n        * `request.session.save()`          æ‰‹åŠ¨ä¿å­˜\n\n8. Logging\n    - æ—¥å¿—çº§åˆ«\n        * DEBUG\n        * INFO\n        * WARNING\n        * ERROR\n        * FATAL\n    - ä½¿ç”¨\n        * logger.debug('xxxxxxxx')\n        * logger.info('xxxxxxxx')\n        * logger.warning('xxxxxxxx')\n        * logger.error('xxxxxxxx')\n        * logger.fatal('xxxxxxxx')\n    - æŸ¥æ‰¾ã€åˆ†æ\n        * tail\n        * head\n        * less\n        * awk\n        * grep\n    - [é…ç½®](https://docs.python.org/2/library/logging.html)\n\n            LOGGING = {\n                'version': 1,\n                'disable_existing_loggers': True,\n                'formatters': {\n                    'simple': {\n                        'format': '\"%\"(asctime)s \"%\"(module)s.\"%\"(funcName)s: \"%\"(message)s',\n                        'datefmt': '\"%\"Y-\"%\"m-\"%\"d \"%\"H:\"%\"M:\"%\"S',\n                    },\n                    'verbose': {\n                        'format': '\"%\"(asctime)s \"%\"(levelname)s [\"%\"(process)d-\"%\"(threadName)s] '\n                                  '\"%\"(module)s.\"%\"(funcName)s line \"%\"(lineno)d: \"%\"(message)s',\n                        'datefmt': '\"%\"Y-\"%\"m-\"%\"d \"%\"H:\"%\"M:\"%\"S',\n                    }\n                },\n    \n                'handlers': {\n                    'inf': {\n                        'class': 'logging.handlers.TimedRotatingFileHandler',\n                        'filename': '/data/web/gnt.out',\n                        'when': 'W0',  # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿—\n                        'backupCount': 5,\n                        'formatter': 'simple',\n                        'level': 'DEBUG' if DEBUG else 'INFO',\n                    },\n                    'err': {\n                        'class': 'logging.handlers.TimedRotatingFileHandler',\n                        'filename': '/data/web/gnt.err',\n                        'when': 'D',  # æ¯å¤©åˆ‡å‰²æ—¥å¿—\n                        'backupCount': 5,\n                        'formatter': 'verbose',\n                        'level': 'WARNING',\n                    }\n                },\n    \n                'loggers': {\n                    'inf': {\n                        'handlers': ['inf'],\n                        'level': 'DEBUG',\n                        'propagate': True,\n                    },\n                    'err': {\n                        'handlers': ['err'],\n                        'level': 'DEBUG',\n                        'propagate': True,\n                    }\n                }\n            }\n\n9. Django çš„æ€§èƒ½\n    - Django è‡ªèº«ä¼˜åŒ–\n        - å……åˆ†ä¹‹ç”¨ç¼“å­˜\n        - æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£å™¨\n        - å°½é‡ä½¿ç”¨ `defer()` å’Œ `only()` æŸ¥æ‰¾\n        - å°½é‡ä½¿ç”¨ `count()` å’Œ `exists()`\n        - æ¨¡æ¿ä¸­ `{\"%\" block \"%\"}` æ€§èƒ½ä¼˜äº `{\"%\" include \"%\"}`\n        - [å¼€å¯æ¨¡æ¿ç¼“å­˜](https://docs.djangoproject.com/en/2.0/ref/templates/api/#django.template.loaders.cached.Loader)\n        - **ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼**\n    - å…¶ä»–ä¼˜åŒ–\n        - I/O å¯†é›†å‹: å¼‚æ­¥åŒ–\n            - è¯·æ±‚å¼‚æ­¥åŒ–\n            - æ•°æ®æ“ä½œå¼‚æ­¥åŒ–\n            - gevent, asyncio, aiopg, aiohttp, tornado\n        - è®¡ç®—å¯†é›†å‹\n            - è€—æ—¶æ“ä½œç”¨ [Celery](http://docs.jinkan.org/docs/celery/) ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ\n        - åˆ†åº“åˆ†è¡¨\n            - å–ä½™ã€å“ˆå¸Œ\n            - èŒƒå›´\n            - ä¸€è‡´æ€§å“ˆå¸Œ\n        - ç´¢å¼•ä¼˜åŒ–\n        - æ…¢æŸ¥è¯¢ä¼˜åŒ– ([ç›¸å…³å·¥å…·: DjangoDebugToolbar](https://django-debug-toolbar.readthedocs.io))\n        - Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼åˆ©ç”¨å¤šæ ¸\n        - PyPy\n        - Cython\n\n10. Python / Django ç¯å¢ƒåŠ è½½\n    - sys.argv\n    - sys.path\n    - os.environ\n\n11. Git\n    - å¸¸ç”¨æ“ä½œ\n        * git init\n        * git clone\n        * git add\n        * git commit -m 'xxxxxxxx'\n        * git push\n        * git pull\n        * git fetch\n        * git log\n        * git checkout\n        * git branch\n        * git merge\n    - ä»£ç ç®¡ç†\n        * code review\n            - å‘ç°ä»£ç é€»è¾‘é—®é¢˜\n            - ä»£ç é£æ ¼åŠè§„èŒƒåŒ–é—®é¢˜\n            - ç®—æ³•é—®é¢˜\n            - é”™è¯¯çš„ä½¿ç”¨æ–¹å¼\n            - èƒ½å¤Ÿå­¦ä¹ å…¶ä»–äººçš„ä¼˜ç§€ä»£ç \n        * åˆ†æ”¯: master / dev / feature\n\n12. Blog\n    1. åŸºç¡€åŠŸèƒ½\n        1. çœ‹æ–‡ç« \n        2. å†™æ–‡ç« \n        3. æŸ¥çœ‹æ–‡ç« åˆ—è¡¨\n        4. æ ¹æ®æ­£æ–‡æœç´¢æ–‡ç« \n        5. å¯ä»¥è¯„è®º\n    2. æ‰©å±•åŠŸèƒ½\n        0. å®ç°åˆ†é¡µåŠŸèƒ½: é¦–é¡µæ–‡ç« åˆ—è¡¨æ¯é¡µæ˜¾ç¤º 5 ç¯‡æ–‡ç« \n        1. å®ç°ä¸€ä¸ªåŸºäº redis çš„æ–‡ç« ç¼“å­˜\n        2. ç»™é¦–é¡µå¢åŠ ä¸€ä¸ªæ¨¡å—, æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„ 10 ç¯‡æ–‡ç«  (ç‚¹å‡»ç‡æœ€é«˜çš„)\n        3. åˆ›å»ºç”¨æˆ·æ¨¡å—\n            * å®ç°æ³¨å†Œã€ç™»å½•åŠŸèƒ½\n            * æ·»åŠ ç”¨æˆ·ä¸ªäººä¿¡æ¯å±•ç¤º\n            * å¼€å‘å¤´åƒä¸Šä¼ åŠŸèƒ½\n        4. å†™ä¸€ä¸ªè£…é¥°å™¨, åœ¨ blog.log æ–‡ä»¶ä¸­è¾“å‡ºé˜…è¯»æ–‡ç« çš„ç”¨æˆ· IP, åŠæ‰€è¯»æ–‡ç« çš„ ID\n        5. åŸºäºæ—¥å¿—çš„ç®€å•ç»Ÿè®¡\n            * è®¡ç®—å‡ºé˜…è¯»æ¬¡æ•°æœ€å¤šçš„æ–‡ç« : `awk '{print $6}' blog6.log | sort | uniq -c | sort -r`\n\n            * è®¡ç®—å‡ºæ¯ä¸ªè®¿å®¢è¯»äº†å¤šå°‘ç¯‡æ–‡ç« : `awk '{print $5}' blog6.log | sort | uniq -c | sort -r`\n\n        6. å†™ä¸€ä¸ªä¸­é—´ä»¶, é™åˆ¶ç”¨æˆ·çš„è®¿é—®é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡ï¼Œè¶…è¿‡ 2 æ¬¡æ—¶ï¼Œç­‰å¾…è‡³åˆç†æ—¶é—´å†è¿”å›\n        7. ç»™æ–‡ç« å¢åŠ  Tag åŠŸèƒ½:\n            * æ¯ç¯‡æ–‡ç« å¯ä»¥æ·»åŠ å¤šä¸ª Tag\n            * æ¯ä¸ª Tag åˆ†ç±»ä¸‹æœ‰å¤šç¯‡æ–‡ç« \n            * ç‚¹å‡»æ¯ä¸ª Tag ç›´æ¥è·³è½¬åˆ°æ­¤ tag çš„æ–‡ç« åˆ—è¡¨\n            * ä¸è¦ä½¿ç”¨å¤–é”®\n        8. å®ç°æƒé™ç®¡ç†åŠŸèƒ½\n            * æœªç™»å½•ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ–‡ç« \n            * æ™®é€šæ³¨å†Œç”¨æˆ·ï¼Œå¯ä»¥å‘è¡¨è¯„è®º\n            * ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘è¡¨å’Œåˆ é™¤æ–‡ç« ã€è¯„è®º\n        9. [ä½¿ç”¨ Gunicorn é©±åŠ¨ Django, å¯¹æ¯”æ€§èƒ½å·®å¼‚](http://docs.gunicorn.org/en/latest/install.html)\n            * æ–‡ä»¶æè¿°ç¬¦\n            * å•å°æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°\n            * TCP è¿æ¥ä¸Šé™\n        10. Nginx\n            * è´Ÿè½½å‡è¡¡: è½®è¯¢, æƒé‡, IP å“ˆå¸Œ\n\n                                   User Requests\n                                 |    |    |    |\n                                 V    V    V    V\n                                 www.example.com\n                                     DNS è½®è®­\n                                   /         \\\n                                  V           V\n                              Nginx            Nginx\n                           113.5.3.10        110.2.9.11         ---> Nginx ç»‘å®šå…¬ç½‘ IP\n                           /        |        |       \\\n                          V         V        V        V\n                    AppServer  AppServer  AppServer  AppServer  ---> Gunicorn + Django\n                    10.0.0.1   10.0.0.2   10.0.0.3   10.0.0.3   ---> AppServer ç»‘å®šå†…ç½‘ IP\n                    weight:2   weight:5   weight:10  weight:20  ---> æƒé‡\n\n            * ä¸ºä»€ä¹ˆç”¨ Nginx, ä¸ç›´æ¥ç”¨ gunicorn\n            * ä»£ç†ç½‘ç«™ã€å›¾ç‰‡\n            * Nginx å’Œ Apache çš„åŒºåˆ«\n\n        11. å‹åŠ›æµ‹è¯•\n            * ab\n            * webbench\n        12. å…¶ä»–: uWSGI, tornado\n\n13. é¡¹ç›®\n    - ä»£ç ç»„ç»‡\n    - å¸¸ç”¨ç»„ä»¶\n        - nginx\n        - [Redis](http://redisdoc.com/)\n        - MySQL\n        - è½¯ä»¶å®‰è£…\n            * `apt-get`\n            * `yum`\n            * `make` / `make install`\n    - DB é›†ç¾¤\n        * ä¸»ä»å¤‡ä»½\n        * ä¸€ä¸»ä¸¤ä»\n        * åŒä¸»äº’å¤‡\n\n14. é™æ€æ–‡ä»¶å­˜å‚¨\n    - çº¿ä¸Šç³»ç»Ÿ Django ä¼šå…³æ‰è‡ªèº«çš„é™æ€æ–‡ä»¶å¤„ç†\n    - ç”¨ Nginx ä»£ç†é™æ€æ–‡ä»¶\n    - CDN (å†…å®¹åˆ†å‘ç½‘ç»œ)\n        * åŸºäºç¼“å­˜æŠ€æœ¯ä¸ºé™æ€èµ„æº (ä¸»è¦æ˜¯å¤šåª’ä½“èµ„æº) æä¾›è®¿é—®åŠ é€Ÿçš„æœåŠ¡\n        * åœ¨ä¸åŒåœ°åŒºéƒ¨ç½²é•œåƒæœåŠ¡å™¨èŠ‚ç‚¹\n        * å®šæœŸä¸æºç«™åšå†…å®¹åŒæ­¥\n","source":"_posts/Djangoè¿›é˜¶.md","raw":"---\ntitle: djangoè¿›é˜¶-zxç‰ˆ\ndate: 2017-05-03 18:16:44\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\n\n\nDjango è¿›é˜¶\n===========\n\n> ç”±äºhexoç¼–ç é—®é¢˜,æ‰€æœ‰çš„%éƒ½åŠ ä¸Šäº†\"%\"\n\n\n1. [HTTP Objects](https://docs.djangoproject.com/en/2.0/ref/request-response/)\n    - HttpRequest\n        - è‡ªèº«å±æ€§\n            * request.path -> `/foo/bar/`\n            * request.method\n            * request.GET\n            * request.POST\n            * request.COOKIES\n            * request.FILES -> `{name1: file1, name2: file2, ...}`\n            * request.META['REMOTE_ADDR']\n            * request.META['HTTP_USER_AGENT']\n        - ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§\n            * request.session\n            * request.user\n        - æ–¹æ³•\n            * request.get_full_path() -> `/foo/bar/?a=123`\n            * request.get_signed_cookie(key)\n    - HttpResponse\n        - å±æ€§\n            * response.status_code\n            * response.content\n        - æ–¹æ³•\n            * response.set_cookie(key, value, max_age=None)\n    - JsonHttpResponse\n        - `response = JsonHttpResponse({'a': 12, 'b': 'xyz'})`\n\n2. Django ä¸­é—´ä»¶\n    - æœ€ç®€å•çš„ä¸­é—´ä»¶\n\n            def simple_middleware(get_response):\n                # do_something_for_init()\n    \n                def middleware(request):\n                    # do_something_before_views()\n    \n                    response = get_response(request)  # views å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ\n    \n                    # do_something_after_views()\n    \n                    return response\n    \n                return middleware\n\n    - ä¸­é—´ä»¶ç±»\n\n            class MyMiddleware:\n                def __init__(self, get_response):\n                    self.get_response = get_response\n    \n                def __call__(self, request):\n                    response = self.get_response(request)\n                    return response\n    \n                def process_view(self, request, view_func, view_args, view_kwargs):\n                    pass\n\n    - Django-1.10 ä»¥å‰çš„ä¸­é—´ä»¶\n\n            from django.utils.deprecation import MiddlewareMixin\n    \n            class MyMiddleware(MiddlewareMixin):\n                def process_request(self, request):\n                    pass\n    \n                def process_view(self, request, view_func, view_args, view_kwargs):\n                    pass\n    \n                def process_response(self, request, response):\n                    return response\n\n    - æ‰§è¡Œé¡ºåº\n        - process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ\n        - process_response ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ\n    - [å†…ç½®ä¸­é—´ä»¶çš„æ’åº](https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering)\n\n3. Form è¡¨å•\n    - form çš„ method åªèƒ½æ˜¯ POST æˆ– GET\n    - method=GET æ—¶, è¡¨å•æäº¤çš„å‚æ•°ä¼šå‡ºç°åœ¨ URL é‡Œ\n    - å±æ€§å’Œæ–¹æ³•\n        - form.is_valid()\n        - form.has_changed()\n        - form.cleaned_data['fieldname']\n    - Form çš„å®šä¹‰å’Œä½¿ç”¨\n\n            from django.forms import Form\n            from django.forms import IntegerField, CharField, DateField, ChoiceField\n    \n            class TestForm(Form):\n                TAGS = (\n                    ('py', 'python'),\n                    ('ln', 'linux'),\n                    ('dj', 'django'),\n                )\n                fid = IntegerField()\n                name = CharField(max_length=10)\n                tag = ChoiceField(choices=TAGS)\n                date = DateField()\n    \n            data = {'fid': 123, 'name': '1234567890', 'tag': 'dj', 'date': '2017-12-17'}\n            form = TestForm(data)\n            print(form.is_valid())\n            print(form.cleaned_data)  # cleaned_data å±æ€§æ˜¯ is_valid å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€æ·»åŠ çš„\n\n    - ModelForm\n\n            class UserForm(ModelForm):\n                class Meta:\n                    model = User\n                    fields = ['name', 'birth']\n\n4. æ¨¡æ¿\n    - base.html æ¨¡æ¿æ¨èå¸ƒå±€\n\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>{{title}}</title>\n                <link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/style.css\">\n                {\"%\" block \"ext_css\" \"%\"}{\"%\" endblock \"%\"}\n            </head>\n            <body>\n                <!-- {\"%\" block \"navbar\" \"%\"}{\"%\" endblock \"%\"} -->\n                {\"%\" block \"sidebar\" \"%\"}{\"%\" endblock \"%\"}\n                {\"%\" block \"content\" \"%\"}{\"%\" endblock \"%\"}\n                <!-- {\"%\" block \"foot\" \"%\"}{\"%\" endblock \"%\"} -->\n                {\"%\" block \"ext_js\" \"%\"}{\"%\" endblock \"%\"}\n            </body>\n            </html>\n\n    - [å†…å»º Tags](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#ref-templates-builtins-tags)\n        - `autoescape`\n\n                {\"%\" autoescape off \"%\"}\n                    {{ body }}\n                {\"%\" endautoescape \"%\"}\n\n        - `csrf_token`\n\n                <form>\n                {\"%\" csrf_token \"%\"}\n                </form>\n\n        - `for...endfor` ä¸­çš„å˜é‡\n            * `forloop.counter`     ä» 1 å¼€å§‹è®¡æ•°\n            * `forloop.counter0`    ä» 0 å¼€å§‹è®¡æ•°\n            * `forloop.revcounter`  é€†åºè®¡æ•°åˆ° 1\n            * `forloop.revcounter0` é€†åºè®¡æ•°åˆ° 0\n            * `forloop.first`       æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ª\n            * `forloop.last`        æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„æœ€åä¸€ä¸ª\n            * `forloop.parentloop`  ç”¨äºå¼•ç”¨ä¸Šçº§å¾ªç¯ä¸­çš„å˜é‡, å¦‚ `{{ forloop.parentloop.counter }}`\n        - empty å­å¥\n\n                {\"%\" for x in lst \"%\"}\n                    <div>...</div>\n                {\"%\" empty \"%\"}\n                    <div>Sorry</div>\n                {\"%\" endfor \"%\"}\n\n        - load: åŠ è½½è‡ªå®šä¹‰ Tag {`\"%\"`load foo.bar `\"%\"`}\n        - url: æ ¹æ® url name æ›¿æ¢ {`\"%\"` url 'your-url-name' v1 v2 `\"%\"`}\n        - static\n\n                {\"%\" load static \"%\"}\n                <img src=\"{\"%\" static \"img/smile.jpg\" \"%\"}\">\n\n            æˆ–\n\n                {\"%\" load static \"%\"}\n                <img src=\"{\"%\" get_static_prefix \"%\"}img/smile.jpg\">\n\n    - [å†…å»ºçš„ filter](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#built-in-filter-reference)\n        - safe å’Œ escape: `{{ var|safe|escape }}`\n\n    - [ä½¿ç”¨ Jinja2 æ›¿æ¢å†…ç½®æ¨¡æ¿å¼•æ“](https://docs.djangoproject.com/en/2.0/topics/templates/#django.template.backends.jinja2.Jinja2)\n\n5. ORM\n    - ä»€ä¹ˆæ˜¯ ORM\n    - CURD (Create/Update/Retrieve/Delete)\n    - [Field](https://docs.djangoproject.com/en/2.0/ref/models/fields/)\n    - Field é€‰é¡¹\n        * `null`    é’ˆå¯¹æ•°æ®åº“, å…è®¸æ•°æ®åº“è¯¥å­—æ®µä¸º Null\n        * `blank`   é’ˆå¯¹ Model æœ¬èº«, å…è®¸ä¼ å…¥å­—æ®µä¸ºç©º. blank ä¸º True æ—¶, å¯¹æ•°æ®åº“æ¥è¯´, è¯¥å­—æ®µä¾ç„¶ä¸ºå¿…å¡«é¡¹\n        * `default` å°½é‡ä½¿ç”¨ default, å°‘ç”¨ null å’Œ blank\n        * `choices`\n        * `primary_key` éå¿…è¦æ—¶ä¸è¦è®¾ç½®, ç”¨é»˜è®¤ id, ä¿æŒæ¡ç›®è‡ªå¢ã€æœ‰åº\n        * `unique`\n        * `db_index`    (True | False)\n        * `max_length`\n        * `auto_now`     æ¯æ¬¡ save æ—¶ï¼Œæ›´æ–°ä¸ºå½“å‰æ—¶é—´\n        * `auto_now_add` åªè®°å½•åˆ›å»ºæ—¶çš„æ—¶é—´, ä¿å­˜æ—¶ä¸æ›´æ–°\n    - [QuerySet](https://docs.djangoproject.com/en/2.0/ref/models/querysets/)\n        - æ–¹æ³•\n            * åˆ›å»º: `create() / get_or_create() / update_or_create() / bulk_create()`\n            * æ¡ä»¶è¿‡æ»¤å’Œæ’é™¤: `filter() / exclude()`\n            * åªåŠ è½½éœ€è¦çš„å­—æ®µ: `only() / defer()`\n            * `order_by() / count() / exists()`\n            * `latest() / earliest()`\n            * `first() / last()`\n        - æŸ¥æ‰¾æ¡ä»¶\n            * `filter(id__in=[123, 555, 231])`\n            * `filter(id__range=[123, 456])`\n            * `filter(name__contains='123')`\n            * `filter(name__regex='^\\w+\\d+')`\n            * `gt / gte / lt / lte`\n    - å…¶ä»– ORM\n        * sqlalchemy\n        * peewee\n    - ä¸»é”®å’Œå¤–é”®çº¦æŸ\n        - å†…éƒ¨ç³»ç»Ÿã€ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¯ä»¥ä½¿ç”¨ (éœ€è¦æ•°æ®é‡å¯æ§ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ•°é‡å¯æ§)\n        - äº’è”ç½‘è¡Œä¸šä¸å»ºè®®ä½¿ç”¨\n            - æ€§èƒ½ç¼ºé™·\n            - ä¸èƒ½ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒ\n            - ä¸å®¹æ˜“åšåˆ°æ•°æ®è§£è€¦\n\n6. Cache\n    - é»˜è®¤ç¼“å­˜: `from django.core.cache import cache`\n    - BACKEND: `DatabaseCache / MemcachedCache / LocMemCache`\n    - LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ä¸²é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºåˆ—è¡¨\n    - ä½¿ç”¨ Redis åšç¼“å­˜\n\n            CACHES = {\n                \"default\": {\n                    \"BACKEND\": \"django_redis.cache.RedisCache\",\n                    \"LOCATION\": \"redis://127.0.0.1:6379/1\",\n                    \"OPTIONS\": {\n                        \"CLIENT_CLASS\": \"django_redis.client.DefaultClient\",\n                        \"PICKLE_VERSION\": -1,\n                    }\n                }\n            }\n\n    - åŸºæœ¬æ–¹æ³•\n        * `cache.set(key, value, timeout=None)`\n        * `cache.get(key, default=None)`\n        * `cache.delete(key)`\n        * `cache.incr('num')`\n        * `cache.decr('num')`\n        * `cache.get_or_set(key, default, timeout=None)`\n        * `cache.set_many({'a': 1, 'b': 2, 'c': 3})`\n        * `cache.get_many(['a', 'b', 'c'])`\n    - å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶: `django.middleware.cache.UpdateCacheMiddleware`\n        - å‰ç½®ä¸­é—´ä»¶\n        - ç¼“å­˜æœŸé™: CACHE_MIDDLEWARE_SECONDS\n    - é¡µé¢ç¼“å­˜è£…é¥°å™¨: `from django.views.decorators.cache import cache_page`\n    - å±æ€§ç¼“å­˜è£…é¥°å™¨: `from django.utils.functional import cached_property`\n    - pickle\n        * dumps\n        * loads\n\n7. Cookie å’Œ Session\n    - Cookie: `response.set_cookie(key, value, max_age=None)`\n    - Session é…ç½®\n        1. å¼€å¯ Session ä¸­é—´ä»¶: `django.contrib.sessions.middleware.SessionMiddleware`\n        2. é…ç½®ç¼“å­˜\n        3. é…ç½® Session å¼•æ“: `SESSION_ENGINE = \"django.contrib.sessions.backends.cache\"`\n    - å¯é€‰é¡¹\n        * `SESSION_COOKIE_AGE`              ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨\n        * `SESSION_COOKIE_NAME`             Session å, é»˜è®¤ 'sessionid'\n        * `SESSION_EXPIRE_AT_BROWSER_CLOSE` æµè§ˆå™¨å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ\n        * `SESSION_SAVE_EVERY_REQUEST`      æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session\n    - ç”¨æ³•\n        * `request.session.session_key`     æŸ¥çœ‹ session_id\n        * `request.session.modified`        session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹\n        * `request.session['uid'] = 1234`   å½“ session å‘ç”Ÿæ›´æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜\n        * `request.session.get('uid')`      å–å€¼\n        * `request.session.save()`          æ‰‹åŠ¨ä¿å­˜\n\n8. Logging\n    - æ—¥å¿—çº§åˆ«\n        * DEBUG\n        * INFO\n        * WARNING\n        * ERROR\n        * FATAL\n    - ä½¿ç”¨\n        * logger.debug('xxxxxxxx')\n        * logger.info('xxxxxxxx')\n        * logger.warning('xxxxxxxx')\n        * logger.error('xxxxxxxx')\n        * logger.fatal('xxxxxxxx')\n    - æŸ¥æ‰¾ã€åˆ†æ\n        * tail\n        * head\n        * less\n        * awk\n        * grep\n    - [é…ç½®](https://docs.python.org/2/library/logging.html)\n\n            LOGGING = {\n                'version': 1,\n                'disable_existing_loggers': True,\n                'formatters': {\n                    'simple': {\n                        'format': '\"%\"(asctime)s \"%\"(module)s.\"%\"(funcName)s: \"%\"(message)s',\n                        'datefmt': '\"%\"Y-\"%\"m-\"%\"d \"%\"H:\"%\"M:\"%\"S',\n                    },\n                    'verbose': {\n                        'format': '\"%\"(asctime)s \"%\"(levelname)s [\"%\"(process)d-\"%\"(threadName)s] '\n                                  '\"%\"(module)s.\"%\"(funcName)s line \"%\"(lineno)d: \"%\"(message)s',\n                        'datefmt': '\"%\"Y-\"%\"m-\"%\"d \"%\"H:\"%\"M:\"%\"S',\n                    }\n                },\n    \n                'handlers': {\n                    'inf': {\n                        'class': 'logging.handlers.TimedRotatingFileHandler',\n                        'filename': '/data/web/gnt.out',\n                        'when': 'W0',  # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿—\n                        'backupCount': 5,\n                        'formatter': 'simple',\n                        'level': 'DEBUG' if DEBUG else 'INFO',\n                    },\n                    'err': {\n                        'class': 'logging.handlers.TimedRotatingFileHandler',\n                        'filename': '/data/web/gnt.err',\n                        'when': 'D',  # æ¯å¤©åˆ‡å‰²æ—¥å¿—\n                        'backupCount': 5,\n                        'formatter': 'verbose',\n                        'level': 'WARNING',\n                    }\n                },\n    \n                'loggers': {\n                    'inf': {\n                        'handlers': ['inf'],\n                        'level': 'DEBUG',\n                        'propagate': True,\n                    },\n                    'err': {\n                        'handlers': ['err'],\n                        'level': 'DEBUG',\n                        'propagate': True,\n                    }\n                }\n            }\n\n9. Django çš„æ€§èƒ½\n    - Django è‡ªèº«ä¼˜åŒ–\n        - å……åˆ†ä¹‹ç”¨ç¼“å­˜\n        - æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£å™¨\n        - å°½é‡ä½¿ç”¨ `defer()` å’Œ `only()` æŸ¥æ‰¾\n        - å°½é‡ä½¿ç”¨ `count()` å’Œ `exists()`\n        - æ¨¡æ¿ä¸­ `{\"%\" block \"%\"}` æ€§èƒ½ä¼˜äº `{\"%\" include \"%\"}`\n        - [å¼€å¯æ¨¡æ¿ç¼“å­˜](https://docs.djangoproject.com/en/2.0/ref/templates/api/#django.template.loaders.cached.Loader)\n        - **ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼**\n    - å…¶ä»–ä¼˜åŒ–\n        - I/O å¯†é›†å‹: å¼‚æ­¥åŒ–\n            - è¯·æ±‚å¼‚æ­¥åŒ–\n            - æ•°æ®æ“ä½œå¼‚æ­¥åŒ–\n            - gevent, asyncio, aiopg, aiohttp, tornado\n        - è®¡ç®—å¯†é›†å‹\n            - è€—æ—¶æ“ä½œç”¨ [Celery](http://docs.jinkan.org/docs/celery/) ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ\n        - åˆ†åº“åˆ†è¡¨\n            - å–ä½™ã€å“ˆå¸Œ\n            - èŒƒå›´\n            - ä¸€è‡´æ€§å“ˆå¸Œ\n        - ç´¢å¼•ä¼˜åŒ–\n        - æ…¢æŸ¥è¯¢ä¼˜åŒ– ([ç›¸å…³å·¥å…·: DjangoDebugToolbar](https://django-debug-toolbar.readthedocs.io))\n        - Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼åˆ©ç”¨å¤šæ ¸\n        - PyPy\n        - Cython\n\n10. Python / Django ç¯å¢ƒåŠ è½½\n    - sys.argv\n    - sys.path\n    - os.environ\n\n11. Git\n    - å¸¸ç”¨æ“ä½œ\n        * git init\n        * git clone\n        * git add\n        * git commit -m 'xxxxxxxx'\n        * git push\n        * git pull\n        * git fetch\n        * git log\n        * git checkout\n        * git branch\n        * git merge\n    - ä»£ç ç®¡ç†\n        * code review\n            - å‘ç°ä»£ç é€»è¾‘é—®é¢˜\n            - ä»£ç é£æ ¼åŠè§„èŒƒåŒ–é—®é¢˜\n            - ç®—æ³•é—®é¢˜\n            - é”™è¯¯çš„ä½¿ç”¨æ–¹å¼\n            - èƒ½å¤Ÿå­¦ä¹ å…¶ä»–äººçš„ä¼˜ç§€ä»£ç \n        * åˆ†æ”¯: master / dev / feature\n\n12. Blog\n    1. åŸºç¡€åŠŸèƒ½\n        1. çœ‹æ–‡ç« \n        2. å†™æ–‡ç« \n        3. æŸ¥çœ‹æ–‡ç« åˆ—è¡¨\n        4. æ ¹æ®æ­£æ–‡æœç´¢æ–‡ç« \n        5. å¯ä»¥è¯„è®º\n    2. æ‰©å±•åŠŸèƒ½\n        0. å®ç°åˆ†é¡µåŠŸèƒ½: é¦–é¡µæ–‡ç« åˆ—è¡¨æ¯é¡µæ˜¾ç¤º 5 ç¯‡æ–‡ç« \n        1. å®ç°ä¸€ä¸ªåŸºäº redis çš„æ–‡ç« ç¼“å­˜\n        2. ç»™é¦–é¡µå¢åŠ ä¸€ä¸ªæ¨¡å—, æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„ 10 ç¯‡æ–‡ç«  (ç‚¹å‡»ç‡æœ€é«˜çš„)\n        3. åˆ›å»ºç”¨æˆ·æ¨¡å—\n            * å®ç°æ³¨å†Œã€ç™»å½•åŠŸèƒ½\n            * æ·»åŠ ç”¨æˆ·ä¸ªäººä¿¡æ¯å±•ç¤º\n            * å¼€å‘å¤´åƒä¸Šä¼ åŠŸèƒ½\n        4. å†™ä¸€ä¸ªè£…é¥°å™¨, åœ¨ blog.log æ–‡ä»¶ä¸­è¾“å‡ºé˜…è¯»æ–‡ç« çš„ç”¨æˆ· IP, åŠæ‰€è¯»æ–‡ç« çš„ ID\n        5. åŸºäºæ—¥å¿—çš„ç®€å•ç»Ÿè®¡\n            * è®¡ç®—å‡ºé˜…è¯»æ¬¡æ•°æœ€å¤šçš„æ–‡ç« : `awk '{print $6}' blog6.log | sort | uniq -c | sort -r`\n\n            * è®¡ç®—å‡ºæ¯ä¸ªè®¿å®¢è¯»äº†å¤šå°‘ç¯‡æ–‡ç« : `awk '{print $5}' blog6.log | sort | uniq -c | sort -r`\n\n        6. å†™ä¸€ä¸ªä¸­é—´ä»¶, é™åˆ¶ç”¨æˆ·çš„è®¿é—®é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡ï¼Œè¶…è¿‡ 2 æ¬¡æ—¶ï¼Œç­‰å¾…è‡³åˆç†æ—¶é—´å†è¿”å›\n        7. ç»™æ–‡ç« å¢åŠ  Tag åŠŸèƒ½:\n            * æ¯ç¯‡æ–‡ç« å¯ä»¥æ·»åŠ å¤šä¸ª Tag\n            * æ¯ä¸ª Tag åˆ†ç±»ä¸‹æœ‰å¤šç¯‡æ–‡ç« \n            * ç‚¹å‡»æ¯ä¸ª Tag ç›´æ¥è·³è½¬åˆ°æ­¤ tag çš„æ–‡ç« åˆ—è¡¨\n            * ä¸è¦ä½¿ç”¨å¤–é”®\n        8. å®ç°æƒé™ç®¡ç†åŠŸèƒ½\n            * æœªç™»å½•ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ–‡ç« \n            * æ™®é€šæ³¨å†Œç”¨æˆ·ï¼Œå¯ä»¥å‘è¡¨è¯„è®º\n            * ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘è¡¨å’Œåˆ é™¤æ–‡ç« ã€è¯„è®º\n        9. [ä½¿ç”¨ Gunicorn é©±åŠ¨ Django, å¯¹æ¯”æ€§èƒ½å·®å¼‚](http://docs.gunicorn.org/en/latest/install.html)\n            * æ–‡ä»¶æè¿°ç¬¦\n            * å•å°æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°\n            * TCP è¿æ¥ä¸Šé™\n        10. Nginx\n            * è´Ÿè½½å‡è¡¡: è½®è¯¢, æƒé‡, IP å“ˆå¸Œ\n\n                                   User Requests\n                                 |    |    |    |\n                                 V    V    V    V\n                                 www.example.com\n                                     DNS è½®è®­\n                                   /         \\\n                                  V           V\n                              Nginx            Nginx\n                           113.5.3.10        110.2.9.11         ---> Nginx ç»‘å®šå…¬ç½‘ IP\n                           /        |        |       \\\n                          V         V        V        V\n                    AppServer  AppServer  AppServer  AppServer  ---> Gunicorn + Django\n                    10.0.0.1   10.0.0.2   10.0.0.3   10.0.0.3   ---> AppServer ç»‘å®šå†…ç½‘ IP\n                    weight:2   weight:5   weight:10  weight:20  ---> æƒé‡\n\n            * ä¸ºä»€ä¹ˆç”¨ Nginx, ä¸ç›´æ¥ç”¨ gunicorn\n            * ä»£ç†ç½‘ç«™ã€å›¾ç‰‡\n            * Nginx å’Œ Apache çš„åŒºåˆ«\n\n        11. å‹åŠ›æµ‹è¯•\n            * ab\n            * webbench\n        12. å…¶ä»–: uWSGI, tornado\n\n13. é¡¹ç›®\n    - ä»£ç ç»„ç»‡\n    - å¸¸ç”¨ç»„ä»¶\n        - nginx\n        - [Redis](http://redisdoc.com/)\n        - MySQL\n        - è½¯ä»¶å®‰è£…\n            * `apt-get`\n            * `yum`\n            * `make` / `make install`\n    - DB é›†ç¾¤\n        * ä¸»ä»å¤‡ä»½\n        * ä¸€ä¸»ä¸¤ä»\n        * åŒä¸»äº’å¤‡\n\n14. é™æ€æ–‡ä»¶å­˜å‚¨\n    - çº¿ä¸Šç³»ç»Ÿ Django ä¼šå…³æ‰è‡ªèº«çš„é™æ€æ–‡ä»¶å¤„ç†\n    - ç”¨ Nginx ä»£ç†é™æ€æ–‡ä»¶\n    - CDN (å†…å®¹åˆ†å‘ç½‘ç»œ)\n        * åŸºäºç¼“å­˜æŠ€æœ¯ä¸ºé™æ€èµ„æº (ä¸»è¦æ˜¯å¤šåª’ä½“èµ„æº) æä¾›è®¿é—®åŠ é€Ÿçš„æœåŠ¡\n        * åœ¨ä¸åŒåœ°åŒºéƒ¨ç½²é•œåƒæœåŠ¡å™¨èŠ‚ç‚¹\n        * å®šæœŸä¸æºç«™åšå†…å®¹åŒæ­¥\n","slug":"Djangoè¿›é˜¶","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109ht9001r3kzj3rvsg1mp","content":"<h1 id=\"Django-è¿›é˜¶\"><a href=\"#Django-è¿›é˜¶\" class=\"headerlink\" title=\"Django è¿›é˜¶\"></a>Django è¿›é˜¶</h1><blockquote>\n<p>ç”±äºhexoç¼–ç é—®é¢˜,æ‰€æœ‰çš„%éƒ½åŠ ä¸Šäº†â€%â€</p>\n</blockquote>\n<ol>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/request-response/\" target=\"_blank\" rel=\"noopener\">HTTP Objects</a></p>\n<ul>\n<li>HttpRequest<ul>\n<li>è‡ªèº«å±æ€§<ul>\n<li>request.path -&gt; <code>/foo/bar/</code></li>\n<li>request.method</li>\n<li>request.GET</li>\n<li>request.POST</li>\n<li>request.COOKIES</li>\n<li>request.FILES -&gt; <code>{name1: file1, name2: file2, ...}</code></li>\n<li>request.META[â€˜REMOTE_ADDRâ€™]</li>\n<li>request.META[â€˜HTTP_USER_AGENTâ€™]</li>\n</ul>\n</li>\n<li>ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§<ul>\n<li>request.session</li>\n<li>request.user</li>\n</ul>\n</li>\n<li>æ–¹æ³•<ul>\n<li>request.get_full_path() -&gt; <code>/foo/bar/?a=123</code></li>\n<li>request.get_signed_cookie(key)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>HttpResponse<ul>\n<li>å±æ€§<ul>\n<li>response.status_code</li>\n<li>response.content</li>\n</ul>\n</li>\n<li>æ–¹æ³•<ul>\n<li>response.set_cookie(key, value, max_age=None)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>JsonHttpResponse<ul>\n<li><code>response = JsonHttpResponse({'a': 12, 'b': 'xyz'})</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Django ä¸­é—´ä»¶</p>\n<ul>\n<li><p>æœ€ç®€å•çš„ä¸­é—´ä»¶</p>\n<pre><code>def simple_middleware(get_response):\n    # do_something_for_init()\n\n    def middleware(request):\n        # do_something_before_views()\n\n        response = get_response(request)  # views å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ\n\n        # do_something_after_views()\n\n        return response\n\n    return middleware</code></pre></li>\n<li><p>ä¸­é—´ä»¶ç±»</p>\n<pre><code>class MyMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        response = self.get_response(request)\n        return response\n\n    def process_view(self, request, view_func, view_args, view_kwargs):\n        pass</code></pre></li>\n<li><p>Django-1.10 ä»¥å‰çš„ä¸­é—´ä»¶</p>\n<pre><code>from django.utils.deprecation import MiddlewareMixin\n\nclass MyMiddleware(MiddlewareMixin):\n    def process_request(self, request):\n        pass\n\n    def process_view(self, request, view_func, view_args, view_kwargs):\n        pass\n\n    def process_response(self, request, response):\n        return response</code></pre></li>\n<li><p>æ‰§è¡Œé¡ºåº</p>\n<ul>\n<li>process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ</li>\n<li>process_response ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering\" target=\"_blank\" rel=\"noopener\">å†…ç½®ä¸­é—´ä»¶çš„æ’åº</a></p>\n</li>\n</ul>\n</li>\n<li><p>Form è¡¨å•</p>\n<ul>\n<li><p>form çš„ method åªèƒ½æ˜¯ POST æˆ– GET</p>\n</li>\n<li><p>method=GET æ—¶, è¡¨å•æäº¤çš„å‚æ•°ä¼šå‡ºç°åœ¨ URL é‡Œ</p>\n</li>\n<li><p>å±æ€§å’Œæ–¹æ³•</p>\n<ul>\n<li>form.is_valid()</li>\n<li>form.has_changed()</li>\n<li>form.cleaned_data[â€˜fieldnameâ€™]</li>\n</ul>\n</li>\n<li><p>Form çš„å®šä¹‰å’Œä½¿ç”¨</p>\n<pre><code>from django.forms import Form\nfrom django.forms import IntegerField, CharField, DateField, ChoiceField\n\nclass TestForm(Form):\n    TAGS = (\n        ('py', 'python'),\n        ('ln', 'linux'),\n        ('dj', 'django'),\n    )\n    fid = IntegerField()\n    name = CharField(max_length=10)\n    tag = ChoiceField(choices=TAGS)\n    date = DateField()\n\ndata = {'fid': 123, 'name': '1234567890', 'tag': 'dj', 'date': '2017-12-17'}\nform = TestForm(data)\nprint(form.is_valid())\nprint(form.cleaned_data)  # cleaned_data å±æ€§æ˜¯ is_valid å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€æ·»åŠ çš„</code></pre></li>\n<li><p>ModelForm</p>\n<pre><code>class UserForm(ModelForm):\n    class Meta:\n        model = User\n        fields = ['name', 'birth']</code></pre></li>\n</ul>\n</li>\n<li><p>æ¨¡æ¿</p>\n<ul>\n<li><p>base.html æ¨¡æ¿æ¨èå¸ƒå±€</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;{{title}}&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/style.css\"&gt;\n    {\"%\" block \"ext_css\" \"%\"}{\"%\" endblock \"%\"}\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;!-- {\"%\" block \"navbar\" \"%\"}{\"%\" endblock \"%\"} --&gt;\n    {\"%\" block \"sidebar\" \"%\"}{\"%\" endblock \"%\"}\n    {\"%\" block \"content\" \"%\"}{\"%\" endblock \"%\"}\n    &lt;!-- {\"%\" block \"foot\" \"%\"}{\"%\" endblock \"%\"} --&gt;\n    {\"%\" block \"ext_js\" \"%\"}{\"%\" endblock \"%\"}\n&lt;/body&gt;\n&lt;/html&gt;</code></pre></li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#ref-templates-builtins-tags\" target=\"_blank\" rel=\"noopener\">å†…å»º Tags</a></p>\n<ul>\n<li><p><code>autoescape</code></p>\n<pre><code>{\"%\" autoescape off \"%\"}\n    {{ body }}\n{\"%\" endautoescape \"%\"}</code></pre></li>\n<li><p><code>csrf_token</code></p>\n<pre><code>&lt;form&gt;\n{\"%\" csrf_token \"%\"}\n&lt;/form&gt;</code></pre></li>\n<li><p><code>for...endfor</code> ä¸­çš„å˜é‡</p>\n<ul>\n<li><code>forloop.counter</code>     ä» 1 å¼€å§‹è®¡æ•°</li>\n<li><code>forloop.counter0</code>    ä» 0 å¼€å§‹è®¡æ•°</li>\n<li><code>forloop.revcounter</code>  é€†åºè®¡æ•°åˆ° 1</li>\n<li><code>forloop.revcounter0</code> é€†åºè®¡æ•°åˆ° 0</li>\n<li><code>forloop.first</code>       æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ª</li>\n<li><code>forloop.last</code>        æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„æœ€åä¸€ä¸ª</li>\n<li><code>forloop.parentloop</code>  ç”¨äºå¼•ç”¨ä¸Šçº§å¾ªç¯ä¸­çš„å˜é‡, å¦‚ <code></code></li>\n</ul>\n</li>\n<li><p>empty å­å¥</p>\n<pre><code>{\"%\" for x in lst \"%\"}\n    &lt;div&gt;...&lt;/div&gt;\n{\"%\" empty \"%\"}\n    &lt;div&gt;Sorry&lt;/div&gt;\n{\"%\" endfor \"%\"}</code></pre></li>\n<li><p>load: åŠ è½½è‡ªå®šä¹‰ Tag {<code>\"%\"</code>load foo.bar <code>\"%\"</code>}</p>\n</li>\n<li><p>url: æ ¹æ® url name æ›¿æ¢ {<code>\"%\"</code> url â€˜your-url-nameâ€™ v1 v2 <code>\"%\"</code>}</p>\n</li>\n<li><p>static</p>\n<pre><code>{\"%\" load static \"%\"}\n&lt;img src=\"{\"%\" static \"img/smile.jpg\" \"%\"}\"&gt;</code></pre><p>  æˆ–</p>\n<pre><code>{\"%\" load static \"%\"}\n&lt;img src=\"{\"%\" get_static_prefix \"%\"}img/smile.jpg\"&gt;</code></pre></li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#built-in-filter-reference\" target=\"_blank\" rel=\"noopener\">å†…å»ºçš„ filter</a></p>\n<ul>\n<li>safe å’Œ escape: <code></code></li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/topics/templates/#django.template.backends.jinja2.Jinja2\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ Jinja2 æ›¿æ¢å†…ç½®æ¨¡æ¿å¼•æ“</a></p>\n</li>\n</ul>\n</li>\n<li><p>ORM</p>\n<ul>\n<li>ä»€ä¹ˆæ˜¯ ORM</li>\n<li>CURD (Create/Update/Retrieve/Delete)</li>\n<li><a href=\"https://docs.djangoproject.com/en/2.0/ref/models/fields/\" target=\"_blank\" rel=\"noopener\">Field</a></li>\n<li>Field é€‰é¡¹<ul>\n<li><code>null</code>    é’ˆå¯¹æ•°æ®åº“, å…è®¸æ•°æ®åº“è¯¥å­—æ®µä¸º Null</li>\n<li><code>blank</code>   é’ˆå¯¹ Model æœ¬èº«, å…è®¸ä¼ å…¥å­—æ®µä¸ºç©º. blank ä¸º True æ—¶, å¯¹æ•°æ®åº“æ¥è¯´, è¯¥å­—æ®µä¾ç„¶ä¸ºå¿…å¡«é¡¹</li>\n<li><code>default</code> å°½é‡ä½¿ç”¨ default, å°‘ç”¨ null å’Œ blank</li>\n<li><code>choices</code></li>\n<li><code>primary_key</code> éå¿…è¦æ—¶ä¸è¦è®¾ç½®, ç”¨é»˜è®¤ id, ä¿æŒæ¡ç›®è‡ªå¢ã€æœ‰åº</li>\n<li><code>unique</code></li>\n<li><code>db_index</code>    (True | False)</li>\n<li><code>max_length</code></li>\n<li><code>auto_now</code>     æ¯æ¬¡ save æ—¶ï¼Œæ›´æ–°ä¸ºå½“å‰æ—¶é—´</li>\n<li><code>auto_now_add</code> åªè®°å½•åˆ›å»ºæ—¶çš„æ—¶é—´, ä¿å­˜æ—¶ä¸æ›´æ–°</li>\n</ul>\n</li>\n<li><a href=\"https://docs.djangoproject.com/en/2.0/ref/models/querysets/\" target=\"_blank\" rel=\"noopener\">QuerySet</a><ul>\n<li>æ–¹æ³•<ul>\n<li>åˆ›å»º: <code>create() / get_or_create() / update_or_create() / bulk_create()</code></li>\n<li>æ¡ä»¶è¿‡æ»¤å’Œæ’é™¤: <code>filter() / exclude()</code></li>\n<li>åªåŠ è½½éœ€è¦çš„å­—æ®µ: <code>only() / defer()</code></li>\n<li><code>order_by() / count() / exists()</code></li>\n<li><code>latest() / earliest()</code></li>\n<li><code>first() / last()</code></li>\n</ul>\n</li>\n<li>æŸ¥æ‰¾æ¡ä»¶<ul>\n<li><code>filter(id__in=[123, 555, 231])</code></li>\n<li><code>filter(id__range=[123, 456])</code></li>\n<li><code>filter(name__contains='123')</code></li>\n<li><code>filter(name__regex='^\\w+\\d+')</code></li>\n<li><code>gt / gte / lt / lte</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å…¶ä»– ORM<ul>\n<li>sqlalchemy</li>\n<li>peewee</li>\n</ul>\n</li>\n<li>ä¸»é”®å’Œå¤–é”®çº¦æŸ<ul>\n<li>å†…éƒ¨ç³»ç»Ÿã€ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¯ä»¥ä½¿ç”¨ (éœ€è¦æ•°æ®é‡å¯æ§ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ•°é‡å¯æ§)</li>\n<li>äº’è”ç½‘è¡Œä¸šä¸å»ºè®®ä½¿ç”¨<ul>\n<li>æ€§èƒ½ç¼ºé™·</li>\n<li>ä¸èƒ½ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒ</li>\n<li>ä¸å®¹æ˜“åšåˆ°æ•°æ®è§£è€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Cache</p>\n<ul>\n<li><p>é»˜è®¤ç¼“å­˜: <code>from django.core.cache import cache</code></p>\n</li>\n<li><p>BACKEND: <code>DatabaseCache / MemcachedCache / LocMemCache</code></p>\n</li>\n<li><p>LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ä¸²é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºåˆ—è¡¨</p>\n</li>\n<li><p>ä½¿ç”¨ Redis åšç¼“å­˜</p>\n<pre><code>CACHES = {\n    \"default\": {\n        \"BACKEND\": \"django_redis.cache.RedisCache\",\n        \"LOCATION\": \"redis://127.0.0.1:6379/1\",\n        \"OPTIONS\": {\n            \"CLIENT_CLASS\": \"django_redis.client.DefaultClient\",\n            \"PICKLE_VERSION\": -1,\n        }\n    }\n}</code></pre></li>\n<li><p>åŸºæœ¬æ–¹æ³•</p>\n<ul>\n<li><code>cache.set(key, value, timeout=None)</code></li>\n<li><code>cache.get(key, default=None)</code></li>\n<li><code>cache.delete(key)</code></li>\n<li><code>cache.incr('num')</code></li>\n<li><code>cache.decr('num')</code></li>\n<li><code>cache.get_or_set(key, default, timeout=None)</code></li>\n<li><code>cache.set_many({'a': 1, 'b': 2, 'c': 3})</code></li>\n<li><code>cache.get_many(['a', 'b', 'c'])</code></li>\n</ul>\n</li>\n<li><p>å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶: <code>django.middleware.cache.UpdateCacheMiddleware</code></p>\n<ul>\n<li>å‰ç½®ä¸­é—´ä»¶</li>\n<li>ç¼“å­˜æœŸé™: CACHE_MIDDLEWARE_SECONDS</li>\n</ul>\n</li>\n<li><p>é¡µé¢ç¼“å­˜è£…é¥°å™¨: <code>from django.views.decorators.cache import cache_page</code></p>\n</li>\n<li><p>å±æ€§ç¼“å­˜è£…é¥°å™¨: <code>from django.utils.functional import cached_property</code></p>\n</li>\n<li><p>pickle</p>\n<ul>\n<li>dumps</li>\n<li>loads</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Cookie å’Œ Session</p>\n<ul>\n<li>Cookie: <code>response.set_cookie(key, value, max_age=None)</code></li>\n<li>Session é…ç½®<ol>\n<li>å¼€å¯ Session ä¸­é—´ä»¶: <code>django.contrib.sessions.middleware.SessionMiddleware</code></li>\n<li>é…ç½®ç¼“å­˜</li>\n<li>é…ç½® Session å¼•æ“: <code>SESSION_ENGINE = \"django.contrib.sessions.backends.cache\"</code></li>\n</ol>\n</li>\n<li>å¯é€‰é¡¹<ul>\n<li><code>SESSION_COOKIE_AGE</code>              ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨</li>\n<li><code>SESSION_COOKIE_NAME</code>             Session å, é»˜è®¤ â€˜sessionidâ€™</li>\n<li><code>SESSION_EXPIRE_AT_BROWSER_CLOSE</code> æµè§ˆå™¨å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ</li>\n<li><code>SESSION_SAVE_EVERY_REQUEST</code>      æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session</li>\n</ul>\n</li>\n<li>ç”¨æ³•<ul>\n<li><code>request.session.session_key</code>     æŸ¥çœ‹ session_id</li>\n<li><code>request.session.modified</code>        session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹</li>\n<li><code>request.session['uid'] = 1234</code>   å½“ session å‘ç”Ÿæ›´æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜</li>\n<li><code>request.session.get('uid')</code>      å–å€¼</li>\n<li><code>request.session.save()</code>          æ‰‹åŠ¨ä¿å­˜</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Logging</p>\n<ul>\n<li><p>æ—¥å¿—çº§åˆ«</p>\n<ul>\n<li>DEBUG</li>\n<li>INFO</li>\n<li>WARNING</li>\n<li>ERROR</li>\n<li>FATAL</li>\n</ul>\n</li>\n<li><p>ä½¿ç”¨</p>\n<ul>\n<li>logger.debug(â€˜xxxxxxxxâ€™)</li>\n<li>logger.info(â€˜xxxxxxxxâ€™)</li>\n<li>logger.warning(â€˜xxxxxxxxâ€™)</li>\n<li>logger.error(â€˜xxxxxxxxâ€™)</li>\n<li>logger.fatal(â€˜xxxxxxxxâ€™)</li>\n</ul>\n</li>\n<li><p>æŸ¥æ‰¾ã€åˆ†æ</p>\n<ul>\n<li>tail</li>\n<li>head</li>\n<li>less</li>\n<li>awk</li>\n<li>grep</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.python.org/2/library/logging.html\" target=\"_blank\" rel=\"noopener\">é…ç½®</a></p>\n<pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': True,\n    'formatters': {\n        'simple': {\n            'format': '\"%\"(asctime)s \"%\"(module)s.\"%\"(funcName)s: \"%\"(message)s',\n            'datefmt': '\"%\"Y-\"%\"m-\"%\"d \"%\"H:\"%\"M:\"%\"S',\n        },\n        'verbose': {\n            'format': '\"%\"(asctime)s \"%\"(levelname)s [\"%\"(process)d-\"%\"(threadName)s] '\n                      '\"%\"(module)s.\"%\"(funcName)s line \"%\"(lineno)d: \"%\"(message)s',\n            'datefmt': '\"%\"Y-\"%\"m-\"%\"d \"%\"H:\"%\"M:\"%\"S',\n        }\n    },\n\n    'handlers': {\n        'inf': {\n            'class': 'logging.handlers.TimedRotatingFileHandler',\n            'filename': '/data/web/gnt.out',\n            'when': 'W0',  # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿—\n            'backupCount': 5,\n            'formatter': 'simple',\n            'level': 'DEBUG' if DEBUG else 'INFO',\n        },\n        'err': {\n            'class': 'logging.handlers.TimedRotatingFileHandler',\n            'filename': '/data/web/gnt.err',\n            'when': 'D',  # æ¯å¤©åˆ‡å‰²æ—¥å¿—\n            'backupCount': 5,\n            'formatter': 'verbose',\n            'level': 'WARNING',\n        }\n    },\n\n    'loggers': {\n        'inf': {\n            'handlers': ['inf'],\n            'level': 'DEBUG',\n            'propagate': True,\n        },\n        'err': {\n            'handlers': ['err'],\n            'level': 'DEBUG',\n            'propagate': True,\n        }\n    }\n}</code></pre></li>\n</ul>\n</li>\n<li><p>Django çš„æ€§èƒ½</p>\n<ul>\n<li>Django è‡ªèº«ä¼˜åŒ–<ul>\n<li>å……åˆ†ä¹‹ç”¨ç¼“å­˜</li>\n<li>æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£å™¨</li>\n<li>å°½é‡ä½¿ç”¨ <code>defer()</code> å’Œ <code>only()</code> æŸ¥æ‰¾</li>\n<li>å°½é‡ä½¿ç”¨ <code>count()</code> å’Œ <code>exists()</code></li>\n<li>æ¨¡æ¿ä¸­ <code>{\"%\" block \"%\"}</code> æ€§èƒ½ä¼˜äº <code>{\"%\" include \"%\"}</code></li>\n<li><a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/api/#django.template.loaders.cached.Loader\" target=\"_blank\" rel=\"noopener\">å¼€å¯æ¨¡æ¿ç¼“å­˜</a></li>\n<li><strong>ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼</strong></li>\n</ul>\n</li>\n<li>å…¶ä»–ä¼˜åŒ–<ul>\n<li>I/O å¯†é›†å‹: å¼‚æ­¥åŒ–<ul>\n<li>è¯·æ±‚å¼‚æ­¥åŒ–</li>\n<li>æ•°æ®æ“ä½œå¼‚æ­¥åŒ–</li>\n<li>gevent, asyncio, aiopg, aiohttp, tornado</li>\n</ul>\n</li>\n<li>è®¡ç®—å¯†é›†å‹<ul>\n<li>è€—æ—¶æ“ä½œç”¨ <a href=\"http://docs.jinkan.org/docs/celery/\" target=\"_blank\" rel=\"noopener\">Celery</a> ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ</li>\n</ul>\n</li>\n<li>åˆ†åº“åˆ†è¡¨<ul>\n<li>å–ä½™ã€å“ˆå¸Œ</li>\n<li>èŒƒå›´</li>\n<li>ä¸€è‡´æ€§å“ˆå¸Œ</li>\n</ul>\n</li>\n<li>ç´¢å¼•ä¼˜åŒ–</li>\n<li>æ…¢æŸ¥è¯¢ä¼˜åŒ– (<a href=\"https://django-debug-toolbar.readthedocs.io\" target=\"_blank\" rel=\"noopener\">ç›¸å…³å·¥å…·: DjangoDebugToolbar</a>)</li>\n<li>Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼åˆ©ç”¨å¤šæ ¸</li>\n<li>PyPy</li>\n<li>Cython</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Python / Django ç¯å¢ƒåŠ è½½</p>\n<ul>\n<li>sys.argv</li>\n<li>sys.path</li>\n<li>os.environ</li>\n</ul>\n</li>\n<li><p>Git</p>\n<ul>\n<li>å¸¸ç”¨æ“ä½œ<ul>\n<li>git init</li>\n<li>git clone</li>\n<li>git add</li>\n<li>git commit -m â€˜xxxxxxxxâ€™</li>\n<li>git push</li>\n<li>git pull</li>\n<li>git fetch</li>\n<li>git log</li>\n<li>git checkout</li>\n<li>git branch</li>\n<li>git merge</li>\n</ul>\n</li>\n<li>ä»£ç ç®¡ç†<ul>\n<li>code review<ul>\n<li>å‘ç°ä»£ç é€»è¾‘é—®é¢˜</li>\n<li>ä»£ç é£æ ¼åŠè§„èŒƒåŒ–é—®é¢˜</li>\n<li>ç®—æ³•é—®é¢˜</li>\n<li>é”™è¯¯çš„ä½¿ç”¨æ–¹å¼</li>\n<li>èƒ½å¤Ÿå­¦ä¹ å…¶ä»–äººçš„ä¼˜ç§€ä»£ç </li>\n</ul>\n</li>\n<li>åˆ†æ”¯: master / dev / feature</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Blog</p>\n<ol>\n<li><p>åŸºç¡€åŠŸèƒ½</p>\n<ol>\n<li>çœ‹æ–‡ç« </li>\n<li>å†™æ–‡ç« </li>\n<li>æŸ¥çœ‹æ–‡ç« åˆ—è¡¨</li>\n<li>æ ¹æ®æ­£æ–‡æœç´¢æ–‡ç« </li>\n<li>å¯ä»¥è¯„è®º</li>\n</ol>\n</li>\n<li><p>æ‰©å±•åŠŸèƒ½</p>\n<ol start=\"0\">\n<li><p>å®ç°åˆ†é¡µåŠŸèƒ½: é¦–é¡µæ–‡ç« åˆ—è¡¨æ¯é¡µæ˜¾ç¤º 5 ç¯‡æ–‡ç« </p>\n</li>\n<li><p>å®ç°ä¸€ä¸ªåŸºäº redis çš„æ–‡ç« ç¼“å­˜</p>\n</li>\n<li><p>ç»™é¦–é¡µå¢åŠ ä¸€ä¸ªæ¨¡å—, æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„ 10 ç¯‡æ–‡ç«  (ç‚¹å‡»ç‡æœ€é«˜çš„)</p>\n</li>\n<li><p>åˆ›å»ºç”¨æˆ·æ¨¡å—</p>\n<ul>\n<li>å®ç°æ³¨å†Œã€ç™»å½•åŠŸèƒ½</li>\n<li>æ·»åŠ ç”¨æˆ·ä¸ªäººä¿¡æ¯å±•ç¤º</li>\n<li>å¼€å‘å¤´åƒä¸Šä¼ åŠŸèƒ½</li>\n</ul>\n</li>\n<li><p>å†™ä¸€ä¸ªè£…é¥°å™¨, åœ¨ blog.log æ–‡ä»¶ä¸­è¾“å‡ºé˜…è¯»æ–‡ç« çš„ç”¨æˆ· IP, åŠæ‰€è¯»æ–‡ç« çš„ ID</p>\n</li>\n<li><p>åŸºäºæ—¥å¿—çš„ç®€å•ç»Ÿè®¡</p>\n<ul>\n<li><p>è®¡ç®—å‡ºé˜…è¯»æ¬¡æ•°æœ€å¤šçš„æ–‡ç« : <code>awk '{print $6}' blog6.log | sort | uniq -c | sort -r</code></p>\n</li>\n<li><p>è®¡ç®—å‡ºæ¯ä¸ªè®¿å®¢è¯»äº†å¤šå°‘ç¯‡æ–‡ç« : <code>awk '{print $5}' blog6.log | sort | uniq -c | sort -r</code></p>\n</li>\n</ul>\n</li>\n<li><p>å†™ä¸€ä¸ªä¸­é—´ä»¶, é™åˆ¶ç”¨æˆ·çš„è®¿é—®é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡ï¼Œè¶…è¿‡ 2 æ¬¡æ—¶ï¼Œç­‰å¾…è‡³åˆç†æ—¶é—´å†è¿”å›</p>\n</li>\n<li><p>ç»™æ–‡ç« å¢åŠ  Tag åŠŸèƒ½:</p>\n<ul>\n<li>æ¯ç¯‡æ–‡ç« å¯ä»¥æ·»åŠ å¤šä¸ª Tag</li>\n<li>æ¯ä¸ª Tag åˆ†ç±»ä¸‹æœ‰å¤šç¯‡æ–‡ç« </li>\n<li>ç‚¹å‡»æ¯ä¸ª Tag ç›´æ¥è·³è½¬åˆ°æ­¤ tag çš„æ–‡ç« åˆ—è¡¨</li>\n<li>ä¸è¦ä½¿ç”¨å¤–é”®</li>\n</ul>\n</li>\n<li><p>å®ç°æƒé™ç®¡ç†åŠŸèƒ½</p>\n<ul>\n<li>æœªç™»å½•ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ–‡ç« </li>\n<li>æ™®é€šæ³¨å†Œç”¨æˆ·ï¼Œå¯ä»¥å‘è¡¨è¯„è®º</li>\n<li>ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘è¡¨å’Œåˆ é™¤æ–‡ç« ã€è¯„è®º</li>\n</ul>\n</li>\n<li><p><a href=\"http://docs.gunicorn.org/en/latest/install.html\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ Gunicorn é©±åŠ¨ Django, å¯¹æ¯”æ€§èƒ½å·®å¼‚</a></p>\n<ul>\n<li>æ–‡ä»¶æè¿°ç¬¦</li>\n<li>å•å°æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°</li>\n<li>TCP è¿æ¥ä¸Šé™</li>\n</ul>\n</li>\n<li><p>Nginx</p>\n<ul>\n<li><p>è´Ÿè½½å‡è¡¡: è½®è¯¢, æƒé‡, IP å“ˆå¸Œ</p>\n<pre><code>               User Requests\n             |    |    |    |\n             V    V    V    V\n             www.example.com\n                 DNS è½®è®­\n               /         \\\n              V           V\n          Nginx            Nginx\n       113.5.3.10        110.2.9.11         ---&gt; Nginx ç»‘å®šå…¬ç½‘ IP\n       /        |        |       \\\n      V         V        V        V\nAppServer  AppServer  AppServer  AppServer  ---&gt; Gunicorn + Django\n10.0.0.1   10.0.0.2   10.0.0.3   10.0.0.3   ---&gt; AppServer ç»‘å®šå†…ç½‘ IP\nweight:2   weight:5   weight:10  weight:20  ---&gt; æƒé‡</code></pre></li>\n<li><p>ä¸ºä»€ä¹ˆç”¨ Nginx, ä¸ç›´æ¥ç”¨ gunicorn</p>\n</li>\n<li><p>ä»£ç†ç½‘ç«™ã€å›¾ç‰‡</p>\n</li>\n<li><p>Nginx å’Œ Apache çš„åŒºåˆ«</p>\n</li>\n</ul>\n</li>\n<li><p>å‹åŠ›æµ‹è¯•</p>\n<ul>\n<li>ab</li>\n<li>webbench</li>\n</ul>\n</li>\n<li><p>å…¶ä»–: uWSGI, tornado</p>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>é¡¹ç›®</p>\n<ul>\n<li>ä»£ç ç»„ç»‡</li>\n<li>å¸¸ç”¨ç»„ä»¶<ul>\n<li>nginx</li>\n<li><a href=\"http://redisdoc.com/\" target=\"_blank\" rel=\"noopener\">Redis</a></li>\n<li>MySQL</li>\n<li>è½¯ä»¶å®‰è£…<ul>\n<li><code>apt-get</code></li>\n<li><code>yum</code></li>\n<li><code>make</code> / <code>make install</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>DB é›†ç¾¤<ul>\n<li>ä¸»ä»å¤‡ä»½</li>\n<li>ä¸€ä¸»ä¸¤ä»</li>\n<li>åŒä¸»äº’å¤‡</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é™æ€æ–‡ä»¶å­˜å‚¨</p>\n<ul>\n<li>çº¿ä¸Šç³»ç»Ÿ Django ä¼šå…³æ‰è‡ªèº«çš„é™æ€æ–‡ä»¶å¤„ç†</li>\n<li>ç”¨ Nginx ä»£ç†é™æ€æ–‡ä»¶</li>\n<li>CDN (å†…å®¹åˆ†å‘ç½‘ç»œ)<ul>\n<li>åŸºäºç¼“å­˜æŠ€æœ¯ä¸ºé™æ€èµ„æº (ä¸»è¦æ˜¯å¤šåª’ä½“èµ„æº) æä¾›è®¿é—®åŠ é€Ÿçš„æœåŠ¡</li>\n<li>åœ¨ä¸åŒåœ°åŒºéƒ¨ç½²é•œåƒæœåŠ¡å™¨èŠ‚ç‚¹</li>\n<li>å®šæœŸä¸æºç«™åšå†…å®¹åŒæ­¥</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"Django-è¿›é˜¶\"><a href=\"#Django-è¿›é˜¶\" class=\"headerlink\" title=\"Django è¿›é˜¶\"></a>Django è¿›é˜¶</h1><blockquote>\n<p>ç”±äºhexoç¼–ç é—®é¢˜,æ‰€æœ‰çš„%éƒ½åŠ ä¸Šäº†â€%â€</p>\n</blockquote>\n<ol>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/request-response/\" target=\"_blank\" rel=\"noopener\">HTTP Objects</a></p>\n<ul>\n<li>HttpRequest<ul>\n<li>è‡ªèº«å±æ€§<ul>\n<li>request.path -&gt; <code>/foo/bar/</code></li>\n<li>request.method</li>\n<li>request.GET</li>\n<li>request.POST</li>\n<li>request.COOKIES</li>\n<li>request.FILES -&gt; <code>{name1: file1, name2: file2, ...}</code></li>\n<li>request.META[â€˜REMOTE_ADDRâ€™]</li>\n<li>request.META[â€˜HTTP_USER_AGENTâ€™]</li>\n</ul>\n</li>\n<li>ä¸­é—´ä»¶æ·»åŠ çš„å±æ€§<ul>\n<li>request.session</li>\n<li>request.user</li>\n</ul>\n</li>\n<li>æ–¹æ³•<ul>\n<li>request.get_full_path() -&gt; <code>/foo/bar/?a=123</code></li>\n<li>request.get_signed_cookie(key)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>HttpResponse<ul>\n<li>å±æ€§<ul>\n<li>response.status_code</li>\n<li>response.content</li>\n</ul>\n</li>\n<li>æ–¹æ³•<ul>\n<li>response.set_cookie(key, value, max_age=None)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>JsonHttpResponse<ul>\n<li><code>response = JsonHttpResponse({&#39;a&#39;: 12, &#39;b&#39;: &#39;xyz&#39;})</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Django ä¸­é—´ä»¶</p>\n<ul>\n<li><p>æœ€ç®€å•çš„ä¸­é—´ä»¶</p>\n<pre><code>def simple_middleware(get_response):\n    # do_something_for_init()\n\n    def middleware(request):\n        # do_something_before_views()\n\n        response = get_response(request)  # views å‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ\n\n        # do_something_after_views()\n\n        return response\n\n    return middleware</code></pre></li>\n<li><p>ä¸­é—´ä»¶ç±»</p>\n<pre><code>class MyMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        response = self.get_response(request)\n        return response\n\n    def process_view(self, request, view_func, view_args, view_kwargs):\n        pass</code></pre></li>\n<li><p>Django-1.10 ä»¥å‰çš„ä¸­é—´ä»¶</p>\n<pre><code>from django.utils.deprecation import MiddlewareMixin\n\nclass MyMiddleware(MiddlewareMixin):\n    def process_request(self, request):\n        pass\n\n    def process_view(self, request, view_func, view_args, view_kwargs):\n        pass\n\n    def process_response(self, request, response):\n        return response</code></pre></li>\n<li><p>æ‰§è¡Œé¡ºåº</p>\n<ul>\n<li>process_request, process_view ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ</li>\n<li>process_response ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/middleware/#middleware-ordering\" target=\"_blank\" rel=\"noopener\">å†…ç½®ä¸­é—´ä»¶çš„æ’åº</a></p>\n</li>\n</ul>\n</li>\n<li><p>Form è¡¨å•</p>\n<ul>\n<li><p>form çš„ method åªèƒ½æ˜¯ POST æˆ– GET</p>\n</li>\n<li><p>method=GET æ—¶, è¡¨å•æäº¤çš„å‚æ•°ä¼šå‡ºç°åœ¨ URL é‡Œ</p>\n</li>\n<li><p>å±æ€§å’Œæ–¹æ³•</p>\n<ul>\n<li>form.is_valid()</li>\n<li>form.has_changed()</li>\n<li>form.cleaned_data[â€˜fieldnameâ€™]</li>\n</ul>\n</li>\n<li><p>Form çš„å®šä¹‰å’Œä½¿ç”¨</p>\n<pre><code>from django.forms import Form\nfrom django.forms import IntegerField, CharField, DateField, ChoiceField\n\nclass TestForm(Form):\n    TAGS = (\n        (&apos;py&apos;, &apos;python&apos;),\n        (&apos;ln&apos;, &apos;linux&apos;),\n        (&apos;dj&apos;, &apos;django&apos;),\n    )\n    fid = IntegerField()\n    name = CharField(max_length=10)\n    tag = ChoiceField(choices=TAGS)\n    date = DateField()\n\ndata = {&apos;fid&apos;: 123, &apos;name&apos;: &apos;1234567890&apos;, &apos;tag&apos;: &apos;dj&apos;, &apos;date&apos;: &apos;2017-12-17&apos;}\nform = TestForm(data)\nprint(form.is_valid())\nprint(form.cleaned_data)  # cleaned_data å±æ€§æ˜¯ is_valid å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€æ·»åŠ çš„</code></pre></li>\n<li><p>ModelForm</p>\n<pre><code>class UserForm(ModelForm):\n    class Meta:\n        model = User\n        fields = [&apos;name&apos;, &apos;birth&apos;]</code></pre></li>\n</ul>\n</li>\n<li><p>æ¨¡æ¿</p>\n<ul>\n<li><p>base.html æ¨¡æ¿æ¨èå¸ƒå±€</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;{{title}}&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/static/css/style.css&quot;&gt;\n    {&quot;%&quot; block &quot;ext_css&quot; &quot;%&quot;}{&quot;%&quot; endblock &quot;%&quot;}\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;!-- {&quot;%&quot; block &quot;navbar&quot; &quot;%&quot;}{&quot;%&quot; endblock &quot;%&quot;} --&gt;\n    {&quot;%&quot; block &quot;sidebar&quot; &quot;%&quot;}{&quot;%&quot; endblock &quot;%&quot;}\n    {&quot;%&quot; block &quot;content&quot; &quot;%&quot;}{&quot;%&quot; endblock &quot;%&quot;}\n    &lt;!-- {&quot;%&quot; block &quot;foot&quot; &quot;%&quot;}{&quot;%&quot; endblock &quot;%&quot;} --&gt;\n    {&quot;%&quot; block &quot;ext_js&quot; &quot;%&quot;}{&quot;%&quot; endblock &quot;%&quot;}\n&lt;/body&gt;\n&lt;/html&gt;</code></pre></li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#ref-templates-builtins-tags\" target=\"_blank\" rel=\"noopener\">å†…å»º Tags</a></p>\n<ul>\n<li><p><code>autoescape</code></p>\n<pre><code>{&quot;%&quot; autoescape off &quot;%&quot;}\n    {{ body }}\n{&quot;%&quot; endautoescape &quot;%&quot;}</code></pre></li>\n<li><p><code>csrf_token</code></p>\n<pre><code>&lt;form&gt;\n{&quot;%&quot; csrf_token &quot;%&quot;}\n&lt;/form&gt;</code></pre></li>\n<li><p><code>for...endfor</code> ä¸­çš„å˜é‡</p>\n<ul>\n<li><code>forloop.counter</code>     ä» 1 å¼€å§‹è®¡æ•°</li>\n<li><code>forloop.counter0</code>    ä» 0 å¼€å§‹è®¡æ•°</li>\n<li><code>forloop.revcounter</code>  é€†åºè®¡æ•°åˆ° 1</li>\n<li><code>forloop.revcounter0</code> é€†åºè®¡æ•°åˆ° 0</li>\n<li><code>forloop.first</code>       æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ª</li>\n<li><code>forloop.last</code>        æ˜¯å¦æ˜¯å¾ªç¯ä¸­çš„æœ€åä¸€ä¸ª</li>\n<li><code>forloop.parentloop</code>  ç”¨äºå¼•ç”¨ä¸Šçº§å¾ªç¯ä¸­çš„å˜é‡, å¦‚ <code></code></li>\n</ul>\n</li>\n<li><p>empty å­å¥</p>\n<pre><code>{&quot;%&quot; for x in lst &quot;%&quot;}\n    &lt;div&gt;...&lt;/div&gt;\n{&quot;%&quot; empty &quot;%&quot;}\n    &lt;div&gt;Sorry&lt;/div&gt;\n{&quot;%&quot; endfor &quot;%&quot;}</code></pre></li>\n<li><p>load: åŠ è½½è‡ªå®šä¹‰ Tag {<code>&quot;%&quot;</code>load foo.bar <code>&quot;%&quot;</code>}</p>\n</li>\n<li><p>url: æ ¹æ® url name æ›¿æ¢ {<code>&quot;%&quot;</code> url â€˜your-url-nameâ€™ v1 v2 <code>&quot;%&quot;</code>}</p>\n</li>\n<li><p>static</p>\n<pre><code>{&quot;%&quot; load static &quot;%&quot;}\n&lt;img src=&quot;{&quot;%&quot; static &quot;img/smile.jpg&quot; &quot;%&quot;}&quot;&gt;</code></pre><p>  æˆ–</p>\n<pre><code>{&quot;%&quot; load static &quot;%&quot;}\n&lt;img src=&quot;{&quot;%&quot; get_static_prefix &quot;%&quot;}img/smile.jpg&quot;&gt;</code></pre></li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#built-in-filter-reference\" target=\"_blank\" rel=\"noopener\">å†…å»ºçš„ filter</a></p>\n<ul>\n<li>safe å’Œ escape: <code></code></li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.djangoproject.com/en/2.0/topics/templates/#django.template.backends.jinja2.Jinja2\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ Jinja2 æ›¿æ¢å†…ç½®æ¨¡æ¿å¼•æ“</a></p>\n</li>\n</ul>\n</li>\n<li><p>ORM</p>\n<ul>\n<li>ä»€ä¹ˆæ˜¯ ORM</li>\n<li>CURD (Create/Update/Retrieve/Delete)</li>\n<li><a href=\"https://docs.djangoproject.com/en/2.0/ref/models/fields/\" target=\"_blank\" rel=\"noopener\">Field</a></li>\n<li>Field é€‰é¡¹<ul>\n<li><code>null</code>    é’ˆå¯¹æ•°æ®åº“, å…è®¸æ•°æ®åº“è¯¥å­—æ®µä¸º Null</li>\n<li><code>blank</code>   é’ˆå¯¹ Model æœ¬èº«, å…è®¸ä¼ å…¥å­—æ®µä¸ºç©º. blank ä¸º True æ—¶, å¯¹æ•°æ®åº“æ¥è¯´, è¯¥å­—æ®µä¾ç„¶ä¸ºå¿…å¡«é¡¹</li>\n<li><code>default</code> å°½é‡ä½¿ç”¨ default, å°‘ç”¨ null å’Œ blank</li>\n<li><code>choices</code></li>\n<li><code>primary_key</code> éå¿…è¦æ—¶ä¸è¦è®¾ç½®, ç”¨é»˜è®¤ id, ä¿æŒæ¡ç›®è‡ªå¢ã€æœ‰åº</li>\n<li><code>unique</code></li>\n<li><code>db_index</code>    (True | False)</li>\n<li><code>max_length</code></li>\n<li><code>auto_now</code>     æ¯æ¬¡ save æ—¶ï¼Œæ›´æ–°ä¸ºå½“å‰æ—¶é—´</li>\n<li><code>auto_now_add</code> åªè®°å½•åˆ›å»ºæ—¶çš„æ—¶é—´, ä¿å­˜æ—¶ä¸æ›´æ–°</li>\n</ul>\n</li>\n<li><a href=\"https://docs.djangoproject.com/en/2.0/ref/models/querysets/\" target=\"_blank\" rel=\"noopener\">QuerySet</a><ul>\n<li>æ–¹æ³•<ul>\n<li>åˆ›å»º: <code>create() / get_or_create() / update_or_create() / bulk_create()</code></li>\n<li>æ¡ä»¶è¿‡æ»¤å’Œæ’é™¤: <code>filter() / exclude()</code></li>\n<li>åªåŠ è½½éœ€è¦çš„å­—æ®µ: <code>only() / defer()</code></li>\n<li><code>order_by() / count() / exists()</code></li>\n<li><code>latest() / earliest()</code></li>\n<li><code>first() / last()</code></li>\n</ul>\n</li>\n<li>æŸ¥æ‰¾æ¡ä»¶<ul>\n<li><code>filter(id__in=[123, 555, 231])</code></li>\n<li><code>filter(id__range=[123, 456])</code></li>\n<li><code>filter(name__contains=&#39;123&#39;)</code></li>\n<li><code>filter(name__regex=&#39;^\\w+\\d+&#39;)</code></li>\n<li><code>gt / gte / lt / lte</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å…¶ä»– ORM<ul>\n<li>sqlalchemy</li>\n<li>peewee</li>\n</ul>\n</li>\n<li>ä¸»é”®å’Œå¤–é”®çº¦æŸ<ul>\n<li>å†…éƒ¨ç³»ç»Ÿã€ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¯ä»¥ä½¿ç”¨ (éœ€è¦æ•°æ®é‡å¯æ§ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ•°é‡å¯æ§)</li>\n<li>äº’è”ç½‘è¡Œä¸šä¸å»ºè®®ä½¿ç”¨<ul>\n<li>æ€§èƒ½ç¼ºé™·</li>\n<li>ä¸èƒ½ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒ</li>\n<li>ä¸å®¹æ˜“åšåˆ°æ•°æ®è§£è€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Cache</p>\n<ul>\n<li><p>é»˜è®¤ç¼“å­˜: <code>from django.core.cache import cache</code></p>\n</li>\n<li><p>BACKEND: <code>DatabaseCache / MemcachedCache / LocMemCache</code></p>\n</li>\n<li><p>LOCATION: IP:Port ç»‘å®š, åªæœ‰ä¸€ä¸ªæ—¶é…åˆ¶æˆå­—ç¬¦ä¸²é“¾æ¥, æœ‰å¤šå°æ—¶é…åˆ¶ä¸ºåˆ—è¡¨</p>\n</li>\n<li><p>ä½¿ç”¨ Redis åšç¼“å­˜</p>\n<pre><code>CACHES = {\n    &quot;default&quot;: {\n        &quot;BACKEND&quot;: &quot;django_redis.cache.RedisCache&quot;,\n        &quot;LOCATION&quot;: &quot;redis://127.0.0.1:6379/1&quot;,\n        &quot;OPTIONS&quot;: {\n            &quot;CLIENT_CLASS&quot;: &quot;django_redis.client.DefaultClient&quot;,\n            &quot;PICKLE_VERSION&quot;: -1,\n        }\n    }\n}</code></pre></li>\n<li><p>åŸºæœ¬æ–¹æ³•</p>\n<ul>\n<li><code>cache.set(key, value, timeout=None)</code></li>\n<li><code>cache.get(key, default=None)</code></li>\n<li><code>cache.delete(key)</code></li>\n<li><code>cache.incr(&#39;num&#39;)</code></li>\n<li><code>cache.decr(&#39;num&#39;)</code></li>\n<li><code>cache.get_or_set(key, default, timeout=None)</code></li>\n<li><code>cache.set_many({&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3})</code></li>\n<li><code>cache.get_many([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])</code></li>\n</ul>\n</li>\n<li><p>å…¨ç«™ç¼“å­˜ä¸­é—´ä»¶: <code>django.middleware.cache.UpdateCacheMiddleware</code></p>\n<ul>\n<li>å‰ç½®ä¸­é—´ä»¶</li>\n<li>ç¼“å­˜æœŸé™: CACHE_MIDDLEWARE_SECONDS</li>\n</ul>\n</li>\n<li><p>é¡µé¢ç¼“å­˜è£…é¥°å™¨: <code>from django.views.decorators.cache import cache_page</code></p>\n</li>\n<li><p>å±æ€§ç¼“å­˜è£…é¥°å™¨: <code>from django.utils.functional import cached_property</code></p>\n</li>\n<li><p>pickle</p>\n<ul>\n<li>dumps</li>\n<li>loads</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Cookie å’Œ Session</p>\n<ul>\n<li>Cookie: <code>response.set_cookie(key, value, max_age=None)</code></li>\n<li>Session é…ç½®<ol>\n<li>å¼€å¯ Session ä¸­é—´ä»¶: <code>django.contrib.sessions.middleware.SessionMiddleware</code></li>\n<li>é…ç½®ç¼“å­˜</li>\n<li>é…ç½® Session å¼•æ“: <code>SESSION_ENGINE = &quot;django.contrib.sessions.backends.cache&quot;</code></li>\n</ol>\n</li>\n<li>å¯é€‰é¡¹<ul>\n<li><code>SESSION_COOKIE_AGE</code>              ç¼“å­˜æ—¶é—´, é»˜è®¤ 2 å‘¨</li>\n<li><code>SESSION_COOKIE_NAME</code>             Session å, é»˜è®¤ â€˜sessionidâ€™</li>\n<li><code>SESSION_EXPIRE_AT_BROWSER_CLOSE</code> æµè§ˆå™¨å…³é—­é¡µé¢æ—¶, Session æ˜¯å¦è®¾ä¸ºè¿‡æœŸ</li>\n<li><code>SESSION_SAVE_EVERY_REQUEST</code>      æ¯æ¬¡è¯·æ±‚æ—¶, æ˜¯å¦å¼ºåˆ¶ä¿å­˜ä¸€æ¬¡ Session</li>\n</ul>\n</li>\n<li>ç”¨æ³•<ul>\n<li><code>request.session.session_key</code>     æŸ¥çœ‹ session_id</li>\n<li><code>request.session.modified</code>        session æ˜¯å¦å‘ç”Ÿè¿‡ä¿®æ”¹</li>\n<li><code>request.session[&#39;uid&#39;] = 1234</code>   å½“ session å‘ç”Ÿæ›´æ”¹æ—¶ä¼šè‡ªåŠ¨ä¿å­˜</li>\n<li><code>request.session.get(&#39;uid&#39;)</code>      å–å€¼</li>\n<li><code>request.session.save()</code>          æ‰‹åŠ¨ä¿å­˜</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Logging</p>\n<ul>\n<li><p>æ—¥å¿—çº§åˆ«</p>\n<ul>\n<li>DEBUG</li>\n<li>INFO</li>\n<li>WARNING</li>\n<li>ERROR</li>\n<li>FATAL</li>\n</ul>\n</li>\n<li><p>ä½¿ç”¨</p>\n<ul>\n<li>logger.debug(â€˜xxxxxxxxâ€™)</li>\n<li>logger.info(â€˜xxxxxxxxâ€™)</li>\n<li>logger.warning(â€˜xxxxxxxxâ€™)</li>\n<li>logger.error(â€˜xxxxxxxxâ€™)</li>\n<li>logger.fatal(â€˜xxxxxxxxâ€™)</li>\n</ul>\n</li>\n<li><p>æŸ¥æ‰¾ã€åˆ†æ</p>\n<ul>\n<li>tail</li>\n<li>head</li>\n<li>less</li>\n<li>awk</li>\n<li>grep</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.python.org/2/library/logging.html\" target=\"_blank\" rel=\"noopener\">é…ç½®</a></p>\n<pre><code>LOGGING = {\n    &apos;version&apos;: 1,\n    &apos;disable_existing_loggers&apos;: True,\n    &apos;formatters&apos;: {\n        &apos;simple&apos;: {\n            &apos;format&apos;: &apos;&quot;%&quot;(asctime)s &quot;%&quot;(module)s.&quot;%&quot;(funcName)s: &quot;%&quot;(message)s&apos;,\n            &apos;datefmt&apos;: &apos;&quot;%&quot;Y-&quot;%&quot;m-&quot;%&quot;d &quot;%&quot;H:&quot;%&quot;M:&quot;%&quot;S&apos;,\n        },\n        &apos;verbose&apos;: {\n            &apos;format&apos;: &apos;&quot;%&quot;(asctime)s &quot;%&quot;(levelname)s [&quot;%&quot;(process)d-&quot;%&quot;(threadName)s] &apos;\n                      &apos;&quot;%&quot;(module)s.&quot;%&quot;(funcName)s line &quot;%&quot;(lineno)d: &quot;%&quot;(message)s&apos;,\n            &apos;datefmt&apos;: &apos;&quot;%&quot;Y-&quot;%&quot;m-&quot;%&quot;d &quot;%&quot;H:&quot;%&quot;M:&quot;%&quot;S&apos;,\n        }\n    },\n\n    &apos;handlers&apos;: {\n        &apos;inf&apos;: {\n            &apos;class&apos;: &apos;logging.handlers.TimedRotatingFileHandler&apos;,\n            &apos;filename&apos;: &apos;/data/web/gnt.out&apos;,\n            &apos;when&apos;: &apos;W0&apos;,  # æ¯å‘¨ä¸€åˆ‡å‰²æ—¥å¿—\n            &apos;backupCount&apos;: 5,\n            &apos;formatter&apos;: &apos;simple&apos;,\n            &apos;level&apos;: &apos;DEBUG&apos; if DEBUG else &apos;INFO&apos;,\n        },\n        &apos;err&apos;: {\n            &apos;class&apos;: &apos;logging.handlers.TimedRotatingFileHandler&apos;,\n            &apos;filename&apos;: &apos;/data/web/gnt.err&apos;,\n            &apos;when&apos;: &apos;D&apos;,  # æ¯å¤©åˆ‡å‰²æ—¥å¿—\n            &apos;backupCount&apos;: 5,\n            &apos;formatter&apos;: &apos;verbose&apos;,\n            &apos;level&apos;: &apos;WARNING&apos;,\n        }\n    },\n\n    &apos;loggers&apos;: {\n        &apos;inf&apos;: {\n            &apos;handlers&apos;: [&apos;inf&apos;],\n            &apos;level&apos;: &apos;DEBUG&apos;,\n            &apos;propagate&apos;: True,\n        },\n        &apos;err&apos;: {\n            &apos;handlers&apos;: [&apos;err&apos;],\n            &apos;level&apos;: &apos;DEBUG&apos;,\n            &apos;propagate&apos;: True,\n        }\n    }\n}</code></pre></li>\n</ul>\n</li>\n<li><p>Django çš„æ€§èƒ½</p>\n<ul>\n<li>Django è‡ªèº«ä¼˜åŒ–<ul>\n<li>å……åˆ†ä¹‹ç”¨ç¼“å­˜</li>\n<li>æƒ°æ€§æ±‚å€¼å’Œè¿­ä»£å™¨</li>\n<li>å°½é‡ä½¿ç”¨ <code>defer()</code> å’Œ <code>only()</code> æŸ¥æ‰¾</li>\n<li>å°½é‡ä½¿ç”¨ <code>count()</code> å’Œ <code>exists()</code></li>\n<li>æ¨¡æ¿ä¸­ <code>{&quot;%&quot; block &quot;%&quot;}</code> æ€§èƒ½ä¼˜äº <code>{&quot;%&quot; include &quot;%&quot;}</code></li>\n<li><a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/api/#django.template.loaders.cached.Loader\" target=\"_blank\" rel=\"noopener\">å¼€å¯æ¨¡æ¿ç¼“å­˜</a></li>\n<li><strong>ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼ä¸è¦ä½¿ç”¨å¤–é”®ï¼</strong></li>\n</ul>\n</li>\n<li>å…¶ä»–ä¼˜åŒ–<ul>\n<li>I/O å¯†é›†å‹: å¼‚æ­¥åŒ–<ul>\n<li>è¯·æ±‚å¼‚æ­¥åŒ–</li>\n<li>æ•°æ®æ“ä½œå¼‚æ­¥åŒ–</li>\n<li>gevent, asyncio, aiopg, aiohttp, tornado</li>\n</ul>\n</li>\n<li>è®¡ç®—å¯†é›†å‹<ul>\n<li>è€—æ—¶æ“ä½œç”¨ <a href=\"http://docs.jinkan.org/docs/celery/\" target=\"_blank\" rel=\"noopener\">Celery</a> ç­‰å·¥å…·å¼‚æ­¥å®Œæˆ</li>\n</ul>\n</li>\n<li>åˆ†åº“åˆ†è¡¨<ul>\n<li>å–ä½™ã€å“ˆå¸Œ</li>\n<li>èŒƒå›´</li>\n<li>ä¸€è‡´æ€§å“ˆå¸Œ</li>\n</ul>\n</li>\n<li>ç´¢å¼•ä¼˜åŒ–</li>\n<li>æ…¢æŸ¥è¯¢ä¼˜åŒ– (<a href=\"https://django-debug-toolbar.readthedocs.io\" target=\"_blank\" rel=\"noopener\">ç›¸å…³å·¥å…·: DjangoDebugToolbar</a>)</li>\n<li>Gunicorn å¼€å¯å¤šè¿›ç¨‹æ¨¡å¼åˆ©ç”¨å¤šæ ¸</li>\n<li>PyPy</li>\n<li>Cython</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Python / Django ç¯å¢ƒåŠ è½½</p>\n<ul>\n<li>sys.argv</li>\n<li>sys.path</li>\n<li>os.environ</li>\n</ul>\n</li>\n<li><p>Git</p>\n<ul>\n<li>å¸¸ç”¨æ“ä½œ<ul>\n<li>git init</li>\n<li>git clone</li>\n<li>git add</li>\n<li>git commit -m â€˜xxxxxxxxâ€™</li>\n<li>git push</li>\n<li>git pull</li>\n<li>git fetch</li>\n<li>git log</li>\n<li>git checkout</li>\n<li>git branch</li>\n<li>git merge</li>\n</ul>\n</li>\n<li>ä»£ç ç®¡ç†<ul>\n<li>code review<ul>\n<li>å‘ç°ä»£ç é€»è¾‘é—®é¢˜</li>\n<li>ä»£ç é£æ ¼åŠè§„èŒƒåŒ–é—®é¢˜</li>\n<li>ç®—æ³•é—®é¢˜</li>\n<li>é”™è¯¯çš„ä½¿ç”¨æ–¹å¼</li>\n<li>èƒ½å¤Ÿå­¦ä¹ å…¶ä»–äººçš„ä¼˜ç§€ä»£ç </li>\n</ul>\n</li>\n<li>åˆ†æ”¯: master / dev / feature</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Blog</p>\n<ol>\n<li><p>åŸºç¡€åŠŸèƒ½</p>\n<ol>\n<li>çœ‹æ–‡ç« </li>\n<li>å†™æ–‡ç« </li>\n<li>æŸ¥çœ‹æ–‡ç« åˆ—è¡¨</li>\n<li>æ ¹æ®æ­£æ–‡æœç´¢æ–‡ç« </li>\n<li>å¯ä»¥è¯„è®º</li>\n</ol>\n</li>\n<li><p>æ‰©å±•åŠŸèƒ½</p>\n<ol start=\"0\">\n<li><p>å®ç°åˆ†é¡µåŠŸèƒ½: é¦–é¡µæ–‡ç« åˆ—è¡¨æ¯é¡µæ˜¾ç¤º 5 ç¯‡æ–‡ç« </p>\n</li>\n<li><p>å®ç°ä¸€ä¸ªåŸºäº redis çš„æ–‡ç« ç¼“å­˜</p>\n</li>\n<li><p>ç»™é¦–é¡µå¢åŠ ä¸€ä¸ªæ¨¡å—, æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„ 10 ç¯‡æ–‡ç«  (ç‚¹å‡»ç‡æœ€é«˜çš„)</p>\n</li>\n<li><p>åˆ›å»ºç”¨æˆ·æ¨¡å—</p>\n<ul>\n<li>å®ç°æ³¨å†Œã€ç™»å½•åŠŸèƒ½</li>\n<li>æ·»åŠ ç”¨æˆ·ä¸ªäººä¿¡æ¯å±•ç¤º</li>\n<li>å¼€å‘å¤´åƒä¸Šä¼ åŠŸèƒ½</li>\n</ul>\n</li>\n<li><p>å†™ä¸€ä¸ªè£…é¥°å™¨, åœ¨ blog.log æ–‡ä»¶ä¸­è¾“å‡ºé˜…è¯»æ–‡ç« çš„ç”¨æˆ· IP, åŠæ‰€è¯»æ–‡ç« çš„ ID</p>\n</li>\n<li><p>åŸºäºæ—¥å¿—çš„ç®€å•ç»Ÿè®¡</p>\n<ul>\n<li><p>è®¡ç®—å‡ºé˜…è¯»æ¬¡æ•°æœ€å¤šçš„æ–‡ç« : <code>awk &#39;{print $6}&#39; blog6.log | sort | uniq -c | sort -r</code></p>\n</li>\n<li><p>è®¡ç®—å‡ºæ¯ä¸ªè®¿å®¢è¯»äº†å¤šå°‘ç¯‡æ–‡ç« : <code>awk &#39;{print $5}&#39; blog6.log | sort | uniq -c | sort -r</code></p>\n</li>\n</ul>\n</li>\n<li><p>å†™ä¸€ä¸ªä¸­é—´ä»¶, é™åˆ¶ç”¨æˆ·çš„è®¿é—®é¢‘ç‡æœ€å¤§ä¸ºæ¯ç§’ 2 æ¬¡ï¼Œè¶…è¿‡ 2 æ¬¡æ—¶ï¼Œç­‰å¾…è‡³åˆç†æ—¶é—´å†è¿”å›</p>\n</li>\n<li><p>ç»™æ–‡ç« å¢åŠ  Tag åŠŸèƒ½:</p>\n<ul>\n<li>æ¯ç¯‡æ–‡ç« å¯ä»¥æ·»åŠ å¤šä¸ª Tag</li>\n<li>æ¯ä¸ª Tag åˆ†ç±»ä¸‹æœ‰å¤šç¯‡æ–‡ç« </li>\n<li>ç‚¹å‡»æ¯ä¸ª Tag ç›´æ¥è·³è½¬åˆ°æ­¤ tag çš„æ–‡ç« åˆ—è¡¨</li>\n<li>ä¸è¦ä½¿ç”¨å¤–é”®</li>\n</ul>\n</li>\n<li><p>å®ç°æƒé™ç®¡ç†åŠŸèƒ½</p>\n<ul>\n<li>æœªç™»å½•ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ–‡ç« </li>\n<li>æ™®é€šæ³¨å†Œç”¨æˆ·ï¼Œå¯ä»¥å‘è¡¨è¯„è®º</li>\n<li>ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘è¡¨å’Œåˆ é™¤æ–‡ç« ã€è¯„è®º</li>\n</ul>\n</li>\n<li><p><a href=\"http://docs.gunicorn.org/en/latest/install.html\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ Gunicorn é©±åŠ¨ Django, å¯¹æ¯”æ€§èƒ½å·®å¼‚</a></p>\n<ul>\n<li>æ–‡ä»¶æè¿°ç¬¦</li>\n<li>å•å°æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°</li>\n<li>TCP è¿æ¥ä¸Šé™</li>\n</ul>\n</li>\n<li><p>Nginx</p>\n<ul>\n<li><p>è´Ÿè½½å‡è¡¡: è½®è¯¢, æƒé‡, IP å“ˆå¸Œ</p>\n<pre><code>               User Requests\n             |    |    |    |\n             V    V    V    V\n             www.example.com\n                 DNS è½®è®­\n               /         \\\n              V           V\n          Nginx            Nginx\n       113.5.3.10        110.2.9.11         ---&gt; Nginx ç»‘å®šå…¬ç½‘ IP\n       /        |        |       \\\n      V         V        V        V\nAppServer  AppServer  AppServer  AppServer  ---&gt; Gunicorn + Django\n10.0.0.1   10.0.0.2   10.0.0.3   10.0.0.3   ---&gt; AppServer ç»‘å®šå†…ç½‘ IP\nweight:2   weight:5   weight:10  weight:20  ---&gt; æƒé‡</code></pre></li>\n<li><p>ä¸ºä»€ä¹ˆç”¨ Nginx, ä¸ç›´æ¥ç”¨ gunicorn</p>\n</li>\n<li><p>ä»£ç†ç½‘ç«™ã€å›¾ç‰‡</p>\n</li>\n<li><p>Nginx å’Œ Apache çš„åŒºåˆ«</p>\n</li>\n</ul>\n</li>\n<li><p>å‹åŠ›æµ‹è¯•</p>\n<ul>\n<li>ab</li>\n<li>webbench</li>\n</ul>\n</li>\n<li><p>å…¶ä»–: uWSGI, tornado</p>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>é¡¹ç›®</p>\n<ul>\n<li>ä»£ç ç»„ç»‡</li>\n<li>å¸¸ç”¨ç»„ä»¶<ul>\n<li>nginx</li>\n<li><a href=\"http://redisdoc.com/\" target=\"_blank\" rel=\"noopener\">Redis</a></li>\n<li>MySQL</li>\n<li>è½¯ä»¶å®‰è£…<ul>\n<li><code>apt-get</code></li>\n<li><code>yum</code></li>\n<li><code>make</code> / <code>make install</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>DB é›†ç¾¤<ul>\n<li>ä¸»ä»å¤‡ä»½</li>\n<li>ä¸€ä¸»ä¸¤ä»</li>\n<li>åŒä¸»äº’å¤‡</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é™æ€æ–‡ä»¶å­˜å‚¨</p>\n<ul>\n<li>çº¿ä¸Šç³»ç»Ÿ Django ä¼šå…³æ‰è‡ªèº«çš„é™æ€æ–‡ä»¶å¤„ç†</li>\n<li>ç”¨ Nginx ä»£ç†é™æ€æ–‡ä»¶</li>\n<li>CDN (å†…å®¹åˆ†å‘ç½‘ç»œ)<ul>\n<li>åŸºäºç¼“å­˜æŠ€æœ¯ä¸ºé™æ€èµ„æº (ä¸»è¦æ˜¯å¤šåª’ä½“èµ„æº) æä¾›è®¿é—®åŠ é€Ÿçš„æœåŠ¡</li>\n<li>åœ¨ä¸åŒåœ°åŒºéƒ¨ç½²é•œåƒæœåŠ¡å™¨èŠ‚ç‚¹</li>\n<li>å®šæœŸä¸æºç«™åšå†…å®¹åŒæ­¥</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n"},{"title":"pythonè¿›é˜¶","date":"2017-05-03T10:16:36.000Z","_content":"\n\n\nPython è¿›é˜¶\n===========\n\n\n\n1. PEP8 ç¼–ç è§„èŒƒ, ä»¥åŠå¼€å‘ä¸­çš„ä¸€äº›æƒ¯ä¾‹å’Œå»ºè®®\n    - ä»£ç ç¼–æ’:\n        * ç¼©è¿› 4 ä¸ªç©ºæ ¼, ç¦æ­¢ç©ºæ ¼ä¸ Tab æ··ç”¨\n        * è¡Œé•¿ 80: é˜²æ­¢å•è¡Œé€»è¾‘è¿‡äºå¤æ‚\n    - é€‚å½“æ·»åŠ ç©ºè¡Œ\n        * å‡½æ•°é—´: é¡¶çº§å‡½æ•°é—´ç©º 2 è¡Œ, ç±»çš„æ–¹æ³•ä¹‹é—´ç©º 1 è¡Œ\n        * å‡½æ•°å†…: åŒä¸€å‡½æ•°å†…çš„é€»è¾‘å—ä¹‹é—´, ç©º 1 è¡Œ\n        * æ–‡ä»¶ç»“å°¾: ç•™ä¸€ä¸ªç©ºè¡Œ\n    - import\n        * é¡ºåº\n            1. æ ‡å‡†åº“\n            2. ç¬¬ä¸‰æ–¹åº“\n            3. è‡ªå®šä¹‰åº“\n        * å•è¡Œä¸è¦ import å¤šä¸ªåº“\n        * æ¨¡å—å†…ç”¨ä¸åˆ°çš„ä¸è¦å» import\n    - ç©ºæ ¼\n    - æ³¨é‡Š\n        * è¡Œæ³¨é‡Š\n        * å—æ³¨é‡Š\n        * å¼•å…¥å¤–æ¥ç®—æ³•æˆ–è€…é…ç½®æ—¶é¡»åœ¨æ³¨é‡Šä¸­æ·»åŠ æºè¿æ¥, æ ‡æ˜å‡ºå¤„\n        * å‡½æ•°å’Œç±»å°½å¯èƒ½æ·»åŠ  `docstring`\n    - å‘½å\n        * åŒ…åã€æ¨¡å—åã€å‡½æ•°åã€æ–¹æ³•åå…¨éƒ¨ä½¿ç”¨å°å†™, å•è¯é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥\n        * ç±»åã€å¼‚å¸¸åä½¿ç”¨ CapWords çš„æ–¹å¼, å¼‚å¸¸åç»“å°¾åŠ  `Error` æˆ– `Wraning` åç¼€\n        * å…¨å±€å˜é‡å°½é‡ä½¿ç”¨å¤§å†™, ä¸€ç»„åŒç±»å‹çš„å…¨å±€å˜é‡è¦åŠ ä¸Šç»Ÿä¸€å‰ç¼€, å•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥\n    - å­—ç¬¦ä¸²æ‹¼æ¥å°½é‡ä½¿ç”¨ `join` æ–¹å¼: é€Ÿåº¦å¿«, å†…å­˜æ¶ˆè€—å°\n    - è¯­æ„æ˜ç¡®ã€ç›´ç™½\n        * `not xx in yy` vs `xx not in yy`\n        * `not a is b` vs `a is not b`\n    - ç¨‹åºæ„å»º\n        * ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…, å¹¶æŠŠè¿™ä»¶äº‹åšå¥½\n        * å¤§çš„åŠŸèƒ½ç”¨å°å‡½æ•°ä¹‹é—´çµæ´»ç»„åˆæ¥å®Œæˆ\n        * é¿å…ç¼–å†™åºå¤§çš„ç¨‹åº, â€œå¤§â€æ„å‘³ç€ä½“ç§¯åºå¤§, é€»è¾‘å¤æ‚ç”šè‡³æ··ä¹±\n    - å‡½æ•°åå¿…é¡»æœ‰åŠ¨è¯, æœ€å¥½æ˜¯ do_something çš„å¥å¼, æˆ–è€… somebody_do_something å¥å¼\n    - è‡ªå®šä¹‰çš„å˜é‡åã€å‡½æ•°åä¸è¦ä¸æ ‡å‡†åº“ä¸­çš„åå­—å†²çª\n    - pip install pep8\n    - ç»ƒä¹ : è§„èŒƒåŒ–è¿™æ®µä»£ç \n\n            from django.conf import settings\n            import sys, os\n            mod=0xffffffff\n            def foo ( a , b = 123 ) :\n                c = { 'x' : 111 , 'y' : 222 }  # å®šä¹‰ä¸€ä¸ªå­—å…¸\n                d = [ 1, 3 , 5 ]\n                return a , b , c\n            def bar(x):\n                if x%2 ==0: return true\n\n2. `*` å’Œ `**` çš„ç”¨æ³•\n    - å‡½æ•°å®šä¹‰\n\n            def foo(*args, **kwargs):\n                pass\n\n    - å‚æ•°ä¼ é€’\n\n            def foo(x, y, z, a, b):\n                print(x)\n                print(y)\n                print(z)\n                print(a)\n                print(b)\n            lst = [1, 2, 3]\n            dic = {'a': 22, 'b': 77}\n            foo(*lst, **dic)\n\n    - å¼ºåˆ¶å‘½åå‚æ•°\n\n            def foo(a, *, b, c=123):\n                pass\n\n    - è§£åŒ…è¯­æ³•: `a, b, *ignored, c = [1, 2, 3, 4, 5, 6, 7]`\n\n2. Python çš„èµ‹å€¼å’Œå¼•ç”¨\n    - `==, is`: `==` åˆ¤æ–­çš„æ˜¯å€¼, `is` åˆ¤æ–­çš„æ˜¯å†…å­˜åœ°å€ (å³å¯¹è±¡çš„id)\n    - å°æ•´æ•°å¯¹è±¡: [-5, 256]\n    - `copy, deepcopy` çš„åŒºåˆ«\n        * `copy`: åªæ‹·è´è¡¨å±‚å…ƒç´ \n        * `deepcopy`: åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºæ‰€æœ‰å­å…ƒç´ \n        * ![copy and deepcopy](/image/Copy.png)\n\n    - ç»ƒä¹ 1: è¯´å‡ºæ‰§è¡Œç»“æœ\n\n            def extendList(val, lst=[]):\n                lst.append(val)\n                return lst\n    \n            list1 = extendList(10)\n            list2 = extendList(123, [])\n            list3 = extendList('a')\n\n    - ç»ƒä¹ 2: è¯´å‡ºä¸‹é¢æ‰§è¡Œç»“æœ\n\n            from copy import copy, deepcopy\n            from pickle import dumps, loads\n    \n            a = [1, 2, 3]\n            b = [a] * 3\n            c = copy(b)\n            d = deepcopy(b)\n            e = loads(dumps(b, 4))\n    \n            b[1].append(999)\n            c[1].append(999)\n            d[1].append(999)\n            e[1].append(999)\n            d[1].append(777)\n            e[1].append(777)\n\n    - è‡ªå®šä¹‰ deepcopy: `my_deepcopy = lambda item: loads(dumps(item, 4))`\n\n3. è¿­ä»£å™¨, ç”Ÿæˆå™¨, itertools, yield, åˆ—è¡¨ / å­—å…¸ / é›†åˆçš„æ¨å¯¼\n\n        class Range:\n            def __init__(self, start, end):\n                self.start = start - 1\n                self.end = end\n    \n            def __iter__(self):\n                return self\n    \n            def __next__(self):\n                self.start += 1\n                if self.start < self.end:\n                    return self.start\n                else:\n                    raise StopIteration()\n\n    - iterator: ä»»ä½•å®ç°äº† `__iter__` å’Œ `__next__` (python2ä¸­æ˜¯ `next()`) æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯è¿­ä»£å™¨.\n        * `__iter__`è¿”å›è¿­ä»£å™¨è‡ªèº«\n        * `__next__` è¿”å›å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼\n        * å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ›´å¤šå…ƒç´ , åˆ™æŠ›å‡ºStopIterationå¼‚å¸¸\n\n    - generator: ç”Ÿæˆå™¨å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨, ä¸éœ€è¦è‡ªå®šä¹‰ `__iter__` å’Œ `__next__`\n        * ç”Ÿæˆå™¨å‡½æ•° (yield)\n        * ç”Ÿæˆå™¨è¡¨è¾¾å¼\n\n    - ç»ƒä¹ 1: è‡ªå®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n            class Fib:\n                def __init__(self, count):\n                    self.prev = 0\n                    self.curr = 1\n                    self.count = count\n\n                def __iter__(self):\n                    return self\n    \n                def __next__(self):\n                    if self.count > 0:\n                        # è®¡æ•°\n                        self.count -= 1\n                        # è®¡ç®—å½“å‰çš„å€¼\n                        current = self.curr\n                        # ä¸ºä¸‹æ¬¡åšå‡†å¤‡\n                        self.prev, self.curr = self.curr, (self.curr + self.prev)\n                        # è¿”å›å½“å‰å€¼\n                        return current\n                    else:\n                        raise StopIteration()\n\n    - ç»ƒä¹ 2: è‡ªå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n                def fib(max_value):\n                    prev = 0\n                    curr = 1\n                    while curr < max_value:\n                        yield curr\n                        prev, curr = curr, curr + prev\n\n    - ç»ƒä¹ 3: å®šä¹‰ä¸€ä¸ªéšæœºæ•°è¿­ä»£å™¨, éšæœºèŒƒå›´ä¸º [1, 50], æœ€å¤§è¿­ä»£æ¬¡æ•° 30\n\n            import random\n\n            class RandomIter:\n                def __init__(self, start, end, times):\n                    self.start = start\n                    self.end = end\n                    self.max_times = times\n                    self.count = 0\n\n                def __iter__(self):\n                    return self\n    \n                def __next__(self):\n                    self.count += 1\n                    if self.count <= self.max_times:\n                        return random.randint(self.start, self.end)\n                    else:\n                        raise StopIteration()\n\n    - è¿­ä»£å™¨ã€ç”Ÿæˆå™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ\n        * èŠ‚çœå†…å­˜\n        * æƒ°æ€§æ±‚å€¼\n    - itertools\n        * æ— é™è¿­ä»£\n            + `count(start=0, step=1)`\n            + `cycle(iterable)`\n            + `repeat(object [,times])`\n        * æœ‰é™è¿­ä»£\n            + `chain(*iterables)`\n        * æ’åˆ—ç»„åˆ\n            + `product(*iterables, repeat=1)` ç¬›å¡å°”ç§¯\n            + `permutations(iterable[, r-length])` å…¨æ’åˆ—\n            + `combinations(iterable, r-length)` ç»„åˆ\n\n\n4. `method`, `classmethod` å’Œ `staticmethod`\n    - `method`: é€šè¿‡å®ä¾‹è°ƒç”¨æ—¶, å¯ä»¥å¼•ç”¨ç±»å†…éƒ¨çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•\n    - `classmethod`: æ— éœ€å®ä¾‹åŒ–, å¯ä»¥è°ƒç”¨ç±»å±æ€§å’Œç±»æ–¹æ³•, æ— æ³•å–åˆ°æ™®é€šçš„æˆå‘˜å±æ€§å’Œæ–¹æ³•\n    - `staticmethod`: æ— è®ºç”¨ç±»è°ƒç”¨è¿˜æ˜¯ç”¨å®ä¾‹è°ƒç”¨, éƒ½æ— æ³•å–åˆ°ç±»å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•, å®Œå…¨ç‹¬ç«‹çš„ä¸€ä¸ªæ–¹æ³•\n\n    - ç»ƒä¹ : è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœ\n\n            class Test(object):\n                x = 123\n    \n                def __init__(self):\n                    self.y = 456\n    \n                def bar1(self):\n                    print('i am a method')\n    \n                @classmethod\n                def bar2(cls):\n                    print('i am a classmethod')\n    \n                @staticmethod\n                def bar3():\n                    print('i am a staticmethod')\n    \n                def foo1(self):\n                    print(self.x)\n                    print(self.y)\n                    self.bar1()\n                    self.bar2()\n                    self.bar3()\n    \n                @classmethod\n                def foo2(cls):\n                    print(cls.x)\n                    # print(cls.y)\n                    # cls.bar1()\n                    Test.bar2()\n                    Test.bar3()\n    \n                @staticmethod\n                def foo3(obj):\n                    print(obj.x)\n                    print(obj.y)\n                    obj.bar1()\n                    obj.bar2()\n                    obj.bar3()\n    \n            t = Test()\n            t.foo1()\n            t.foo2()\n            t.foo3()\n\n5. Python é­”æœ¯æ–¹æ³•\n    1. `__str__`, `__repr__`\n    2. `__init__` å’Œ `__new__`\n        * `__new__` è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹, `__init__` æ— è¿”å›å€¼\n        * `__new__` æ˜¯ä¸€ä¸ªç±»æ–¹æ³•\n            + å•ä¾‹æ¨¡å¼\n\n                    class A(object):\n                        '''å•ä¾‹æ¨¡å¼'''\n                        obj = None\n                        def __new__(cls, *args, **kwargs):\n                            if cls.obj is None:\n                                cls.obj = object.__new__(cls)\n                            return cls.obj\n\n    3. æ¯”è¾ƒè¿ç®—ã€æ•°å­¦è¿ç®—\n        * è¿ç®—ç¬¦é‡è½½\n            + `+`: `__add__(value)`\n            + `-`: `__sub__(value)`\n            + `*`: `__mul__(value)`\n            + `/`: `__truediv__(value)` (Python 3.x), `__div__(value)` (Python 2.x)\n            + `//`: `__floordiv__(value)`\n            + `%`: `__mod__(value)`\n            + `&`: `__and__(value)`\n            + `|`: `__or__(value)`\n\n        * ç»ƒä¹ : å®ç°å­—å…¸çš„ `__add__` æ–¹æ³•, ä½œç”¨ç›¸å½“äº d.update(other)\n\n                class Dict(dict):\n                    def __add__(self, other):\n                        if isinstance(other, dict):\n                            new_dict = {}\n                            new_dict.update(self)\n                            new_dict.update(other)\n                            return new_dict\n                        else:\n                            raise TypeError('not a dict')\n\n        * æ¯”è¾ƒè¿ç®—ç¬¦çš„é‡è½½\n            + `==`: `__eq__`\n            + `!=`: `__ne__`\n            + `>`: `__gt__`\n            + `>=`: `__ge__`\n            + `<`: `__lt__`\n            + `<=`: `__le__`\n\n        * ç»ƒä¹ : å®Œæˆä¸€ä¸ªç±», å®ç°æ•°å­¦ä¸Šæ— ç©·å¤§çš„æ¦‚å¿µ\n\n                class Inf:\n                    def __lt__(self, other):\n                        return False\n                    def __le__(self, other):\n                        return False\n                    def __ge__(self, other):\n                        return True\n                    def __gt__(self, other):\n                        return True\n                    def __eq__(self, other):\n                        return False\n                    def __ne__(self, other):\n                        return True\n\n    4. å®¹å™¨æ–¹æ³•\n        * `__len__, __iter__, __contains__`\n        * `__getitem__` å¯¹ `string, list, tuple, dict` æœ‰æ•ˆ\n        * `__setitem__` å¯¹ `list, dict` æœ‰æ•ˆ\n        * `__missing__` å¯¹ `dict` æœ‰æ•ˆ\n\n                class Dict(dict):\n                    def __missing__(self, key):\n                        self[key] = None  # å½“æ£€æŸ¥åˆ° Key ç¼ºå¤±æ—¶, å¯ä»¥åšä»»ä½•é»˜è®¤è¡Œä¸º\n\n    5. å¯æ‰§è¡Œå¯¹è±¡: `__call__`\n    6. with:\n        * `__enter__` è¿›å…¥ `with` ä»£ç å—å‰çš„å‡†å¤‡æ“ä½œ\n        * `__exit__` é€€å‡ºæ—¶çš„å–„åæ“ä½œ\n    7. `__setattr__, __getattribute__, __getattr__, __dict__`\n        * å¸¸ç”¨æ¥åšå±æ€§ç›‘å¬\n\n                class A:\n                    '''TestClass'''\n                    z = [7,8,9]\n                    def __init__(self):\n                        self.x = 123\n                        self.y = 'abc'\n    \n                    def __setattr__(self, name, value):\n                        print('set %s to %s' % (name, value))\n                        object.__setattr__(self, name, value)\n    \n                    def __getattribute__(self, name):\n                        print('get %s' % name)\n                        return object.__getattribute__(self, name)\n    \n                    def __getattr__(self, name):\n                        print('not has %s' % name)\n                        return -1\n    \n                    def foo(self, x, y):\n                        return x ** y\n    \n                # å¯¹æ¯”\n                a = A()\n                print(A.__dict__)\n                print(a.__dict__)\n\n    8. æè¿°å™¨: `__set__, __get__`\n        * <http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html>\n        * å¸¸è§åº”ç”¨åœºæ™¯: ORM çš„å„ç§ Field ç±»\n    9. æ§½: `__slots__`\n        * å›ºå®šç±»æ‰€å…·æœ‰çš„å±æ€§\n        * å®ä¾‹ä¸ä¼šåˆ†é… `__dict__`\n        * å®ä¾‹æ— æ³•åŠ¨æ€æ·»åŠ å±æ€§\n        * ä¼˜åŒ–å†…å­˜åˆ†é…\n\n                class A:\n                    __slots__ = ('x', 'y')\n\n6. Python æ€§èƒ½ä¹‹å›°\n    1. è®¡ç®—å¯†é›†å‹\n        * CPU é•¿æ—¶é—´æ»¡è´Ÿè·è¿è¡Œ, å¦‚å›¾åƒå¤„ç†ã€å¤§æ•°æ®è¿ç®—ã€åœ†å‘¨ç‡è®¡ç®—ç­‰\n        * è®¡ç®—å¯†é›†å‹: ç”¨ C è¯­è¨€è¡¥å……\n        * Profile, timeit\n    2. I/O å¯†é›†å‹: ç½‘ç»œ IO, æ–‡ä»¶ IO, è®¾å¤‡ IO ç­‰\n        * å¤šçº¿ç¨‹ / å¤šè¿›ç¨‹ / åç¨‹\n        * é˜»å¡ -> éé˜»å¡\n        * åŒæ­¥ -> å¼‚æ­¥\n    3. GIL å…¨å±€è§£é‡Šå™¨é”\n        * å®ƒç¡®ä¿ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªPythonçº¿ç¨‹æ‰§è¡Œã€‚\n          ![GIL](/image/GIL.png \"GIL\")\n    4. ä»€ä¹ˆæ˜¯è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Ÿ\n        * è¿›ç¨‹: èµ„æºæ¶ˆè€—å¤§, ç³»ç»Ÿæ•´ä½“å¼€é”€å¤§, æ•°æ®é€šä¿¡ä¸æ–¹ä¾¿\n        * çº¿ç¨‹: èµ„æºæ¶ˆè€—å°, å¯å…±äº«æ•°æ®ã€‚ä¸Šä¸‹æ–‡å¼€é”€å¤§ã€‚æŒ‰æ—¶é—´ç‰‡å¼ºåˆ¶åˆ‡æ¢, ä¸å¤Ÿçµæ´»\n        * åç¨‹: å†…å­˜å¼€é”€æ›´å°, ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€æ›´å°ã€‚å¯æ ¹æ®äº‹ä»¶åˆ‡æ¢, æ›´åŠ æœ‰æ•ˆçš„åˆ©ç”¨ CPU\n    5. ä»€ä¹ˆæ˜¯åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ï¼Ÿ\n        * åŒæ­¥, å¼‚æ­¥: å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡å™¨æ¥å£æ—¶\n        * é˜»å¡, éé˜»å¡: æœåŠ¡ç«¯å‘ç”Ÿç­‰å¾…\n    6. äº‹ä»¶é©±åŠ¨ + å¤šè·¯å¤ç”¨\n        * è½®è¯¢: select, poll\n        * äº‹ä»¶é©±åŠ¨: epoll æœ‰æ•ˆè½®è¯¢\n    7. Greenlets / gevent | tornado / asyncio\n    8. çº¿ç¨‹å®‰å…¨, é”\n        * è·å¾—é”ä¹‹å, ä¸€å®šè¦é‡Šæ”¾, é¿å…æ­»é”\n        * è·å¾—é”ä¹‹å, æ‰§è¡Œçš„è¯­å¥, åªè·Ÿè¢«é”èµ„æºæœ‰å…³\n        * åŒºåˆ†æ™®é€šé” Lock, å¯é‡å…¥é” RLock\n        * çº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤äº’å°½é‡ä½¿ç”¨ Queue\n    9. gevent\n        * monkey.patch\n        * gevent.sleep éé˜»å¡å¼ç­‰å¾…\n        * Queue åç¨‹é—´æ•°æ®äº¤äº’, é¿å…ç«äº‰\n\n7. è£…é¥°å™¨\n    - æœ€ç®€è£…é¥°å™¨\n\n            def deco(func):\n                def wrap(*args, **kwargs):\n                    return func(*args, **kwargs)\n                return wrap\n    \n            @deco\n            def foo(a, b):\n                return a ** b\n\n    - åŸç†\n        * å¯¹æ¯”è¢«è£…é¥°å‰åçš„ `foo.__name__` å’Œ `foo.__doc__`\n\n                from functools import wraps\n                def deco(func):\n                    '''i am deco'''\n                    @wraps(func)\n                    def wrap(*args, **kwargs):\n                        '''i am wrap'''\n                        return func(*args, **kwargs)\n                    return wrap\n\n        * ç®€å•è¿‡ç¨‹\n\n                fn = deco(func)\n                fn(*args, **kwargs)\n\n        * å¤šä¸ªè£…é¥°å™¨è°ƒç”¨è¿‡ç¨‹\n\n                @deco1\n                @deco2\n                @deco3\n                def foo(x, y):\n                    return x ** y\n\n    - å¸¦å‚æ•°çš„è£…é¥°å™¨\n\n            def deco(n):\n                def wrap1(func):\n                    def wrap2(*args, **kwargs):\n                        return func(*args, **kwargs)\n                    return wrap2\n                return wrap1\n\n    - è£…é¥°å™¨ç±»å’Œ `__call__`\n\n    - ä½¿ç”¨åœºæ™¯\n        * å‚æ•°ã€ç»“æœæ£€æŸ¥\n        * ç¼“å­˜ã€è®¡æ•°\n        * æ—¥å¿—ã€ç»Ÿè®¡\n        * æƒé™ç®¡ç†\n        * é‡è¯•\n        * å…¶ä»–\n\n    - ç»ƒä¹ 1ï¼šå†™ä¸€ä¸ª timer è£…é¥°å™¨, è®¡ç®—å‡ºè¢«è£…é¥°å‡½æ•°è°ƒç”¨ä¸€æ¬¡èŠ±å¤šé•¿æ—¶é—´, å¹¶æŠŠæ—¶é—´æ‰“å°å‡ºæ¥\n    - ç»ƒä¹ 2: å†™ä¸€ä¸ªæƒé™ç®¡ç†è£…é¥°å™¨, æƒé™åˆ†ä¸º `admin / member / guest` ä¸‰çº§\n    - ç»ƒä¹ 3: å†™ä¸€ä¸ª Retry è£…é¥°å™¨\n\n            import time\n    \n            class retry(object):\n                def __init__(self, max_retries=3, wait=0, exceptions=(Exception,)):\n                    self.max_retries = max_retries\n                    self.exceptions = exceptions\n                    self.wait = wait\n    \n                def __call__(self, f):\n                    def wrapper(*args, **kwargs):\n                        for i in range(self.max_retries + 1):\n                            try:\n                                result = f(*args, **kwargs)\n                            except self.exceptions:\n                                time.sleep(self.wait)\n                                continue\n                            else:\n                                return result\n                    return wrapper\n\n8. é—­åŒ…\n    - è¯´å‡ºä¸‹é¢å‡½æ•°è¿”å›å€¼\n\n            def foo():\n                l = []\n                def bar(i):\n                    l.append(i)\n                    return l\n                return bar\n    \n            f1 = foo()\n            f2 = foo()\n    \n            # è¯´å‡ºä¸‹åˆ—è¯­å¥æ‰§è¡Œç»“æœ\n            f1(1)\n            f1(2)\n            f2(3)\n\n    - ä½œç”¨åŸŸ\n        * global\n        * nonlocal\n        * globals()\n        * locals()\n        * vars()\n\n                local namespace\n                    |\n                    V\n                global namespace\n                    |\n                    V\n                builtin namespace\n\n    - æ›´æ·±å…¥ä¸€ç‚¹: `__closure__`\n\n9. Garbage Collection (GC)\n    - å¼•ç”¨è®¡æ•°\n        * ä¼˜ç‚¹: ç®€å•ã€å®æ—¶æ€§é«˜\n        * ç¼ºç‚¹: æ¶ˆè€—èµ„æºã€å¾ªç¯å¼•ç”¨\n\n                l1, l2 = [], []\n                l1.append(l2)\n                l2.append(l1)\n\n        ![GC](/image/GC.png)\n\n    - æ ‡è®°-æ¸…é™¤, åˆ†ä»£æ”¶é›†\n\n10. ç»§æ‰¿ã€å¤šç»§æ‰¿ã€å¤šæ€ã€Mixinã€super\n    - ç»§æ‰¿\n    - å¤šæ€\n    - å¤šç»§æ‰¿ å’Œ Mixin\n    - super\n\n            class A:\n                def __init__(self):\n                    print('enter A')\n                    self.x = 111\n                    print('exit A')\n\n\n            class B(A):\n                def __init__(self):\n                    print('enter B')\n                    A.__init__(self)\n                    # super().__init__()\n                    print('exit B')\n\n\n            class C(A):\n                def __init__(self):\n                    print('enter C')\n                    A.__init__(self)\n                    # super().__init__()\n                    print('exit C')\n\n\n            class D(B, C):\n                def __init__(self):\n                    print('enter D')\n                    B.__init__(self)\n                    C.__init__(self)\n                    # super().__init__()\n                    print('exit D')\n    \n            d = D()\n\n11. ä¸€äº›æŠ€å·§å’Œè¯¯åŒº\n    1. æ ¼å¼åŒ–æ‰“å°\n        * json.dumps(obj, indent=4)\n        * json å‹ç¼©: `json.dumps(obj, separators=[',',':'])`\n        * pprint\n    2. ç¡®ä¿èƒ½å–åˆ°æœ‰æ•ˆå€¼\n        * `d.get(k, default)`\n        * `d.setdefault`\n        * `defaultdict`\n        * `a or b`\n        * `x = a if foo() else b`\n    3. try...except... çš„æ»¥ç”¨\n        * ä¸è¦æŠŠæ‰€æœ‰ä¸œè¥¿å…¨éƒ½åŒ…ä½, ç¨‹åºé”™è¯¯éœ€è¦æŠ¥å‡ºæ¥\n        * ä½¿ç”¨ `try...except` è¦æŒ‡æ˜å…·ä½“é”™è¯¯, `try` ç»“æ„ä¸æ˜¯ç”¨æ¥éšè—é”™è¯¯çš„, è€Œæ˜¯ç”¨æ¥æœ‰æ–¹å‘çš„å¤„ç†é”™è¯¯çš„\n    4. åˆ©ç”¨ dict åšæ¨¡å¼åŒ¹é…\n\n            def do1():\n                print('i am do1')\n    \n            def do2():\n                print('i am do2')\n    \n            def do3():\n                print('i am do3')\n    \n            def do4():\n                print('i am do4')\n    \n            mapping = {1: do1, 2: do2, 3: do3, 4: do4}\n            mod = random.randint(1, 10)\n            func = mapping.get(mod, do4)\n            func()\n\n    5. `inf, -inf, nan`\n    6. pyenv, venv, å‘½åç©ºé—´\n        * [pyenv](https://github.com/pyenv/pyenv-installer): ç®¡ç† Python ç‰ˆæœ¬\n        * venv: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ, åšç¯å¢ƒéš”ç¦», venv ç›®å½•ç›´æ¥æ”¾åˆ°é¡¹ç›®çš„ç›®å½•é‡Œ\n    7. property: æŠŠä¸€ä¸ªæ–¹æ³•å±æ€§åŒ–\n\n            class C(object):\n                @property\n                def x(self):\n                    \"I am the 'x' property.\"\n                    return self._x\n                @x.setter\n                def x(self, value):\n                    self._x = value\n                @x.deleter\n                def x(self):\n                    del self._x\n\n    8. else å­å¥: `if, for, while, try`\n    9. collections æ¨¡å—\n        * defaultdict\n        * namedtuple\n        * Counter\n","source":"_posts/Pythonè¿›é˜¶.md","raw":"---\ntitle: pythonè¿›é˜¶\ndate: 2017-05-03 18:16:36\ntags: \n\t- django\n\t- python\ncategories: Django\n---\n\n\n\nPython è¿›é˜¶\n===========\n\n\n\n1. PEP8 ç¼–ç è§„èŒƒ, ä»¥åŠå¼€å‘ä¸­çš„ä¸€äº›æƒ¯ä¾‹å’Œå»ºè®®\n    - ä»£ç ç¼–æ’:\n        * ç¼©è¿› 4 ä¸ªç©ºæ ¼, ç¦æ­¢ç©ºæ ¼ä¸ Tab æ··ç”¨\n        * è¡Œé•¿ 80: é˜²æ­¢å•è¡Œé€»è¾‘è¿‡äºå¤æ‚\n    - é€‚å½“æ·»åŠ ç©ºè¡Œ\n        * å‡½æ•°é—´: é¡¶çº§å‡½æ•°é—´ç©º 2 è¡Œ, ç±»çš„æ–¹æ³•ä¹‹é—´ç©º 1 è¡Œ\n        * å‡½æ•°å†…: åŒä¸€å‡½æ•°å†…çš„é€»è¾‘å—ä¹‹é—´, ç©º 1 è¡Œ\n        * æ–‡ä»¶ç»“å°¾: ç•™ä¸€ä¸ªç©ºè¡Œ\n    - import\n        * é¡ºåº\n            1. æ ‡å‡†åº“\n            2. ç¬¬ä¸‰æ–¹åº“\n            3. è‡ªå®šä¹‰åº“\n        * å•è¡Œä¸è¦ import å¤šä¸ªåº“\n        * æ¨¡å—å†…ç”¨ä¸åˆ°çš„ä¸è¦å» import\n    - ç©ºæ ¼\n    - æ³¨é‡Š\n        * è¡Œæ³¨é‡Š\n        * å—æ³¨é‡Š\n        * å¼•å…¥å¤–æ¥ç®—æ³•æˆ–è€…é…ç½®æ—¶é¡»åœ¨æ³¨é‡Šä¸­æ·»åŠ æºè¿æ¥, æ ‡æ˜å‡ºå¤„\n        * å‡½æ•°å’Œç±»å°½å¯èƒ½æ·»åŠ  `docstring`\n    - å‘½å\n        * åŒ…åã€æ¨¡å—åã€å‡½æ•°åã€æ–¹æ³•åå…¨éƒ¨ä½¿ç”¨å°å†™, å•è¯é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥\n        * ç±»åã€å¼‚å¸¸åä½¿ç”¨ CapWords çš„æ–¹å¼, å¼‚å¸¸åç»“å°¾åŠ  `Error` æˆ– `Wraning` åç¼€\n        * å…¨å±€å˜é‡å°½é‡ä½¿ç”¨å¤§å†™, ä¸€ç»„åŒç±»å‹çš„å…¨å±€å˜é‡è¦åŠ ä¸Šç»Ÿä¸€å‰ç¼€, å•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥\n    - å­—ç¬¦ä¸²æ‹¼æ¥å°½é‡ä½¿ç”¨ `join` æ–¹å¼: é€Ÿåº¦å¿«, å†…å­˜æ¶ˆè€—å°\n    - è¯­æ„æ˜ç¡®ã€ç›´ç™½\n        * `not xx in yy` vs `xx not in yy`\n        * `not a is b` vs `a is not b`\n    - ç¨‹åºæ„å»º\n        * ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…, å¹¶æŠŠè¿™ä»¶äº‹åšå¥½\n        * å¤§çš„åŠŸèƒ½ç”¨å°å‡½æ•°ä¹‹é—´çµæ´»ç»„åˆæ¥å®Œæˆ\n        * é¿å…ç¼–å†™åºå¤§çš„ç¨‹åº, â€œå¤§â€æ„å‘³ç€ä½“ç§¯åºå¤§, é€»è¾‘å¤æ‚ç”šè‡³æ··ä¹±\n    - å‡½æ•°åå¿…é¡»æœ‰åŠ¨è¯, æœ€å¥½æ˜¯ do_something çš„å¥å¼, æˆ–è€… somebody_do_something å¥å¼\n    - è‡ªå®šä¹‰çš„å˜é‡åã€å‡½æ•°åä¸è¦ä¸æ ‡å‡†åº“ä¸­çš„åå­—å†²çª\n    - pip install pep8\n    - ç»ƒä¹ : è§„èŒƒåŒ–è¿™æ®µä»£ç \n\n            from django.conf import settings\n            import sys, os\n            mod=0xffffffff\n            def foo ( a , b = 123 ) :\n                c = { 'x' : 111 , 'y' : 222 }  # å®šä¹‰ä¸€ä¸ªå­—å…¸\n                d = [ 1, 3 , 5 ]\n                return a , b , c\n            def bar(x):\n                if x%2 ==0: return true\n\n2. `*` å’Œ `**` çš„ç”¨æ³•\n    - å‡½æ•°å®šä¹‰\n\n            def foo(*args, **kwargs):\n                pass\n\n    - å‚æ•°ä¼ é€’\n\n            def foo(x, y, z, a, b):\n                print(x)\n                print(y)\n                print(z)\n                print(a)\n                print(b)\n            lst = [1, 2, 3]\n            dic = {'a': 22, 'b': 77}\n            foo(*lst, **dic)\n\n    - å¼ºåˆ¶å‘½åå‚æ•°\n\n            def foo(a, *, b, c=123):\n                pass\n\n    - è§£åŒ…è¯­æ³•: `a, b, *ignored, c = [1, 2, 3, 4, 5, 6, 7]`\n\n2. Python çš„èµ‹å€¼å’Œå¼•ç”¨\n    - `==, is`: `==` åˆ¤æ–­çš„æ˜¯å€¼, `is` åˆ¤æ–­çš„æ˜¯å†…å­˜åœ°å€ (å³å¯¹è±¡çš„id)\n    - å°æ•´æ•°å¯¹è±¡: [-5, 256]\n    - `copy, deepcopy` çš„åŒºåˆ«\n        * `copy`: åªæ‹·è´è¡¨å±‚å…ƒç´ \n        * `deepcopy`: åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºæ‰€æœ‰å­å…ƒç´ \n        * ![copy and deepcopy](/image/Copy.png)\n\n    - ç»ƒä¹ 1: è¯´å‡ºæ‰§è¡Œç»“æœ\n\n            def extendList(val, lst=[]):\n                lst.append(val)\n                return lst\n    \n            list1 = extendList(10)\n            list2 = extendList(123, [])\n            list3 = extendList('a')\n\n    - ç»ƒä¹ 2: è¯´å‡ºä¸‹é¢æ‰§è¡Œç»“æœ\n\n            from copy import copy, deepcopy\n            from pickle import dumps, loads\n    \n            a = [1, 2, 3]\n            b = [a] * 3\n            c = copy(b)\n            d = deepcopy(b)\n            e = loads(dumps(b, 4))\n    \n            b[1].append(999)\n            c[1].append(999)\n            d[1].append(999)\n            e[1].append(999)\n            d[1].append(777)\n            e[1].append(777)\n\n    - è‡ªå®šä¹‰ deepcopy: `my_deepcopy = lambda item: loads(dumps(item, 4))`\n\n3. è¿­ä»£å™¨, ç”Ÿæˆå™¨, itertools, yield, åˆ—è¡¨ / å­—å…¸ / é›†åˆçš„æ¨å¯¼\n\n        class Range:\n            def __init__(self, start, end):\n                self.start = start - 1\n                self.end = end\n    \n            def __iter__(self):\n                return self\n    \n            def __next__(self):\n                self.start += 1\n                if self.start < self.end:\n                    return self.start\n                else:\n                    raise StopIteration()\n\n    - iterator: ä»»ä½•å®ç°äº† `__iter__` å’Œ `__next__` (python2ä¸­æ˜¯ `next()`) æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯è¿­ä»£å™¨.\n        * `__iter__`è¿”å›è¿­ä»£å™¨è‡ªèº«\n        * `__next__` è¿”å›å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼\n        * å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ›´å¤šå…ƒç´ , åˆ™æŠ›å‡ºStopIterationå¼‚å¸¸\n\n    - generator: ç”Ÿæˆå™¨å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨, ä¸éœ€è¦è‡ªå®šä¹‰ `__iter__` å’Œ `__next__`\n        * ç”Ÿæˆå™¨å‡½æ•° (yield)\n        * ç”Ÿæˆå™¨è¡¨è¾¾å¼\n\n    - ç»ƒä¹ 1: è‡ªå®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n            class Fib:\n                def __init__(self, count):\n                    self.prev = 0\n                    self.curr = 1\n                    self.count = count\n\n                def __iter__(self):\n                    return self\n    \n                def __next__(self):\n                    if self.count > 0:\n                        # è®¡æ•°\n                        self.count -= 1\n                        # è®¡ç®—å½“å‰çš„å€¼\n                        current = self.curr\n                        # ä¸ºä¸‹æ¬¡åšå‡†å¤‡\n                        self.prev, self.curr = self.curr, (self.curr + self.prev)\n                        # è¿”å›å½“å‰å€¼\n                        return current\n                    else:\n                        raise StopIteration()\n\n    - ç»ƒä¹ 2: è‡ªå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n                def fib(max_value):\n                    prev = 0\n                    curr = 1\n                    while curr < max_value:\n                        yield curr\n                        prev, curr = curr, curr + prev\n\n    - ç»ƒä¹ 3: å®šä¹‰ä¸€ä¸ªéšæœºæ•°è¿­ä»£å™¨, éšæœºèŒƒå›´ä¸º [1, 50], æœ€å¤§è¿­ä»£æ¬¡æ•° 30\n\n            import random\n\n            class RandomIter:\n                def __init__(self, start, end, times):\n                    self.start = start\n                    self.end = end\n                    self.max_times = times\n                    self.count = 0\n\n                def __iter__(self):\n                    return self\n    \n                def __next__(self):\n                    self.count += 1\n                    if self.count <= self.max_times:\n                        return random.randint(self.start, self.end)\n                    else:\n                        raise StopIteration()\n\n    - è¿­ä»£å™¨ã€ç”Ÿæˆå™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ\n        * èŠ‚çœå†…å­˜\n        * æƒ°æ€§æ±‚å€¼\n    - itertools\n        * æ— é™è¿­ä»£\n            + `count(start=0, step=1)`\n            + `cycle(iterable)`\n            + `repeat(object [,times])`\n        * æœ‰é™è¿­ä»£\n            + `chain(*iterables)`\n        * æ’åˆ—ç»„åˆ\n            + `product(*iterables, repeat=1)` ç¬›å¡å°”ç§¯\n            + `permutations(iterable[, r-length])` å…¨æ’åˆ—\n            + `combinations(iterable, r-length)` ç»„åˆ\n\n\n4. `method`, `classmethod` å’Œ `staticmethod`\n    - `method`: é€šè¿‡å®ä¾‹è°ƒç”¨æ—¶, å¯ä»¥å¼•ç”¨ç±»å†…éƒ¨çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•\n    - `classmethod`: æ— éœ€å®ä¾‹åŒ–, å¯ä»¥è°ƒç”¨ç±»å±æ€§å’Œç±»æ–¹æ³•, æ— æ³•å–åˆ°æ™®é€šçš„æˆå‘˜å±æ€§å’Œæ–¹æ³•\n    - `staticmethod`: æ— è®ºç”¨ç±»è°ƒç”¨è¿˜æ˜¯ç”¨å®ä¾‹è°ƒç”¨, éƒ½æ— æ³•å–åˆ°ç±»å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•, å®Œå…¨ç‹¬ç«‹çš„ä¸€ä¸ªæ–¹æ³•\n\n    - ç»ƒä¹ : è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœ\n\n            class Test(object):\n                x = 123\n    \n                def __init__(self):\n                    self.y = 456\n    \n                def bar1(self):\n                    print('i am a method')\n    \n                @classmethod\n                def bar2(cls):\n                    print('i am a classmethod')\n    \n                @staticmethod\n                def bar3():\n                    print('i am a staticmethod')\n    \n                def foo1(self):\n                    print(self.x)\n                    print(self.y)\n                    self.bar1()\n                    self.bar2()\n                    self.bar3()\n    \n                @classmethod\n                def foo2(cls):\n                    print(cls.x)\n                    # print(cls.y)\n                    # cls.bar1()\n                    Test.bar2()\n                    Test.bar3()\n    \n                @staticmethod\n                def foo3(obj):\n                    print(obj.x)\n                    print(obj.y)\n                    obj.bar1()\n                    obj.bar2()\n                    obj.bar3()\n    \n            t = Test()\n            t.foo1()\n            t.foo2()\n            t.foo3()\n\n5. Python é­”æœ¯æ–¹æ³•\n    1. `__str__`, `__repr__`\n    2. `__init__` å’Œ `__new__`\n        * `__new__` è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹, `__init__` æ— è¿”å›å€¼\n        * `__new__` æ˜¯ä¸€ä¸ªç±»æ–¹æ³•\n            + å•ä¾‹æ¨¡å¼\n\n                    class A(object):\n                        '''å•ä¾‹æ¨¡å¼'''\n                        obj = None\n                        def __new__(cls, *args, **kwargs):\n                            if cls.obj is None:\n                                cls.obj = object.__new__(cls)\n                            return cls.obj\n\n    3. æ¯”è¾ƒè¿ç®—ã€æ•°å­¦è¿ç®—\n        * è¿ç®—ç¬¦é‡è½½\n            + `+`: `__add__(value)`\n            + `-`: `__sub__(value)`\n            + `*`: `__mul__(value)`\n            + `/`: `__truediv__(value)` (Python 3.x), `__div__(value)` (Python 2.x)\n            + `//`: `__floordiv__(value)`\n            + `%`: `__mod__(value)`\n            + `&`: `__and__(value)`\n            + `|`: `__or__(value)`\n\n        * ç»ƒä¹ : å®ç°å­—å…¸çš„ `__add__` æ–¹æ³•, ä½œç”¨ç›¸å½“äº d.update(other)\n\n                class Dict(dict):\n                    def __add__(self, other):\n                        if isinstance(other, dict):\n                            new_dict = {}\n                            new_dict.update(self)\n                            new_dict.update(other)\n                            return new_dict\n                        else:\n                            raise TypeError('not a dict')\n\n        * æ¯”è¾ƒè¿ç®—ç¬¦çš„é‡è½½\n            + `==`: `__eq__`\n            + `!=`: `__ne__`\n            + `>`: `__gt__`\n            + `>=`: `__ge__`\n            + `<`: `__lt__`\n            + `<=`: `__le__`\n\n        * ç»ƒä¹ : å®Œæˆä¸€ä¸ªç±», å®ç°æ•°å­¦ä¸Šæ— ç©·å¤§çš„æ¦‚å¿µ\n\n                class Inf:\n                    def __lt__(self, other):\n                        return False\n                    def __le__(self, other):\n                        return False\n                    def __ge__(self, other):\n                        return True\n                    def __gt__(self, other):\n                        return True\n                    def __eq__(self, other):\n                        return False\n                    def __ne__(self, other):\n                        return True\n\n    4. å®¹å™¨æ–¹æ³•\n        * `__len__, __iter__, __contains__`\n        * `__getitem__` å¯¹ `string, list, tuple, dict` æœ‰æ•ˆ\n        * `__setitem__` å¯¹ `list, dict` æœ‰æ•ˆ\n        * `__missing__` å¯¹ `dict` æœ‰æ•ˆ\n\n                class Dict(dict):\n                    def __missing__(self, key):\n                        self[key] = None  # å½“æ£€æŸ¥åˆ° Key ç¼ºå¤±æ—¶, å¯ä»¥åšä»»ä½•é»˜è®¤è¡Œä¸º\n\n    5. å¯æ‰§è¡Œå¯¹è±¡: `__call__`\n    6. with:\n        * `__enter__` è¿›å…¥ `with` ä»£ç å—å‰çš„å‡†å¤‡æ“ä½œ\n        * `__exit__` é€€å‡ºæ—¶çš„å–„åæ“ä½œ\n    7. `__setattr__, __getattribute__, __getattr__, __dict__`\n        * å¸¸ç”¨æ¥åšå±æ€§ç›‘å¬\n\n                class A:\n                    '''TestClass'''\n                    z = [7,8,9]\n                    def __init__(self):\n                        self.x = 123\n                        self.y = 'abc'\n    \n                    def __setattr__(self, name, value):\n                        print('set %s to %s' % (name, value))\n                        object.__setattr__(self, name, value)\n    \n                    def __getattribute__(self, name):\n                        print('get %s' % name)\n                        return object.__getattribute__(self, name)\n    \n                    def __getattr__(self, name):\n                        print('not has %s' % name)\n                        return -1\n    \n                    def foo(self, x, y):\n                        return x ** y\n    \n                # å¯¹æ¯”\n                a = A()\n                print(A.__dict__)\n                print(a.__dict__)\n\n    8. æè¿°å™¨: `__set__, __get__`\n        * <http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html>\n        * å¸¸è§åº”ç”¨åœºæ™¯: ORM çš„å„ç§ Field ç±»\n    9. æ§½: `__slots__`\n        * å›ºå®šç±»æ‰€å…·æœ‰çš„å±æ€§\n        * å®ä¾‹ä¸ä¼šåˆ†é… `__dict__`\n        * å®ä¾‹æ— æ³•åŠ¨æ€æ·»åŠ å±æ€§\n        * ä¼˜åŒ–å†…å­˜åˆ†é…\n\n                class A:\n                    __slots__ = ('x', 'y')\n\n6. Python æ€§èƒ½ä¹‹å›°\n    1. è®¡ç®—å¯†é›†å‹\n        * CPU é•¿æ—¶é—´æ»¡è´Ÿè·è¿è¡Œ, å¦‚å›¾åƒå¤„ç†ã€å¤§æ•°æ®è¿ç®—ã€åœ†å‘¨ç‡è®¡ç®—ç­‰\n        * è®¡ç®—å¯†é›†å‹: ç”¨ C è¯­è¨€è¡¥å……\n        * Profile, timeit\n    2. I/O å¯†é›†å‹: ç½‘ç»œ IO, æ–‡ä»¶ IO, è®¾å¤‡ IO ç­‰\n        * å¤šçº¿ç¨‹ / å¤šè¿›ç¨‹ / åç¨‹\n        * é˜»å¡ -> éé˜»å¡\n        * åŒæ­¥ -> å¼‚æ­¥\n    3. GIL å…¨å±€è§£é‡Šå™¨é”\n        * å®ƒç¡®ä¿ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªPythonçº¿ç¨‹æ‰§è¡Œã€‚\n          ![GIL](/image/GIL.png \"GIL\")\n    4. ä»€ä¹ˆæ˜¯è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Ÿ\n        * è¿›ç¨‹: èµ„æºæ¶ˆè€—å¤§, ç³»ç»Ÿæ•´ä½“å¼€é”€å¤§, æ•°æ®é€šä¿¡ä¸æ–¹ä¾¿\n        * çº¿ç¨‹: èµ„æºæ¶ˆè€—å°, å¯å…±äº«æ•°æ®ã€‚ä¸Šä¸‹æ–‡å¼€é”€å¤§ã€‚æŒ‰æ—¶é—´ç‰‡å¼ºåˆ¶åˆ‡æ¢, ä¸å¤Ÿçµæ´»\n        * åç¨‹: å†…å­˜å¼€é”€æ›´å°, ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€æ›´å°ã€‚å¯æ ¹æ®äº‹ä»¶åˆ‡æ¢, æ›´åŠ æœ‰æ•ˆçš„åˆ©ç”¨ CPU\n    5. ä»€ä¹ˆæ˜¯åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ï¼Ÿ\n        * åŒæ­¥, å¼‚æ­¥: å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡å™¨æ¥å£æ—¶\n        * é˜»å¡, éé˜»å¡: æœåŠ¡ç«¯å‘ç”Ÿç­‰å¾…\n    6. äº‹ä»¶é©±åŠ¨ + å¤šè·¯å¤ç”¨\n        * è½®è¯¢: select, poll\n        * äº‹ä»¶é©±åŠ¨: epoll æœ‰æ•ˆè½®è¯¢\n    7. Greenlets / gevent | tornado / asyncio\n    8. çº¿ç¨‹å®‰å…¨, é”\n        * è·å¾—é”ä¹‹å, ä¸€å®šè¦é‡Šæ”¾, é¿å…æ­»é”\n        * è·å¾—é”ä¹‹å, æ‰§è¡Œçš„è¯­å¥, åªè·Ÿè¢«é”èµ„æºæœ‰å…³\n        * åŒºåˆ†æ™®é€šé” Lock, å¯é‡å…¥é” RLock\n        * çº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤äº’å°½é‡ä½¿ç”¨ Queue\n    9. gevent\n        * monkey.patch\n        * gevent.sleep éé˜»å¡å¼ç­‰å¾…\n        * Queue åç¨‹é—´æ•°æ®äº¤äº’, é¿å…ç«äº‰\n\n7. è£…é¥°å™¨\n    - æœ€ç®€è£…é¥°å™¨\n\n            def deco(func):\n                def wrap(*args, **kwargs):\n                    return func(*args, **kwargs)\n                return wrap\n    \n            @deco\n            def foo(a, b):\n                return a ** b\n\n    - åŸç†\n        * å¯¹æ¯”è¢«è£…é¥°å‰åçš„ `foo.__name__` å’Œ `foo.__doc__`\n\n                from functools import wraps\n                def deco(func):\n                    '''i am deco'''\n                    @wraps(func)\n                    def wrap(*args, **kwargs):\n                        '''i am wrap'''\n                        return func(*args, **kwargs)\n                    return wrap\n\n        * ç®€å•è¿‡ç¨‹\n\n                fn = deco(func)\n                fn(*args, **kwargs)\n\n        * å¤šä¸ªè£…é¥°å™¨è°ƒç”¨è¿‡ç¨‹\n\n                @deco1\n                @deco2\n                @deco3\n                def foo(x, y):\n                    return x ** y\n\n    - å¸¦å‚æ•°çš„è£…é¥°å™¨\n\n            def deco(n):\n                def wrap1(func):\n                    def wrap2(*args, **kwargs):\n                        return func(*args, **kwargs)\n                    return wrap2\n                return wrap1\n\n    - è£…é¥°å™¨ç±»å’Œ `__call__`\n\n    - ä½¿ç”¨åœºæ™¯\n        * å‚æ•°ã€ç»“æœæ£€æŸ¥\n        * ç¼“å­˜ã€è®¡æ•°\n        * æ—¥å¿—ã€ç»Ÿè®¡\n        * æƒé™ç®¡ç†\n        * é‡è¯•\n        * å…¶ä»–\n\n    - ç»ƒä¹ 1ï¼šå†™ä¸€ä¸ª timer è£…é¥°å™¨, è®¡ç®—å‡ºè¢«è£…é¥°å‡½æ•°è°ƒç”¨ä¸€æ¬¡èŠ±å¤šé•¿æ—¶é—´, å¹¶æŠŠæ—¶é—´æ‰“å°å‡ºæ¥\n    - ç»ƒä¹ 2: å†™ä¸€ä¸ªæƒé™ç®¡ç†è£…é¥°å™¨, æƒé™åˆ†ä¸º `admin / member / guest` ä¸‰çº§\n    - ç»ƒä¹ 3: å†™ä¸€ä¸ª Retry è£…é¥°å™¨\n\n            import time\n    \n            class retry(object):\n                def __init__(self, max_retries=3, wait=0, exceptions=(Exception,)):\n                    self.max_retries = max_retries\n                    self.exceptions = exceptions\n                    self.wait = wait\n    \n                def __call__(self, f):\n                    def wrapper(*args, **kwargs):\n                        for i in range(self.max_retries + 1):\n                            try:\n                                result = f(*args, **kwargs)\n                            except self.exceptions:\n                                time.sleep(self.wait)\n                                continue\n                            else:\n                                return result\n                    return wrapper\n\n8. é—­åŒ…\n    - è¯´å‡ºä¸‹é¢å‡½æ•°è¿”å›å€¼\n\n            def foo():\n                l = []\n                def bar(i):\n                    l.append(i)\n                    return l\n                return bar\n    \n            f1 = foo()\n            f2 = foo()\n    \n            # è¯´å‡ºä¸‹åˆ—è¯­å¥æ‰§è¡Œç»“æœ\n            f1(1)\n            f1(2)\n            f2(3)\n\n    - ä½œç”¨åŸŸ\n        * global\n        * nonlocal\n        * globals()\n        * locals()\n        * vars()\n\n                local namespace\n                    |\n                    V\n                global namespace\n                    |\n                    V\n                builtin namespace\n\n    - æ›´æ·±å…¥ä¸€ç‚¹: `__closure__`\n\n9. Garbage Collection (GC)\n    - å¼•ç”¨è®¡æ•°\n        * ä¼˜ç‚¹: ç®€å•ã€å®æ—¶æ€§é«˜\n        * ç¼ºç‚¹: æ¶ˆè€—èµ„æºã€å¾ªç¯å¼•ç”¨\n\n                l1, l2 = [], []\n                l1.append(l2)\n                l2.append(l1)\n\n        ![GC](/image/GC.png)\n\n    - æ ‡è®°-æ¸…é™¤, åˆ†ä»£æ”¶é›†\n\n10. ç»§æ‰¿ã€å¤šç»§æ‰¿ã€å¤šæ€ã€Mixinã€super\n    - ç»§æ‰¿\n    - å¤šæ€\n    - å¤šç»§æ‰¿ å’Œ Mixin\n    - super\n\n            class A:\n                def __init__(self):\n                    print('enter A')\n                    self.x = 111\n                    print('exit A')\n\n\n            class B(A):\n                def __init__(self):\n                    print('enter B')\n                    A.__init__(self)\n                    # super().__init__()\n                    print('exit B')\n\n\n            class C(A):\n                def __init__(self):\n                    print('enter C')\n                    A.__init__(self)\n                    # super().__init__()\n                    print('exit C')\n\n\n            class D(B, C):\n                def __init__(self):\n                    print('enter D')\n                    B.__init__(self)\n                    C.__init__(self)\n                    # super().__init__()\n                    print('exit D')\n    \n            d = D()\n\n11. ä¸€äº›æŠ€å·§å’Œè¯¯åŒº\n    1. æ ¼å¼åŒ–æ‰“å°\n        * json.dumps(obj, indent=4)\n        * json å‹ç¼©: `json.dumps(obj, separators=[',',':'])`\n        * pprint\n    2. ç¡®ä¿èƒ½å–åˆ°æœ‰æ•ˆå€¼\n        * `d.get(k, default)`\n        * `d.setdefault`\n        * `defaultdict`\n        * `a or b`\n        * `x = a if foo() else b`\n    3. try...except... çš„æ»¥ç”¨\n        * ä¸è¦æŠŠæ‰€æœ‰ä¸œè¥¿å…¨éƒ½åŒ…ä½, ç¨‹åºé”™è¯¯éœ€è¦æŠ¥å‡ºæ¥\n        * ä½¿ç”¨ `try...except` è¦æŒ‡æ˜å…·ä½“é”™è¯¯, `try` ç»“æ„ä¸æ˜¯ç”¨æ¥éšè—é”™è¯¯çš„, è€Œæ˜¯ç”¨æ¥æœ‰æ–¹å‘çš„å¤„ç†é”™è¯¯çš„\n    4. åˆ©ç”¨ dict åšæ¨¡å¼åŒ¹é…\n\n            def do1():\n                print('i am do1')\n    \n            def do2():\n                print('i am do2')\n    \n            def do3():\n                print('i am do3')\n    \n            def do4():\n                print('i am do4')\n    \n            mapping = {1: do1, 2: do2, 3: do3, 4: do4}\n            mod = random.randint(1, 10)\n            func = mapping.get(mod, do4)\n            func()\n\n    5. `inf, -inf, nan`\n    6. pyenv, venv, å‘½åç©ºé—´\n        * [pyenv](https://github.com/pyenv/pyenv-installer): ç®¡ç† Python ç‰ˆæœ¬\n        * venv: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ, åšç¯å¢ƒéš”ç¦», venv ç›®å½•ç›´æ¥æ”¾åˆ°é¡¹ç›®çš„ç›®å½•é‡Œ\n    7. property: æŠŠä¸€ä¸ªæ–¹æ³•å±æ€§åŒ–\n\n            class C(object):\n                @property\n                def x(self):\n                    \"I am the 'x' property.\"\n                    return self._x\n                @x.setter\n                def x(self, value):\n                    self._x = value\n                @x.deleter\n                def x(self):\n                    del self._x\n\n    8. else å­å¥: `if, for, while, try`\n    9. collections æ¨¡å—\n        * defaultdict\n        * namedtuple\n        * Counter\n","slug":"Pythonè¿›é˜¶","published":1,"updated":"2020-05-10T11:59:32.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cka109ht9001s3kzja2c5hjmm","content":"<h1 id=\"Python-è¿›é˜¶\"><a href=\"#Python-è¿›é˜¶\" class=\"headerlink\" title=\"Python è¿›é˜¶\"></a>Python è¿›é˜¶</h1><ol>\n<li><p>PEP8 ç¼–ç è§„èŒƒ, ä»¥åŠå¼€å‘ä¸­çš„ä¸€äº›æƒ¯ä¾‹å’Œå»ºè®®</p>\n<ul>\n<li><p>ä»£ç ç¼–æ’:</p>\n<ul>\n<li>ç¼©è¿› 4 ä¸ªç©ºæ ¼, ç¦æ­¢ç©ºæ ¼ä¸ Tab æ··ç”¨</li>\n<li>è¡Œé•¿ 80: é˜²æ­¢å•è¡Œé€»è¾‘è¿‡äºå¤æ‚</li>\n</ul>\n</li>\n<li><p>é€‚å½“æ·»åŠ ç©ºè¡Œ</p>\n<ul>\n<li>å‡½æ•°é—´: é¡¶çº§å‡½æ•°é—´ç©º 2 è¡Œ, ç±»çš„æ–¹æ³•ä¹‹é—´ç©º 1 è¡Œ</li>\n<li>å‡½æ•°å†…: åŒä¸€å‡½æ•°å†…çš„é€»è¾‘å—ä¹‹é—´, ç©º 1 è¡Œ</li>\n<li>æ–‡ä»¶ç»“å°¾: ç•™ä¸€ä¸ªç©ºè¡Œ</li>\n</ul>\n</li>\n<li><p>import</p>\n<ul>\n<li>é¡ºåº<ol>\n<li>æ ‡å‡†åº“</li>\n<li>ç¬¬ä¸‰æ–¹åº“</li>\n<li>è‡ªå®šä¹‰åº“</li>\n</ol>\n</li>\n<li>å•è¡Œä¸è¦ import å¤šä¸ªåº“</li>\n<li>æ¨¡å—å†…ç”¨ä¸åˆ°çš„ä¸è¦å» import</li>\n</ul>\n</li>\n<li><p>ç©ºæ ¼</p>\n</li>\n<li><p>æ³¨é‡Š</p>\n<ul>\n<li>è¡Œæ³¨é‡Š</li>\n<li>å—æ³¨é‡Š</li>\n<li>å¼•å…¥å¤–æ¥ç®—æ³•æˆ–è€…é…ç½®æ—¶é¡»åœ¨æ³¨é‡Šä¸­æ·»åŠ æºè¿æ¥, æ ‡æ˜å‡ºå¤„</li>\n<li>å‡½æ•°å’Œç±»å°½å¯èƒ½æ·»åŠ  <code>docstring</code></li>\n</ul>\n</li>\n<li><p>å‘½å</p>\n<ul>\n<li>åŒ…åã€æ¨¡å—åã€å‡½æ•°åã€æ–¹æ³•åå…¨éƒ¨ä½¿ç”¨å°å†™, å•è¯é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥</li>\n<li>ç±»åã€å¼‚å¸¸åä½¿ç”¨ CapWords çš„æ–¹å¼, å¼‚å¸¸åç»“å°¾åŠ  <code>Error</code> æˆ– <code>Wraning</code> åç¼€</li>\n<li>å…¨å±€å˜é‡å°½é‡ä½¿ç”¨å¤§å†™, ä¸€ç»„åŒç±»å‹çš„å…¨å±€å˜é‡è¦åŠ ä¸Šç»Ÿä¸€å‰ç¼€, å•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥</li>\n</ul>\n</li>\n<li><p>å­—ç¬¦ä¸²æ‹¼æ¥å°½é‡ä½¿ç”¨ <code>join</code> æ–¹å¼: é€Ÿåº¦å¿«, å†…å­˜æ¶ˆè€—å°</p>\n</li>\n<li><p>è¯­æ„æ˜ç¡®ã€ç›´ç™½</p>\n<ul>\n<li><code>not xx in yy</code> vs <code>xx not in yy</code></li>\n<li><code>not a is b</code> vs <code>a is not b</code></li>\n</ul>\n</li>\n<li><p>ç¨‹åºæ„å»º</p>\n<ul>\n<li>ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…, å¹¶æŠŠè¿™ä»¶äº‹åšå¥½</li>\n<li>å¤§çš„åŠŸèƒ½ç”¨å°å‡½æ•°ä¹‹é—´çµæ´»ç»„åˆæ¥å®Œæˆ</li>\n<li>é¿å…ç¼–å†™åºå¤§çš„ç¨‹åº, â€œå¤§â€æ„å‘³ç€ä½“ç§¯åºå¤§, é€»è¾‘å¤æ‚ç”šè‡³æ··ä¹±</li>\n</ul>\n</li>\n<li><p>å‡½æ•°åå¿…é¡»æœ‰åŠ¨è¯, æœ€å¥½æ˜¯ do_something çš„å¥å¼, æˆ–è€… somebody_do_something å¥å¼</p>\n</li>\n<li><p>è‡ªå®šä¹‰çš„å˜é‡åã€å‡½æ•°åä¸è¦ä¸æ ‡å‡†åº“ä¸­çš„åå­—å†²çª</p>\n</li>\n<li><p>pip install pep8</p>\n</li>\n<li><p>ç»ƒä¹ : è§„èŒƒåŒ–è¿™æ®µä»£ç </p>\n<pre><code>from django.conf import settings\nimport sys, os\nmod=0xffffffff\ndef foo ( a , b = 123 ) :\n    c = { 'x' : 111 , 'y' : 222 }  # å®šä¹‰ä¸€ä¸ªå­—å…¸\n    d = [ 1, 3 , 5 ]\n    return a , b , c\ndef bar(x):\n    if x%2 ==0: return true</code></pre></li>\n</ul>\n</li>\n<li><p><code>*</code> å’Œ <code>**</code> çš„ç”¨æ³•</p>\n<ul>\n<li><p>å‡½æ•°å®šä¹‰</p>\n<pre><code>def foo(*args, **kwargs):\n    pass</code></pre></li>\n<li><p>å‚æ•°ä¼ é€’</p>\n<pre><code>def foo(x, y, z, a, b):\n    print(x)\n    print(y)\n    print(z)\n    print(a)\n    print(b)\nlst = [1, 2, 3]\ndic = {'a': 22, 'b': 77}\nfoo(*lst, **dic)</code></pre></li>\n<li><p>å¼ºåˆ¶å‘½åå‚æ•°</p>\n<pre><code>def foo(a, *, b, c=123):\n    pass</code></pre></li>\n<li><p>è§£åŒ…è¯­æ³•: <code>a, b, *ignored, c = [1, 2, 3, 4, 5, 6, 7]</code></p>\n</li>\n</ul>\n</li>\n<li><p>Python çš„èµ‹å€¼å’Œå¼•ç”¨</p>\n<ul>\n<li><p><code>==, is</code>: <code>==</code> åˆ¤æ–­çš„æ˜¯å€¼, <code>is</code> åˆ¤æ–­çš„æ˜¯å†…å­˜åœ°å€ (å³å¯¹è±¡çš„id)</p>\n</li>\n<li><p>å°æ•´æ•°å¯¹è±¡: [-5, 256]</p>\n</li>\n<li><p><code>copy, deepcopy</code> çš„åŒºåˆ«</p>\n<ul>\n<li><code>copy</code>: åªæ‹·è´è¡¨å±‚å…ƒç´ </li>\n<li><code>deepcopy</code>: åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºæ‰€æœ‰å­å…ƒç´ </li>\n<li><img src=\"/image/Copy.png\" alt=\"copy and deepcopy\"></li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ 1: è¯´å‡ºæ‰§è¡Œç»“æœ</p>\n<pre><code>def extendList(val, lst=[]):\n    lst.append(val)\n    return lst\n\nlist1 = extendList(10)\nlist2 = extendList(123, [])\nlist3 = extendList('a')</code></pre></li>\n<li><p>ç»ƒä¹ 2: è¯´å‡ºä¸‹é¢æ‰§è¡Œç»“æœ</p>\n<pre><code>from copy import copy, deepcopy\nfrom pickle import dumps, loads\n\na = [1, 2, 3]\nb = [a] * 3\nc = copy(b)\nd = deepcopy(b)\ne = loads(dumps(b, 4))\n\nb[1].append(999)\nc[1].append(999)\nd[1].append(999)\ne[1].append(999)\nd[1].append(777)\ne[1].append(777)</code></pre></li>\n<li><p>è‡ªå®šä¹‰ deepcopy: <code>my_deepcopy = lambda item: loads(dumps(item, 4))</code></p>\n</li>\n</ul>\n</li>\n<li><p>è¿­ä»£å™¨, ç”Ÿæˆå™¨, itertools, yield, åˆ—è¡¨ / å­—å…¸ / é›†åˆçš„æ¨å¯¼</p>\n<pre><code>class Range:\n    def __init__(self, start, end):\n        self.start = start - 1\n        self.end = end\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        self.start += 1\n        if self.start &lt; self.end:\n            return self.start\n        else:\n            raise StopIteration()</code></pre><ul>\n<li><p>iterator: ä»»ä½•å®ç°äº† <code>__iter__</code> å’Œ <code>__next__</code> (python2ä¸­æ˜¯ <code>next()</code>) æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯è¿­ä»£å™¨.</p>\n<ul>\n<li><code>__iter__</code>è¿”å›è¿­ä»£å™¨è‡ªèº«</li>\n<li><code>__next__</code> è¿”å›å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼</li>\n<li>å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ›´å¤šå…ƒç´ , åˆ™æŠ›å‡ºStopIterationå¼‚å¸¸</li>\n</ul>\n</li>\n<li><p>generator: ç”Ÿæˆå™¨å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨, ä¸éœ€è¦è‡ªå®šä¹‰ <code>__iter__</code> å’Œ <code>__next__</code></p>\n<ul>\n<li>ç”Ÿæˆå™¨å‡½æ•° (yield)</li>\n<li>ç”Ÿæˆå™¨è¡¨è¾¾å¼</li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ 1: è‡ªå®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>\n<pre><code>class Fib:\n    def __init__(self, count):\n        self.prev = 0\n        self.curr = 1\n        self.count = count\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        if self.count &gt; 0:\n            # è®¡æ•°\n            self.count -= 1\n            # è®¡ç®—å½“å‰çš„å€¼\n            current = self.curr\n            # ä¸ºä¸‹æ¬¡åšå‡†å¤‡\n            self.prev, self.curr = self.curr, (self.curr + self.prev)\n            # è¿”å›å½“å‰å€¼\n            return current\n        else:\n            raise StopIteration()</code></pre></li>\n<li><p>ç»ƒä¹ 2: è‡ªå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>\n<pre><code>def fib(max_value):\n    prev = 0\n    curr = 1\n    while curr &lt; max_value:\n        yield curr\n        prev, curr = curr, curr + prev</code></pre></li>\n<li><p>ç»ƒä¹ 3: å®šä¹‰ä¸€ä¸ªéšæœºæ•°è¿­ä»£å™¨, éšæœºèŒƒå›´ä¸º [1, 50], æœ€å¤§è¿­ä»£æ¬¡æ•° 30</p>\n<pre><code>import random\n\nclass RandomIter:\n    def __init__(self, start, end, times):\n        self.start = start\n        self.end = end\n        self.max_times = times\n        self.count = 0\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        self.count += 1\n        if self.count &lt;= self.max_times:\n            return random.randint(self.start, self.end)\n        else:\n            raise StopIteration()</code></pre></li>\n<li><p>è¿­ä»£å™¨ã€ç”Ÿæˆå™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>\n<ul>\n<li>èŠ‚çœå†…å­˜</li>\n<li>æƒ°æ€§æ±‚å€¼</li>\n</ul>\n</li>\n<li><p>itertools</p>\n<ul>\n<li>æ— é™è¿­ä»£<ul>\n<li><code>count(start=0, step=1)</code></li>\n<li><code>cycle(iterable)</code></li>\n<li><code>repeat(object [,times])</code></li>\n</ul>\n</li>\n<li>æœ‰é™è¿­ä»£<ul>\n<li><code>chain(*iterables)</code></li>\n</ul>\n</li>\n<li>æ’åˆ—ç»„åˆ<ul>\n<li><code>product(*iterables, repeat=1)</code> ç¬›å¡å°”ç§¯</li>\n<li><code>permutations(iterable[, r-length])</code> å…¨æ’åˆ—</li>\n<li><code>combinations(iterable, r-length)</code> ç»„åˆ</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<ol start=\"4\">\n<li><p><code>method</code>, <code>classmethod</code> å’Œ <code>staticmethod</code></p>\n<ul>\n<li><p><code>method</code>: é€šè¿‡å®ä¾‹è°ƒç”¨æ—¶, å¯ä»¥å¼•ç”¨ç±»å†…éƒ¨çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•</p>\n</li>\n<li><p><code>classmethod</code>: æ— éœ€å®ä¾‹åŒ–, å¯ä»¥è°ƒç”¨ç±»å±æ€§å’Œç±»æ–¹æ³•, æ— æ³•å–åˆ°æ™®é€šçš„æˆå‘˜å±æ€§å’Œæ–¹æ³•</p>\n</li>\n<li><p><code>staticmethod</code>: æ— è®ºç”¨ç±»è°ƒç”¨è¿˜æ˜¯ç”¨å®ä¾‹è°ƒç”¨, éƒ½æ— æ³•å–åˆ°ç±»å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•, å®Œå…¨ç‹¬ç«‹çš„ä¸€ä¸ªæ–¹æ³•</p>\n</li>\n<li><p>ç»ƒä¹ : è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœ</p>\n<pre><code>class Test(object):\n    x = 123\n\n    def __init__(self):\n        self.y = 456\n\n    def bar1(self):\n        print('i am a method')\n\n    @classmethod\n    def bar2(cls):\n        print('i am a classmethod')\n\n    @staticmethod\n    def bar3():\n        print('i am a staticmethod')\n\n    def foo1(self):\n        print(self.x)\n        print(self.y)\n        self.bar1()\n        self.bar2()\n        self.bar3()\n\n    @classmethod\n    def foo2(cls):\n        print(cls.x)\n        # print(cls.y)\n        # cls.bar1()\n        Test.bar2()\n        Test.bar3()\n\n    @staticmethod\n    def foo3(obj):\n        print(obj.x)\n        print(obj.y)\n        obj.bar1()\n        obj.bar2()\n        obj.bar3()\n\nt = Test()\nt.foo1()\nt.foo2()\nt.foo3()</code></pre></li>\n</ul>\n</li>\n<li><p>Python é­”æœ¯æ–¹æ³•</p>\n<ol>\n<li><p><code>__str__</code>, <code>__repr__</code></p>\n</li>\n<li><p><code>__init__</code> å’Œ <code>__new__</code></p>\n<ul>\n<li><p><code>__new__</code> è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹, <code>__init__</code> æ— è¿”å›å€¼</p>\n</li>\n<li><p><code>__new__</code> æ˜¯ä¸€ä¸ªç±»æ–¹æ³•</p>\n<ul>\n<li><p>å•ä¾‹æ¨¡å¼</p>\n<pre><code>class A(object):\n    '''å•ä¾‹æ¨¡å¼'''\n    obj = None\n    def __new__(cls, *args, **kwargs):\n        if cls.obj is None:\n            cls.obj = object.__new__(cls)\n        return cls.obj</code></pre></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æ¯”è¾ƒè¿ç®—ã€æ•°å­¦è¿ç®—</p>\n<ul>\n<li><p>è¿ç®—ç¬¦é‡è½½</p>\n<ul>\n<li><code>+</code>: <code>__add__(value)</code></li>\n<li><code>-</code>: <code>__sub__(value)</code></li>\n<li><code>*</code>: <code>__mul__(value)</code></li>\n<li><code>/</code>: <code>__truediv__(value)</code> (Python 3.x), <code>__div__(value)</code> (Python 2.x)</li>\n<li><code>//</code>: <code>__floordiv__(value)</code></li>\n<li><code>%</code>: <code>__mod__(value)</code></li>\n<li><code>&amp;</code>: <code>__and__(value)</code></li>\n<li><code>|</code>: <code>__or__(value)</code></li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ : å®ç°å­—å…¸çš„ <code>__add__</code> æ–¹æ³•, ä½œç”¨ç›¸å½“äº d.update(other)</p>\n<pre><code>class Dict(dict):\n    def __add__(self, other):\n        if isinstance(other, dict):\n            new_dict = {}\n            new_dict.update(self)\n            new_dict.update(other)\n            return new_dict\n        else:\n            raise TypeError('not a dict')</code></pre></li>\n<li><p>æ¯”è¾ƒè¿ç®—ç¬¦çš„é‡è½½</p>\n<ul>\n<li><code>==</code>: <code>__eq__</code></li>\n<li><code>!=</code>: <code>__ne__</code></li>\n<li><code>&gt;</code>: <code>__gt__</code></li>\n<li><code>&gt;=</code>: <code>__ge__</code></li>\n<li><code>&lt;</code>: <code>__lt__</code></li>\n<li><code>&lt;=</code>: <code>__le__</code></li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ : å®Œæˆä¸€ä¸ªç±», å®ç°æ•°å­¦ä¸Šæ— ç©·å¤§çš„æ¦‚å¿µ</p>\n<pre><code>class Inf:\n    def __lt__(self, other):\n        return False\n    def __le__(self, other):\n        return False\n    def __ge__(self, other):\n        return True\n    def __gt__(self, other):\n        return True\n    def __eq__(self, other):\n        return False\n    def __ne__(self, other):\n        return True</code></pre></li>\n</ul>\n</li>\n<li><p>å®¹å™¨æ–¹æ³•</p>\n<ul>\n<li><p><code>__len__, __iter__, __contains__</code></p>\n</li>\n<li><p><code>__getitem__</code> å¯¹ <code>string, list, tuple, dict</code> æœ‰æ•ˆ</p>\n</li>\n<li><p><code>__setitem__</code> å¯¹ <code>list, dict</code> æœ‰æ•ˆ</p>\n</li>\n<li><p><code>__missing__</code> å¯¹ <code>dict</code> æœ‰æ•ˆ</p>\n<pre><code>class Dict(dict):\n    def __missing__(self, key):\n        self[key] = None  # å½“æ£€æŸ¥åˆ° Key ç¼ºå¤±æ—¶, å¯ä»¥åšä»»ä½•é»˜è®¤è¡Œä¸º</code></pre></li>\n</ul>\n</li>\n<li><p>å¯æ‰§è¡Œå¯¹è±¡: <code>__call__</code></p>\n</li>\n<li><p>with:</p>\n<ul>\n<li><code>__enter__</code> è¿›å…¥ <code>with</code> ä»£ç å—å‰çš„å‡†å¤‡æ“ä½œ</li>\n<li><code>__exit__</code> é€€å‡ºæ—¶çš„å–„åæ“ä½œ</li>\n</ul>\n</li>\n<li><p><code>__setattr__, __getattribute__, __getattr__, __dict__</code></p>\n<ul>\n<li><p>å¸¸ç”¨æ¥åšå±æ€§ç›‘å¬</p>\n<pre><code>class A:\n    '''TestClass'''\n    z = [7,8,9]\n    def __init__(self):\n        self.x = 123\n        self.y = 'abc'\n\n    def __setattr__(self, name, value):\n        print('set %s to %s' % (name, value))\n        object.__setattr__(self, name, value)\n\n    def __getattribute__(self, name):\n        print('get %s' % name)\n        return object.__getattribute__(self, name)\n\n    def __getattr__(self, name):\n        print('not has %s' % name)\n        return -1\n\n    def foo(self, x, y):\n        return x ** y\n\n# å¯¹æ¯”\na = A()\nprint(A.__dict__)\nprint(a.__dict__)</code></pre></li>\n</ul>\n</li>\n<li><p>æè¿°å™¨: <code>__set__, __get__</code></p>\n<ul>\n<li><a href=\"http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html\" target=\"_blank\" rel=\"noopener\">http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html</a></li>\n<li>å¸¸è§åº”ç”¨åœºæ™¯: ORM çš„å„ç§ Field ç±»</li>\n</ul>\n</li>\n<li><p>æ§½: <code>__slots__</code></p>\n<ul>\n<li><p>å›ºå®šç±»æ‰€å…·æœ‰çš„å±æ€§</p>\n</li>\n<li><p>å®ä¾‹ä¸ä¼šåˆ†é… <code>__dict__</code></p>\n</li>\n<li><p>å®ä¾‹æ— æ³•åŠ¨æ€æ·»åŠ å±æ€§</p>\n</li>\n<li><p>ä¼˜åŒ–å†…å­˜åˆ†é…</p>\n<pre><code>class A:\n    __slots__ = ('x', 'y')</code></pre></li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>Python æ€§èƒ½ä¹‹å›°</p>\n<ol>\n<li>è®¡ç®—å¯†é›†å‹<ul>\n<li>CPU é•¿æ—¶é—´æ»¡è´Ÿè·è¿è¡Œ, å¦‚å›¾åƒå¤„ç†ã€å¤§æ•°æ®è¿ç®—ã€åœ†å‘¨ç‡è®¡ç®—ç­‰</li>\n<li>è®¡ç®—å¯†é›†å‹: ç”¨ C è¯­è¨€è¡¥å……</li>\n<li>Profile, timeit</li>\n</ul>\n</li>\n<li>I/O å¯†é›†å‹: ç½‘ç»œ IO, æ–‡ä»¶ IO, è®¾å¤‡ IO ç­‰<ul>\n<li>å¤šçº¿ç¨‹ / å¤šè¿›ç¨‹ / åç¨‹</li>\n<li>é˜»å¡ -&gt; éé˜»å¡</li>\n<li>åŒæ­¥ -&gt; å¼‚æ­¥</li>\n</ul>\n</li>\n<li>GIL å…¨å±€è§£é‡Šå™¨é”<ul>\n<li>å®ƒç¡®ä¿ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªPythonçº¿ç¨‹æ‰§è¡Œã€‚<br><img src=\"/image/GIL.png\" alt=\"GIL\" title=\"GIL\"></li>\n</ul>\n</li>\n<li>ä»€ä¹ˆæ˜¯è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Ÿ<ul>\n<li>è¿›ç¨‹: èµ„æºæ¶ˆè€—å¤§, ç³»ç»Ÿæ•´ä½“å¼€é”€å¤§, æ•°æ®é€šä¿¡ä¸æ–¹ä¾¿</li>\n<li>çº¿ç¨‹: èµ„æºæ¶ˆè€—å°, å¯å…±äº«æ•°æ®ã€‚ä¸Šä¸‹æ–‡å¼€é”€å¤§ã€‚æŒ‰æ—¶é—´ç‰‡å¼ºåˆ¶åˆ‡æ¢, ä¸å¤Ÿçµæ´»</li>\n<li>åç¨‹: å†…å­˜å¼€é”€æ›´å°, ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€æ›´å°ã€‚å¯æ ¹æ®äº‹ä»¶åˆ‡æ¢, æ›´åŠ æœ‰æ•ˆçš„åˆ©ç”¨ CPU</li>\n</ul>\n</li>\n<li>ä»€ä¹ˆæ˜¯åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ï¼Ÿ<ul>\n<li>åŒæ­¥, å¼‚æ­¥: å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡å™¨æ¥å£æ—¶</li>\n<li>é˜»å¡, éé˜»å¡: æœåŠ¡ç«¯å‘ç”Ÿç­‰å¾…</li>\n</ul>\n</li>\n<li>äº‹ä»¶é©±åŠ¨ + å¤šè·¯å¤ç”¨<ul>\n<li>è½®è¯¢: select, poll</li>\n<li>äº‹ä»¶é©±åŠ¨: epoll æœ‰æ•ˆè½®è¯¢</li>\n</ul>\n</li>\n<li>Greenlets / gevent | tornado / asyncio</li>\n<li>çº¿ç¨‹å®‰å…¨, é”<ul>\n<li>è·å¾—é”ä¹‹å, ä¸€å®šè¦é‡Šæ”¾, é¿å…æ­»é”</li>\n<li>è·å¾—é”ä¹‹å, æ‰§è¡Œçš„è¯­å¥, åªè·Ÿè¢«é”èµ„æºæœ‰å…³</li>\n<li>åŒºåˆ†æ™®é€šé” Lock, å¯é‡å…¥é” RLock</li>\n<li>çº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤äº’å°½é‡ä½¿ç”¨ Queue</li>\n</ul>\n</li>\n<li>gevent<ul>\n<li>monkey.patch</li>\n<li>gevent.sleep éé˜»å¡å¼ç­‰å¾…</li>\n<li>Queue åç¨‹é—´æ•°æ®äº¤äº’, é¿å…ç«äº‰</li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>è£…é¥°å™¨</p>\n<ul>\n<li><p>æœ€ç®€è£…é¥°å™¨</p>\n<pre><code>def deco(func):\n    def wrap(*args, **kwargs):\n        return func(*args, **kwargs)\n    return wrap\n\n@deco\ndef foo(a, b):\n    return a ** b</code></pre></li>\n<li><p>åŸç†</p>\n<ul>\n<li><p>å¯¹æ¯”è¢«è£…é¥°å‰åçš„ <code>foo.__name__</code> å’Œ <code>foo.__doc__</code></p>\n<pre><code>from functools import wraps\ndef deco(func):\n    '''i am deco'''\n    @wraps(func)\n    def wrap(*args, **kwargs):\n        '''i am wrap'''\n        return func(*args, **kwargs)\n    return wrap</code></pre></li>\n<li><p>ç®€å•è¿‡ç¨‹</p>\n<pre><code>fn = deco(func)\nfn(*args, **kwargs)</code></pre></li>\n<li><p>å¤šä¸ªè£…é¥°å™¨è°ƒç”¨è¿‡ç¨‹</p>\n<pre><code>@deco1\n@deco2\n@deco3\ndef foo(x, y):\n    return x ** y</code></pre></li>\n</ul>\n</li>\n<li><p>å¸¦å‚æ•°çš„è£…é¥°å™¨</p>\n<pre><code>def deco(n):\n    def wrap1(func):\n        def wrap2(*args, **kwargs):\n            return func(*args, **kwargs)\n        return wrap2\n    return wrap1</code></pre></li>\n<li><p>è£…é¥°å™¨ç±»å’Œ <code>__call__</code></p>\n</li>\n<li><p>ä½¿ç”¨åœºæ™¯</p>\n<ul>\n<li>å‚æ•°ã€ç»“æœæ£€æŸ¥</li>\n<li>ç¼“å­˜ã€è®¡æ•°</li>\n<li>æ—¥å¿—ã€ç»Ÿè®¡</li>\n<li>æƒé™ç®¡ç†</li>\n<li>é‡è¯•</li>\n<li>å…¶ä»–</li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ 1ï¼šå†™ä¸€ä¸ª timer è£…é¥°å™¨, è®¡ç®—å‡ºè¢«è£…é¥°å‡½æ•°è°ƒç”¨ä¸€æ¬¡èŠ±å¤šé•¿æ—¶é—´, å¹¶æŠŠæ—¶é—´æ‰“å°å‡ºæ¥</p>\n</li>\n<li><p>ç»ƒä¹ 2: å†™ä¸€ä¸ªæƒé™ç®¡ç†è£…é¥°å™¨, æƒé™åˆ†ä¸º <code>admin / member / guest</code> ä¸‰çº§</p>\n</li>\n<li><p>ç»ƒä¹ 3: å†™ä¸€ä¸ª Retry è£…é¥°å™¨</p>\n<pre><code>import time\n\nclass retry(object):\n    def __init__(self, max_retries=3, wait=0, exceptions=(Exception,)):\n        self.max_retries = max_retries\n        self.exceptions = exceptions\n        self.wait = wait\n\n    def __call__(self, f):\n        def wrapper(*args, **kwargs):\n            for i in range(self.max_retries + 1):\n                try:\n                    result = f(*args, **kwargs)\n                except self.exceptions:\n                    time.sleep(self.wait)\n                    continue\n                else:\n                    return result\n        return wrapper</code></pre></li>\n</ul>\n</li>\n<li><p>é—­åŒ…</p>\n<ul>\n<li><p>è¯´å‡ºä¸‹é¢å‡½æ•°è¿”å›å€¼</p>\n<pre><code>def foo():\n    l = []\n    def bar(i):\n        l.append(i)\n        return l\n    return bar\n\nf1 = foo()\nf2 = foo()\n\n# è¯´å‡ºä¸‹åˆ—è¯­å¥æ‰§è¡Œç»“æœ\nf1(1)\nf1(2)\nf2(3)</code></pre></li>\n<li><p>ä½œç”¨åŸŸ</p>\n<ul>\n<li><p>global</p>\n</li>\n<li><p>nonlocal</p>\n</li>\n<li><p>globals()</p>\n</li>\n<li><p>locals()</p>\n</li>\n<li><p>vars()</p>\n<pre><code>local namespace\n    |\n    V\nglobal namespace\n    |\n    V\nbuiltin namespace</code></pre></li>\n</ul>\n</li>\n<li><p>æ›´æ·±å…¥ä¸€ç‚¹: <code>__closure__</code></p>\n</li>\n</ul>\n</li>\n<li><p>Garbage Collection (GC)</p>\n<ul>\n<li><p>å¼•ç”¨è®¡æ•°</p>\n<ul>\n<li><p>ä¼˜ç‚¹: ç®€å•ã€å®æ—¶æ€§é«˜</p>\n</li>\n<li><p>ç¼ºç‚¹: æ¶ˆè€—èµ„æºã€å¾ªç¯å¼•ç”¨</p>\n<pre><code>l1, l2 = [], []\nl1.append(l2)\nl2.append(l1)</code></pre><p><img src=\"/image/GC.png\" alt=\"GC\"></p>\n</li>\n</ul>\n</li>\n<li><p>æ ‡è®°-æ¸…é™¤, åˆ†ä»£æ”¶é›†</p>\n</li>\n</ul>\n</li>\n<li><p>ç»§æ‰¿ã€å¤šç»§æ‰¿ã€å¤šæ€ã€Mixinã€super</p>\n<ul>\n<li><p>ç»§æ‰¿</p>\n</li>\n<li><p>å¤šæ€</p>\n</li>\n<li><p>å¤šç»§æ‰¿ å’Œ Mixin</p>\n</li>\n<li><p>super</p>\n<pre><code>class A:\n    def __init__(self):\n        print('enter A')\n        self.x = 111\n        print('exit A')</code></pre></li>\n</ul>\n</li>\n</ol>\n<pre><code>class B(A):\n    def __init__(self):\n        print('enter B')\n        A.__init__(self)\n        # super().__init__()\n        print('exit B')\n\n\nclass C(A):\n    def __init__(self):\n        print('enter C')\n        A.__init__(self)\n        # super().__init__()\n        print('exit C')\n\n\nclass D(B, C):\n    def __init__(self):\n        print('enter D')\n        B.__init__(self)\n        C.__init__(self)\n        # super().__init__()\n        print('exit D')\n\nd = D()</code></pre><ol start=\"11\">\n<li><p>ä¸€äº›æŠ€å·§å’Œè¯¯åŒº</p>\n<ol>\n<li><p>æ ¼å¼åŒ–æ‰“å°</p>\n<ul>\n<li>json.dumps(obj, indent=4)</li>\n<li>json å‹ç¼©: <code>json.dumps(obj, separators=[',',':'])</code></li>\n<li>pprint</li>\n</ul>\n</li>\n<li><p>ç¡®ä¿èƒ½å–åˆ°æœ‰æ•ˆå€¼</p>\n<ul>\n<li><code>d.get(k, default)</code></li>\n<li><code>d.setdefault</code></li>\n<li><code>defaultdict</code></li>\n<li><code>a or b</code></li>\n<li><code>x = a if foo() else b</code></li>\n</ul>\n</li>\n<li><p>tryâ€¦exceptâ€¦ çš„æ»¥ç”¨</p>\n<ul>\n<li>ä¸è¦æŠŠæ‰€æœ‰ä¸œè¥¿å…¨éƒ½åŒ…ä½, ç¨‹åºé”™è¯¯éœ€è¦æŠ¥å‡ºæ¥</li>\n<li>ä½¿ç”¨ <code>try...except</code> è¦æŒ‡æ˜å…·ä½“é”™è¯¯, <code>try</code> ç»“æ„ä¸æ˜¯ç”¨æ¥éšè—é”™è¯¯çš„, è€Œæ˜¯ç”¨æ¥æœ‰æ–¹å‘çš„å¤„ç†é”™è¯¯çš„</li>\n</ul>\n</li>\n<li><p>åˆ©ç”¨ dict åšæ¨¡å¼åŒ¹é…</p>\n<pre><code>def do1():\n    print('i am do1')\n\ndef do2():\n    print('i am do2')\n\ndef do3():\n    print('i am do3')\n\ndef do4():\n    print('i am do4')\n\nmapping = {1: do1, 2: do2, 3: do3, 4: do4}\nmod = random.randint(1, 10)\nfunc = mapping.get(mod, do4)\nfunc()</code></pre></li>\n<li><p><code>inf, -inf, nan</code></p>\n</li>\n<li><p>pyenv, venv, å‘½åç©ºé—´</p>\n<ul>\n<li><a href=\"https://github.com/pyenv/pyenv-installer\" target=\"_blank\" rel=\"noopener\">pyenv</a>: ç®¡ç† Python ç‰ˆæœ¬</li>\n<li>venv: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ, åšç¯å¢ƒéš”ç¦», venv ç›®å½•ç›´æ¥æ”¾åˆ°é¡¹ç›®çš„ç›®å½•é‡Œ</li>\n</ul>\n</li>\n<li><p>property: æŠŠä¸€ä¸ªæ–¹æ³•å±æ€§åŒ–</p>\n<pre><code>class C(object):\n    @property\n    def x(self):\n        \"I am the 'x' property.\"\n        return self._x\n    @x.setter\n    def x(self, value):\n        self._x = value\n    @x.deleter\n    def x(self):\n        del self._x</code></pre></li>\n<li><p>else å­å¥: <code>if, for, while, try</code></p>\n</li>\n<li><p>collections æ¨¡å—</p>\n<ul>\n<li>defaultdict</li>\n<li>namedtuple</li>\n<li>Counter</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"ç é…±","introduction":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥","url":"http://luokangyuan.com/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"é—ªçƒä¹‹ç‹","introduction":"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬","url":"https://blinkfox.github.io/","title":"å‰å»å­¦ä¹ "},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹","url":"https://me.csdn.net/jlh912008548","title":"å‰å»å­¦ä¹ "}],"link":{"class":{"class_name":"å‹æƒ…é“¾æ¥","link_list":{"1":{"name":"lpdswing","link":"https://lpdswing.com","avatar":"https://cdn.jsdelivr.net/gh/Yafine/Yafine-imgs/images/avatar.jpg","descr":"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œ ä½†æ­£åœ¨æˆä¸ºå¤§ä½¬ä½†è·¯ä¸Š"},"2":{"name":"Kylin","link":"https://www.kylin.show/","avatar":"https://www.kylin.show/img/avatar.jpg","descr":"å­¦ä¹ ä¸æ˜“ï¼ŒåŠªåŠ›åŠªåŠ›~"}}}}}},"cover":"https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png","excerpt":"","more":"<h1 id=\"Python-è¿›é˜¶\"><a href=\"#Python-è¿›é˜¶\" class=\"headerlink\" title=\"Python è¿›é˜¶\"></a>Python è¿›é˜¶</h1><ol>\n<li><p>PEP8 ç¼–ç è§„èŒƒ, ä»¥åŠå¼€å‘ä¸­çš„ä¸€äº›æƒ¯ä¾‹å’Œå»ºè®®</p>\n<ul>\n<li><p>ä»£ç ç¼–æ’:</p>\n<ul>\n<li>ç¼©è¿› 4 ä¸ªç©ºæ ¼, ç¦æ­¢ç©ºæ ¼ä¸ Tab æ··ç”¨</li>\n<li>è¡Œé•¿ 80: é˜²æ­¢å•è¡Œé€»è¾‘è¿‡äºå¤æ‚</li>\n</ul>\n</li>\n<li><p>é€‚å½“æ·»åŠ ç©ºè¡Œ</p>\n<ul>\n<li>å‡½æ•°é—´: é¡¶çº§å‡½æ•°é—´ç©º 2 è¡Œ, ç±»çš„æ–¹æ³•ä¹‹é—´ç©º 1 è¡Œ</li>\n<li>å‡½æ•°å†…: åŒä¸€å‡½æ•°å†…çš„é€»è¾‘å—ä¹‹é—´, ç©º 1 è¡Œ</li>\n<li>æ–‡ä»¶ç»“å°¾: ç•™ä¸€ä¸ªç©ºè¡Œ</li>\n</ul>\n</li>\n<li><p>import</p>\n<ul>\n<li>é¡ºåº<ol>\n<li>æ ‡å‡†åº“</li>\n<li>ç¬¬ä¸‰æ–¹åº“</li>\n<li>è‡ªå®šä¹‰åº“</li>\n</ol>\n</li>\n<li>å•è¡Œä¸è¦ import å¤šä¸ªåº“</li>\n<li>æ¨¡å—å†…ç”¨ä¸åˆ°çš„ä¸è¦å» import</li>\n</ul>\n</li>\n<li><p>ç©ºæ ¼</p>\n</li>\n<li><p>æ³¨é‡Š</p>\n<ul>\n<li>è¡Œæ³¨é‡Š</li>\n<li>å—æ³¨é‡Š</li>\n<li>å¼•å…¥å¤–æ¥ç®—æ³•æˆ–è€…é…ç½®æ—¶é¡»åœ¨æ³¨é‡Šä¸­æ·»åŠ æºè¿æ¥, æ ‡æ˜å‡ºå¤„</li>\n<li>å‡½æ•°å’Œç±»å°½å¯èƒ½æ·»åŠ  <code>docstring</code></li>\n</ul>\n</li>\n<li><p>å‘½å</p>\n<ul>\n<li>åŒ…åã€æ¨¡å—åã€å‡½æ•°åã€æ–¹æ³•åå…¨éƒ¨ä½¿ç”¨å°å†™, å•è¯é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥</li>\n<li>ç±»åã€å¼‚å¸¸åä½¿ç”¨ CapWords çš„æ–¹å¼, å¼‚å¸¸åç»“å°¾åŠ  <code>Error</code> æˆ– <code>Wraning</code> åç¼€</li>\n<li>å…¨å±€å˜é‡å°½é‡ä½¿ç”¨å¤§å†™, ä¸€ç»„åŒç±»å‹çš„å…¨å±€å˜é‡è¦åŠ ä¸Šç»Ÿä¸€å‰ç¼€, å•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥</li>\n</ul>\n</li>\n<li><p>å­—ç¬¦ä¸²æ‹¼æ¥å°½é‡ä½¿ç”¨ <code>join</code> æ–¹å¼: é€Ÿåº¦å¿«, å†…å­˜æ¶ˆè€—å°</p>\n</li>\n<li><p>è¯­æ„æ˜ç¡®ã€ç›´ç™½</p>\n<ul>\n<li><code>not xx in yy</code> vs <code>xx not in yy</code></li>\n<li><code>not a is b</code> vs <code>a is not b</code></li>\n</ul>\n</li>\n<li><p>ç¨‹åºæ„å»º</p>\n<ul>\n<li>ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…, å¹¶æŠŠè¿™ä»¶äº‹åšå¥½</li>\n<li>å¤§çš„åŠŸèƒ½ç”¨å°å‡½æ•°ä¹‹é—´çµæ´»ç»„åˆæ¥å®Œæˆ</li>\n<li>é¿å…ç¼–å†™åºå¤§çš„ç¨‹åº, â€œå¤§â€æ„å‘³ç€ä½“ç§¯åºå¤§, é€»è¾‘å¤æ‚ç”šè‡³æ··ä¹±</li>\n</ul>\n</li>\n<li><p>å‡½æ•°åå¿…é¡»æœ‰åŠ¨è¯, æœ€å¥½æ˜¯ do_something çš„å¥å¼, æˆ–è€… somebody_do_something å¥å¼</p>\n</li>\n<li><p>è‡ªå®šä¹‰çš„å˜é‡åã€å‡½æ•°åä¸è¦ä¸æ ‡å‡†åº“ä¸­çš„åå­—å†²çª</p>\n</li>\n<li><p>pip install pep8</p>\n</li>\n<li><p>ç»ƒä¹ : è§„èŒƒåŒ–è¿™æ®µä»£ç </p>\n<pre><code>from django.conf import settings\nimport sys, os\nmod=0xffffffff\ndef foo ( a , b = 123 ) :\n    c = { &apos;x&apos; : 111 , &apos;y&apos; : 222 }  # å®šä¹‰ä¸€ä¸ªå­—å…¸\n    d = [ 1, 3 , 5 ]\n    return a , b , c\ndef bar(x):\n    if x%2 ==0: return true</code></pre></li>\n</ul>\n</li>\n<li><p><code>*</code> å’Œ <code>**</code> çš„ç”¨æ³•</p>\n<ul>\n<li><p>å‡½æ•°å®šä¹‰</p>\n<pre><code>def foo(*args, **kwargs):\n    pass</code></pre></li>\n<li><p>å‚æ•°ä¼ é€’</p>\n<pre><code>def foo(x, y, z, a, b):\n    print(x)\n    print(y)\n    print(z)\n    print(a)\n    print(b)\nlst = [1, 2, 3]\ndic = {&apos;a&apos;: 22, &apos;b&apos;: 77}\nfoo(*lst, **dic)</code></pre></li>\n<li><p>å¼ºåˆ¶å‘½åå‚æ•°</p>\n<pre><code>def foo(a, *, b, c=123):\n    pass</code></pre></li>\n<li><p>è§£åŒ…è¯­æ³•: <code>a, b, *ignored, c = [1, 2, 3, 4, 5, 6, 7]</code></p>\n</li>\n</ul>\n</li>\n<li><p>Python çš„èµ‹å€¼å’Œå¼•ç”¨</p>\n<ul>\n<li><p><code>==, is</code>: <code>==</code> åˆ¤æ–­çš„æ˜¯å€¼, <code>is</code> åˆ¤æ–­çš„æ˜¯å†…å­˜åœ°å€ (å³å¯¹è±¡çš„id)</p>\n</li>\n<li><p>å°æ•´æ•°å¯¹è±¡: [-5, 256]</p>\n</li>\n<li><p><code>copy, deepcopy</code> çš„åŒºåˆ«</p>\n<ul>\n<li><code>copy</code>: åªæ‹·è´è¡¨å±‚å…ƒç´ </li>\n<li><code>deepcopy</code>: åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºæ‰€æœ‰å­å…ƒç´ </li>\n<li><img src=\"/image/Copy.png\" alt=\"copy and deepcopy\"></li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ 1: è¯´å‡ºæ‰§è¡Œç»“æœ</p>\n<pre><code>def extendList(val, lst=[]):\n    lst.append(val)\n    return lst\n\nlist1 = extendList(10)\nlist2 = extendList(123, [])\nlist3 = extendList(&apos;a&apos;)</code></pre></li>\n<li><p>ç»ƒä¹ 2: è¯´å‡ºä¸‹é¢æ‰§è¡Œç»“æœ</p>\n<pre><code>from copy import copy, deepcopy\nfrom pickle import dumps, loads\n\na = [1, 2, 3]\nb = [a] * 3\nc = copy(b)\nd = deepcopy(b)\ne = loads(dumps(b, 4))\n\nb[1].append(999)\nc[1].append(999)\nd[1].append(999)\ne[1].append(999)\nd[1].append(777)\ne[1].append(777)</code></pre></li>\n<li><p>è‡ªå®šä¹‰ deepcopy: <code>my_deepcopy = lambda item: loads(dumps(item, 4))</code></p>\n</li>\n</ul>\n</li>\n<li><p>è¿­ä»£å™¨, ç”Ÿæˆå™¨, itertools, yield, åˆ—è¡¨ / å­—å…¸ / é›†åˆçš„æ¨å¯¼</p>\n<pre><code>class Range:\n    def __init__(self, start, end):\n        self.start = start - 1\n        self.end = end\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        self.start += 1\n        if self.start &lt; self.end:\n            return self.start\n        else:\n            raise StopIteration()</code></pre><ul>\n<li><p>iterator: ä»»ä½•å®ç°äº† <code>__iter__</code> å’Œ <code>__next__</code> (python2ä¸­æ˜¯ <code>next()</code>) æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯è¿­ä»£å™¨.</p>\n<ul>\n<li><code>__iter__</code>è¿”å›è¿­ä»£å™¨è‡ªèº«</li>\n<li><code>__next__</code> è¿”å›å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼</li>\n<li>å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ›´å¤šå…ƒç´ , åˆ™æŠ›å‡ºStopIterationå¼‚å¸¸</li>\n</ul>\n</li>\n<li><p>generator: ç”Ÿæˆå™¨å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨, ä¸éœ€è¦è‡ªå®šä¹‰ <code>__iter__</code> å’Œ <code>__next__</code></p>\n<ul>\n<li>ç”Ÿæˆå™¨å‡½æ•° (yield)</li>\n<li>ç”Ÿæˆå™¨è¡¨è¾¾å¼</li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ 1: è‡ªå®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>\n<pre><code>class Fib:\n    def __init__(self, count):\n        self.prev = 0\n        self.curr = 1\n        self.count = count\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        if self.count &gt; 0:\n            # è®¡æ•°\n            self.count -= 1\n            # è®¡ç®—å½“å‰çš„å€¼\n            current = self.curr\n            # ä¸ºä¸‹æ¬¡åšå‡†å¤‡\n            self.prev, self.curr = self.curr, (self.curr + self.prev)\n            # è¿”å›å½“å‰å€¼\n            return current\n        else:\n            raise StopIteration()</code></pre></li>\n<li><p>ç»ƒä¹ 2: è‡ªå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°, å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>\n<pre><code>def fib(max_value):\n    prev = 0\n    curr = 1\n    while curr &lt; max_value:\n        yield curr\n        prev, curr = curr, curr + prev</code></pre></li>\n<li><p>ç»ƒä¹ 3: å®šä¹‰ä¸€ä¸ªéšæœºæ•°è¿­ä»£å™¨, éšæœºèŒƒå›´ä¸º [1, 50], æœ€å¤§è¿­ä»£æ¬¡æ•° 30</p>\n<pre><code>import random\n\nclass RandomIter:\n    def __init__(self, start, end, times):\n        self.start = start\n        self.end = end\n        self.max_times = times\n        self.count = 0\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        self.count += 1\n        if self.count &lt;= self.max_times:\n            return random.randint(self.start, self.end)\n        else:\n            raise StopIteration()</code></pre></li>\n<li><p>è¿­ä»£å™¨ã€ç”Ÿæˆå™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>\n<ul>\n<li>èŠ‚çœå†…å­˜</li>\n<li>æƒ°æ€§æ±‚å€¼</li>\n</ul>\n</li>\n<li><p>itertools</p>\n<ul>\n<li>æ— é™è¿­ä»£<ul>\n<li><code>count(start=0, step=1)</code></li>\n<li><code>cycle(iterable)</code></li>\n<li><code>repeat(object [,times])</code></li>\n</ul>\n</li>\n<li>æœ‰é™è¿­ä»£<ul>\n<li><code>chain(*iterables)</code></li>\n</ul>\n</li>\n<li>æ’åˆ—ç»„åˆ<ul>\n<li><code>product(*iterables, repeat=1)</code> ç¬›å¡å°”ç§¯</li>\n<li><code>permutations(iterable[, r-length])</code> å…¨æ’åˆ—</li>\n<li><code>combinations(iterable, r-length)</code> ç»„åˆ</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<ol start=\"4\">\n<li><p><code>method</code>, <code>classmethod</code> å’Œ <code>staticmethod</code></p>\n<ul>\n<li><p><code>method</code>: é€šè¿‡å®ä¾‹è°ƒç”¨æ—¶, å¯ä»¥å¼•ç”¨ç±»å†…éƒ¨çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•</p>\n</li>\n<li><p><code>classmethod</code>: æ— éœ€å®ä¾‹åŒ–, å¯ä»¥è°ƒç”¨ç±»å±æ€§å’Œç±»æ–¹æ³•, æ— æ³•å–åˆ°æ™®é€šçš„æˆå‘˜å±æ€§å’Œæ–¹æ³•</p>\n</li>\n<li><p><code>staticmethod</code>: æ— è®ºç”¨ç±»è°ƒç”¨è¿˜æ˜¯ç”¨å®ä¾‹è°ƒç”¨, éƒ½æ— æ³•å–åˆ°ç±»å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•, å®Œå…¨ç‹¬ç«‹çš„ä¸€ä¸ªæ–¹æ³•</p>\n</li>\n<li><p>ç»ƒä¹ : è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœ</p>\n<pre><code>class Test(object):\n    x = 123\n\n    def __init__(self):\n        self.y = 456\n\n    def bar1(self):\n        print(&apos;i am a method&apos;)\n\n    @classmethod\n    def bar2(cls):\n        print(&apos;i am a classmethod&apos;)\n\n    @staticmethod\n    def bar3():\n        print(&apos;i am a staticmethod&apos;)\n\n    def foo1(self):\n        print(self.x)\n        print(self.y)\n        self.bar1()\n        self.bar2()\n        self.bar3()\n\n    @classmethod\n    def foo2(cls):\n        print(cls.x)\n        # print(cls.y)\n        # cls.bar1()\n        Test.bar2()\n        Test.bar3()\n\n    @staticmethod\n    def foo3(obj):\n        print(obj.x)\n        print(obj.y)\n        obj.bar1()\n        obj.bar2()\n        obj.bar3()\n\nt = Test()\nt.foo1()\nt.foo2()\nt.foo3()</code></pre></li>\n</ul>\n</li>\n<li><p>Python é­”æœ¯æ–¹æ³•</p>\n<ol>\n<li><p><code>__str__</code>, <code>__repr__</code></p>\n</li>\n<li><p><code>__init__</code> å’Œ <code>__new__</code></p>\n<ul>\n<li><p><code>__new__</code> è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹, <code>__init__</code> æ— è¿”å›å€¼</p>\n</li>\n<li><p><code>__new__</code> æ˜¯ä¸€ä¸ªç±»æ–¹æ³•</p>\n<ul>\n<li><p>å•ä¾‹æ¨¡å¼</p>\n<pre><code>class A(object):\n    &apos;&apos;&apos;å•ä¾‹æ¨¡å¼&apos;&apos;&apos;\n    obj = None\n    def __new__(cls, *args, **kwargs):\n        if cls.obj is None:\n            cls.obj = object.__new__(cls)\n        return cls.obj</code></pre></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æ¯”è¾ƒè¿ç®—ã€æ•°å­¦è¿ç®—</p>\n<ul>\n<li><p>è¿ç®—ç¬¦é‡è½½</p>\n<ul>\n<li><code>+</code>: <code>__add__(value)</code></li>\n<li><code>-</code>: <code>__sub__(value)</code></li>\n<li><code>*</code>: <code>__mul__(value)</code></li>\n<li><code>/</code>: <code>__truediv__(value)</code> (Python 3.x), <code>__div__(value)</code> (Python 2.x)</li>\n<li><code>//</code>: <code>__floordiv__(value)</code></li>\n<li><code>%</code>: <code>__mod__(value)</code></li>\n<li><code>&amp;</code>: <code>__and__(value)</code></li>\n<li><code>|</code>: <code>__or__(value)</code></li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ : å®ç°å­—å…¸çš„ <code>__add__</code> æ–¹æ³•, ä½œç”¨ç›¸å½“äº d.update(other)</p>\n<pre><code>class Dict(dict):\n    def __add__(self, other):\n        if isinstance(other, dict):\n            new_dict = {}\n            new_dict.update(self)\n            new_dict.update(other)\n            return new_dict\n        else:\n            raise TypeError(&apos;not a dict&apos;)</code></pre></li>\n<li><p>æ¯”è¾ƒè¿ç®—ç¬¦çš„é‡è½½</p>\n<ul>\n<li><code>==</code>: <code>__eq__</code></li>\n<li><code>!=</code>: <code>__ne__</code></li>\n<li><code>&gt;</code>: <code>__gt__</code></li>\n<li><code>&gt;=</code>: <code>__ge__</code></li>\n<li><code>&lt;</code>: <code>__lt__</code></li>\n<li><code>&lt;=</code>: <code>__le__</code></li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ : å®Œæˆä¸€ä¸ªç±», å®ç°æ•°å­¦ä¸Šæ— ç©·å¤§çš„æ¦‚å¿µ</p>\n<pre><code>class Inf:\n    def __lt__(self, other):\n        return False\n    def __le__(self, other):\n        return False\n    def __ge__(self, other):\n        return True\n    def __gt__(self, other):\n        return True\n    def __eq__(self, other):\n        return False\n    def __ne__(self, other):\n        return True</code></pre></li>\n</ul>\n</li>\n<li><p>å®¹å™¨æ–¹æ³•</p>\n<ul>\n<li><p><code>__len__, __iter__, __contains__</code></p>\n</li>\n<li><p><code>__getitem__</code> å¯¹ <code>string, list, tuple, dict</code> æœ‰æ•ˆ</p>\n</li>\n<li><p><code>__setitem__</code> å¯¹ <code>list, dict</code> æœ‰æ•ˆ</p>\n</li>\n<li><p><code>__missing__</code> å¯¹ <code>dict</code> æœ‰æ•ˆ</p>\n<pre><code>class Dict(dict):\n    def __missing__(self, key):\n        self[key] = None  # å½“æ£€æŸ¥åˆ° Key ç¼ºå¤±æ—¶, å¯ä»¥åšä»»ä½•é»˜è®¤è¡Œä¸º</code></pre></li>\n</ul>\n</li>\n<li><p>å¯æ‰§è¡Œå¯¹è±¡: <code>__call__</code></p>\n</li>\n<li><p>with:</p>\n<ul>\n<li><code>__enter__</code> è¿›å…¥ <code>with</code> ä»£ç å—å‰çš„å‡†å¤‡æ“ä½œ</li>\n<li><code>__exit__</code> é€€å‡ºæ—¶çš„å–„åæ“ä½œ</li>\n</ul>\n</li>\n<li><p><code>__setattr__, __getattribute__, __getattr__, __dict__</code></p>\n<ul>\n<li><p>å¸¸ç”¨æ¥åšå±æ€§ç›‘å¬</p>\n<pre><code>class A:\n    &apos;&apos;&apos;TestClass&apos;&apos;&apos;\n    z = [7,8,9]\n    def __init__(self):\n        self.x = 123\n        self.y = &apos;abc&apos;\n\n    def __setattr__(self, name, value):\n        print(&apos;set %s to %s&apos; % (name, value))\n        object.__setattr__(self, name, value)\n\n    def __getattribute__(self, name):\n        print(&apos;get %s&apos; % name)\n        return object.__getattribute__(self, name)\n\n    def __getattr__(self, name):\n        print(&apos;not has %s&apos; % name)\n        return -1\n\n    def foo(self, x, y):\n        return x ** y\n\n# å¯¹æ¯”\na = A()\nprint(A.__dict__)\nprint(a.__dict__)</code></pre></li>\n</ul>\n</li>\n<li><p>æè¿°å™¨: <code>__set__, __get__</code></p>\n<ul>\n<li><a href=\"http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html\" target=\"_blank\" rel=\"noopener\">http://pyzh.readthedocs.io/en/latest/Descriptor-HOW-TO-Guide.html</a></li>\n<li>å¸¸è§åº”ç”¨åœºæ™¯: ORM çš„å„ç§ Field ç±»</li>\n</ul>\n</li>\n<li><p>æ§½: <code>__slots__</code></p>\n<ul>\n<li><p>å›ºå®šç±»æ‰€å…·æœ‰çš„å±æ€§</p>\n</li>\n<li><p>å®ä¾‹ä¸ä¼šåˆ†é… <code>__dict__</code></p>\n</li>\n<li><p>å®ä¾‹æ— æ³•åŠ¨æ€æ·»åŠ å±æ€§</p>\n</li>\n<li><p>ä¼˜åŒ–å†…å­˜åˆ†é…</p>\n<pre><code>class A:\n    __slots__ = (&apos;x&apos;, &apos;y&apos;)</code></pre></li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>Python æ€§èƒ½ä¹‹å›°</p>\n<ol>\n<li>è®¡ç®—å¯†é›†å‹<ul>\n<li>CPU é•¿æ—¶é—´æ»¡è´Ÿè·è¿è¡Œ, å¦‚å›¾åƒå¤„ç†ã€å¤§æ•°æ®è¿ç®—ã€åœ†å‘¨ç‡è®¡ç®—ç­‰</li>\n<li>è®¡ç®—å¯†é›†å‹: ç”¨ C è¯­è¨€è¡¥å……</li>\n<li>Profile, timeit</li>\n</ul>\n</li>\n<li>I/O å¯†é›†å‹: ç½‘ç»œ IO, æ–‡ä»¶ IO, è®¾å¤‡ IO ç­‰<ul>\n<li>å¤šçº¿ç¨‹ / å¤šè¿›ç¨‹ / åç¨‹</li>\n<li>é˜»å¡ -&gt; éé˜»å¡</li>\n<li>åŒæ­¥ -&gt; å¼‚æ­¥</li>\n</ul>\n</li>\n<li>GIL å…¨å±€è§£é‡Šå™¨é”<ul>\n<li>å®ƒç¡®ä¿ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªPythonçº¿ç¨‹æ‰§è¡Œã€‚<br><img src=\"/image/GIL.png\" alt=\"GIL\" title=\"GIL\"></li>\n</ul>\n</li>\n<li>ä»€ä¹ˆæ˜¯è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Ÿ<ul>\n<li>è¿›ç¨‹: èµ„æºæ¶ˆè€—å¤§, ç³»ç»Ÿæ•´ä½“å¼€é”€å¤§, æ•°æ®é€šä¿¡ä¸æ–¹ä¾¿</li>\n<li>çº¿ç¨‹: èµ„æºæ¶ˆè€—å°, å¯å…±äº«æ•°æ®ã€‚ä¸Šä¸‹æ–‡å¼€é”€å¤§ã€‚æŒ‰æ—¶é—´ç‰‡å¼ºåˆ¶åˆ‡æ¢, ä¸å¤Ÿçµæ´»</li>\n<li>åç¨‹: å†…å­˜å¼€é”€æ›´å°, ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€æ›´å°ã€‚å¯æ ¹æ®äº‹ä»¶åˆ‡æ¢, æ›´åŠ æœ‰æ•ˆçš„åˆ©ç”¨ CPU</li>\n</ul>\n</li>\n<li>ä»€ä¹ˆæ˜¯åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ï¼Ÿ<ul>\n<li>åŒæ­¥, å¼‚æ­¥: å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡å™¨æ¥å£æ—¶</li>\n<li>é˜»å¡, éé˜»å¡: æœåŠ¡ç«¯å‘ç”Ÿç­‰å¾…</li>\n</ul>\n</li>\n<li>äº‹ä»¶é©±åŠ¨ + å¤šè·¯å¤ç”¨<ul>\n<li>è½®è¯¢: select, poll</li>\n<li>äº‹ä»¶é©±åŠ¨: epoll æœ‰æ•ˆè½®è¯¢</li>\n</ul>\n</li>\n<li>Greenlets / gevent | tornado / asyncio</li>\n<li>çº¿ç¨‹å®‰å…¨, é”<ul>\n<li>è·å¾—é”ä¹‹å, ä¸€å®šè¦é‡Šæ”¾, é¿å…æ­»é”</li>\n<li>è·å¾—é”ä¹‹å, æ‰§è¡Œçš„è¯­å¥, åªè·Ÿè¢«é”èµ„æºæœ‰å…³</li>\n<li>åŒºåˆ†æ™®é€šé” Lock, å¯é‡å…¥é” RLock</li>\n<li>çº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤äº’å°½é‡ä½¿ç”¨ Queue</li>\n</ul>\n</li>\n<li>gevent<ul>\n<li>monkey.patch</li>\n<li>gevent.sleep éé˜»å¡å¼ç­‰å¾…</li>\n<li>Queue åç¨‹é—´æ•°æ®äº¤äº’, é¿å…ç«äº‰</li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>è£…é¥°å™¨</p>\n<ul>\n<li><p>æœ€ç®€è£…é¥°å™¨</p>\n<pre><code>def deco(func):\n    def wrap(*args, **kwargs):\n        return func(*args, **kwargs)\n    return wrap\n\n@deco\ndef foo(a, b):\n    return a ** b</code></pre></li>\n<li><p>åŸç†</p>\n<ul>\n<li><p>å¯¹æ¯”è¢«è£…é¥°å‰åçš„ <code>foo.__name__</code> å’Œ <code>foo.__doc__</code></p>\n<pre><code>from functools import wraps\ndef deco(func):\n    &apos;&apos;&apos;i am deco&apos;&apos;&apos;\n    @wraps(func)\n    def wrap(*args, **kwargs):\n        &apos;&apos;&apos;i am wrap&apos;&apos;&apos;\n        return func(*args, **kwargs)\n    return wrap</code></pre></li>\n<li><p>ç®€å•è¿‡ç¨‹</p>\n<pre><code>fn = deco(func)\nfn(*args, **kwargs)</code></pre></li>\n<li><p>å¤šä¸ªè£…é¥°å™¨è°ƒç”¨è¿‡ç¨‹</p>\n<pre><code>@deco1\n@deco2\n@deco3\ndef foo(x, y):\n    return x ** y</code></pre></li>\n</ul>\n</li>\n<li><p>å¸¦å‚æ•°çš„è£…é¥°å™¨</p>\n<pre><code>def deco(n):\n    def wrap1(func):\n        def wrap2(*args, **kwargs):\n            return func(*args, **kwargs)\n        return wrap2\n    return wrap1</code></pre></li>\n<li><p>è£…é¥°å™¨ç±»å’Œ <code>__call__</code></p>\n</li>\n<li><p>ä½¿ç”¨åœºæ™¯</p>\n<ul>\n<li>å‚æ•°ã€ç»“æœæ£€æŸ¥</li>\n<li>ç¼“å­˜ã€è®¡æ•°</li>\n<li>æ—¥å¿—ã€ç»Ÿè®¡</li>\n<li>æƒé™ç®¡ç†</li>\n<li>é‡è¯•</li>\n<li>å…¶ä»–</li>\n</ul>\n</li>\n<li><p>ç»ƒä¹ 1ï¼šå†™ä¸€ä¸ª timer è£…é¥°å™¨, è®¡ç®—å‡ºè¢«è£…é¥°å‡½æ•°è°ƒç”¨ä¸€æ¬¡èŠ±å¤šé•¿æ—¶é—´, å¹¶æŠŠæ—¶é—´æ‰“å°å‡ºæ¥</p>\n</li>\n<li><p>ç»ƒä¹ 2: å†™ä¸€ä¸ªæƒé™ç®¡ç†è£…é¥°å™¨, æƒé™åˆ†ä¸º <code>admin / member / guest</code> ä¸‰çº§</p>\n</li>\n<li><p>ç»ƒä¹ 3: å†™ä¸€ä¸ª Retry è£…é¥°å™¨</p>\n<pre><code>import time\n\nclass retry(object):\n    def __init__(self, max_retries=3, wait=0, exceptions=(Exception,)):\n        self.max_retries = max_retries\n        self.exceptions = exceptions\n        self.wait = wait\n\n    def __call__(self, f):\n        def wrapper(*args, **kwargs):\n            for i in range(self.max_retries + 1):\n                try:\n                    result = f(*args, **kwargs)\n                except self.exceptions:\n                    time.sleep(self.wait)\n                    continue\n                else:\n                    return result\n        return wrapper</code></pre></li>\n</ul>\n</li>\n<li><p>é—­åŒ…</p>\n<ul>\n<li><p>è¯´å‡ºä¸‹é¢å‡½æ•°è¿”å›å€¼</p>\n<pre><code>def foo():\n    l = []\n    def bar(i):\n        l.append(i)\n        return l\n    return bar\n\nf1 = foo()\nf2 = foo()\n\n# è¯´å‡ºä¸‹åˆ—è¯­å¥æ‰§è¡Œç»“æœ\nf1(1)\nf1(2)\nf2(3)</code></pre></li>\n<li><p>ä½œç”¨åŸŸ</p>\n<ul>\n<li><p>global</p>\n</li>\n<li><p>nonlocal</p>\n</li>\n<li><p>globals()</p>\n</li>\n<li><p>locals()</p>\n</li>\n<li><p>vars()</p>\n<pre><code>local namespace\n    |\n    V\nglobal namespace\n    |\n    V\nbuiltin namespace</code></pre></li>\n</ul>\n</li>\n<li><p>æ›´æ·±å…¥ä¸€ç‚¹: <code>__closure__</code></p>\n</li>\n</ul>\n</li>\n<li><p>Garbage Collection (GC)</p>\n<ul>\n<li><p>å¼•ç”¨è®¡æ•°</p>\n<ul>\n<li><p>ä¼˜ç‚¹: ç®€å•ã€å®æ—¶æ€§é«˜</p>\n</li>\n<li><p>ç¼ºç‚¹: æ¶ˆè€—èµ„æºã€å¾ªç¯å¼•ç”¨</p>\n<pre><code>l1, l2 = [], []\nl1.append(l2)\nl2.append(l1)</code></pre><p><img src=\"/image/GC.png\" alt=\"GC\"></p>\n</li>\n</ul>\n</li>\n<li><p>æ ‡è®°-æ¸…é™¤, åˆ†ä»£æ”¶é›†</p>\n</li>\n</ul>\n</li>\n<li><p>ç»§æ‰¿ã€å¤šç»§æ‰¿ã€å¤šæ€ã€Mixinã€super</p>\n<ul>\n<li><p>ç»§æ‰¿</p>\n</li>\n<li><p>å¤šæ€</p>\n</li>\n<li><p>å¤šç»§æ‰¿ å’Œ Mixin</p>\n</li>\n<li><p>super</p>\n<pre><code>class A:\n    def __init__(self):\n        print(&apos;enter A&apos;)\n        self.x = 111\n        print(&apos;exit A&apos;)</code></pre></li>\n</ul>\n</li>\n</ol>\n<pre><code>class B(A):\n    def __init__(self):\n        print(&apos;enter B&apos;)\n        A.__init__(self)\n        # super().__init__()\n        print(&apos;exit B&apos;)\n\n\nclass C(A):\n    def __init__(self):\n        print(&apos;enter C&apos;)\n        A.__init__(self)\n        # super().__init__()\n        print(&apos;exit C&apos;)\n\n\nclass D(B, C):\n    def __init__(self):\n        print(&apos;enter D&apos;)\n        B.__init__(self)\n        C.__init__(self)\n        # super().__init__()\n        print(&apos;exit D&apos;)\n\nd = D()</code></pre><ol start=\"11\">\n<li><p>ä¸€äº›æŠ€å·§å’Œè¯¯åŒº</p>\n<ol>\n<li><p>æ ¼å¼åŒ–æ‰“å°</p>\n<ul>\n<li>json.dumps(obj, indent=4)</li>\n<li>json å‹ç¼©: <code>json.dumps(obj, separators=[&#39;,&#39;,&#39;:&#39;])</code></li>\n<li>pprint</li>\n</ul>\n</li>\n<li><p>ç¡®ä¿èƒ½å–åˆ°æœ‰æ•ˆå€¼</p>\n<ul>\n<li><code>d.get(k, default)</code></li>\n<li><code>d.setdefault</code></li>\n<li><code>defaultdict</code></li>\n<li><code>a or b</code></li>\n<li><code>x = a if foo() else b</code></li>\n</ul>\n</li>\n<li><p>tryâ€¦exceptâ€¦ çš„æ»¥ç”¨</p>\n<ul>\n<li>ä¸è¦æŠŠæ‰€æœ‰ä¸œè¥¿å…¨éƒ½åŒ…ä½, ç¨‹åºé”™è¯¯éœ€è¦æŠ¥å‡ºæ¥</li>\n<li>ä½¿ç”¨ <code>try...except</code> è¦æŒ‡æ˜å…·ä½“é”™è¯¯, <code>try</code> ç»“æ„ä¸æ˜¯ç”¨æ¥éšè—é”™è¯¯çš„, è€Œæ˜¯ç”¨æ¥æœ‰æ–¹å‘çš„å¤„ç†é”™è¯¯çš„</li>\n</ul>\n</li>\n<li><p>åˆ©ç”¨ dict åšæ¨¡å¼åŒ¹é…</p>\n<pre><code>def do1():\n    print(&apos;i am do1&apos;)\n\ndef do2():\n    print(&apos;i am do2&apos;)\n\ndef do3():\n    print(&apos;i am do3&apos;)\n\ndef do4():\n    print(&apos;i am do4&apos;)\n\nmapping = {1: do1, 2: do2, 3: do3, 4: do4}\nmod = random.randint(1, 10)\nfunc = mapping.get(mod, do4)\nfunc()</code></pre></li>\n<li><p><code>inf, -inf, nan</code></p>\n</li>\n<li><p>pyenv, venv, å‘½åç©ºé—´</p>\n<ul>\n<li><a href=\"https://github.com/pyenv/pyenv-installer\" target=\"_blank\" rel=\"noopener\">pyenv</a>: ç®¡ç† Python ç‰ˆæœ¬</li>\n<li>venv: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ, åšç¯å¢ƒéš”ç¦», venv ç›®å½•ç›´æ¥æ”¾åˆ°é¡¹ç›®çš„ç›®å½•é‡Œ</li>\n</ul>\n</li>\n<li><p>property: æŠŠä¸€ä¸ªæ–¹æ³•å±æ€§åŒ–</p>\n<pre><code>class C(object):\n    @property\n    def x(self):\n        &quot;I am the &apos;x&apos; property.&quot;\n        return self._x\n    @x.setter\n    def x(self, value):\n        self._x = value\n    @x.deleter\n    def x(self):\n        del self._x</code></pre></li>\n<li><p>else å­å¥: <code>if, for, while, try</code></p>\n</li>\n<li><p>collections æ¨¡å—</p>\n<ul>\n<li>defaultdict</li>\n<li>namedtuple</li>\n<li>Counter</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cka109fo000053kzjeaur0y09","category_id":"cka109fo300093kzjeyphgd4b","_id":"cka109fob000j3kzjcul052fi"},{"post_id":"cka109fo9000h3kzj8iivb2j3","category_id":"cka109fo300093kzjeyphgd4b","_id":"cka109fod000p3kzj18c44v02"},{"post_id":"cka109fo100073kzj8cb4hdce","category_id":"cka109fo8000e3kzjbxzya6w9","_id":"cka109fog000t3kzj3qmz37el"},{"post_id":"cka109foc000m3kzjfhb1fvpp","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109fog000u3kzj82xc726k"},{"post_id":"cka109fo5000b3kzj6vdfcbb2","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109foh000x3kzj1d5ydbum"},{"post_id":"cka109fod000o3kzj4l5w04sl","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109foi000z3kzj91zccd7u"},{"post_id":"cka109fo7000c3kzj6tldesuu","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109foi00123kzj7m20f8he"},{"post_id":"cka109fo8000d3kzja6bi17us","category_id":"cka109fog000v3kzjce0nc8d5","_id":"cka109foj00133kzjggts5l1z"},{"post_id":"cka109hn9001h3kzj22rq6y20","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109hnk001o3kzjhps0ee3c"},{"post_id":"cka109hnh001m3kzjbzo757ob","category_id":"cka109fo300093kzjeyphgd4b","_id":"cka109hnl001q3kzjas7wal7z"},{"post_id":"cka109ht9001r3kzj3rvsg1mp","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109htb001v3kzjh1nx7yqc"},{"post_id":"cka109ht9001s3kzja2c5hjmm","category_id":"cka109fob000k3kzj02tc9qvd","_id":"cka109htb001x3kzj6pzw8jtr"}],"PostTag":[{"post_id":"cka109fo000053kzjeaur0y09","tag_id":"cka109fo5000a3kzj68g53xcs","_id":"cka109fo9000g3kzjcvn0f99n"},{"post_id":"cka109fo100073kzj8cb4hdce","tag_id":"cka109fo8000f3kzj71ll6gpi","_id":"cka109foc000n3kzjfdzq7jy9"},{"post_id":"cka109fo5000b3kzj6vdfcbb2","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109foi000y3kzjebv65m0d"},{"post_id":"cka109fo5000b3kzj6vdfcbb2","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109foi00103kzjf2rg52to"},{"post_id":"cka109fo7000c3kzj6tldesuu","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109foj00153kzjcdhh620y"},{"post_id":"cka109fo7000c3kzj6tldesuu","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109foj00163kzj42gf5aoa"},{"post_id":"cka109fo8000d3kzja6bi17us","tag_id":"cka109foj00143kzj0y49dh40","_id":"cka109foj00183kzjd67l2gkj"},{"post_id":"cka109fo9000h3kzj8iivb2j3","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109fok001a3kzjhs5l22ak"},{"post_id":"cka109fo9000h3kzj8iivb2j3","tag_id":"cka109fo5000a3kzj68g53xcs","_id":"cka109fok001b3kzj8ced646m"},{"post_id":"cka109foc000m3kzjfhb1fvpp","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109fol001d3kzj2l708ygp"},{"post_id":"cka109foc000m3kzjfhb1fvpp","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109fol001e3kzj4qr8g396"},{"post_id":"cka109fod000o3kzj4l5w04sl","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109fol001f3kzj9n0laheq"},{"post_id":"cka109fod000o3kzj4l5w04sl","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109fol001g3kzja41i6sek"},{"post_id":"cka109hn9001h3kzj22rq6y20","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109hnh001l3kzjaccu7p3n"},{"post_id":"cka109hn9001h3kzj22rq6y20","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109hnj001n3kzj6h4e3999"},{"post_id":"cka109hnh001m3kzjbzo757ob","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109hnl001p3kzj72780bi7"},{"post_id":"cka109ht9001r3kzj3rvsg1mp","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109hta001t3kzj9iuc7hfz"},{"post_id":"cka109ht9001r3kzj3rvsg1mp","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109htb001u3kzj070v19ih"},{"post_id":"cka109ht9001s3kzja2c5hjmm","tag_id":"cka109fob000l3kzj9i5o2rrk","_id":"cka109htb001w3kzjavgjgdou"},{"post_id":"cka109ht9001s3kzja2c5hjmm","tag_id":"cka109foe000r3kzj74gvb2js","_id":"cka109htc001y3kzj9rf72j6d"}],"Tag":[{"name":"ç¼–è¾‘å™¨","_id":"cka109fo5000a3kzj68g53xcs"},{"name":"ç¡¬ä»¶","_id":"cka109fo8000f3kzj71ll6gpi"},{"name":"django","_id":"cka109fob000l3kzj9i5o2rrk"},{"name":"python","_id":"cka109foe000r3kzj74gvb2js"},{"name":"git","_id":"cka109foj00143kzj0y49dh40"}]}}