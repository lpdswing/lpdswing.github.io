import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.9f27c3de.js";const g=JSON.parse('{"title":"git解决push报错","description":"","frontmatter":{"title":"git解决push报错","date":"2017-04-22T18:04:30.000Z","tags":["git"],"categories":["知识库"]},"headers":[],"relativePath":"technology/other/git-解决push报错.md","filePath":"technology/other/git-解决push报错.md","lastUpdated":1684394809000}'),o={name:"technology/other/git-解决push报错.md"},l=p(`<h1 id="git-解决push报错问题" tabindex="-1">git -解决push报错问题 <a class="header-anchor" href="#git-解决push报错问题" aria-label="Permalink to &quot;git -解决push报错问题&quot;">​</a></h1><h3 id="问题出现场景" tabindex="-1">问题出现场景 <a class="header-anchor" href="#问题出现场景" aria-label="Permalink to &quot;问题出现场景&quot;">​</a></h3><p>github新建仓库,想把本地仓库推送到github</p><hr><p>操作步骤</p><ol><li><p>进入本地仓库,假设项目为test</p><p><code>cd test</code></p><p><code>git init</code></p></li><li><p>查看状态</p><p><code>git status</code></p></li><li><p>把更改的文件添加到本地git仓库</p><p><code>git add .</code></p></li><li><p>设置用户名邮箱</p><p><code>git config --global user.name &#39;jimi&#39;</code></p><p><code>git config --global user.email &#39;jimi@163.com</code></p></li><li><p>提交</p><p><code>git commit -m &quot;first commit&quot;</code></p></li><li><p>把本地test项目和githhub的test项目进行关联</p><p><code>git remote add origin xxxxx@xxxx</code></p></li><li><p>向远程仓库提交代码(配置好ssh或者密码)</p><p><code>git push origin master</code></p><p>可能会出现问题:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">origin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">master</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">To</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">github.com:JasonLi-cn/test.git</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;"> [rejected]        </span><span style="color:#B392F0;">master</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">master</span><span style="color:#E1E4E8;"> (fetch </span><span style="color:#9ECBFF;">first</span><span style="color:#E1E4E8;">)  </span></span>
<span class="line"><span style="color:#B392F0;">error:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">failed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">some</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">refs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;git@github.com:JasonLi-cn/test.git&#39;</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">hint:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updates</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">were</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rejected</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">because</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remote</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">contains</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">work</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">that</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">do</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">hint:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">have</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">locally.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">This</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">usually</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">caused</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">another</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repository</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pushing</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">hint:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">same</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ref.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">You</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">may</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">want</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">first</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">integrate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remote</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">changes</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">hint:</span><span style="color:#E1E4E8;"> (e.g., </span><span style="color:#9ECBFF;">&#39;git pull ...&#39;</span><span style="color:#E1E4E8;">) before pushing again.  </span></span>
<span class="line"><span style="color:#B392F0;">hint:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">See</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Note about fast-forwards&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;git push --help&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">details.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">origin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">master</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6F42C1;">To</span><span style="color:#24292E;"> </span><span style="color:#032F62;">github.com:JasonLi-cn/test.git</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">!</span><span style="color:#24292E;"> [rejected]        </span><span style="color:#6F42C1;">master</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">master</span><span style="color:#24292E;"> (fetch </span><span style="color:#032F62;">first</span><span style="color:#24292E;">)  </span></span>
<span class="line"><span style="color:#6F42C1;">error:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">failed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">some</span><span style="color:#24292E;"> </span><span style="color:#032F62;">refs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;git@github.com:JasonLi-cn/test.git&#39;</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6F42C1;">hint:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updates</span><span style="color:#24292E;"> </span><span style="color:#032F62;">were</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rejected</span><span style="color:#24292E;"> </span><span style="color:#032F62;">because</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remote</span><span style="color:#24292E;"> </span><span style="color:#032F62;">contains</span><span style="color:#24292E;"> </span><span style="color:#032F62;">work</span><span style="color:#24292E;"> </span><span style="color:#032F62;">that</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">do</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6F42C1;">hint:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">have</span><span style="color:#24292E;"> </span><span style="color:#032F62;">locally.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">This</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">usually</span><span style="color:#24292E;"> </span><span style="color:#032F62;">caused</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">another</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repository</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pushing</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6F42C1;">hint:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">same</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ref.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">You</span><span style="color:#24292E;"> </span><span style="color:#032F62;">may</span><span style="color:#24292E;"> </span><span style="color:#032F62;">want</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">first</span><span style="color:#24292E;"> </span><span style="color:#032F62;">integrate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remote</span><span style="color:#24292E;"> </span><span style="color:#032F62;">changes</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6F42C1;">hint:</span><span style="color:#24292E;"> (e.g., </span><span style="color:#032F62;">&#39;git pull ...&#39;</span><span style="color:#24292E;">) before pushing again.  </span></span>
<span class="line"><span style="color:#6F42C1;">hint:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">See</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Note about fast-forwards&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;git push --help&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">details.</span></span></code></pre></div><p>说明远程仓库有本地仓库没有的文件,需要先pull</p><p><code>git pull origin master</code></p><p>这时可能会遇到问题:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ git pull origin master  </span></span>
<span class="line"><span style="color:#e1e4e8;">From github.com:JasonLi-cn/test  </span></span>
<span class="line"><span style="color:#e1e4e8;"> * branch            master     -&gt; FETCH_HEAD  </span></span>
<span class="line"><span style="color:#e1e4e8;">fatal: refusing to merge unrelated histories</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ git pull origin master  </span></span>
<span class="line"><span style="color:#24292e;">From github.com:JasonLi-cn/test  </span></span>
<span class="line"><span style="color:#24292e;"> * branch            master     -&gt; FETCH_HEAD  </span></span>
<span class="line"><span style="color:#24292e;">fatal: refusing to merge unrelated histories</span></span></code></pre></div><p>解决办法:</p><p><code>git pull origin master --allow-unrelated-histories</code></p><p>这时就可以push了.</p><p>如果远程仓库有和本地仓库一样的文件还不能直接push,git status发现:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">On branch master</span></span>
<span class="line"><span style="color:#e1e4e8;">You have unmerged paths.</span></span>
<span class="line"><span style="color:#e1e4e8;">  (fix conflicts and run &quot;git commit&quot;)</span></span>
<span class="line"><span style="color:#e1e4e8;">  (use &quot;git merge --abort&quot; to abort the merge)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Unmerged paths:</span></span>
<span class="line"><span style="color:#e1e4e8;">  (use &quot;git add &lt;file&gt;...&quot; to mark resolution)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">	both added:      LICENSE</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">On branch master</span></span>
<span class="line"><span style="color:#24292e;">You have unmerged paths.</span></span>
<span class="line"><span style="color:#24292e;">  (fix conflicts and run &quot;git commit&quot;)</span></span>
<span class="line"><span style="color:#24292e;">  (use &quot;git merge --abort&quot; to abort the merge)</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Unmerged paths:</span></span>
<span class="line"><span style="color:#24292e;">  (use &quot;git add &lt;file&gt;...&quot; to mark resolution)</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">	both added:      LICENSE</span></span></code></pre></div><p>只需要执行如下操作然后重新提交就行了</p><div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LICENSE</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commit</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;merge&quot;</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">origin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">master</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LICENSE</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commit</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;merge&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">origin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">master</span></span></code></pre></div></li></ol><hr><p>最好推荐几篇写的非常不错的git入门文章:</p><p><a href="http://stormzhang.com/github/2016/05/25/learn-github-from-zero1/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「初识 GitHub」</a></p><p><a href="http://stormzhang.com/github/2016/05/26/learn-github-from-zero2/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「加入 GitHub」</a></p><p><a href="http://stormzhang.com/github/2016/05/30/learn-github-from-zero3/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「Git 速成」</a></p><p><a href="http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「向GitHub 提交代码」</a></p><p><a href="http://stormzhang.com/github/2016/06/16/learn-github-from-zero5/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「Git 进阶」</a></p><p><a href="http://stormzhang.com/github/2016/07/09/learn-from-github-from-zero6/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「团队合作利器 BRANCH」</a></p><p><a href="http://stormzhang.com/github/2016/07/28/learn-github-from-zero7/" target="_blank" rel="noreferrer">从0开始学习 GitHub 系列之「如何发现优秀的开源项目？」</a></p>`,15),e=[l];function t(r,c,E,y,i,F){return a(),n("div",null,e)}const u=s(o,[["render",t]]);export{g as __pageData,u as default};
